"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[179],{9720:(ft,Me,V)=>{V.d(Me,{Dh:()=>ge,GT:()=>ye,cc:()=>Pe,hO:()=>$e,on:()=>z,pX:()=>ce,xv:()=>ve});var l=V(5102),q=V(6455),O=V(2133);ft=V.hmd(ft);const le=["ngOnDestroy"],ce=(_e,nt,et,Fe={})=>new Proxy(_e,{get:(ke,Ce)=>et.runOutsideAngular(()=>{var Ge;if(_e[Ce])return!(null===(Ge=Fe?.spy)||void 0===Ge)&&Ge.get&&Fe.spy.get(Ce,_e[Ce]),_e[Ce];if(le.indexOf(Ce)>-1)return()=>{};const oe=nt.toPromise().then(he=>{const we=he&&he[Ce];return"function"==typeof we?we.bind(he):we&&we.then?we.then(J=>et.run(()=>J)):et.run(()=>we)});return new Proxy(()=>{},{get:(he,we)=>oe[we],apply:(he,we,J)=>oe.then(te=>{var me;const ue=te&&te(...J);return!(null===(me=Fe?.spy)||void 0===me)&&me.apply&&Fe.spy.apply(Ce,J,ue),ue})})})}),ye=(_e,nt)=>{nt.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Fe=>{Object.defineProperty(_e.prototype,Fe,Object.getOwnPropertyDescriptor(et.prototype||et,Fe))})})};class pe{constructor(nt){return nt}}const ge=new l.OlP("angularfire2.app.options"),ve=new l.OlP("angularfire2.app.name");function z(_e,nt,et){const ke="object"==typeof et&&et||{};ke.name=ke.name||"string"==typeof et&&et||"[DEFAULT]";const Ge=q.Z.apps.filter(oe=>oe&&oe.name===ke.name)[0]||nt.runOutsideAngular(()=>q.Z.initializeApp(_e,ke));try{JSON.stringify(_e)!==JSON.stringify(Ge.options)&&G("error",`${Ge.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ge)}const G=(_e,...nt)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](...nt)},X={provide:pe,useFactory:z,deps:[ge,l.R0b,[new l.FiY,ve]]};let $e=(()=>{class _e{constructor(et){q.Z.registerVersion("angularfire",O.q4.full,"core"),q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),q.Z.registerVersion("angular",l.q4F.full,et.toString())}static initializeApp(et,Fe){return{ngModule:_e,providers:[{provide:ge,useValue:et},{provide:ve,useValue:Fe}]}}}return _e.\u0275fac=function(et){return new(et||_e)(l.LFG(l.Lbi))},_e.\u0275mod=l.oAB({type:_e}),_e.\u0275inj=l.cJS({providers:[X]}),_e})();function Pe(_e,nt,et,Fe,ke){const[,Ce,Ge]=globalThis.\u0275AngularfireInstanceCache.find(oe=>oe[0]===_e)||[];if(Ce)return function Ie(_e,nt){try{return _e.toString()===nt.toString()}catch{return _e===nt}}(ke,Ge)||(be("error",`${nt} was already initialized on the ${et} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:ke,was:Ge})),Ce;{const oe=Fe();return globalThis.\u0275AngularfireInstanceCache.push([_e,oe,ke]),oe}}const ot=!!ft.hot,be=(_e,...nt)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2133:(ft,Me,V)=>{V.d(Me,{q4:()=>_i,iC:()=>ks,fc:()=>Sl,HU:()=>Ys,vb:()=>Dl,JM:()=>ba});var l=V(5102),q=V(2546),O=V(7791),le=V(9949),ce=V(1319),ye=V(8702),pe=V(6745),ge=V(483);const ve="@firebase/installations",z="0.5.16",X=`w:${z}`,$e="FIS_v2",nt=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(I){return I instanceof ce.ZR&&I.code.includes("request-failed")}function Fe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ke(I){return{token:I.token,requestStatus:2,expiresIn:te(I.expiresIn),creationTime:Date.now()}}function Ce(I,S){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(I,S){const j=(yield S.json()).error;return nt.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function oe({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function he(I,{refreshToken:S}){const k=oe(I);return k.append("Authorization",function me(I){return`${$e} ${I}`}(S)),k}function we(I){return J.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function te(I){return Number(I.replace("s","000"))}function ue(I,S){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:k}){const j=Fe(I),ee=oe(I),de=S.getImmediate({optional:!0});if(de){const kt=yield de.getHeartbeatsHeader();kt&&ee.append("x-firebase-client",kt)}const We={method:"POST",headers:ee,body:JSON.stringify({fid:k,authVersion:$e,appId:I.appId,sdkVersion:X})},Et=yield we(()=>fetch(j,We));if(Et.ok){const kt=yield Et.json();return{fid:kt.fid||k,registrationStatus:2,refreshToken:kt.refreshToken,authToken:ke(kt.authToken)}}throw yield Ce("Create Installation",Et)})).apply(this,arguments)}function He(I){return new Promise(S=>{setTimeout(S,I)})}const un=/^[cdef][\w-]{21}$/;function Ke(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const k=function vn(I){return function pt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return un.test(k)?k:""}catch{return""}}function Mn(I){return`${I.appName}!${I.appId}`}const rn=new Map;function sn(I,S){const k=Mn(I);Vr(k,S),function ts(I,S){const k=function jn(){return!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=I=>{Vr(I.data.key,I.data.fid)}),ti}();k&&k.postMessage({key:I,fid:S}),function ns(){0===rn.size&&ti&&(ti.close(),ti=null)}()}(k,S)}function Vr(I,S){const k=rn.get(I);if(k)for(const j of k)j(S)}let ti=null;const Wn="firebase-installations-store";let Bi=null;function is(){return Bi||(Bi=(0,ge.X3)("firebase-installations-database",1,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Wn)}})),Bi}function tt(I,S){return dr.apply(this,arguments)}function dr(){return(dr=(0,O.Z)(function*(I,S){const k=Mn(I),ee=(yield is()).transaction(Wn,"readwrite"),de=ee.objectStore(Wn),Ne=yield de.get(k);return yield de.put(S,k),yield ee.done,(!Ne||Ne.fid!==S.fid)&&sn(I,S.fid),S})).apply(this,arguments)}function er(I){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(I){const S=Mn(I),j=(yield is()).transaction(Wn,"readwrite");yield j.objectStore(Wn).delete(S),yield j.done})).apply(this,arguments)}function xr(I,S){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(I,S){const k=Mn(I),ee=(yield is()).transaction(Wn,"readwrite"),de=ee.objectStore(Wn),Ne=yield de.get(k),We=S(Ne);return void 0===We?yield de.delete(k):yield de.put(We,k),yield ee.done,We&&(!Ne||Ne.fid!==We.fid)&&sn(I,We.fid),We})).apply(this,arguments)}function Sn(I){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(I){let S;const k=yield xr(I.appConfig,j=>{const ee=En(j),de=gt(I,ee);return S=de.registrationPromise,de.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function En(I){return Mt(I||{fid:Ke(),registrationStatus:0})}function gt(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(nt.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function mt(I,S){return Nt.apply(this,arguments)}(I,k);return{installationEntry:k,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:ri(I)}:{installationEntry:S}}function Nt(){return(Nt=(0,O.Z)(function*(I,S){try{const k=yield ue(I,S);return tt(I.appConfig,k)}catch(k){throw et(k)&&409===k.customData.serverCode?yield er(I.appConfig):yield tt(I.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function ri(I){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*(I){let S=yield Gr(I.appConfig);for(;1===S.registrationStatus;)yield He(100),S=yield Gr(I.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:j}=yield Sn(I);return j||k}return S})).apply(this,arguments)}function Gr(I){return xr(I,S=>{if(!S)throw nt.create("installation-not-found");return Mt(S)})}function Mt(I){return function Wr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ut(I,S){return ci.apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:S},k){const j=Xt(I,k),ee=he(I,k),de=S.getImmediate({optional:!0});if(de){const kt=yield de.getHeartbeatsHeader();kt&&ee.append("x-firebase-client",kt)}const We={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:X,appId:I.appId}})},Et=yield we(()=>fetch(j,We));if(Et.ok)return ke(yield Et.json());throw yield Ce("Generate Auth Token",Et)})).apply(this,arguments)}function Xt(I,{fid:S}){return`${Fe(I)}/${S}/authTokens:generate`}function Er(I){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(I,S=!1){let k;const j=yield xr(I.appConfig,de=>{if(!en(de))throw nt.create("not-registered");const Ne=de.authToken;if(!S&&W(Ne))return de;if(1===Ne.requestStatus)return k=rt(I,S),de;{if(!navigator.onLine)throw nt.create("app-offline");const We=Q(de);return k=Tt(I,We),We}});return k?yield k:j.authToken})).apply(this,arguments)}function rt(I,S){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(I,S){let k=yield it(I.appConfig);for(;1===k.authToken.requestStatus;)yield He(100),k=yield it(I.appConfig);const j=k.authToken;return 0===j.requestStatus?Er(I,S):j})).apply(this,arguments)}function it(I){return xr(I,S=>{if(!en(S))throw nt.create("not-registered");return function $(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Tt(I,S){return It.apply(this,arguments)}function It(){return(It=(0,O.Z)(function*(I,S){try{const k=yield Ut(I,S),j=Object.assign(Object.assign({},S),{authToken:k});return yield tt(I.appConfig,j),k}catch(k){if(!et(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield tt(I.appConfig,j)}else yield er(I.appConfig);throw k}})).apply(this,arguments)}function en(I){return void 0!==I&&2===I.registrationStatus}function W(I){return 2===I.requestStatus&&!function Z(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+36e5}(I)}function Q(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}function H(){return(H=(0,O.Z)(function*(I){const S=I,{installationEntry:k,registrationPromise:j}=yield Sn(S);return j?j.catch(console.error):Er(S).catch(console.error),k.fid})).apply(this,arguments)}function Le(){return(Le=(0,O.Z)(function*(I,S=!1){const k=I;return yield at(k),(yield Er(k,S)).token})).apply(this,arguments)}function at(I){return lt.apply(this,arguments)}function lt(){return(lt=(0,O.Z)(function*(I){const{registrationPromise:S}=yield Sn(I);S&&(yield S)})).apply(this,arguments)}function po(I){return nt.create("missing-app-config-values",{valueName:I})}const Wo="installations",go=I=>{const S=I.getProvider("app").getImmediate(),k=function Rn(I){if(!I||!I.options)throw po("App Configuration");if(!I.name)throw po("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!I.options[k])throw po(k);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},mo=I=>{const S=I.getProvider("app").getImmediate(),k=(0,le._getProvider)(S,Wo).getImmediate();return{getId:()=>function R(I){return H.apply(this,arguments)}(k),getToken:ee=>function ie(I){return Le.apply(this,arguments)}(k,ee)}};(function lu(){(0,le._registerComponent)(new ye.wA(Wo,go,"PUBLIC")),(0,le._registerComponent)(new ye.wA("installations-internal",mo,"PRIVATE"))})(),(0,le.registerVersion)(ve,z),(0,le.registerVersion)(ve,z,"esm2017");const bs="@firebase/remote-config",rr=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class tc{constructor(S,k,j,ee){this.client=S,this.storage=k,this.storageCache=j,this.logger=ee}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-k,ee=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var k=this;return(0,O.Z)(function*(){const[j,ee]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(ee&&k.isCachedDataFresh(S.cacheMaxAgeMillis,j))return ee;S.eTag=ee&&ee.eTag;const de=yield k.client.fetch(S),Ne=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===de.status&&Ne.push(k.storage.setLastSuccessfulFetchResponse(de)),yield Promise.all(Ne),de})()}}function il(I=navigator){return I.languages&&I.languages[0]||I.language}class wo{constructor(S,k,j,ee,de,Ne){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=j,this.projectId=ee,this.apiKey=de,this.appId=Ne}fetch(S){var k=this;return(0,O.Z)(function*(){var j,ee,de;const[Ne,We]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,qt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},_t={sdk_version:k.sdkVersion,app_instance_id:Ne,app_instance_id_token:We,app_id:k.appId,language_code:il()},Zn={method:"POST",headers:qt,body:JSON.stringify(_t)},Tr=fetch(kt,Zn),Ca=new Promise((Da,Sa)=>{S.signal.addEventListener(()=>{const bc=new Error("The operation was aborted.");bc.name="AbortError",Sa(bc)})});let Js;try{yield Promise.race([Tr,Ca]),Js=yield Tr}catch(Da){let Sa="fetch-client-network";throw"AbortError"===(null===(j=Da)||void 0===j?void 0:j.name)&&(Sa="fetch-timeout"),rr.create(Sa,{originalErrorMessage:null===(ee=Da)||void 0===ee?void 0:ee.message})}let Ta=Js.status;const Ia=Js.headers.get("ETag")||void 0;let Xs,Al;if(200===Js.status){let Da;try{Da=yield Js.json()}catch(Sa){throw rr.create("fetch-client-parse",{originalErrorMessage:null===(de=Sa)||void 0===de?void 0:de.message})}Xs=Da.entries,Al=Da.state}if("INSTANCE_STATE_UNSPECIFIED"===Al?Ta=500:"NO_CHANGE"===Al?Ta=304:("NO_TEMPLATE"===Al||"EMPTY_CONFIG"===Al)&&(Xs={}),304!==Ta&&200!==Ta)throw rr.create("fetch-status",{httpStatus:Ta});return{status:Ta,eTag:Ia,config:Xs}})()}}class Cs{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,O.Z)(function*(){const j=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:j}){var ee=this;return(0,O.Z)(function*(){yield function Ci(I,S){return new Promise((k,j)=>{const ee=Math.max(S-Date.now(),0),de=setTimeout(k,ee);I.addEventListener(()=>{clearTimeout(de),j(rr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const de=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),de}catch(de){if(!function im(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(de))throw de;const Ne={throttleEndTimeMillis:Date.now()+(0,ce.$s)(j),backoffCount:j+1};return yield ee.storage.setThrottleMetadata(Ne),ee.attemptFetch(S,Ne)}})()}}class om{constructor(S,k,j,ee,de){this.app=S,this._client=k,this._storageCache=j,this._storage=ee,this._logger=de,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function sl(I,S){var k;const j=I.target.error||void 0;return rr.create(S,{originalErrorMessage:j&&(null===(k=j)||void 0===k?void 0:k.message)})}const Ko="app_namespace_store";class bd{constructor(S,k,j,ee=function lm(){return new Promise((I,S)=>{var k;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ee=>{S(sl(ee,"storage-open"))},j.onsuccess=ee=>{I(ee.target.result)},j.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Ko,{keyPath:"compositeKey"})}}catch(j){S(rr.create("storage-open",{originalErrorMessage:null===(k=j)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=j,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,O.Z)(function*(){const j=yield k.openDbPromise;return new Promise((ee,de)=>{var Ne;const Et=j.transaction([Ko],"readonly").objectStore(Ko),kt=k.createCompositeKey(S);try{const qt=Et.get(kt);qt.onerror=_t=>{de(sl(_t,"storage-get"))},qt.onsuccess=_t=>{const Zn=_t.target.result;ee(Zn?Zn.value:void 0)}}catch(qt){de(rr.create("storage-get",{originalErrorMessage:null===(Ne=qt)||void 0===Ne?void 0:Ne.message}))}})})()}set(S,k){var j=this;return(0,O.Z)(function*(){const ee=yield j.openDbPromise;return new Promise((de,Ne)=>{var We;const kt=ee.transaction([Ko],"readwrite").objectStore(Ko),qt=j.createCompositeKey(S);try{const _t=kt.put({compositeKey:qt,value:k});_t.onerror=Zn=>{Ne(sl(Zn,"storage-set"))},_t.onsuccess=()=>{de()}}catch(_t){Ne(rr.create("storage-set",{originalErrorMessage:null===(We=_t)||void 0===We?void 0:We.message}))}})})()}delete(S){var k=this;return(0,O.Z)(function*(){const j=yield k.openDbPromise;return new Promise((ee,de)=>{var Ne;const Et=j.transaction([Ko],"readwrite").objectStore(Ko),kt=k.createCompositeKey(S);try{const qt=Et.delete(kt);qt.onerror=_t=>{de(sl(_t,"storage-delete"))},qt.onsuccess=()=>{ee()}}catch(qt){de(rr.create("storage-delete",{originalErrorMessage:null===(Ne=qt)||void 0===Ne?void 0:Ne.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Yo{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const k=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),de=yield k;de&&(S.lastFetchStatus=de);const Ne=yield j;Ne&&(S.lastSuccessfulFetchTimestampMillis=Ne);const We=yield ee;We&&(S.activeConfig=We)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Wy(){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function Ed(){(0,le._registerComponent)(new ye.wA("remote-config",function I(S,{instanceIdentifier:k}){const j=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw rr.create("registration-window");if(!(0,ce.hl)())throw rr.create("indexed-db-unavailable");const{projectId:de,apiKey:Ne,appId:We}=j.options;if(!de)throw rr.create("registration-project-id");if(!Ne)throw rr.create("registration-api-key");if(!We)throw rr.create("registration-app-id");const Et=new bd(We,j.name,k=k||"firebase"),kt=new Yo(Et),qt=new pe.Yd(bs);qt.logLevel=pe.in.ERROR;const _t=new wo(ee,le.SDK_VERSION,k,de,Ne,We),Zn=new Cs(_t,Et),Tr=new tc(Zn,Et,kt,qt),Ca=new om(j,Tr,kt,Et,qt);return function Nn(I){const S=(0,ce.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ca),Ca},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(bs,"0.3.15"),(0,le.registerVersion)(bs,"0.3.15","esm2017")}();const Br="/firebase-messaging-sw.js",Jo="/firebase-cloud-messaging-push-scope",qs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",du="google.c.a.c_id",nc="google.c.a.c_l",Id="google.c.a.ts",Xo="google.c.a.e";var Ti=(()=>{return(I=Ti||(Ti={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ti;var I})();function Ts(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fi(I){const k=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(k),ee=new Uint8Array(j.length);for(let de=0;de<j.length;++de)ee[de]=j.charCodeAt(de);return ee}const bo="fcm_token_details_db",ea="fcm_token_object_Store";function um(I){return rc.apply(this,arguments)}function rc(){return rc=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(de=>de.name).includes(bo))return null;let S=null;return(yield(0,ge.X3)(bo,5,{upgrade:(j=(0,O.Z)(function*(ee,de,Ne,We){var Et;if(de<2||!ee.objectStoreNames.contains(ea))return;const kt=We.objectStore(ea),qt=yield kt.index("fcmSenderId").get(I);if(yield kt.clear(),qt)if(2===de){const _t=qt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;S={token:_t.fcmToken,createTime:null!==(Et=_t.createTime)&&void 0!==Et?Et:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:Ts(_t.vapidKey)}}}else if(3===de){const _t=qt;S={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:Ts(_t.auth),p256dh:Ts(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:Ts(_t.vapidKey)}}}else if(4===de){const _t=qt;S={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:Ts(_t.auth),p256dh:Ts(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:Ts(_t.vapidKey)}}}}),function(de,Ne,We,Et){return j.apply(this,arguments)})})).close(),yield(0,ge.Lj)(bo),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),$n(S)?S:null;var j}),rc.apply(this,arguments)}function $n(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Hi="firebase-messaging-store";let Hr=null;function hu(){return Hr||(Hr=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Hi)}})),Hr}function Eo(I){return ss.apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(I){const S=Ii(I),j=yield(yield hu()).transaction(Hi).objectStore(Hi).get(S);if(j)return j;{const ee=yield um(I.appConfig.senderId);if(ee)return yield cn(I,ee),ee}})).apply(this,arguments)}function cn(I,S){return ic.apply(this,arguments)}function ic(){return(ic=(0,O.Z)(function*(I,S){const k=Ii(I),ee=(yield hu()).transaction(Hi,"readwrite");return yield ee.objectStore(Hi).put(S,k),yield ee.done,S})).apply(this,arguments)}function Zs(I){return sc.apply(this,arguments)}function sc(){return(sc=(0,O.Z)(function*(I){const S=Ii(I),j=(yield hu()).transaction(Hi,"readwrite");yield j.objectStore(Hi).delete(S),yield j.done})).apply(this,arguments)}function Ii({appConfig:I}){return I.appId}const zn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Lt(I,S){return al.apply(this,arguments)}function al(){return(al=(0,O.Z)(function*(I,S){var k;const j=yield cl(I),ee=Re(S),de={method:"POST",headers:j,body:JSON.stringify(ee)};let Ne;try{Ne=yield(yield fetch(Co(I.appConfig),de)).json()}catch(We){throw zn.create("token-subscribe-failed",{errorInfo:null===(k=We)||void 0===k?void 0:k.toString()})}if(Ne.error)throw zn.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw zn.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function cm(I,S){return ll.apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(I,S){var k;const j=yield cl(I),ee=Re(S.subscriptionOptions),de={method:"PATCH",headers:j,body:JSON.stringify(ee)};let Ne;try{Ne=yield(yield fetch(`${Co(I.appConfig)}/${S.token}`,de)).json()}catch(We){throw zn.create("token-update-failed",{errorInfo:null===(k=We)||void 0===k?void 0:k.toString()})}if(Ne.error)throw zn.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw zn.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function Ad(I,S){return ul.apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(I,S){var k;const ee={method:"DELETE",headers:yield cl(I)};try{const Ne=yield(yield fetch(`${Co(I.appConfig)}/${S}`,ee)).json();if(Ne.error)throw zn.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(de){throw zn.create("token-unsubscribe-failed",{errorInfo:null===(k=de)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function Co({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function cl(I){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*({appConfig:I,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Re({p256dh:I,auth:S,endpoint:k,vapidKey:j}){const ee={web:{endpoint:k,auth:S,p256dh:I}};return j!==qs&&(ee.web.applicationPubKey=j),ee}const Qt=6048e5;function Ff(I){return na.apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(I){const S=yield Lf(I.swRegistration,I.vapidKey),k={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:Ts(S.getKey("auth")),p256dh:Ts(S.getKey("p256dh"))},j=yield Eo(I.firebaseDependencies);if(j){if(dm(j.subscriptionOptions,k))return Date.now()>=j.createTime+Qt?fu(I,{token:j.token,createTime:Date.now(),subscriptionOptions:k}):j.token;try{yield Ad(I.firebaseDependencies,j.token)}catch(ee){console.warn(ee)}return pu(I.firebaseDependencies,k)}return pu(I.firebaseDependencies,k)})).apply(this,arguments)}function fr(I){return ra.apply(this,arguments)}function ra(){return(ra=(0,O.Z)(function*(I){const S=yield Eo(I.firebaseDependencies);S&&(yield Ad(I.firebaseDependencies,S.token),yield Zs(I.firebaseDependencies));const k=yield I.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function fu(I,S){return ii.apply(this,arguments)}function ii(){return(ii=(0,O.Z)(function*(I,S){try{const k=yield cm(I.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield cn(I.firebaseDependencies,j),k}catch(k){throw yield fr(I),k}})).apply(this,arguments)}function pu(I,S){return ia.apply(this,arguments)}function ia(){return(ia=(0,O.Z)(function*(I,S){const j={token:yield Lt(I,S),createTime:Date.now(),subscriptionOptions:S};return yield cn(I,j),j.token})).apply(this,arguments)}function Lf(I,S){return dl.apply(this,arguments)}function dl(){return(dl=(0,O.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fi(S)})})).apply(this,arguments)}function dm(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}function To(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function pr(I,S){if(!S.notification)return;I.notification={};const k=S.notification.title;k&&(I.notification.title=k);const j=S.notification.body;j&&(I.notification.body=j);const ee=S.notification.image;ee&&(I.notification.image=ee);const de=S.notification.icon;de&&(I.notification.icon=de)}(S,I),function os(I,S){!S.data||(I.data=S.data)}(S,I),function hl(I,S){var k,j,ee,de,Ne;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;I.fcmOptions={};const We=null!==(ee=null===(j=S.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==ee?ee:null===(de=S.notification)||void 0===de?void 0:de.click_action;We&&(I.fcmOptions.link=We);const Et=null===(Ne=S.fcmOptions)||void 0===Ne?void 0:Ne.analytics_label;Et&&(I.fcmOptions.analyticsLabel=Et)}(S,I),S}function fl(I){return"object"==typeof I&&!!I&&du in I}function Is(I,S){const k=[];for(let j=0;j<I.length;j++)k.push(I.charAt(j)),j<S.length&&k.push(S.charAt(j));return k.join("")}function oc(I){return zn.create("missing-app-config-values",{valueName:I})}Is("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Is("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Md{constructor(S,k,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function xd(I){if(!I||!I.options)throw oc("App Configuration Object");if(!I.name)throw oc("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=I;for(const j of S)if(!k[j])throw oc(j);return{appName:I.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:k,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Uf(I){return sa.apply(this,arguments)}function sa(){return(sa=(0,O.Z)(function*(I){var S;try{I.swRegistration=yield navigator.serviceWorker.register(Br,{scope:Jo}),I.swRegistration.update().catch(()=>{})}catch(k){throw zn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function ac(I,S){return pl.apply(this,arguments)}function pl(){return(pl=(0,O.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield Uf(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function lc(I,S){return gl.apply(this,arguments)}function gl(){return(gl=(0,O.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=qs)})).apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(I,S){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield lc(I,S?.vapidKey),yield ac(I,S?.serviceWorkerRegistration),Ff(I)})).apply(this,arguments)}function Vf(I,S,k){return ml.apply(this,arguments)}function ml(){return(ml=(0,O.Z)(function*(I,S,k){const j=Bf(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:k[du],message_name:k[nc],message_time:k[Id],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bf(I){switch(I){case Ti.NOTIFICATION_CLICKED:return"notification_open";case Ti.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gs(){return(Gs=(0,O.Z)(function*(I,S){const k=S.data;if(!k.isFirebaseMessaging)return;I.onMessageHandler&&k.messageType===Ti.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(To(k)):I.onMessageHandler.next(To(k)));const j=k.data;fl(j)&&"1"===j[Xo]&&(yield Vf(I,k.messageType,j))})).apply(this,arguments)}const Ws="@firebase/messaging",Bn=I=>{const S=new Md(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Rd(I,S){return Gs.apply(this,arguments)}(S,k)),S},Ds=I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:j=>function kd(I,S){return oa.apply(this,arguments)}(S,j)}};function Pd(){return uc.apply(this,arguments)}function uc(){return(uc=(0,O.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hn(){(0,le._registerComponent)(new ye.wA("messaging",Bn,"PUBLIC")),(0,le._registerComponent)(new ye.wA("messaging-internal",Ds,"PRIVATE")),(0,le.registerVersion)(Ws,"0.11.0"),(0,le.registerVersion)(Ws,"0.11.0","esm2017")}();const ua="analytics",Fd="firebase_id",fc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ld="https://www.googletagmanager.com/gtag/js",Kn=new pe.Yd("@firebase/analytics");function mu(I){return Promise.all(I.map(S=>S.catch(k=>k)))}function _u(I,S){const k=document.createElement("script");k.src=`${Ld}?l=${I}&id=${S}`,k.async=!0,document.head.appendChild(k)}function jf(I,S,k,j,ee,de){return _l.apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(I,S,k,j,ee,de){const Ne=j[ee];try{if(Ne)yield S[Ne];else{const Et=(yield mu(k)).find(kt=>kt.measurementId===ee);Et&&(yield S[Et.appId])}}catch(We){Kn.error(We)}I("config",ee,de)})).apply(this,arguments)}function Ss(I,S,k,j,ee){return yl.apply(this,arguments)}function yl(){return(yl=(0,O.Z)(function*(I,S,k,j,ee){try{let de=[];if(ee&&ee.send_to){let Ne=ee.send_to;Array.isArray(Ne)||(Ne=[Ne]);const We=yield mu(k);for(const Et of Ne){const kt=We.find(_t=>_t.measurementId===Et),qt=kt&&S[kt.appId];if(!qt){de=[];break}de.push(qt)}}0===de.length&&(de=Object.values(S)),yield Promise.all(de),I("event",j,ee||{})}catch(de){Kn.error(de)}})).apply(this,arguments)}function Ud(I){const S=window.document.getElementsByTagName("script");for(const k of Object.values(S))if(k.src&&k.src.includes(Ld)&&k.src.includes(I))return k;return null}const gr=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wl=new class gc{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function ca(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Zf(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(I){var S;const{appId:k,apiKey:j}=I,ee={method:"GET",headers:ca(j)},de=fc.replace("{app-id}",k),Ne=yield fetch(de,ee);if(200!==Ne.status&&304!==Ne.status){let We="";try{const Et=yield Ne.json();null!==(S=Et.error)&&void 0!==S&&S.message&&(We=Et.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:We})}return Ne.json()})).apply(this,arguments)}function Vd(I){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(I,S=wl,k){const{appId:j,apiKey:ee,measurementId:de}=I.options;if(!j)throw gr.create("no-app-id");if(!ee){if(de)return{measurementId:de,appId:j};throw gr.create("no-api-key")}const Ne=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new bl;return setTimeout((0,O.Z)(function*(){We.abort()}),void 0!==k?k:6e4),Bd({appId:j,apiKey:ee,measurementId:de},Ne,We,S)})).apply(this,arguments)}function Bd(I,S,k){return As.apply(this,arguments)}function As(){return(As=(0,O.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:k},j,ee=wl){var de,Ne;const{appId:We,measurementId:Et}=I;try{yield mc(j,S)}catch(kt){if(Et)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Et} provided in the "measurementId" field in the local Firebase config. [${null===(de=kt)||void 0===de?void 0:de.message}]`),{appId:We,measurementId:Et};throw kt}try{const kt=yield Zf(I);return ee.deleteThrottleMetadata(We),kt}catch(kt){const qt=kt;if(!vu(qt)){if(ee.deleteThrottleMetadata(We),Et)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Et} provided in the "measurementId" field in the local Firebase config. [${qt?.message}]`),{appId:We,measurementId:Et};throw kt}const _t=503===Number(null===(Ne=qt?.customData)||void 0===Ne?void 0:Ne.httpStatus)?(0,ce.$s)(k,ee.intervalMillis,30):(0,ce.$s)(k,ee.intervalMillis),Zn={throttleEndTimeMillis:Date.now()+_t,backoffCount:k+1};return ee.setThrottleMetadata(We,Zn),Kn.debug(`Calling attemptFetch again in ${_t} millis`),Bd(I,Zn,j,ee)}})).apply(this,arguments)}function mc(I,S){return new Promise((k,j)=>{const ee=Math.max(S-Date.now(),0),de=setTimeout(k,ee);I.addEventListener(()=>{clearTimeout(de),j(gr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function vu(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}class bl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Io,bu;function da(){return(da=(0,O.Z)(function*(I,S,k,j,ee){if(ee&&ee.global)I("event",k,j);else{const de=yield S;I("event",k,Object.assign(Object.assign({},j),{send_to:de}))}})).apply(this,arguments)}function pa(I){bu=I}function _c(I){Io=I}function Ks(){return ga.apply(this,arguments)}function ga(){return(ga=(0,O.Z)(function*(){var I;if(!(0,ce.hl)())return Kn.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(S){return Kn.warn(gr.create("indexeddb-unavailable",{errorInfo:null===(I=S)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(I,S,k,j,ee,de,Ne){var We;const Et=Vd(I);Et.then(Tr=>{k[Tr.measurementId]=Tr.appId,I.options.measurementId&&Tr.measurementId!==I.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Tr=>Kn.error(Tr)),S.push(Et);const kt=Ks().then(Tr=>{if(Tr)return j.getId()}),[qt,_t]=yield Promise.all([Et,kt]);Ud(de)||_u(de,qt.measurementId),bu&&(ee("consent","default",bu),pa(void 0)),ee("js",new Date);const Zn=null!==(We=Ne?.config)&&void 0!==We?We:{};return Zn.origin="firebase",Zn.update=!0,null!=_t&&(Zn[Fd]=_t),ee("config",qt.measurementId,Zn),Io&&(ee("set",Io),_c(void 0)),qt.measurementId})).apply(this,arguments)}class Eu{constructor(S){this.app=S}_delete(){return delete Kr[this.app.options.appId],Promise.resolve()}}let Kr={},_a=[];const So={};let va,ls,ya="dataLayer",jd=!1;function zf(I,S,k){!function hm(){const I=[];if((0,ce.ru)()&&I.push("This is a browser extension environment."),(0,ce.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((j,ee)=>`(${ee+1}) ${j}`).join(" "),k=gr.create("invalid-analytics-context",{errorInfo:S});Kn.warn(k.message)}}();const j=I.options.appId;if(!j)throw gr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw gr.create("no-api-key");Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kr[j])throw gr.create("already-exists",{id:j});if(!jd){!function yu(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(ya);const{wrappedGtag:de,gtagCore:Ne}=function vl(I,S,k,j,ee){let de=function(...Ne){window[j].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(de=window[ee]),window[ee]=function pc(I,S,k,j){function de(){return(de=(0,O.Z)(function*(Ne,We,Et){try{"event"===Ne?yield Ss(I,S,k,We,Et):"config"===Ne?yield jf(I,S,k,j,We,Et):"consent"===Ne?I("consent","update",Et):I("set",We)}catch(kt){Kn.error(kt)}})).apply(this,arguments)}return function ee(Ne,We,Et){return de.apply(this,arguments)}}(de,I,S,k),{gtagCore:de,wrappedGtag:window[ee]}}(Kr,_a,So,ya,"gtag");ls=de,va=Ne,jd=!0}return Kr[j]=function Wf(I,S,k,j,ee,de,Ne){return ma.apply(this,arguments)}(I,_a,So,S,va,ya,k),new Eu(I)}function Ky(){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,O.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const ut="@firebase/analytics";!function pn(){(0,le._registerComponent)(new ye.wA(ua,(S,{options:k})=>zf(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,le._registerComponent)(new ye.wA("analytics-internal",function I(S){try{const k=S.getProvider(ua).getImmediate();return{logEvent:(j,ee,de)=>function $i(I,S,k,j){I=(0,ce.m9)(I),function El(I,S,k,j,ee){return da.apply(this,arguments)}(ls,Kr[I.app.options.appId],S,k,j).catch(ee=>Kn.error(ee))}(k,j,ee,de)}}catch(k){throw gr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,le.registerVersion)(ut,"0.8.4"),(0,le.registerVersion)(ut,"0.8.4","esm2017")}();var Cr=V(2411),Un=V(5577);const mi=new class An extends Un.v{}(class qi extends Cr.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,k,j):(S.flush(this),0)}});var $d=V(1696),Ao=V(288),Zi=V(249),Yf=V(675);const _i=new l.GfV("7.4.1"),Tl="__angularfire_symbol__analyticsIsSupportedValue",us="__angularfire_symbol__analyticsIsSupported",vc="__angularfire_symbol__remoteConfigIsSupportedValue",Il="__angularfire_symbol__remoteConfigIsSupported",wa="__angularfire_symbol__messagingIsSupportedValue",Si="__angularfire_symbol__messagingIsSupported";function ba(I,S,k){if(S){if(1===S.length)return S[0];const de=S.filter(Ne=>Ne.app===k);if(1===de.length)return de[0]}return k.container.getProvider(I).getImmediate({optional:!0})}globalThis[us]||(globalThis[us]=Ky().then(I=>globalThis[Tl]=I).catch(()=>globalThis[Tl]=!1)),globalThis[Si]||(globalThis[Si]=Pd().then(I=>globalThis[wa]=I).catch(()=>globalThis[wa]=!1)),globalThis[Il]||(globalThis[Il]=Wy().then(I=>globalThis[vc]=I).catch(()=>globalThis[vc]=!1));const Dl=(I,S)=>{const k=S?[S]:(0,q.C6)(),j=[];return k.forEach(ee=>{ee.container.getProvider(I).instances.forEach(Ne=>{j.includes(Ne)||j.push(Ne)})}),j};function xs(){}class cs{constructor(S,k=mi){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,j){const ee=this.zone;return this.delegate.schedule(function(Ne){ee.runGuarded(()=>{S.apply(this,[Ne])})},k,j)}}class qn{constructor(S){this.zone=S,this.task=null}call(S,k){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xs,{},xs,xs)),k.pipe((0,Ao.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ys=(()=>{class I{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new cs(Zone.current)),this.insideAngular=k.run(()=>new cs(Zone.current,$d.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(k){return new(k||I)(l.LFG(l.R0b))},I.\u0275prov=l.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Gi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Sl(I){return I.pipe((0,Zi.Q)(Gi().outsideAngular))}function ks(I){return Gi(),function Gd(I){return function(k){return(k=k.lift(new qn(I.ngZone))).pipe((0,Yf.R)(I.outsideAngular),(0,Zi.Q)(I.insideAngular))}}(Gi())(I)}},4235:(ft,Me,V)=>{V.d(Me,{$:()=>Co,A:()=>G,B:()=>Pe,G:()=>mo,H:()=>di,J:()=>Cs,L:()=>W,M:()=>cu,N:()=>Td,P:()=>$d,Q:()=>du,R:()=>Yy,T:()=>nc,U:()=>qs,V:()=>Ti,W:()=>Ts,X:()=>um,Y:()=>ol,Z:()=>Lt,_:()=>cm,a:()=>zs,a0:()=>Ff,a1:()=>fr,a2:()=>fu,a3:()=>pu,a4:()=>Lf,a5:()=>dm,a6:()=>pr,a7:()=>os,a8:()=>fl,a9:()=>Is,aA:()=>Z,aB:()=>Et,aC:()=>Sl,aD:()=>Qs,aE:()=>bt,aI:()=>ca,aL:()=>Xo,aa:()=>Uf,ab:()=>ac,ac:()=>lc,af:()=>Vf,ag:()=>Bf,ah:()=>Rd,ak:()=>Hi,al:()=>cc,an:()=>Ld,ao:()=>_l,ap:()=>we,aq:()=>Ve,ar:()=>at,as:()=>et,at:()=>kr,au:()=>Ia,av:()=>Ft,aw:()=>Fe,ax:()=>oe,ay:()=>Tr,az:()=>te,b:()=>gr,c:()=>wa,d:()=>fm,e:()=>qd,f:()=>Gd,g:()=>j,h:()=>I,i:()=>ga,j:()=>Ne,k:()=>np,l:()=>si,m:()=>ko,o:()=>ge,r:()=>Cr,s:()=>dn,u:()=>mi});var l=V(7791),q=V(1319),O=V(9949),le=V(6745),ce=V(9312),ye=V(8702);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ie=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new le.Yd("@firebase/auth");function nt(w,...m){_e.logLevel<=le.in.ERROR&&_e.error(`Auth (${O.SDK_VERSION}): ${w}`,...m)}function et(w,...m){throw Ge(w,...m)}function Fe(w,...m){return Ge(w,...m)}function ke(w,m,y){const C=Object.assign(Object.assign({},Ie()),{[m]:y});return new q.LL("auth","Firebase",C).create(m,{appName:w.name})}function Ce(w,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&et(w,"argument-error"),ke(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(w,...m){if("string"!=typeof w){const y=m[0],C=[...m.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(y,...C)}return ot.create(w,...m)}function oe(w,m,...y){if(!w)throw Ge(m,...y)}function he(w){const m="INTERNAL ASSERTION FAILED: "+w;throw nt(m),new Error(m)}function we(w,m){w||he(m)}const J=new Map;function te(w){we(w instanceof Function,"Expected a class definition");let m=J.get(w);return m?(we(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,J.set(w,m),m)}function Be(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function He(){return"http:"===pt()||"https:"===pt()}function pt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ke{constructor(m,y){this.shortDelay=m,this.longDelay=y,we(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function un(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(He()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vn(w,m){we(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class Mn{static initialize(m,y,C){this.fetchImpl=m,y&&(this.headersImpl=y),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},sn=new Ke(3e4,6e4);function Wt(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function Bt(w,m,y,C){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,l.Z)(function*(w,m,y,C,M={}){return ts(w,M,(0,l.Z)(function*(){let F={},re={};C&&("GET"===m?re=C:F={body:JSON.stringify(C)});const Se=(0,q.xO)(Object.assign({key:w.config.apiKey},re)).slice(1),st=yield w._getAdditionalHeaders();return st["Content-Type"]="application/json",w.languageCode&&(st["X-Firebase-Locale"]=w.languageCode),Mn.fetch()(rs(w,w.config.apiHost,y,Se),Object.assign({method:m,headers:st,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function ts(w,m,y){return ti.apply(this,arguments)}function ti(){return(ti=(0,l.Z)(function*(w,m,y){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},rn),m);try{const M=new ni(w),F=yield Promise.race([y(),M.promise]);M.clearNetworkTimeout();const re=yield F.json();if("needConfirmation"in re)throw Wn(w,"account-exists-with-different-credential",re);if(F.ok&&!("errorMessage"in re))return re;{const Se=F.ok?re.errorMessage:re.error.message,[st,yt]=Se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw Wn(w,"credential-already-in-use",re);if("EMAIL_EXISTS"===st)throw Wn(w,"email-already-in-use",re);if("USER_DISABLED"===st)throw Wn(w,"user-disabled",re);const zt=C[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(yt)throw ke(w,zt,yt);et(w,zt)}}catch(M){if(M instanceof q.ZR)throw M;et(w,"network-request-failed")}})).apply(this,arguments)}function jn(w,m,y,C){return ns.apply(this,arguments)}function ns(){return(ns=(0,l.Z)(function*(w,m,y,C,M={}){const F=yield Bt(w,m,y,C,M);return"mfaPendingCredential"in F&&et(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function rs(w,m,y,C){const M=`${m}${y}?${C}`;return w.config.emulator?vn(w.config,M):`${w.config.apiScheme}://${M}`}class ni{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,C)=>{this.timer=setTimeout(()=>C(Fe(this.auth,"network-request-failed")),sn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(w,m,y){const C={appName:w.name};y.email&&(C.email=y.email),y.phoneNumber&&(C.phoneNumber=y.phoneNumber);const M=Fe(w,m,C);return M.customData._tokenResponse=y,M}function is(){return(is=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function tt(w,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function er(w,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function xr(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function kn(){return(kn=(0,l.Z)(function*(w,m=!1){const y=(0,q.m9)(w),C=yield y.getIdToken(m),M=gt(C);oe(M&&M.exp&&M.auth_time&&M.iat,y.auth,"internal-error");const F="object"==typeof M.firebase?M.firebase:void 0,re=F?.sign_in_provider;return{claims:M,token:C,authTime:xr(En(M.auth_time)),issuedAtTime:xr(En(M.iat)),expirationTime:xr(En(M.exp)),signInProvider:re||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function En(w){return 1e3*Number(w)}function gt(w){var m;const[y,C,M]=w.split(".");if(void 0===y||void 0===C||void 0===M)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,q.tV)(C);return F?JSON.parse(F):(nt("Failed to decode base64 JWT payload"),null)}catch(F){return nt("Caught error parsing JWT payload as JSON",null===(m=F)||void 0===m?void 0:m.toString()),null}}function Nt(w,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,l.Z)(function*(w,m,y=!1){if(y)return m;try{return yield m}catch(C){throw C instanceof q.ZR&&tr(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}function tr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Gr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const M=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const C=this.getInterval(m);this.timerId=setTimeout((0,l.Z)(function*(){yield y.iteration()}),C)}iteration(){var m=this;return(0,l.Z)(function*(){var y;try{yield m.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(y=C)||void 0===y?void 0:y.code)&&m.schedule(!0))}m.schedule()})()}}class Mt{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wr(w){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,l.Z)(function*(w){var m;const y=w.auth,C=yield w.getIdToken(),M=yield Nt(w,er(y,{idToken:C}));oe(M?.users.length,y,"internal-error");const F=M.users[0];w._notifyReloadListener(F);const re=null!==(m=F.providerUserInfo)&&void 0!==m&&m.length?Ln(F.providerUserInfo):[],Se=Er(w.providerData,re),zt=!!w.isAnonymous&&!(w.email&&F.passwordHash||Se?.length),On={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Se,metadata:new Mt(F.createdAt,F.lastLoginAt),isAnonymous:zt};Object.assign(w,On)})).apply(this,arguments)}function Xt(){return(Xt=(0,l.Z)(function*(w){const m=(0,q.m9)(w);yield Wr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Er(w,m){return[...w.filter(C=>!m.some(M=>M.providerId===C.providerId)),...m]}function Ln(w){return w.map(m=>{var{providerId:y}=m,C=(0,ce._T)(m,["providerId"]);return{providerId:y,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function De(){return(De=(0,l.Z)(function*(w,m){const y=yield ts(w,{},(0,l.Z)(function*(){const C=(0,q.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:F}=w.config,re=rs(w,M,"/v1/token",`key=${F}`),Se=yield w._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",Mn.fetch()(re,{method:"POST",headers:Se,body:C})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class it{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){oe(m.idToken,"internal-error"),oe(typeof m.idToken<"u","internal-error"),oe(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function mt(w){const m=gt(w);return oe(m,"internal-error"),oe(typeof m.exp<"u","internal-error"),oe(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var C=this;return(0,l.Z)(function*(){return oe(!C.accessToken||C.refreshToken,m,"user-token-expired"),y||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(m,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var C=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:F,expiresIn:re}=yield function rt(w,m){return De.apply(this,arguments)}(m,y);C.updateTokensAndExpiration(M,F,Number(re))})()}updateTokensAndExpiration(m,y,C){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(m,y){const{refreshToken:C,accessToken:M,expirationTime:F}=y,re=new it;return C&&(oe("string"==typeof C,"internal-error",{appName:m}),re.refreshToken=C),M&&(oe("string"==typeof M,"internal-error",{appName:m}),re.accessToken=M),F&&(oe("number"==typeof F,"internal-error",{appName:m}),re.expirationTime=F),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new it,this.toJSON())}_performRefresh(){return he("not implemented")}}function Tt(w,m){oe("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class It{constructor(m){var{uid:y,auth:C,stsTokenManager:M}=m,F=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=C,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Mt(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,l.Z)(function*(){const C=yield Nt(y,y.stsTokenManager.getToken(y.auth,m));return oe(C,y.auth,"internal-error"),y.accessToken!==C&&(y.accessToken=C,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),C})()}getIdTokenResult(m){return function Sn(w){return kn.apply(this,arguments)}(this,m)}reload(){return function ci(w){return Xt.apply(this,arguments)}(this)}_assign(m){this!==m&&(oe(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new It(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var C=this;return(0,l.Z)(function*(){let M=!1;m.idToken&&m.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(m),M=!0),y&&(yield Wr(C)),yield C.auth._persistUserIfCurrent(C),M&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var m=this;return(0,l.Z)(function*(){const y=yield m.getIdToken();return yield Nt(m,function Bi(w,m){return is.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var C,M,F,re,Se,st,yt,zt;const On=null!==(C=y.displayName)&&void 0!==C?C:void 0,zi=null!==(M=y.email)&&void 0!==M?M:void 0,mr=null!==(F=y.phoneNumber)&&void 0!==F?F:void 0,to=null!==(re=y.photoURL)&&void 0!==re?re:void 0,Qd=null!==(Se=y.tenantId)&&void 0!==Se?Se:void 0,wm=null!==(st=y._redirectEventId)&&void 0!==st?st:void 0,av=null!==(yt=y.createdAt)&&void 0!==yt?yt:void 0,Jd=null!==(zt=y.lastLoginAt)&&void 0!==zt?zt:void 0,{uid:sp,emailVerified:Ec,isAnonymous:Ma,providerData:op,stsTokenManager:Iu}=y;oe(sp&&Iu,m,"internal-error");const lv=it.fromJSON(this.name,Iu);oe("string"==typeof sp,m,"internal-error"),Tt(On,m.name),Tt(zi,m.name),oe("boolean"==typeof Ec,m,"internal-error"),oe("boolean"==typeof Ma,m,"internal-error"),Tt(mr,m.name),Tt(to,m.name),Tt(Qd,m.name),Tt(wm,m.name),Tt(av,m.name),Tt(Jd,m.name);const _r=new It({uid:sp,auth:m,email:zi,emailVerified:Ec,displayName:On,isAnonymous:Ma,photoURL:to,phoneNumber:mr,tenantId:Qd,stsTokenManager:lv,createdAt:av,lastLoginAt:Jd});return op&&Array.isArray(op)&&(_r.providerData=op.map(CE=>Object.assign({},CE))),wm&&(_r._redirectEventId=wm),_r}static _fromIdTokenResponse(m,y,C=!1){return(0,l.Z)(function*(){const M=new it;M.updateFromServerResponse(y);const F=new It({uid:y.localId,auth:m,stsTokenManager:M,isAnonymous:C});return yield Wr(F),F})()}}const W=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(y,C){var M=this;return(0,l.Z)(function*(){M.storage[y]=C})()}_get(y){var C=this;return(0,l.Z)(function*(){const M=C.storage[y];return void 0===M?null:M})()}_remove(y){var C=this;return(0,l.Z)(function*(){delete C.storage[y]})()}_addListener(y,C){}_removeListener(y,C){}}return w.type="NONE",w})();function Z(w,m,y){return`firebase:${w}:${m}:${y}`}class Q{constructor(m,y,C){this.persistence=m,this.auth=y,this.userKey=C;const{config:M,name:F}=this.auth;this.fullUserKey=Z(this.userKey,M.apiKey,F),this.fullPersistenceKey=Z("persistence",M.apiKey,F),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,l.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?It._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,l.Z)(function*(){if(y.persistence===m)return;const C=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,C?y.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,C="authUser"){return(0,l.Z)(function*(){if(!y.length)return new Q(te(W),m,C);const M=(yield Promise.all(y.map(function(){var yt=(0,l.Z)(function*(zt){if(yield zt._isAvailable())return zt});return function(zt){return yt.apply(this,arguments)}}()))).filter(yt=>yt);let F=M[0]||te(W);const re=Z(C,m.config.apiKey,m.name);let Se=null;for(const yt of y)try{const zt=yield yt._get(re);if(zt){const On=It._fromJSON(m,zt);yt!==F&&(Se=On),F=yt;break}}catch{}const st=M.filter(yt=>yt._shouldAllowMigration);return F._shouldAllowMigration&&st.length?(F=st[0],Se&&(yield F._set(re,Se.toJSON())),yield Promise.all(y.map(function(){var yt=(0,l.Z)(function*(zt){if(zt!==F)try{yield zt._remove(re)}catch{}});return function(zt){return yt.apply(this,arguments)}}())),new Q(F,m,C)):new Q(F,m,C)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Le(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(R(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(lt(m))return"Blackberry";if(xe(m))return"Webos";if(H(m))return"Safari";if((m.includes("chrome/")||ie(m))&&!m.includes("edge/"))return"Chrome";if(at(m))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function R(w=(0,q.z$)()){return/firefox\//i.test(w)}function H(w=(0,q.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function ie(w=(0,q.z$)()){return/crios\//i.test(w)}function Le(w=(0,q.z$)()){return/iemobile/i.test(w)}function at(w=(0,q.z$)()){return/android/i.test(w)}function lt(w=(0,q.z$)()){return/blackberry/i.test(w)}function xe(w=(0,q.z$)()){return/webos/i.test(w)}function Ve(w=(0,q.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Ft(w=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function bn(w=(0,q.z$)()){return Ve(w)||at(w)||xe(w)||lt(w)||/windows phone/i.test(w)||Le(w)}function Rn(w,m=[]){let y;switch(w){case"Browser":y=$((0,q.z$)());break;case"Worker":y=`${$((0,q.z$)())}-${w}`;break;default:y=w}const C=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${O.SDK_VERSION}/${C}`}class po{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const C=F=>new Promise((re,Se)=>{try{re(m(F))}catch(st){Se(st)}});C.onAbort=y,this.queue.push(C);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,l.Z)(function*(){var C;if(y.auth.currentUser===m)return;const M=[];try{for(const F of y.queue)yield F(m),F.onAbort&&M.push(F.onAbort)}catch(F){M.reverse();for(const re of M)try{re()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=F)||void 0===C?void 0:C.message})}})()}}class Wo{constructor(m,y,C){this.app=m,this.heartbeatServiceProvider=y,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new go(this),this.idTokenSubscription=new go(this),this.beforeStateQueue=new po(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(m,y){var C=this;return y&&(this._popupRedirectResolver=te(y)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,F;if(!C._deleted&&(C.persistenceManager=yield Q.create(C,m),!C._deleted)){if(null!==(M=C._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(y),C.lastNotifiedUid=(null===(F=C.currentUser)||void 0===F?void 0:F.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,l.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,l.Z)(function*(){var C;const M=yield y.assertedPersistence.getCurrentUser();let F=M,re=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Se=null===(C=y.redirectUser)||void 0===C?void 0:C._redirectEventId,st=F?._redirectEventId,yt=yield y.tryRedirectSignIn(m);(!Se||Se===st)&&yt?.user&&(F=yt.user,re=!0)}if(!F)return y.directlySetCurrentUser(null);if(!F._redirectEventId){if(re)try{yield y.beforeStateQueue.runMiddleware(F)}catch(Se){F=M,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Se))}return F?y.reloadAndSetCurrentUserOrClear(F):y.directlySetCurrentUser(null)}return oe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===F._redirectEventId?y.directlySetCurrentUser(F):y.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var y=this;return(0,l.Z)(function*(){let C=null;try{C=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,l.Z)(function*(){var C;try{yield Wr(m)}catch(M){if("auth/network-request-failed"!==(null===(C=M)||void 0===C?void 0:C.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Gt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,l.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,l.Z)(function*(){const C=m?(0,q.m9)(m):null;return C&&oe(C.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(C&&C._clone(y))})()}_updateCurrentUser(m,y=!1){var C=this;return(0,l.Z)(function*(){if(!C._deleted)return m&&oe(C.tenantId===m.tenantId,C,"tenant-id-mismatch"),y||(yield C.beforeStateQueue.runMiddleware(m)),C.queue((0,l.Z)(function*(){yield C.directlySetCurrentUser(m),C.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,l.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,l.Z)(function*(){yield y.assertedPersistence.setPersistence(te(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new q.LL("auth","Firebase",m())}onAuthStateChanged(m,y,C){return this.registerStateListener(this.authStateSubscription,m,y,C)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,C){return this.registerStateListener(this.idTokenSubscription,m,y,C)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var C=this;return(0,l.Z)(function*(){const M=yield C.getOrInitRedirectPersistenceManager(y);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,l.Z)(function*(){if(!y.redirectPersistenceManager){const C=m&&te(m)||y._popupRedirectResolver;oe(C,y,"argument-error"),y.redirectPersistenceManager=yield Q.create(y,[te(C._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,l.Z)(function*(){var C,M;return y._isInitialized&&(yield y.queue((0,l.Z)(function*(){}))),(null===(C=y._currentUser)||void 0===C?void 0:C._redirectEventId)===m?y._currentUser:(null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,l.Z)(function*(){if(m===y.currentUser)return y.queue((0,l.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,C,M){if(this._deleted)return()=>{};const F="function"==typeof y?y:y.next.bind(y),re=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(re,this,"internal-error"),re.then(()=>F(this.currentUser)),"function"==typeof y?m.addObserver(y,C,M):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,l.Z)(function*(){y.currentUser&&y.currentUser!==m&&y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh(),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Rn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,l.Z)(function*(){var y;const C={"X-Client-Version":m.clientVersion};m.app.options.appId&&(C["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return M&&(C["X-Firebase-Client"]=M),C})()}}function bt(w){return(0,q.m9)(w)}class go{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,q.ne)(y=>this.observer=y)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mo(w,m,y){const C=bt(w);oe(C._canInitEmulator,C,"emulator-config-failed"),oe(/^https?:\/\//.test(m),C,"invalid-emulator-scheme");const M=!!y?.disableWarnings,F=lu(m),{host:re,port:Se}=function bs(w){const m=lu(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!y)return{host:"",port:null};const C=y[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(C);if(M){const F=M[1];return{host:F,port:nr(C.substr(F.length+1))}}{const[F,re]=C.split(":");return{host:F,port:nr(re)}}}(m);C.config.emulator={url:`${F}//${re}${null===Se?"":`:${Se}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:re,port:Se,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function _o(){function w(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function lu(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function nr(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class di{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return he("not implemented")}_getIdTokenResponse(m){return he("not implemented")}_linkToIdToken(m,y){return he("not implemented")}_getReauthenticationResolver(m){return he("not implemented")}}function bi(w,m){return rr.apply(this,arguments)}function rr(){return(rr=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:resetPassword",Wt(w,m))})).apply(this,arguments)}function uu(w,m){return tn.apply(this,arguments)}function tn(){return(tn=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Nf(w,m){return tl.apply(this,arguments)}function tl(){return(tl=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:update",Wt(w,m))})).apply(this,arguments)}function yo(){return(yo=(0,l.Z)(function*(w,m){return jn(w,"POST","/v1/accounts:signInWithPassword",Wt(w,m))})).apply(this,arguments)}function zr(w,m){return vo.apply(this,arguments)}function vo(){return(vo=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:sendOobCode",Wt(w,m))})).apply(this,arguments)}function Es(w,m){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,l.Z)(function*(w,m){return zr(w,m)})).apply(this,arguments)}function Pf(w,m){return hr.apply(this,arguments)}function hr(){return(hr=(0,l.Z)(function*(w,m){return zr(w,m)})).apply(this,arguments)}function Ei(w,m){return zo.apply(this,arguments)}function zo(){return(zo=(0,l.Z)(function*(w,m){return zr(w,m)})).apply(this,arguments)}function Xu(w,m){return rl.apply(this,arguments)}function rl(){return(rl=(0,l.Z)(function*(w,m){return zr(w,m)})).apply(this,arguments)}function ec(){return(ec=(0,l.Z)(function*(w,m){return jn(w,"POST","/v1/accounts:signInWithEmailLink",Wt(w,m))})).apply(this,arguments)}function tc(){return(tc=(0,l.Z)(function*(w,m){return jn(w,"POST","/v1/accounts:signInWithEmailLink",Wt(w,m))})).apply(this,arguments)}class il extends di{constructor(m,y,C,M=null){super("password",C),this._email=m,this._password=y,this._tenantId=M}static _fromEmailAndPassword(m,y){return new il(m,y,"password")}static _fromEmailAndCode(m,y,C=null){return new il(m,y,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,l.Z)(function*(){switch(y.signInMethod){case"password":return function nl(w,m){return yo.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function hi(w,m){return ec.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:et(m,"internal-error")}})()}_linkToIdToken(m,y){var C=this;return(0,l.Z)(function*(){switch(C.signInMethod){case"password":return uu(m,{idToken:y,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function rm(w,m){return tc.apply(this,arguments)}(m,{idToken:y,email:C._email,oobCode:C._password});default:et(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function wo(w,m){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,l.Z)(function*(w,m){return jn(w,"POST","/v1/accounts:signInWithIdp",Wt(w,m))})).apply(this,arguments)}class Cs extends di{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new Cs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):et("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:M}=y,F=(0,ce._T)(y,["providerId","signInMethod"]);if(!C||!M)return null;const re=new Cs(C,M);return re.idToken=F.idToken||void 0,re.accessToken=F.accessToken||void 0,re.secret=F.secret,re.nonce=F.nonce,re.pendingToken=F.pendingToken||null,re}_getIdTokenResponse(m){return wo(m,this.buildRequest())}_linkToIdToken(m,y){const C=this.buildRequest();return C.idToken=y,wo(m,C)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,wo(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,q.xO)(y)}return m}}function sm(w,m){return vd.apply(this,arguments)}function vd(){return(vd=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:sendVerificationCode",Wt(w,m))})).apply(this,arguments)}function sl(){return(sl=(0,l.Z)(function*(w,m){return jn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,m))})).apply(this,arguments)}function wd(){return(wd=(0,l.Z)(function*(w,m){const y=yield jn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,m));if(y.temporaryProof)throw Wn(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const am={USER_NOT_FOUND:"user-not-found"};function bd(){return(bd=(0,l.Z)(function*(w,m){return jn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),am)})).apply(this,arguments)}class Yo extends di{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new Yo({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new Yo({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function om(w,m){return sl.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function Ko(w,m){return wd.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function lm(w,m){return bd.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:C,verificationCode:M}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:C,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:C,phoneNumber:M,temporaryProof:F}=m;return C||y||M||F?new Yo({verificationId:y,verificationCode:C,phoneNumber:M,temporaryProof:F}):null}}class Qo{constructor(m){var y,C,M,F,re,Se;const st=(0,q.zd)((0,q.pd)(m)),yt=null!==(y=st.apiKey)&&void 0!==y?y:null,zt=null!==(C=st.oobCode)&&void 0!==C?C:null,On=function Ed(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=st.mode)&&void 0!==M?M:null);oe(yt&&zt&&On,"argument-error"),this.apiKey=yt,this.operation=On,this.code=zt,this.continueUrl=null!==(F=st.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(re=st.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Se=st.tenantId)&&void 0!==Se?Se:null}static parseLink(m){const y=function Cd(w){const m=(0,q.zd)((0,q.pd)(w)).link,y=m?(0,q.zd)((0,q.pd)(m)).deep_link_id:null,C=(0,q.zd)((0,q.pd)(w)).deep_link_id;return(C?(0,q.zd)((0,q.pd)(C)).link:null)||C||y||m||w}(m);try{return new Qo(y)}catch{return null}}}let cu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,C){return il._fromEmailAndPassword(y,C)}static credentialWithLink(y,C){const M=Qo.parseLink(C);return oe(M,"argument-error"),il._fromEmailAndCode(y,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Br{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Jo extends Br{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class qs extends Jo{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return oe("providerId"in y&&"signInMethod"in y,"argument-error"),Cs._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return oe(m.idToken||m.accessToken,"argument-error"),Cs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return qs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return qs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:C,oauthTokenSecret:M,pendingToken:F,nonce:re,providerId:Se}=m;if(!C&&!M&&!y&&!F||!Se)return null;try{return new qs(Se)._credential({idToken:y,accessToken:C,nonce:re,pendingToken:F})}catch{return null}}}let Td=(()=>{class w extends Jo{constructor(){super("facebook.com")}static credential(y){return Cs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),du=(()=>{class w extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(y,C){return Cs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:C})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:C,oauthAccessToken:M}=y;if(!C&&!M)return null;try{return w.credential(C,M)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),nc=(()=>{class w extends Jo{constructor(){super("github.com")}static credential(y){return Cs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Xo extends di{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return wo(m,this.buildRequest())}_linkToIdToken(m,y){const C=this.buildRequest();return C.idToken=y,wo(m,C)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,wo(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:M,pendingToken:F}=y;return C&&M&&F&&C===M?new Xo(C,F):null}static _create(m,y){return new Xo(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ti extends Br{constructor(m){oe(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Ti.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Ti.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=Xo.fromJSON(m);return oe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:C}=m;if(!y||!C)return null;try{return Xo._create(C,y)}catch{return null}}}let Ts=(()=>{class w extends Jo{constructor(){super("twitter.com")}static credential(y,C){return Cs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:C})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:C,oauthTokenSecret:M}=y;if(!C||!M)return null;try{return w.credential(C,M)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function fi(w,m){return bo.apply(this,arguments)}function bo(){return(bo=(0,l.Z)(function*(w,m){return jn(w,"POST","/v1/accounts:signUp",Wt(w,m))})).apply(this,arguments)}class pi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,C,M=!1){return(0,l.Z)(function*(){const F=yield It._fromIdTokenResponse(m,C,M),re=ea(C);return new pi({user:F,providerId:re,_tokenResponse:C,operationType:y})})()}static _forOperation(m,y,C){return(0,l.Z)(function*(){yield m._updateTokensIfNecessary(C,!0);const M=ea(C);return new pi({user:m,providerId:M,_tokenResponse:C,operationType:y})})()}}function ea(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function um(w){return rc.apply(this,arguments)}function rc(){return(rc=(0,l.Z)(function*(w){var m;const y=bt(w);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new pi({user:y.currentUser,providerId:null,operationType:"signIn"});const C=yield fi(y,{returnSecureToken:!0}),M=yield pi._fromIdTokenResponse(y,"signIn",C,!0);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class $n extends q.ZR{constructor(m,y,C,M){var F;super(y.code,y.message),this.operationType=C,this.user=M,Object.setPrototypeOf(this,$n.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:y.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(m,y,C,M){return new $n(m,y,C,M)}}function Sd(w,m,y,C){return("reauthenticate"===m?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?$n._fromErrorAndOperation(w,F,m,C):F})}function Of(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Hi(w,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,l.Z)(function*(w,m){const y=(0,q.m9)(w);yield ss(!0,y,m);const{providerUserInfo:C}=yield tt(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),M=Of(C||[]);return y.providerData=y.providerData.filter(F=>M.has(F.providerId)),M.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function hu(w,m){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,l.Z)(function*(w,m,y=!1){const C=yield Nt(w,m._linkToIdToken(w.auth,yield w.getIdToken()),y);return pi._forOperation(w,"link",C)})).apply(this,arguments)}function ss(w,m,y){return cn.apply(this,arguments)}function cn(){return(cn=(0,l.Z)(function*(w,m,y){yield Wr(m);const M=!1===w?"provider-already-linked":"no-such-provider";oe(Of(m.providerData).has(y)===w,m.auth,M)})).apply(this,arguments)}function ic(w,m){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,l.Z)(function*(w,m,y=!1){var C;const{auth:M}=w,F="reauthenticate";try{const re=yield Nt(w,Sd(M,F,m,w),y);oe(re.idToken,M,"internal-error");const Se=gt(re.idToken);oe(Se,M,"internal-error");const{sub:st}=Se;return oe(w.uid===st,M,"user-mismatch"),pi._forOperation(w,F,re)}catch(re){throw"auth/user-not-found"===(null===(C=re)||void 0===C?void 0:C.code)&&et(M,"user-mismatch"),re}})).apply(this,arguments)}function sc(w,m){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,l.Z)(function*(w,m,y=!1){const C="signIn",M=yield Sd(w,C,m),F=yield pi._fromIdTokenResponse(w,C,M);return y||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function ol(w,m){return zn.apply(this,arguments)}function zn(){return(zn=(0,l.Z)(function*(w,m){return sc(bt(w),m)})).apply(this,arguments)}function Lt(w,m){return al.apply(this,arguments)}function al(){return(al=(0,l.Z)(function*(w,m){const y=(0,q.m9)(w);return yield ss(!1,y,m.providerId),hu(y,m)})).apply(this,arguments)}function cm(w,m){return ll.apply(this,arguments)}function ll(){return(ll=(0,l.Z)(function*(w,m){return ic((0,q.m9)(w),m)})).apply(this,arguments)}function Ad(w,m){return ul.apply(this,arguments)}function ul(){return(ul=(0,l.Z)(function*(w,m){return jn(w,"POST","/v1/accounts:signInWithCustomToken",Wt(w,m))})).apply(this,arguments)}function Co(w,m){return cl.apply(this,arguments)}function cl(){return(cl=(0,l.Z)(function*(w,m){const y=bt(w),C=yield Ad(y,{token:m,returnSecureToken:!0}),M=yield pi._fromIdTokenResponse(y,"signIn",C);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class ta{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Re._fromServerResponse(m,y):et(m,"internal-error")}}class Re extends ta{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Re(y)}}function Qt(w,m,y){var C;oe((null===(C=y.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),oe(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(oe(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(oe(y.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function Ff(w,m,y){return na.apply(this,arguments)}function na(){return(na=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w),M={requestType:"PASSWORD_RESET",email:m};y&&Qt(C,M,y),yield Pf(C,M)})).apply(this,arguments)}function fr(w,m,y){return ra.apply(this,arguments)}function ra(){return(ra=(0,l.Z)(function*(w,m,y){yield bi((0,q.m9)(w),{oobCode:m,newPassword:y})})).apply(this,arguments)}function fu(w,m){return ii.apply(this,arguments)}function ii(){return(ii=(0,l.Z)(function*(w,m){yield Nf((0,q.m9)(w),{oobCode:m})})).apply(this,arguments)}function pu(w,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,l.Z)(function*(w,m){const y=(0,q.m9)(w),C=yield bi(y,{oobCode:m}),M=C.requestType;switch(oe(M,y,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(C.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(C.mfaInfo,y,"internal-error");default:oe(C.email,y,"internal-error")}let F=null;return C.mfaInfo&&(F=ta._fromServerResponse(bt(y),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:F},operation:M}})).apply(this,arguments)}function Lf(w,m){return dl.apply(this,arguments)}function dl(){return(dl=(0,l.Z)(function*(w,m){const{data:y}=yield pu((0,q.m9)(w),m);return y.email})).apply(this,arguments)}function dm(w,m,y){return To.apply(this,arguments)}function To(){return(To=(0,l.Z)(function*(w,m,y){const C=bt(w),M=yield fi(C,{returnSecureToken:!0,email:m,password:y}),F=yield pi._fromIdTokenResponse(C,"signIn",M);return yield C._updateCurrentUser(F.user),F})).apply(this,arguments)}function pr(w,m,y){return ol((0,q.m9)(w),cu.credential(m,y))}function os(w,m,y){return hl.apply(this,arguments)}function hl(){return(hl=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w),M={requestType:"EMAIL_SIGNIN",email:m};oe(y.handleCodeInApp,C,"argument-error"),y&&Qt(C,M,y),yield Ei(C,M)})).apply(this,arguments)}function fl(w,m){return"EMAIL_SIGNIN"===Qo.parseLink(m)?.operation}function Is(w,m,y){return xd.apply(this,arguments)}function xd(){return(xd=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w),M=cu.credentialWithLink(m,y||Be());return oe(M._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),ol(C,M)})).apply(this,arguments)}function oc(w,m){return Md.apply(this,arguments)}function Md(){return(Md=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:createAuthUri",Wt(w,m))})).apply(this,arguments)}function Uf(w,m){return sa.apply(this,arguments)}function sa(){return(sa=(0,l.Z)(function*(w,m){const C={identifier:m,continueUri:He()?Be():"http://localhost"},{signinMethods:M}=yield oc((0,q.m9)(w),C);return M||[]})).apply(this,arguments)}function ac(w,m){return pl.apply(this,arguments)}function pl(){return(pl=(0,l.Z)(function*(w,m){const y=(0,q.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Qt(y.auth,M,m);const{email:F}=yield Es(y.auth,M);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function lc(w,m,y){return gl.apply(this,arguments)}function gl(){return(gl=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};y&&Qt(C.auth,F,y);const{email:re}=yield Xu(C.auth,F);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function kd(w,m){return oa.apply(this,arguments)}function oa(){return(oa=(0,l.Z)(function*(w,m){return Bt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Vf(w,m){return ml.apply(this,arguments)}function ml(){return(ml=(0,l.Z)(function*(w,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const C=(0,q.m9)(w),F={idToken:yield C.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},re=yield Nt(C,kd(C.auth,F));C.displayName=re.displayName||null,C.photoURL=re.photoUrl||null;const Se=C.providerData.find(({providerId:st})=>"password"===st);Se&&(Se.displayName=C.displayName,Se.photoURL=C.photoURL),yield C._updateTokensIfNecessary(re)})).apply(this,arguments)}function Bf(w,m){return Gs((0,q.m9)(w),m,null)}function Rd(w,m){return Gs((0,q.m9)(w),null,m)}function Gs(w,m,y){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,l.Z)(function*(w,m,y){const{auth:C}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(F.email=m),y&&(F.password=y);const re=yield Nt(w,uu(C,F));yield w._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class Bn{constructor(m,y,C={}){this.isNewUser=m,this.providerId=y,this.profile=C}}class Ds extends Bn{constructor(m,y,C,M){super(m,y,C),this.username=M}}class Hn extends Bn{constructor(m,y){super(m,"facebook.com",y)}}class Pd extends Ds{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class uc extends Bn{constructor(m,y){super(m,"google.com",y)}}class Hf extends Ds{constructor(m,y,C){super(m,"twitter.com",y,C)}}function cc(w){const{user:m,_tokenResponse:y}=w;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Nd(w){var m,y;if(!w)return null;const{providerId:C}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&w?.idToken){const re=null===(y=null===(m=gt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(re)return new Bn(F,"anonymous"!==re&&"custom"!==re?re:null)}if(!C)return null;switch(C){case"facebook.com":return new Hn(F,M);case"github.com":return new Pd(F,M);case"google.com":return new uc(F,M);case"twitter.com":return new Hf(F,M,w.screenName||null);case"custom":case"anonymous":return new Bn(F,null);default:return new Bn(F,C,M)}}(y)}class Di{constructor(m,y,C){this.type=m,this.credential=y,this.auth=C}static _fromIdtoken(m,y){return new Di("enroll",m,y)}static _fromMfaPendingCredential(m){return new Di("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,C;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Di._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(C=m.multiFactorSession)&&void 0!==C&&C.idToken)return Di._fromIdtoken(m.multiFactorSession.idToken)}return null}}class fc{constructor(m,y,C){this.session=m,this.hints=y,this.signInResolver=C}static _fromError(m,y){const C=bt(m),M=y.customData._serverResponse,F=(M.mfaInfo||[]).map(Se=>ta._fromServerResponse(C,Se));oe(M.mfaPendingCredential,C,"internal-error");const re=Di._fromMfaPendingCredential(M.mfaPendingCredential);return new fc(re,F,function(){var Se=(0,l.Z)(function*(st){const yt=yield st._process(C,re);delete M.mfaInfo,delete M.mfaPendingCredential;const zt=Object.assign(Object.assign({},M),{idToken:yt.idToken,refreshToken:yt.refreshToken});switch(y.operationType){case"signIn":const On=yield pi._fromIdTokenResponse(C,y.operationType,zt);return yield C._updateCurrentUser(On.user),On;case"reauthenticate":return oe(y.user,C,"internal-error"),pi._forOperation(y.user,y.operationType,zt);default:et(C,"internal-error")}});return function(st){return Se.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,l.Z)(function*(){return y.signInResolver(m)})()}}function Ld(w,m){var y;const C=(0,q.m9)(w),M=m;return oe(m.customData.operationType,C,"argument-error"),oe(null===(y=M.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,C,"argument-error"),fc._fromError(C,M)}function Kn(w,m){return Bt(w,"POST","/v2/accounts/mfaEnrollment:start",Wt(w,m))}class yu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(C=>ta._fromServerResponse(m.auth,C)))})}static _fromUser(m){return new yu(m)}getSession(){var m=this;return(0,l.Z)(function*(){return Di._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,y){var C=this;return(0,l.Z)(function*(){const M=m,F=yield C.getSession(),re=yield Nt(C.user,M._process(C.user.auth,F,y));return yield C.user._updateTokensIfNecessary(re),C.user.reload()})()}unenroll(m){var y=this;return(0,l.Z)(function*(){var C;const M="string"==typeof m?m:m.uid,F=yield y.user.getIdToken(),re=yield Nt(y.user,function _u(w,m){return Bt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(w,m))}(y.user.auth,{idToken:F,mfaEnrollmentId:M}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Se})=>Se!==M),yield y.user._updateTokensIfNecessary(re);try{yield y.user.reload()}catch(Se){if("auth/user-token-expired"!==(null===(C=Se)||void 0===C?void 0:C.code))throw Se}})()}}const jf=new WeakMap;function _l(w){const m=(0,q.m9)(w);return jf.has(m)||jf.set(m,yu._fromUser(m)),jf.get(m)}const Ss="__sak";class yl{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Ss,"1"),this.storage.removeItem(Ss),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const gr=(()=>{class w extends yl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,C)=>this.onStorageEvent(y,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pc(){const w=(0,q.z$)();return H(w)||Ve(w)}()&&function ws(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=bn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const C of Object.keys(this.listeners)){const M=this.storage.getItem(C),F=this.localCache[C];M!==F&&y(C,F,M)}}onStorageEvent(y,C=!1){if(!y.key)return void this.forAllChangedKeys((Se,st,yt)=>{this.notifyListeners(Se,yt)});const M=y.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Se=this.storage.getItem(M);if(y.newValue!==Se)null!==y.newValue?this.storage.setItem(M,y.newValue):this.storage.removeItem(M);else if(this.localCache[M]===y.newValue&&!C)return}const F=()=>{const Se=this.storage.getItem(M);!C&&this.localCache[M]===Se||this.notifyListeners(M,Se)},re=this.storage.getItem(M);!function Vt(){return(0,q.w1)()&&10===document.documentMode}()||re===y.newValue||y.newValue===y.oldValue?F():setTimeout(F,10)}notifyListeners(y,C){this.localCache[y]=C;const M=this.listeners[y];if(M)for(const F of Array.from(M))F(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,C,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:C,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,C){var M=()=>super._set,F=this;return(0,l.Z)(function*(){yield M().call(F,y,C),F.localCache[y]=JSON.stringify(C)})()}_get(y){var C=()=>super._get,M=this;return(0,l.Z)(function*(){const F=yield C().call(M,y);return M.localCache[y]=JSON.stringify(F),F})()}_remove(y){var C=()=>super._remove,M=this;return(0,l.Z)(function*(){yield C().call(M,y),delete M.localCache[y]})()}}return w.type="LOCAL",w})(),zs=(()=>{class w extends yl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,C){}_removeListener(y,C){}}return w.type="SESSION",w})();let wl=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const C=this.receivers.find(F=>F.isListeningto(y));if(C)return C;const M=new w(y);return this.receivers.push(M),M}isListeningto(y){return this.eventTarget===y}handleEvent(y){var C=this;return(0,l.Z)(function*(){const M=y,{eventId:F,eventType:re,data:Se}=M.data,st=C.handlersMap[re];if(!st?.size)return;M.ports[0].postMessage({status:"ack",eventId:F,eventType:re});const yt=Array.from(st).map(function(){var On=(0,l.Z)(function*(zi){return zi(M.origin,Se)});return function(zi){return On.apply(this,arguments)}}()),zt=yield function gc(w){return Promise.all(w.map(function(){var m=(0,l.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(C){return{fulfilled:!1,reason:C}}});return function(y){return m.apply(this,arguments)}}()))}(yt);M.ports[0].postMessage({status:"done",eventId:F,eventType:re,response:zt})})()}_subscribe(y,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(C)}_unsubscribe(y,C){this.handlersMap[y]&&C&&this.handlersMap[y].delete(C),(!C||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ca(w="",m=10){let y="";for(let C=0;C<m;C++)y+=Math.floor(10*Math.random());return w+y}class Zf{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,C=50){var M=this;return(0,l.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let re,Se;return new Promise((st,yt)=>{const zt=ca("",20);F.port1.start();const On=setTimeout(()=>{yt(new Error("unsupported_event"))},C);Se={messageChannel:F,onMessage(zi){const mr=zi;if(mr.data.eventId===zt)switch(mr.data.status){case"ack":clearTimeout(On),re=setTimeout(()=>{yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),st(mr.data.response);break;default:clearTimeout(On),clearTimeout(re),yt(new Error("invalid_response"))}}},M.handlers.add(Se),F.port1.addEventListener("message",Se.onMessage),M.target.postMessage({eventType:m,eventId:zt,data:y},[F.port2])}).finally(()=>{Se&&M.removeMessageHandler(Se)})})()}}function Yn(){return window}function gi(){return typeof Yn().WorkerGlobalScope<"u"&&"function"==typeof Yn().importScripts}function As(){return(As=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const bl="firebaseLocalStorageDb",El="firebaseLocalStorage",da="fbase_key";class Do{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function ha(w,m){return w.transaction([El],m?"readwrite":"readonly").objectStore(El)}function wu(){const w=indexedDB.open(bl,1);return new Promise((m,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(El,{keyPath:da})}catch(M){y(M)}}),w.addEventListener("success",(0,l.Z)(function*(){const C=w.result;C.objectStoreNames.contains(El)?m(C):(C.close(),yield function Hd(){const w=indexedDB.deleteDatabase(bl);return new Do(w).toPromise()}(),m(yield wu()))}))})}function Cl(w,m,y){return as.apply(this,arguments)}function as(){return(as=(0,l.Z)(function*(w,m,y){const C=ha(w,!0).put({[da]:m,value:y});return new Do(C).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,l.Z)(function*(w,m){const y=ha(w,!1).get(m),C=yield new Do(y).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function bu(w,m){const y=ha(w,!0).delete(m);return new Do(y).toPromise()}const ga=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,l.Z)(function*(){return y.db||(y.db=yield wu()),y.db})()}_withRetries(y){var C=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const F=yield C._openDb();return yield y(F)}catch(F){if(M++>3)throw F;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,l.Z)(function*(){return gi()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,l.Z)(function*(){y.receiver=wl._getInstance(function vu(){return gi()?self:null}()),y.receiver._subscribe("keyChanged",function(){var C=(0,l.Z)(function*(M,F){return{keyProcessed:(yield y._poll()).includes(F.key)}});return function(M,F){return C.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var C=(0,l.Z)(function*(M,F){return["keyChanged"]});return function(M,F){return C.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,l.Z)(function*(){var C,M;if(y.activeServiceWorker=yield function Bd(){return As.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Zf(y.activeServiceWorker);const F=yield y.sender._send("ping",{},800);!F||(null===(C=F[0])||void 0===C?void 0:C.fulfilled)&&(null===(M=F[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var C=this;return(0,l.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function mc(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:y},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const y=yield wu();return yield Cl(y,Ss,"1"),yield bu(y,Ss),!0}catch{}return!1})()}_withPendingWrite(y){var C=this;return(0,l.Z)(function*(){C.pendingWrites++;try{yield y()}finally{C.pendingWrites--}})()}_set(y,C){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(F=>Cl(F,y,C)),M.localCache[y]=C,M.notifyServiceWorker(y)}))})()}_get(y){var C=this;return(0,l.Z)(function*(){const M=yield C._withRetries(F=>function Gf(w,m){return fa.apply(this,arguments)}(F,y));return C.localCache[y]=M,M})()}_remove(y){var C=this;return(0,l.Z)(function*(){return C._withPendingWrite((0,l.Z)(function*(){return yield C._withRetries(M=>bu(M,y)),delete C.localCache[y],C.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,l.Z)(function*(){const C=yield y._withRetries(re=>{const Se=ha(re,!1).getAll();return new Do(Se).toPromise()});if(!C)return[];if(0!==y.pendingWrites)return[];const M=[],F=new Set;for(const{fbase_key:re,value:Se}of C)F.add(re),JSON.stringify(y.localCache[re])!==JSON.stringify(Se)&&(y.notifyListeners(re,Se),M.push(re));for(const re of Object.keys(y.localCache))y.localCache[re]&&!F.has(re)&&(y.notifyListeners(re,null),M.push(re));return M})()}notifyListeners(y,C){this.localCache[y]=C;const M=this.listeners[y];if(M)for(const F of Array.from(M))F(C)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Wf(w,m){return Bt(w,"POST","/v2/accounts/mfaSignIn:start",Wt(w,m))}function Kr(){return(Kr=(0,l.Z)(function*(w){return(yield Bt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function So(w){return new Promise((m,y)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=m,C.onerror=M=>{const F=Fe("internal-error");F.customData=M,y(F)},C.type="text/javascript",C.charset="UTF-8",function _a(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(C)})}function ya(w){return`__${w}${Math.floor(1e6*Math.random())}`}const ls=1e12;class jd{constructor(m){this.auth=m,this.counter=ls,this._widgets=new Map}render(m,y){const C=this.counter;return this._widgets.set(C,new Pn(m,this.auth.name,y||{})),this.counter++,C}reset(m){var y;const C=m||ls;null===(y=this._widgets.get(C))||void 0===y||y.delete(),this._widgets.delete(C)}getResponse(m){var y;return(null===(y=this._widgets.get(m||ls))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,l.Z)(function*(){var C;return null===(C=y._widgets.get(m||ls))||void 0===C||C.execute(),""})()}}class Pn{constructor(m,y,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;oe(M,"argument-error",{appName:y}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function hm(w){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zf=ya("rcb"),mE=new Ke(3e4,6e4);class Ky{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Yn().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return oe(function Kf(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Yn().grecaptcha):new Promise((C,M)=>{const F=Yn().setTimeout(()=>{M(Fe(m,"network-request-failed"))},mE.get());Yn()[zf]=()=>{Yn().clearTimeout(F),delete Yn()[zf];const Se=Yn().grecaptcha;if(!Se)return void M(Fe(m,"internal-error"));const st=Se.render;Se.render=(yt,zt)=>{const On=st(yt,zt);return this.counter++,On},this.hostLanguage=y,C(Se)},So(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:zf,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(F),M(Fe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=Yn().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _E{load(m){return(0,l.Z)(function*(){return new jd(m)})()}clearedOneInstance(){}}const Cu="recaptcha",yE={theme:"light",type:"image"};class Yy{constructor(m,y=Object.assign({},yE),C){this.parameters=y,this.type=Cu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(C),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;oe(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _E:new Ky,this.validateStartingState()}verify(){var m=this;return(0,l.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),C=m.getAssertedRecaptcha();return C.getResponse(y)||new Promise(F=>{const re=Se=>{!Se||(m.tokenChangeListeners.delete(re),F(Se))};m.tokenChangeListeners.add(re),m.isInvisible&&C.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(C=>C(y)),"function"==typeof m)m(y);else if("string"==typeof m){const C=Yn()[m];"function"==typeof C&&C(y)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,l.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const C=document.createElement("div");y.appendChild(C),y=C}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,l.Z)(function*(){oe(He()&&!gi(),m.auth,"internal-error"),yield function Mr(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function Eu(w){return Kr.apply(this,arguments)}(m.auth);oe(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $i{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=Yo._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function dn(w,m,y){return ut.apply(this,arguments)}function ut(){return(ut=(0,l.Z)(function*(w,m,y){const C=bt(w),M=yield Un(C,m,(0,q.m9)(y));return new $i(M,F=>ol(C,F))})).apply(this,arguments)}function si(w,m,y){return pn.apply(this,arguments)}function pn(){return(pn=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w);yield ss(!1,C,"phone");const M=yield Un(C.auth,m,(0,q.m9)(y));return new $i(M,F=>Lt(C,F))})).apply(this,arguments)}function Cr(w,m,y){return qi.apply(this,arguments)}function qi(){return(qi=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w),M=yield Un(C.auth,m,(0,q.m9)(y));return new $i(M,F=>cm(C,F))})).apply(this,arguments)}function Un(w,m,y){return An.apply(this,arguments)}function An(){return(An=(0,l.Z)(function*(w,m,y){var C;const M=yield y.verify();try{let F;if(oe("string"==typeof M,w,"argument-error"),oe(y.type===Cu,w,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const re=F.session;if("phoneNumber"in F)return oe("enroll"===re.type,w,"internal-error"),(yield Kn(w,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{oe("signin"===re.type,w,"internal-error");const Se=(null===(C=F.multiFactorHint)||void 0===C?void 0:C.uid)||F.multiFactorUid;return oe(Se,w,"missing-multi-factor-info"),(yield Wf(w,{mfaPendingCredential:re.credential,mfaEnrollmentId:Se,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield sm(w,{phoneNumber:F.phoneNumber,recaptchaToken:M});return re}}finally{y._reset()}})).apply(this,arguments)}function mi(w,m){return dt.apply(this,arguments)}function dt(){return(dt=(0,l.Z)(function*(w,m){yield hu((0,q.m9)(w),m)})).apply(this,arguments)}let $d=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=bt(y)}verifyPhoneNumber(y,C){return Un(this.auth,y,(0,q.m9)(C))}static credential(y,C){return Yo._fromVerification(y,C)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:C,temporaryProof:M}=y;return C&&M?Yo._fromTokenResponse(C,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Ao(w,m){return m?te(m):(oe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Zi extends di{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return wo(m,this._buildIdpRequest())}_linkToIdToken(m,y){return wo(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return wo(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function Yf(w){return sc(w.auth,new Zi(w),w.bypassAuthState)}function _i(w){const{auth:m,user:y}=w;return oe(y,m,"internal-error"),ic(y,new Zi(w),w.bypassAuthState)}function Tl(w){return us.apply(this,arguments)}function us(){return(us=(0,l.Z)(function*(w){const{auth:m,user:y}=w;return oe(y,m,"internal-error"),hu(y,new Zi(w),w.bypassAuthState)})).apply(this,arguments)}class vc{constructor(m,y,C,M,F=!1){this.auth=m,this.resolver=C,this.user=M,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,l.Z)(function*(C,M){m.pendingPromise={resolve:C,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(C,M){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,l.Z)(function*(){const{urlResponse:C,sessionId:M,postBody:F,tenantId:re,error:Se,type:st}=m;if(Se)return void y.reject(Se);const yt={auth:y.auth,requestUri:C,sessionId:M,tenantId:re||void 0,postBody:F||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(st)(yt))}catch(zt){y.reject(zt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Yf;case"linkViaPopup":case"linkViaRedirect":return Tl;case"reauthViaPopup":case"reauthViaRedirect":return _i;default:et(this.auth,"internal-error")}}resolve(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Il=new Ke(2e3,1e4);function wa(w,m,y){return Si.apply(this,arguments)}function Si(){return(Si=(0,l.Z)(function*(w,m,y){const C=bt(w);Ce(w,m,Br);const M=Ao(C,y);return new ba(C,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function qd(w,m,y){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w);Ce(C.auth,m,Br);const M=Ao(C.auth,y);return new ba(C.auth,"reauthViaPopup",m,M,C).executeNotNull()})).apply(this,arguments)}function fm(w,m,y){return wc.apply(this,arguments)}function wc(){return(wc=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w);Ce(C.auth,m,Br);const M=Ao(C.auth,y);return new ba(C.auth,"linkViaPopup",m,M,C).executeNotNull()})).apply(this,arguments)}let ba=(()=>{class w extends vc{constructor(y,C,M,F,re){super(y,C,F,re),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,l.Z)(function*(){const C=yield y.execute();return oe(C,y.auth,"internal-error"),C})()}onExecution(){var y=this;return(0,l.Z)(function*(){we(1===y.filter.length,"Popup operations only handle one event");const C=ca();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],C),y.authWindow.associatedEvent=C,y.resolver._originValidation(y.auth).catch(M=>{y.reject(M)}),y.resolver._isIframeWebStorageSupported(y.auth,M=>{M||y.reject(Fe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var C,M;this.pollId=null!==(M=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Il.get())};y()}}return w.currentPopupAction=null,w})();const xs=new Map;class cs extends vc{constructor(m,y,C=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,C),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,l.Z)(function*(){let C=xs.get(y.auth._key());if(!C){try{const F=(yield function qn(w,m){return Ys.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;C=()=>Promise.resolve(F)}catch(M){C=()=>Promise.reject(M)}xs.set(y.auth._key(),C)}return y.bypassAuthState||xs.set(y.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,C=this;return(0,l.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(C,m);if("unknown"!==m.type){if(m.eventId){const M=yield C.auth._redirectUserForId(m.eventId);if(M)return C.user=M,y().call(C,m);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Ys(){return(Ys=(0,l.Z)(function*(w,m){const y=ks(m),C=Ms(w);if(!(yield C._isAvailable()))return!1;const M="true"===(yield C._get(y));return yield C._remove(y),M})).apply(this,arguments)}function Gi(w,m){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,l.Z)(function*(w,m){return Ms(w)._set(ks(m),"true")})).apply(this,arguments)}function Qs(){xs.clear()}function Sl(w,m){xs.set(w._key(),m)}function Ms(w){return te(w._redirectPersistence)}function ks(w){return Z("pendingRedirect",w.config.apiKey,w.name)}function Gd(w,m,y){return function ir(w,m,y){return Wd.apply(this,arguments)}(w,m,y)}function Wd(){return(Wd=(0,l.Z)(function*(w,m,y){const C=bt(w);Ce(w,m,Br);const M=Ao(C,y);return yield Gi(M,C),M._openRedirect(C,m,"signInViaRedirect")})).apply(this,arguments)}function I(w,m,y){return function S(w,m,y){return k.apply(this,arguments)}(w,m,y)}function k(){return(k=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w);Ce(C.auth,m,Br);const M=Ao(C.auth,y);yield Gi(M,C.auth);const F=yield qt(C);return M._openRedirect(C.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function j(w,m,y){return function ee(w,m,y){return de.apply(this,arguments)}(w,m,y)}function de(){return(de=(0,l.Z)(function*(w,m,y){const C=(0,q.m9)(w);Ce(C.auth,m,Br);const M=Ao(C.auth,y);yield ss(!1,C,m.providerId),yield Gi(M,C.auth);const F=yield qt(C);return M._openRedirect(C.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function Ne(w,m){return We.apply(this,arguments)}function We(){return(We=(0,l.Z)(function*(w,m){return yield bt(w)._initializationPromise,Et(w,m,!1)})).apply(this,arguments)}function Et(w,m){return kt.apply(this,arguments)}function kt(){return(kt=(0,l.Z)(function*(w,m,y=!1){const C=bt(w),M=Ao(C,m),re=yield new cs(C,M,y).execute();return re&&!y&&(delete re.user._redirectEventId,yield C._persistUserIfCurrent(re.user),yield C._setRedirectUser(null,m)),re})).apply(this,arguments)}function qt(w){return _t.apply(this,arguments)}function _t(){return(_t=(0,l.Z)(function*(w){const m=ca(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Tr{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(m,C)&&(y=!0,this.sendToConsumer(m,C),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Ta(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Js(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var C;if(m.error&&!Js(m)){const M=(null===(C=m.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";y.onError(Fe(this.auth,M))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const C=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&C}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ca(m))}saveEventToCache(m){this.cachedEventUids.add(Ca(m)),this.lastProcessedEventTime=Date.now()}}function Ca(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Js({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Ia(w){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,l.Z)(function*(w,m={}){return Bt(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Al=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Da=/^https?/;function bc(){return(bc=(0,l.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Ia(w);for(const y of m)try{if(vE(y))return}catch{}et(w,"unauthorized-domain")})).apply(this,arguments)}function vE(w){const m=Be(),{protocol:y,hostname:C}=new URL(m);if(w.startsWith("chrome-extension://")){const re=new URL(w);return""===re.hostname&&""===C?"chrome-extension:"===y&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&re.hostname===C}if(!Da.test(y))return!1;if(Al.test(w))return C===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(C)}const Qy=new Ke(3e4,6e4);function pm(){const w=Yn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Aa=null;function gm(w){return Aa=Aa||function Jy(w){return new Promise((m,y)=>{var C,M,F;function re(){pm(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{pm(),y(Fe(w,"network-request-failed"))},timeout:Qy.get()})}if(null!==(M=null===(C=Yn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(F=Yn().gapi)||void 0===F||!F.load){const Se=ya("iframefcb");return Yn()[Se]=()=>{gapi.load?re():y(Fe(w,"network-request-failed"))},So(`https://apis.google.com/js/api.js?onload=${Se}`).catch(st=>y(st))}re()}}).catch(m=>{throw Aa=null,m})}(w),Aa}const Tu=new Ke(5e3,15e3),zd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qf(w){const m=w.config;oe(m.authDomain,w,"auth-domain-config-required");const y=m.emulator?vn(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,C={apiKey:m.apiKey,appName:w.name,v:O.SDK_VERSION},M=Xy.get(w.config.apiHost);M&&(C.eid=M);const F=w._getFrameworks();return F.length&&(C.fw=F.join(",")),`${y}?${(0,q.xO)(C).slice(1)}`}function eo(){return eo=(0,l.Z)(function*(w){const m=yield gm(w),y=Yn().gapi;return oe(y,w,"internal-error"),m.open({where:document.body,url:Qf(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zd,dontclear:!0},C=>new Promise(function(){var M=(0,l.Z)(function*(F,re){yield C.restyle({setHideOnLeave:!1});const Se=Fe(w,"network-request-failed"),st=Yn().setTimeout(()=>{re(Se)},Tu.get());function yt(){Yn().clearTimeout(st),F(C)}C.ping(yt).then(yt,()=>{re(Se)})});return function(F,re){return M.apply(this,arguments)}}()))}),eo.apply(this,arguments)}const Wi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nv{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kr(w,m,y,C,M,F){oe(w.config.authDomain,w,"auth-domain-config-required"),oe(w.config.apiKey,w,"invalid-api-key");const re={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:C,v:O.SDK_VERSION,eventId:M};if(m instanceof Br){m.setDefaultLanguage(w.languageCode),re.providerId=m.providerId||"",(0,q.xb)(m.getCustomParameters())||(re.customParameters=JSON.stringify(m.getCustomParameters()));for(const[st,yt]of Object.entries(F||{}))re[st]=yt}if(m instanceof Jo){const st=m.getScopes().filter(yt=>""!==yt);st.length>0&&(re.scopes=st.join(","))}w.tenantId&&(re.tid=w.tenantId);const Se=re;for(const st of Object.keys(Se))void 0===Se[st]&&delete Se[st];return`${function Mo({config:w}){return w.emulator?vn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,q.xO)(Se).slice(1)}`}const tp="webStorageSupport",np=class bE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zs,this._completeRedirectFn=Et,this._overrideRedirectResult=Sl}_openPopup(m,y,C,M){var F=this;return(0,l.Z)(function*(){var re;we(null===(re=F.eventManagers[m._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Se=kr(m,y,C,Be(),M);return function xa(w,m,y,C=500,M=600){const F=Math.max((window.screen.availHeight-M)/2,0).toString(),re=Math.max((window.screen.availWidth-C)/2,0).toString();let Se="";const st=Object.assign(Object.assign({},Wi),{width:C.toString(),height:M.toString(),top:F,left:re}),yt=(0,q.z$)().toLowerCase();y&&(Se=ie(yt)?"_blank":y),R(yt)&&(m=m||"http://localhost",st.scrollbars="yes");const zt=Object.entries(st).reduce((zi,[mr,to])=>`${zi}${mr}=${to},`,"");if(function wn(w=(0,q.z$)()){var m;return Ve(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(yt)&&"_self"!==Se)return function Xf(w,m){const y=document.createElement("a");y.href=w,y.target=m;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(C)}(m||"",Se),new nv(null);const On=window.open(m||"",Se,zt);oe(On,w,"popup-blocked");try{On.focus()}catch{}return new nv(On)}(m,Se,ca())})()}_openRedirect(m,y,C,M){var F=this;return(0,l.Z)(function*(){return yield F._originValidation(m),function Vd(w){Yn().location.href=w}(kr(m,y,C,Be(),M)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:M,promise:F}=this.eventManagers[y];return M?Promise.resolve(M):(we(F,"If manager is not set, promise should be"),F)}const C=this.initAndGetManager(m);return this.eventManagers[y]={promise:C},C.catch(()=>{delete this.eventManagers[y]}),C}initAndGetManager(m){var y=this;return(0,l.Z)(function*(){const C=yield function _m(w){return eo.apply(this,arguments)}(m),M=new Tr(m);return C.register("authEvent",F=>(oe(F?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:M},y.iframes[m._key()]=C,M})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(tp,{type:tp},M=>{var F;const re=null===(F=M?.[0])||void 0===F?void 0:F[tp];void 0!==re&&y(!!re),et(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Sa(w){return bc.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return bn()||H()||Ve()}};class Kd extends class ym{constructor(m){this.factorId=m}_process(m,y,C){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,C);case"signin":return this._finalizeSignIn(m,y.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Kd(m)}_finalizeEnroll(m,y,C){return function mu(w,m){return Bt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(w,m))}(m,{idToken:y,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function ma(w,m){return Bt(w,"POST","/v2/accounts/mfaSignIn:finalize",Wt(w,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ko=(()=>{class w{constructor(){}static assertion(y){return Kd._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var Ml="@firebase/auth",rp="0.20.11";class rv{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,l.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(C=>{var M;m((null===(M=C)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function ip(w){(0,O._registerComponent)(new ye.wA("auth",(m,{options:y})=>{const C=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:F,authDomain:re}=C.options;return((Se,st)=>{oe(F&&!F.includes(":"),"invalid-api-key",{appName:Se.name}),oe(!re?.includes(":"),"argument-error",{appName:Se.name});const yt={apiKey:F,authDomain:re,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rn(w)},zt=new Wo(Se,st,yt);return function ue(w,m){const y=m?.persistence||[],C=(Array.isArray(y)?y:[y]).map(te);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(C,m?.popupRedirectResolver)}(zt,y),zt})(C,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,C)=>{m.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ye.wA("auth-internal",m=>{const y=bt(m.getProvider("auth").getImmediate());return new rv(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Ml,rp,function iv(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,O.registerVersion)(Ml,rp,"esm2017")}("Browser")},1319:(ft,Me,V)=>{V.d(Me,{$s:()=>it,BH:()=>Gt,DV:()=>Wn,Dv:()=>ri,G6:()=>Ce,GJ:()=>rs,L:()=>ge,LL:()=>rn,Pz:()=>un,Sg:()=>Ke,UG:()=>Ie,UI:()=>is,US:()=>ye,Wj:()=>Mt,Wl:()=>Vr,Yr:()=>ke,ZB:()=>G,ZR:()=>Mn,aH:()=>pt,b$:()=>_e,cI:()=>Bt,dS:()=>Ut,eu:()=>oe,g5:()=>O,gK:()=>tr,gQ:()=>Sn,h$:()=>pe,hl:()=>Ge,hu:()=>q,jU:()=>ot,lb:()=>Wr,m9:()=>en,ne:()=>kn,p$:()=>z,pd:()=>fo,r3:()=>ni,ru:()=>be,tV:()=>ve,uI:()=>Pe,ug:()=>ci,vZ:()=>tt,w1:()=>et,w9:()=>ns,xO:()=>Dn,xb:()=>Bi,z$:()=>$e,zI:()=>he,zd:()=>xr});const q=function(W,Z){if(!W)throw O(Z)},O=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},le=function(W){const Z=[];let Q=0;for(let $=0;$<W.length;$++){let R=W.charCodeAt($);R<128?Z[Q++]=R:R<2048?(Z[Q++]=R>>6|192,Z[Q++]=63&R|128):55296==(64512&R)&&$+1<W.length&&56320==(64512&W.charCodeAt($+1))?(R=65536+((1023&R)<<10)+(1023&W.charCodeAt(++$)),Z[Q++]=R>>18|240,Z[Q++]=R>>12&63|128,Z[Q++]=R>>6&63|128,Z[Q++]=63&R|128):(Z[Q++]=R>>12|224,Z[Q++]=R>>6&63|128,Z[Q++]=63&R|128)}return Z},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,Z){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let R=0;R<W.length;R+=3){const H=W[R],ie=R+1<W.length,Le=ie?W[R+1]:0,at=R+2<W.length,lt=at?W[R+2]:0;let Ft=(15&Le)<<2|lt>>6,wn=63&lt;at||(wn=64,ie||(Ft=64)),$.push(Q[H>>2],Q[(3&H)<<4|Le>>4],Q[Ft],Q[wn])}return $.join("")},encodeString(W,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(W):this.encodeByteArray(le(W),Z)},decodeString(W,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(W):function(W){const Z=[];let Q=0,$=0;for(;Q<W.length;){const R=W[Q++];if(R<128)Z[$++]=String.fromCharCode(R);else if(R>191&&R<224){const H=W[Q++];Z[$++]=String.fromCharCode((31&R)<<6|63&H)}else if(R>239&&R<365){const at=((7&R)<<18|(63&W[Q++])<<12|(63&W[Q++])<<6|63&W[Q++])-65536;Z[$++]=String.fromCharCode(55296+(at>>10)),Z[$++]=String.fromCharCode(56320+(1023&at))}else{const H=W[Q++],ie=W[Q++];Z[$++]=String.fromCharCode((15&R)<<12|(63&H)<<6|63&ie)}}return Z.join("")}(this.decodeStringToByteArray(W,Z))},decodeStringToByteArray(W,Z){this.init_();const Q=Z?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let R=0;R<W.length;){const H=Q[W.charAt(R++)],Le=R<W.length?Q[W.charAt(R)]:0;++R;const lt=R<W.length?Q[W.charAt(R)]:64;++R;const Ve=R<W.length?Q[W.charAt(R)]:64;if(++R,null==H||null==Le||null==lt||null==Ve)throw Error();$.push(H<<2|Le>>4),64!==lt&&($.push(Le<<4&240|lt>>2),64!==Ve&&$.push(lt<<6&192|Ve))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},pe=function(W){const Z=le(W);return ye.encodeByteArray(Z,!0)},ge=function(W){return pe(W).replace(/\./g,"")},ve=function(W){try{return ye.decodeString(W,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function z(W){return G(void 0,W)}function G(W,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return Z}for(const Q in Z)!Z.hasOwnProperty(Q)||!X(Q)||(W[Q]=G(W[Q],Z[Q]));return W}function X(W){return"__proto__"!==W}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ot(){return"object"==typeof self&&self.self===self}function be(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function _e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){const W=$e();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function ke(){return!1}function Ce(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){return"object"==typeof indexedDB}function oe(){return new Promise((W,Z)=>{try{let Q=!0;const $="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open($);R.onsuccess=()=>{R.result.close(),Q||self.indexedDB.deleteDatabase($),W(!0)},R.onupgradeneeded=()=>{Q=!1},R.onerror=()=>{var H;Z((null===(H=R.error)||void 0===H?void 0:H.message)||"")}}catch(Q){Z(Q)}})}function he(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ue=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Z=W&&ve(W[1]);return Z&&JSON.parse(Z)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},pt=()=>{var W;return null===(W=ue())||void 0===W?void 0:W.config},un=W=>{var Z;return null===(Z=ue())||void 0===Z?void 0:Z[`_${W}`]};class Gt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,Q)=>{this.resolve=Z,this.reject=Q})}wrapCallback(Z){return(Q,$)=>{Q?this.reject(Q):this.resolve($),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(Q):Z(Q,$))}}}function Ke(W,Z){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=Z||"demo-project",R=W.iat||0,H=W.sub||W.user_id;if(!H)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ie=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:R,exp:R+3600,auth_time:R,sub:H,user_id:H,firebase:{sign_in_provider:"custom",identities:{}}},W);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(ie)),""].join(".")}class Mn extends Error{constructor(Z,Q,$){super(Q),this.code=Z,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,Mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}}class rn{constructor(Z,Q,$){this.service=Z,this.serviceName=Q,this.errors=$}create(Z,...Q){const $=Q[0]||{},R=`${this.service}/${Z}`,H=this.errors[Z],ie=H?function sn(W,Z){return W.replace(Wt,(Q,$)=>{const R=Z[$];return null!=R?String(R):`<${$}?>`})}(H,$):"Error";return new Mn(R,`${this.serviceName}: ${ie} (${R}).`,$)}}const Wt=/\{\$([^}]+)}/g;function Bt(W){return JSON.parse(W)}function Vr(W){return JSON.stringify(W)}const ts=function(W){let Z={},Q={},$={},R="";try{const H=W.split(".");Z=Bt(ve(H[0])||""),Q=Bt(ve(H[1])||""),R=H[2],$=Q.d||{},delete Q.d}catch{}return{header:Z,claims:Q,data:$,signature:R}},ns=function(W){const Q=ts(W).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},rs=function(W){const Z=ts(W).claims;return"object"==typeof Z&&!0===Z.admin};function ni(W,Z){return Object.prototype.hasOwnProperty.call(W,Z)}function Wn(W,Z){if(Object.prototype.hasOwnProperty.call(W,Z))return W[Z]}function Bi(W){for(const Z in W)if(Object.prototype.hasOwnProperty.call(W,Z))return!1;return!0}function is(W,Z,Q){const $={};for(const R in W)Object.prototype.hasOwnProperty.call(W,R)&&($[R]=Z.call(Q,W[R],R,W));return $}function tt(W,Z){if(W===Z)return!0;const Q=Object.keys(W),$=Object.keys(Z);for(const R of Q){if(!$.includes(R))return!1;const H=W[R],ie=Z[R];if(dr(H)&&dr(ie)){if(!tt(H,ie))return!1}else if(H!==ie)return!1}for(const R of $)if(!Q.includes(R))return!1;return!0}function dr(W){return null!==W&&"object"==typeof W}function Dn(W){const Z=[];for(const[Q,$]of Object.entries(W))Array.isArray($)?$.forEach(R=>{Z.push(encodeURIComponent(Q)+"="+encodeURIComponent(R))}):Z.push(encodeURIComponent(Q)+"="+encodeURIComponent($));return Z.length?"&"+Z.join("&"):""}function xr(W){const Z={};return W.replace(/^\?/,"").split("&").forEach($=>{if($){const[R,H]=$.split("=");Z[decodeURIComponent(R)]=decodeURIComponent(H)}}),Z}function fo(W){const Z=W.indexOf("?");if(!Z)return"";const Q=W.indexOf("#",Z);return W.substring(Z,Q>0?Q:void 0)}class Sn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,Q){Q||(Q=0);const $=this.W_;if("string"==typeof Z)for(let Ve=0;Ve<16;Ve++)$[Ve]=Z.charCodeAt(Q)<<24|Z.charCodeAt(Q+1)<<16|Z.charCodeAt(Q+2)<<8|Z.charCodeAt(Q+3),Q+=4;else for(let Ve=0;Ve<16;Ve++)$[Ve]=Z[Q]<<24|Z[Q+1]<<16|Z[Q+2]<<8|Z[Q+3],Q+=4;for(let Ve=16;Ve<80;Ve++){const Ft=$[Ve-3]^$[Ve-8]^$[Ve-14]^$[Ve-16];$[Ve]=4294967295&(Ft<<1|Ft>>>31)}let lt,xe,R=this.chain_[0],H=this.chain_[1],ie=this.chain_[2],Le=this.chain_[3],at=this.chain_[4];for(let Ve=0;Ve<80;Ve++){Ve<40?Ve<20?(lt=Le^H&(ie^Le),xe=1518500249):(lt=H^ie^Le,xe=1859775393):Ve<60?(lt=H&ie|Le&(H|ie),xe=2400959708):(lt=H^ie^Le,xe=3395469782);const Ft=(R<<5|R>>>27)+lt+at+xe+$[Ve]&4294967295;at=Le,Le=ie,ie=4294967295&(H<<30|H>>>2),H=R,R=Ft}this.chain_[0]=this.chain_[0]+R&4294967295,this.chain_[1]=this.chain_[1]+H&4294967295,this.chain_[2]=this.chain_[2]+ie&4294967295,this.chain_[3]=this.chain_[3]+Le&4294967295,this.chain_[4]=this.chain_[4]+at&4294967295}update(Z,Q){if(null==Z)return;void 0===Q&&(Q=Z.length);const $=Q-this.blockSize;let R=0;const H=this.buf_;let ie=this.inbuf_;for(;R<Q;){if(0===ie)for(;R<=$;)this.compress_(Z,R),R+=this.blockSize;if("string"==typeof Z){for(;R<Q;)if(H[ie]=Z.charCodeAt(R),++ie,++R,ie===this.blockSize){this.compress_(H),ie=0;break}}else for(;R<Q;)if(H[ie]=Z[R],++ie,++R,ie===this.blockSize){this.compress_(H),ie=0;break}}this.inbuf_=ie,this.total_+=Q}digest(){const Z=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let R=this.blockSize-1;R>=56;R--)this.buf_[R]=255&Q,Q/=256;this.compress_(this.buf_);let $=0;for(let R=0;R<5;R++)for(let H=24;H>=0;H-=8)Z[$]=this.chain_[R]>>H&255,++$;return Z}}function kn(W,Z){const Q=new En(W,Z);return Q.subscribe.bind(Q)}class En{constructor(Z,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{Z(this)}).catch($=>{this.error($)})}next(Z){this.forEachObserver(Q=>{Q.next(Z)})}error(Z){this.forEachObserver(Q=>{Q.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,Q,$){let R;if(void 0===Z&&void 0===Q&&void 0===$)throw new Error("Missing Observer.");R=function mt(W,Z){if("object"!=typeof W||null===W)return!1;for(const Q of Z)if(Q in W&&"function"==typeof W[Q])return!0;return!1}(Z,["next","error","complete"])?Z:{next:Z,error:Q,complete:$},void 0===R.next&&(R.next=Nt),void 0===R.error&&(R.error=Nt),void 0===R.complete&&(R.complete=Nt);const H=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),H}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,Z)}sendOne(Z,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{Q(this.observers[Z])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nt(){}const ri=function(W,Z,Q,$){let R;if($<Z?R="at least "+Z:$>Q&&(R=0===Q?"none":"no more than "+Q),R)throw new Error(W+" failed: Was called with "+$+(1===$?" argument.":" arguments.")+" Expects "+R+".")};function tr(W,Z){return`${W} failed: ${Z} argument `}function Mt(W,Z,Q,$){if((!$||Q)&&"function"!=typeof Q)throw new Error(tr(W,Z)+"must be a valid function.")}function Wr(W,Z,Q,$){if((!$||Q)&&("object"!=typeof Q||null===Q))throw new Error(tr(W,Z)+"must be a valid context object.")}const Ut=function(W){const Z=[];let Q=0;for(let $=0;$<W.length;$++){let R=W.charCodeAt($);if(R>=55296&&R<=56319){const H=R-55296;$++,q($<W.length,"Surrogate pair missing trail surrogate."),R=65536+(H<<10)+(W.charCodeAt($)-56320)}R<128?Z[Q++]=R:R<2048?(Z[Q++]=R>>6|192,Z[Q++]=63&R|128):R<65536?(Z[Q++]=R>>12|224,Z[Q++]=R>>6&63|128,Z[Q++]=63&R|128):(Z[Q++]=R>>18|240,Z[Q++]=R>>12&63|128,Z[Q++]=R>>6&63|128,Z[Q++]=63&R|128)}return Z},ci=function(W){let Z=0;for(let Q=0;Q<W.length;Q++){const $=W.charCodeAt(Q);$<128?Z++:$<2048?Z+=2:$>=55296&&$<=56319?(Z+=4,Q++):Z+=3}return Z};function it(W,Z=1e3,Q=2){const $=Z*Math.pow(Q,W),R=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+R)}function en(W){return W&&W._delegate?W._delegate:W}},746:(ft,Me,V)=>{var l=V(5102);let q=null;function O(){return q}const pe=new l.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ve(){return(0,l.LFG)(G)}()},providedIn:"platform"}),n})();const z=new l.OlP("Location Initialized");let G=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function $e(){return new G((0,l.LFG)(pe))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ot(n){return n&&"?"!==n[0]?"?"+n:n}let be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(nt)},providedIn:"root"}),n})();const _e=new l.OlP("appBaseHref");let nt=(()=>{class n extends be{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ot(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const c=this.prepareExternalUrl(i+ot(s));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){const c=this.prepareExternalUrl(i+ot(s));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ge),l.LFG(_e,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),et=(()=>{class n extends be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let c=this.prepareExternalUrl(i+ot(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){let c=this.prepareExternalUrl(i+ot(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ge),l.LFG(_e,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ot(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ot,n.joinWithSlash=Pe,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(l.LFG(be))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ke(){return new Fe((0,l.LFG)(be))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}var J=(()=>((J=J||{})[J.Format=0]="Format",J[J.Standalone=1]="Standalone",J))(),te=(()=>((te=te||{})[te.Narrow=0]="Narrow",te[te.Abbreviated=1]="Abbreviated",te[te.Wide=2]="Wide",te[te.Short=3]="Short",te))(),me=(()=>((me=me||{})[me.Short=0]="Short",me[me.Medium=1]="Medium",me[me.Long=2]="Long",me[me.Full=3]="Full",me))(),ue=(()=>((ue=ue||{})[ue.Decimal=0]="Decimal",ue[ue.Group=1]="Group",ue[ue.List=2]="List",ue[ue.PercentSign=3]="PercentSign",ue[ue.PlusSign=4]="PlusSign",ue[ue.MinusSign=5]="MinusSign",ue[ue.Exponential=6]="Exponential",ue[ue.SuperscriptingExponent=7]="SuperscriptingExponent",ue[ue.PerMille=8]="PerMille",ue[ue.Infinity=9]="Infinity",ue[ue.NaN=10]="NaN",ue[ue.TimeSeparator=11]="TimeSeparator",ue[ue.CurrencyDecimal=12]="CurrencyDecimal",ue[ue.CurrencyGroup=13]="CurrencyGroup",ue))();function rn(n,e){return tt((0,l.cg1)(n)[l.wAp.DateFormat],e)}function sn(n,e){return tt((0,l.cg1)(n)[l.wAp.TimeFormat],e)}function Wt(n,e){return tt((0,l.cg1)(n)[l.wAp.DateTimeFormat],e)}function Bt(n,e){const t=(0,l.cg1)(n),r=t[l.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ue.CurrencyDecimal)return t[l.wAp.NumberSymbols][ue.Decimal];if(e===ue.CurrencyGroup)return t[l.wAp.NumberSymbols][ue.Group]}return r}function ni(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function tt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function dr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const fo=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Sn={},kn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var En=(()=>((En=En||{})[En.Short=0]="Short",En[En.ShortGMT=1]="ShortGMT",En[En.Long=2]="Long",En[En.Extended=3]="Extended",En))(),gt=(()=>((gt=gt||{})[gt.FullYear=0]="FullYear",gt[gt.Month=1]="Month",gt[gt.Date=2]="Date",gt[gt.Hours=3]="Hours",gt[gt.Minutes=4]="Minutes",gt[gt.Seconds=5]="Seconds",gt[gt.FractionalSeconds=6]="FractionalSeconds",gt[gt.Day=7]="Day",gt))(),mt=(()=>((mt=mt||{})[mt.DayPeriods=0]="DayPeriods",mt[mt.Days=1]="Days",mt[mt.Months=2]="Months",mt[mt.Eras=3]="Eras",mt))();function Nt(n,e,t,r){let i=function H(n){if(Le(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,c=1]=n.split("-").map(h=>+h);return ri(i,s-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(fo))return function ie(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,h=Number(n[5]||0)-r,p=Number(n[6]||0),_=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,c,h,p,_),e}(r)}const e=new Date(n);if(!Le(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=tr(t,e)||e;let h,c=[];for(;e;){if(h=kn.exec(e),!h){c.push(e);break}{c=c.concat(h.slice(1));const E=c.pop();if(!E)break;e=E}}let p=i.getTimezoneOffset();r&&(p=Q(r,p),i=function R(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function $(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,i)-i))}(i,r,!0));let _="";return c.forEach(E=>{const D=function Z(n){if(W[n])return W[n];let e;switch(n){case"G":case"GG":case"GGG":e=Xt(mt.Eras,te.Abbreviated);break;case"GGGG":e=Xt(mt.Eras,te.Wide);break;case"GGGGG":e=Xt(mt.Eras,te.Narrow);break;case"y":e=Ut(gt.FullYear,1,0,!1,!0);break;case"yy":e=Ut(gt.FullYear,2,0,!0,!0);break;case"yyy":e=Ut(gt.FullYear,3,0,!1,!0);break;case"yyyy":e=Ut(gt.FullYear,4,0,!1,!0);break;case"Y":e=en(1);break;case"YY":e=en(2,!0);break;case"YYY":e=en(3);break;case"YYYY":e=en(4);break;case"M":case"L":e=Ut(gt.Month,1,1);break;case"MM":case"LL":e=Ut(gt.Month,2,1);break;case"MMM":e=Xt(mt.Months,te.Abbreviated);break;case"MMMM":e=Xt(mt.Months,te.Wide);break;case"MMMMM":e=Xt(mt.Months,te.Narrow);break;case"LLL":e=Xt(mt.Months,te.Abbreviated,J.Standalone);break;case"LLLL":e=Xt(mt.Months,te.Wide,J.Standalone);break;case"LLLLL":e=Xt(mt.Months,te.Narrow,J.Standalone);break;case"w":e=It(1);break;case"ww":e=It(2);break;case"W":e=It(1,!0);break;case"d":e=Ut(gt.Date,1);break;case"dd":e=Ut(gt.Date,2);break;case"c":case"cc":e=Ut(gt.Day,1);break;case"ccc":e=Xt(mt.Days,te.Abbreviated,J.Standalone);break;case"cccc":e=Xt(mt.Days,te.Wide,J.Standalone);break;case"ccccc":e=Xt(mt.Days,te.Narrow,J.Standalone);break;case"cccccc":e=Xt(mt.Days,te.Short,J.Standalone);break;case"E":case"EE":case"EEE":e=Xt(mt.Days,te.Abbreviated);break;case"EEEE":e=Xt(mt.Days,te.Wide);break;case"EEEEE":e=Xt(mt.Days,te.Narrow);break;case"EEEEEE":e=Xt(mt.Days,te.Short);break;case"a":case"aa":case"aaa":e=Xt(mt.DayPeriods,te.Abbreviated);break;case"aaaa":e=Xt(mt.DayPeriods,te.Wide);break;case"aaaaa":e=Xt(mt.DayPeriods,te.Narrow);break;case"b":case"bb":case"bbb":e=Xt(mt.DayPeriods,te.Abbreviated,J.Standalone,!0);break;case"bbbb":e=Xt(mt.DayPeriods,te.Wide,J.Standalone,!0);break;case"bbbbb":e=Xt(mt.DayPeriods,te.Narrow,J.Standalone,!0);break;case"B":case"BB":case"BBB":e=Xt(mt.DayPeriods,te.Abbreviated,J.Format,!0);break;case"BBBB":e=Xt(mt.DayPeriods,te.Wide,J.Format,!0);break;case"BBBBB":e=Xt(mt.DayPeriods,te.Narrow,J.Format,!0);break;case"h":e=Ut(gt.Hours,1,-12);break;case"hh":e=Ut(gt.Hours,2,-12);break;case"H":e=Ut(gt.Hours,1);break;case"HH":e=Ut(gt.Hours,2);break;case"m":e=Ut(gt.Minutes,1);break;case"mm":e=Ut(gt.Minutes,2);break;case"s":e=Ut(gt.Seconds,1);break;case"ss":e=Ut(gt.Seconds,2);break;case"S":e=Ut(gt.FractionalSeconds,1);break;case"SS":e=Ut(gt.FractionalSeconds,2);break;case"SSS":e=Ut(gt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ln(En.Short);break;case"ZZZZZ":e=Ln(En.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ln(En.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ln(En.Long);break;default:return null}return W[n]=e,e}(E);_+=D?D(i,t,p):"''"===E?"'":E.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),_}function ri(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function tr(n,e){const t=function He(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(Sn[t]=Sn[t]||{},Sn[t][e])return Sn[t][e];let r="";switch(e){case"shortDate":r=rn(n,me.Short);break;case"mediumDate":r=rn(n,me.Medium);break;case"longDate":r=rn(n,me.Long);break;case"fullDate":r=rn(n,me.Full);break;case"shortTime":r=sn(n,me.Short);break;case"mediumTime":r=sn(n,me.Medium);break;case"longTime":r=sn(n,me.Long);break;case"fullTime":r=sn(n,me.Full);break;case"short":const i=tr(n,"shortTime"),s=tr(n,"shortDate");r=Gr(Wt(n,me.Short),[i,s]);break;case"medium":const c=tr(n,"mediumTime"),h=tr(n,"mediumDate");r=Gr(Wt(n,me.Medium),[c,h]);break;case"long":const p=tr(n,"longTime"),_=tr(n,"longDate");r=Gr(Wt(n,me.Long),[p,_]);break;case"full":const E=tr(n,"fullTime"),D=tr(n,"fullDate");r=Gr(Wt(n,me.Full),[E,D])}return r&&(Sn[t][e]=r),r}function Gr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Mt(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.slice(c.length-e)),s+c}function Ut(n,e,t=0,r=!1,i=!1){return function(s,c){let h=function ci(n,e){switch(n){case gt.FullYear:return e.getFullYear();case gt.Month:return e.getMonth();case gt.Date:return e.getDate();case gt.Hours:return e.getHours();case gt.Minutes:return e.getMinutes();case gt.Seconds:return e.getSeconds();case gt.FractionalSeconds:return e.getMilliseconds();case gt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||h>-t)&&(h+=t),n===gt.Hours)0===h&&-12===t&&(h=12);else if(n===gt.FractionalSeconds)return function Wr(n,e){return Mt(n,3).substring(0,e)}(h,e);const p=Bt(c,ue.MinusSign);return Mt(h,e,p,r,i)}}function Xt(n,e,t=J.Format,r=!1){return function(i,s){return function Er(n,e,t,r,i,s){switch(t){case mt.Months:return function Gt(n,e,t){const r=(0,l.cg1)(n),s=tt([r[l.wAp.MonthsFormat],r[l.wAp.MonthsStandalone]],e);return tt(s,t)}(e,i,r)[n.getMonth()];case mt.Days:return function un(n,e,t){const r=(0,l.cg1)(n),s=tt([r[l.wAp.DaysFormat],r[l.wAp.DaysStandalone]],e);return tt(s,t)}(e,i,r)[n.getDay()];case mt.DayPeriods:const c=n.getHours(),h=n.getMinutes();if(s){const _=function Wn(n){const e=(0,l.cg1)(n);return ni(e),(e[l.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?dr(r):[dr(r[0]),dr(r[1])])}(e),E=function Bi(n,e,t){const r=(0,l.cg1)(n);ni(r);const s=tt([r[l.wAp.ExtraData][0],r[l.wAp.ExtraData][1]],e)||[];return tt(s,t)||[]}(e,i,r),D=_.findIndex(x=>{if(Array.isArray(x)){const[P,U]=x,Y=c>=P.hours&&h>=P.minutes,ne=c<U.hours||c===U.hours&&h<U.minutes;if(P.hours<U.hours){if(Y&&ne)return!0}else if(Y||ne)return!0}else if(x.hours===c&&x.minutes===h)return!0;return!1});if(-1!==D)return E[D]}return function pt(n,e,t){const r=(0,l.cg1)(n),s=tt([r[l.wAp.DayPeriodsFormat],r[l.wAp.DayPeriodsStandalone]],e);return tt(s,t)}(e,i,r)[c<12?0:1];case mt.Eras:return function Ke(n,e){return tt((0,l.cg1)(n)[l.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Ln(n){return function(e,t,r){const i=-1*r,s=Bt(t,ue.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case En.Short:return(i>=0?"+":"")+Mt(c,2,s)+Mt(Math.abs(i%60),2,s);case En.ShortGMT:return"GMT"+(i>=0?"+":"")+Mt(c,1,s);case En.Long:return"GMT"+(i>=0?"+":"")+Mt(c,2,s)+":"+Mt(Math.abs(i%60),2,s);case En.Extended:return 0===r?"Z":(i>=0?"+":"")+Mt(c,2,s)+":"+Mt(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function Tt(n){return ri(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function It(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+s)/7)}else{const s=Tt(t),c=function it(n){const e=ri(n,0,1).getDay();return ri(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),h=s.getTime()-c.getTime();i=1+Math.round(h/6048e5)}return Mt(i,n,Bt(r,ue.MinusSign))}}function en(n,e=!1){return function(t,r){return Mt(Tt(t).getFullYear(),n,Bt(r,ue.MinusSign),e)}}const W={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Le(n){return n instanceof Date&&!isNaN(n.valueOf())}function uu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let tn=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class yo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new yo(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,c),vo(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{vo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function vo(n,e){n.context.$implicit=e.item}let Nn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Pf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Pf{constructor(){this.$implicit=null,this.ngIf=null}}function hr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let Dd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Ti="browser";function pi(n){return n===Ti}function ea(n){return"server"===n}let Sd=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Of((0,l.LFG)(pe),window)}),n})();class Of{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Hi(this.window.history)||Hi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Hi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Eo{}class Gs extends class Rd extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){q||(q=n)}(new Gs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Nd(){return Ws=Ws||document.querySelector("base"),Ws?Ws.getAttribute("href"):null}();return null==t?null:function Ds(n){Bn=Bn||document.createElement("a"),Bn.setAttribute("href",n);const e=Bn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uu(document.cookie,e)}}let Bn,Ws=null;const Hn=new l.OlP("TRANSITION_ID"),uc=[{provide:l.ip1,useFactory:function Pd(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Hn,pe,l.zs3],multi:!0}];let cc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const dc=new l.OlP("EventManagerPlugins");let hc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const c=i[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(dc),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let aa=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),la=(()=>{class n extends aa{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Od),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Od))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Od(n){O().remove(n)}const ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fd=/%COMP%/g;function _u(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?_u(n,i,t):(i=i.replace(Fd,n),t.push(i))}return t}function yu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _l=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ss(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ud(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case l.ifc.ShadowDom:return new $f(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=_u(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(hc),l.LFG(la),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ss{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ua[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(vl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ua[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ua[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yu(r)):this.eventManager.addEventListener(e,t,yu(r))}}function vl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ud extends Ss{constructor(e,t,r,i){super(e),this.component=r;const s=_u(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Kn(n){return"_ngcontent-%COMP%".replace(Fd,n)}(i+"-"+r.id),this.hostAttr=function mu(n){return"_nghost-%COMP%".replace(Fd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class $f extends Ss{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=_u(i.id,i.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gr=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const qf=["alt","control","meta","shift"],zs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wl=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),qf.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),c+=_+".")}),c+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static matchEventFullKeyCode(t,r){let i=zs[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),qf.forEach(c=>{c!==i&&(0,gc[c])(t)&&(s+=c+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const bl=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:Ti},{provide:l.g9A,useValue:function Bd(){Gs.makeCurrent()},multi:!0},{provide:pe,useFactory:function mc(){return(0,l.RDi)(document),document},deps:[]}]),Io=new l.OlP(""),El=[{provide:l.rWj,useClass:class Hf{addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let s=i.length,c=!1;const h=function(p){c=c||p,s--,0==s&&r(c)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],da=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function As(){return new l.qLn},deps:[]},{provide:dc,useClass:gr,multi:!0,deps:[pe,l.R0b,l.Lbi]},{provide:dc,useClass:wl,multi:!0,deps:[pe]},{provide:_l,useClass:_l,deps:[hc,la,l.AFp]},{provide:l.FYo,useExisting:_l},{provide:aa,useExisting:la},{provide:la,useClass:la,deps:[pe]},{provide:hc,useClass:hc,deps:[dc,l.R0b]},{provide:Eo,useClass:cc,deps:[]},[]];let Do=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Hn,useExisting:l.AFp},uc]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Io,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...da,...El],imports:[Dd,l.hGG]}),n})(),as=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Cl(){return new as((0,l.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var $i=V(6807),dn=V(3465);function ut(...n){const e=(0,$i.yG)(n);return(0,dn.D)(n,e)}var si=V(4915),pn=V(8689),Cr=V(3693);function qi(n,e){return(0,Cr.m)(e)?(0,pn.z)(n,e,1):(0,pn.z)(n,1)}var Un=V(3660),An=V(3031);function mi(n,e){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,An.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var dt=V(1390);class $d{}class Ao{}class Zi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Zi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Zi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Zi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class _i{encodeKey(e){return Il(e)}encodeValue(e){return Il(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const us=/%(\d[a-f0-9])/gi,vc={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Il(n){return encodeURIComponent(n).replace(us,(e,t)=>vc[t]??e)}function wa(n){return`${n}`}class Si{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _i,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Tl(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[c,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(wa):[wa(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Si({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(wa(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(wa(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Zd{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function wc(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ba(n){return typeof Blob<"u"&&n instanceof Blob}function Dl(n){return typeof FormData<"u"&&n instanceof FormData}class cs{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function fm(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Zi),this.context||(this.context=new Zd),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new Si,this.urlWithParams=t}serializeBody(){return null===this.body?null:wc(this.body)||ba(this.body)||Dl(this.body)||function xs(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Si?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Dl(this.body)?null:ba(this.body)?this.body.type||null:wc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Si?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,_=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((D,x)=>D.set(x,e.setHeaders[x]),p)),e.setParams&&(_=Object.keys(e.setParams).reduce((D,x)=>D.set(x,e.setParams[x]),_)),new cs(t,r,s,{params:_,headers:p,context:E,reportProgress:h,responseType:i,withCredentials:c})}}var qn=(()=>((qn=qn||{})[qn.Sent=0]="Sent",qn[qn.UploadProgress=1]="UploadProgress",qn[qn.ResponseHeader=2]="ResponseHeader",qn[qn.DownloadProgress=3]="DownloadProgress",qn[qn.Response=4]="Response",qn[qn.User=5]="User",qn))();class Ys{constructor(e,t=200,r="OK"){this.headers=e.headers||new Zi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Gi extends Ys{constructor(e={}){super(e),this.type=qn.ResponseHeader}clone(e={}){return new Gi({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ea extends Ys{constructor(e={}){super(e),this.type=qn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ea({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Qs extends Ys{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Sl(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ms=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof cs)s=t;else{let p,_;p=i.headers instanceof Zi?i.headers:new Zi(i.headers),i.params&&(_=i.params instanceof Si?i.params:new Si({fromObject:i.params})),s=new cs(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=ut(s).pipe(qi(p=>this.handler.handle(p)));if(t instanceof cs||"events"===i.observe)return c;const h=c.pipe(mi(p=>p instanceof Ea));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,dt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,dt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,dt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,dt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Si).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Sl(i,r))}post(t,r,i={}){return this.request("POST",t,Sl(i,r))}put(t,r,i={}){return this.request("PUT",t,Sl(i,r))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG($d))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class ks{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Gd=new l.OlP("HTTP_INTERCEPTORS");let ir=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Et=/^\)\]\}',?\n/;let qt=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new si.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((P,U)=>i.setRequestHeader(P,U.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const P=t.detectContentTypeHeader();null!==P&&i.setRequestHeader("Content-Type",P)}if(t.responseType){const P=t.responseType.toLowerCase();i.responseType="json"!==P?P:"text"}const s=t.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const P=i.statusText||"OK",U=new Zi(i.getAllResponseHeaders()),Y=function kt(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new Gi({headers:U,status:i.status,statusText:P,url:Y}),c},p=()=>{let{headers:P,status:U,statusText:Y,url:ne}=h(),Ae=null;204!==U&&(Ae=typeof i.response>"u"?i.responseText:i.response),0===U&&(U=Ae?200:0);let Ze=U>=200&&U<300;if("json"===t.responseType&&"string"==typeof Ae){const ze=Ae;Ae=Ae.replace(Et,"");try{Ae=""!==Ae?JSON.parse(Ae):null}catch(Ye){Ae=ze,Ze&&(Ze=!1,Ae={error:Ye,text:Ae})}}Ze?(r.next(new Ea({body:Ae,headers:P,status:U,statusText:Y,url:ne||void 0})),r.complete()):r.error(new Qs({error:Ae,headers:P,status:U,statusText:Y,url:ne||void 0}))},_=P=>{const{url:U}=h(),Y=new Qs({error:P,status:i.status||0,statusText:i.statusText||"Unknown Error",url:U||void 0});r.error(Y)};let E=!1;const D=P=>{E||(r.next(h()),E=!0);let U={type:qn.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(U.total=P.total),"text"===t.responseType&&!!i.responseText&&(U.partialText=i.responseText),r.next(U)},x=P=>{let U={type:qn.UploadProgress,loaded:P.loaded};P.lengthComputable&&(U.total=P.total),r.next(U)};return i.addEventListener("load",p),i.addEventListener("error",_),i.addEventListener("timeout",_),i.addEventListener("abort",_),t.reportProgress&&(i.addEventListener("progress",D),null!==s&&i.upload&&i.upload.addEventListener("progress",x)),i.send(s),r.next({type:qn.Sent}),()=>{i.removeEventListener("error",_),i.removeEventListener("abort",_),i.removeEventListener("load",p),i.removeEventListener("timeout",_),t.reportProgress&&(i.removeEventListener("progress",D),null!==s&&i.upload&&i.upload.removeEventListener("progress",x)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Eo))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const _t=new l.OlP("XSRF_COOKIE_NAME"),Zn=new l.OlP("XSRF_HEADER_NAME");class Tr{}let Ca=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=uu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe),l.LFG(l.Lbi),l.LFG(_t))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Js=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Tr),l.LFG(Zn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ta=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Gd,[]);this.chain=r.reduceRight((i,s)=>new ks(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ao),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Al=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Js,useClass:ir}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:_t,useValue:t.cookieName}:[],t.headerName?{provide:Zn,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Js,{provide:Gd,useExisting:Js,multi:!0},{provide:Tr,useClass:Ca},{provide:_t,useValue:"XSRF-TOKEN"},{provide:Zn,useValue:"X-XSRF-TOKEN"}]}),n})(),Da=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Ms,{provide:$d,useClass:Ta},qt,{provide:Ao,useExisting:qt}],imports:[Al.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const{isArray:vE}=Array,{getPrototypeOf:Qy,prototype:pm,keys:Jy}=Object;function Aa(n){if(1===n.length){const e=n[0];if(vE(e))return{args:e,keys:null};if(function gm(n){return n&&"object"==typeof n&&Qy(n)===pm}(e)){const t=Jy(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Tu=V(2058);const{isArray:mm}=Array;function zd(n){return(0,dt.U)(e=>function wE(n,e){return mm(e)?n(...e):n(e)}(n,e))}function Xy(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let _m=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),eo=(()=>{class n extends _m{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Wi=new l.OlP("NgValueAccessor"),ev={provide:Wi,useExisting:(0,l.Gpc)(()=>xa),multi:!0},nv=new l.OlP("CompositionEventMode");let xa=(()=>{class n extends _m{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function tv(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(nv,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[l._Bn([ev]),l.qOj]}),n})();const kr=new l.OlP("NgValidators"),Mo=new l.OlP("NgAsyncValidators");function sv(n){return null!=n}function ov(n){return(0,l.QGY)(n)?(0,dn.D)(n):n}function Yd(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function vm(n,e){return e.map(t=>t(n))}function w(n){return n.map(e=>function EE(n){return!n.validate}(e)?e:t=>e.validate(t))}function y(n){return null!=n?function m(n){if(!n)return null;const e=n.filter(sv);return 0==e.length?null:function(t){return Yd(vm(t,e))}}(w(n)):null}function M(n){return null!=n?function C(n){if(!n)return null;const e=n.filter(sv);return 0==e.length?null:function(t){return function Qf(...n){const e=(0,$i.jO)(n),{args:t,keys:r}=Aa(n),i=new si.y(s=>{const{length:c}=t;if(!c)return void s.complete();const h=new Array(c);let p=c,_=c;for(let E=0;E<c;E++){let D=!1;(0,Tu.Xf)(t[E]).subscribe((0,An.x)(s,x=>{D||(D=!0,_--),h[E]=x},()=>p--,void 0,()=>{(!p||!D)&&(_||s.next(r?Xy(r,h):h),s.complete())}))}});return e?i.pipe(zd(e)):i}(vm(t,e).map(ov)).pipe((0,dt.U)(Yd))}}(w(n)):null}function F(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function st(n){return n?Array.isArray(n)?n:[n]:[]}function yt(n,e){return Array.isArray(n)?n.includes(e):n===e}function zt(n,e){const t=st(e);return st(n).forEach(i=>{yt(t,i)||t.push(i)}),t}function On(n,e){return st(e).filter(t=>!yt(n,t))}class zi{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=y(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=M(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class mr extends zi{get formDirective(){return null}get path(){return null}}class to extends zi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Jd=(()=>{class n extends class Qd{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[l.qOj]}),n})();const Tc="VALID",ap="INVALID",Ic="PENDING",Xd="DISABLED";function cv(n){return Array.isArray(n)?y(n):n||null}function Em(n){return Array.isArray(n)?M(n):n||null}function dv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Dc(n,e){(function lp(n,e){const t=function re(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(F(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Se(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(F(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ka(e._rawValidators,i),ka(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function QS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ac(n,e)})}(n,e),function JS(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function AE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ac(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function SE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ka(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ac(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function nA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function vv(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const aP={provide:to,useExisting:(0,l.Gpc)(()=>Ev)},Sm=(()=>Promise.resolve())();let Ev=(()=>{class n extends to{constructor(t,r,i,s,c){super(),this._changeDetectorRef=c,this.control=new class extends class hv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=cv(this._rawValidators),this._composedAsyncValidatorFn=Em(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Tc}get invalid(){return this.status===ap}get pending(){return this.status==Ic}get disabled(){return this.status===Xd}get enabled(){return this.status!==Xd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=cv(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Em(e)}addValidators(e){this.setValidators(zt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(On(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(On(e,this._rawAsyncValidators))}hasValidator(e){return yt(this._rawValidators,e)}hasAsyncValidator(e){return yt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ic,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tc||this.status===Ic)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xd:Tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ic,this._hasOwnPendingAsyncValidator=!0;const t=ov(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?Xd:this.errors?ap:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ic)?Ic:this._anyControlsHaveStatus(ap)?ap:Tc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function uv(n){return(dv(n)?n.validators:n)||null}(t),function bm(n,e){return(dv(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vv(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _v(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===xa?t=s:function kE(n){return Object.getPrototypeOf(n.constructor)===eo}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function mv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Dc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Sm.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,l.D6c)(r);Sm.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Im(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(mr,9),l.Y36(kr,10),l.Y36(Mo,10),l.Y36(Wi,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([aP]),l.qOj,l.TTD]}),n})(),Cv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),hP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Cv]}),n})(),Na=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[hP]}),n})();var no=V(3149);class Ai extends no.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Rl=(0,V(7802).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Su=V(7631),QE=V(4452);function JE(...n){const e=(0,$i.yG)(n),t=(0,$i.jO)(n),{args:r,keys:i}=Aa(n);if(0===r.length)return(0,dn.D)([],e);const s=new si.y(function Ov(n,e,t=Su.y){return r=>{XE(e,()=>{const{length:i}=n,s=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)XE(e,()=>{const _=(0,dn.D)(n[p],e);let E=!1;_.subscribe((0,An.x)(r,D=>{s[p]=D,E||(E=!0,h--),h||r.next(t(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Xy(i,c):Su.y));return t?s.pipe(zd(t)):s}function XE(n,e,t){n?(0,QE.f)(t,n,e):e()}var dp=V(1174);function Fv(...n){return function vA(){return(0,dp.J)(1)}()((0,dn.D)(n,(0,$i.yG)(n)))}function eC(n){return new si.y(e=>{(0,Tu.Xf)(n()).subscribe(e)})}var wA=V(2829);function ih(n,e){const t=(0,Cr.m)(n)?n:()=>n,r=i=>i.error(t());return new si.y(e?i=>e.schedule(r,0,i):r)}var Nl=V(1530),xc=V(3627);function hp(){return(0,Un.e)((n,e)=>{let t=null;n._refCount++;const r=(0,An.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tC extends si.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Un.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,An.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xc.w0.EMPTY)}return e}refCount(){return hp()(this)}}function Rr(n,e){return(0,Un.e)((t,r)=>{let i=null,s=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,An.x)(r,p=>{i?.unsubscribe();let _=0;const E=s++;(0,Tu.Xf)(n(p,E)).subscribe(i=(0,An.x)(r,D=>r.next(e?e(p,D,E,_++):D),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function Pl(n){return n<=0?()=>Nl.E:(0,Un.e)((e,t)=>{let r=0;e.subscribe((0,An.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function fp(...n){const e=(0,$i.yG)(n);return(0,Un.e)((t,r)=>{(e?Fv(n,t,e):Fv(n,t)).subscribe(r)})}function Pa(n){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,An.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Lv(n=nC){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,An.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function nC(){return new Rl}function Ol(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mi((i,s)=>n(i,s,r)):Su.y,Pl(1),t?Pa(e):Lv(()=>new Rl))}var Yi=V(288);function Ro(n){return(0,Un.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,An.x)(t,void 0,void 0,c=>{s=(0,Tu.Xf)(n(c,Ro(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function bA(n,e,t,r,i){return(s,c)=>{let h=t,p=e,_=0;s.subscribe((0,An.x)(c,E=>{const D=_++;p=h?n(p,E,D):(h=!0,E),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}function Au(n,e){return(0,Un.e)(bA(n,e,arguments.length>=2,!0))}function Nm(n){return n<=0?()=>Nl.E:(0,Un.e)((e,t)=>{let r=[];e.subscribe((0,An.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Uv(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mi((i,s)=>n(i,s,r)):Su.y,Nm(1),t?Pa(e):Lv(()=>new Rl))}function sh(n){return(0,Un.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Kt="primary",oh=Symbol("RouteTitle");class Bv{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mc(n){return new Bv(n)}function Hv(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],h=n[s];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Oa(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!jv(n[i],e[i]))return!1;return!0}function jv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function iC(n){return Array.prototype.concat.apply([],n)}function sC(n){return n.length>0?n[n.length-1]:null}function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Fl(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,dn.D)(Promise.resolve(n)):ut(n)}const CA={exact:function ro(n,e,t){if(!Rc(n.segments,e.segments)||!Pm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ro(n.children[r],e.children[r],t))return!1;return!0},subset:qv},$v={exact:function TA(n,e){return Oa(n,e)},subset:function IA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jv(n[t],e[t]))},ignored:()=>!0};function lC(n,e,t){return CA[t.paths](n.root,e.root,t.matrixParams)&&$v[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function qv(n,e,t){return uC(n,e,e.segments,t)}function uC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Rc(i,t)||e.hasChildren()||!Pm(i,t,r))}if(n.segments.length===t.length){if(!Rc(n.segments,t)||!Pm(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!qv(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Rc(n.segments,i)&&Pm(n.segments,i,r)&&n.children[Kt])&&uC(n.children[Kt],e,s,r)}}function Pm(n,e,t){return e.every((r,i)=>$v[t](n[i].parameters,r.parameters))}class kc{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mc(this.queryParams)),this._queryParamMap}toString(){return cC.serialize(this)}}class nn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gp(this)}}class ah{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mc(this.parameters)),this._parameterMap}toString(){return xA(this)}}function Rc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new Om},providedIn:"root"}),n})();class Om{parse(e){const t=new vP(e);return new kc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${mp(e.root,!0)}`,r=function pC(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${_p(t)}=${_p(i)}`).join("&"):`${_p(t)}=${_p(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function AA(n){return encodeURI(n)}(e.fragment)}`:""}`}}const cC=new Om;function gp(n){return n.segments.map(e=>xA(e)).join("/")}function mp(n,e){if(!n.hasChildren())return gp(n);if(e){const t=n.children[Kt]?mp(n.children[Kt],!1):"",r=[];return Yr(n.children,(i,s)=>{s!==Kt&&r.push(`${s}:${mp(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function SA(n,e){let t=[];return Yr(n.children,(r,i)=>{i===Kt&&(t=t.concat(e(r,i)))}),Yr(n.children,(r,i)=>{i!==Kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Kt?[mp(n.children[Kt],!1)]:[`${i}:${mp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${gp(n)}/${t[0]}`:`${gp(n)}/(${t.join("//")})`}}function dC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _p(n){return dC(n).replace(/%3B/gi,";")}function Fm(n){return dC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lm(n){return decodeURIComponent(n)}function hC(n){return Lm(n.replace(/\+/g,"%20"))}function xA(n){return`${Fm(n.path)}${function fC(n){return Object.keys(n).map(e=>`;${Fm(e)}=${Fm(n[e])}`).join("")}(n.parameters)}`}const Nc=/^[^\/()?;=#]+/;function Um(n){const e=n.match(Nc);return e?e[0]:""}const Zv=/^[^=?&#]+/,MA=/^[^&#]+/;class vP{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new nn(e,t)),r}parseSegment(){const e=Um(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new ah(Lm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Um(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Um(this.remaining);i&&(r=i,this.capture(r))}e[Lm(t)]=Lm(r)}parseQueryParam(e){const t=function Gv(n){const e=n.match(Zv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function yP(n){const e=n.match(MA);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=hC(t),s=hC(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Um(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new l.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Kt);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[Kt]:new nn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function gC(n){return n.segments.length>0?new nn([],{[Kt]:n}):n}function Vm(n){const e={};for(const r of Object.keys(n.children)){const s=Vm(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function mC(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new nn(n.segments.concat(e.segments),e.children)}return n}(new nn(n.segments,e))}function lh(n){return n instanceof kc}function Bm(n,e,t,r,i){if(0===t.length)return ch(e.root,e.root,e.root,r,i);const s=function wC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vC(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Yr(s.outlets,(p,_)=>{h[_]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new vC(t,e,r)}(t);return s.toRoot()?ch(e.root,e.root,new nn([],{}),r,i):function c(p){const _=function RA(n,e,t,r){if(n.isAbsolute)return new dh(e.root,!0,0);if(-1===r)return new dh(t,t===e.root,0);return function zv(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new l.vHH(4005,!1);i=r.segments.length}return new dh(r,!1,i-s)}(t,r+(vp(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),E=_.processChildren?Hm(_.segmentGroup,_.index,s.commands):wp(_.segmentGroup,_.index,s.commands);return ch(e.root,_.segmentGroup,E,r,i)}(n.snapshot?._lastPathIndex)}function vp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function uh(n){return"object"==typeof n&&null!=n&&n.outlets}function ch(n,e,t,r,i){let c,s={};r&&Yr(r,(p,_)=>{s[_]=Array.isArray(p)?p.map(E=>`${E}`):`${p}`}),c=n===e?t:yC(n,e,t);const h=gC(Vm(c));return new kc(h,s,i)}function yC(n,e,t){const r={};return Yr(n.children,(i,s)=>{r[s]=i===e?t:yC(i,e,t)}),new nn(n.segments,r)}class vC{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vp(r[0]))throw new l.vHH(4003,!1);const i=r.find(uh);if(i&&i!==sC(r))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function wp(n,e,t){if(n||(n=new nn([],{})),0===n.segments.length&&n.hasChildren())return Hm(n,e,t);const r=function Kv(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const c=n.segments[i],h=t[r];if(uh(h))break;const p=`${h}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!Qv(p,_,c))return s;r+=2}else{if(!Qv(p,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new nn(n.segments.slice(0,r.pathIndex),{});return s.children[Kt]=new nn(n.segments.slice(r.pathIndex),n.children),Hm(s,0,i)}return r.match&&0===i.length?new nn(n.segments,{}):r.match&&!n.hasChildren()?Yv(n,e,t):r.match?Hm(n,0,i):Yv(n,e,t)}function Hm(n,e,t){if(0===t.length)return new nn(n.segments,{});{const r=function EC(n){return uh(n[0])?n[0].outlets:{[Kt]:n}}(t),i={};return Yr(r,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[c]=wp(n.children[c],e,s))}),Yr(n.children,(s,c)=>{void 0===r[c]&&(i[c]=s)}),new nn(n.segments,i)}}function Yv(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(uh(s)){const p=wP(s.outlets);return new nn(r,p)}if(0===i&&vp(t[0])){r.push(new ah(n.segments[e].path,Pc(t[0]))),i++;continue}const c=uh(s)?s.outlets[Kt]:`${s}`,h=i<t.length-1?t[i+1]:null;c&&h&&vp(h)?(r.push(new ah(c,Pc(h))),i+=2):(r.push(new ah(c,{})),i++)}return new nn(r,{})}function wP(n){const e={};return Yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Yv(new nn([],{}),0,t))}),e}function Pc(n){const e={};return Yr(n,(t,r)=>e[r]=`${t}`),e}function Qv(n,e,t){return n==t.path&&Oa(e,t.parameters)}class Fa{constructor(e,t){this.id=e,this.url=t}}class hh extends Fa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vi extends Fa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bp extends Fa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class CC extends Fa{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jv extends Fa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ll extends Fa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xv extends Fa{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class TC extends Fa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ew extends Fa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bP{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class IC{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class EP{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jm{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $m{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tw{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qm{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class NA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=rw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=rw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=iw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iw(e,this._root).map(t=>t.value)}}function rw(n,e){if(n===e.value)return e;for(const t of e.children){const r=rw(n,t);if(r)return r}return null}function iw(n,e){if(n===e.value)return[e];for(const t of e.children){const r=iw(n,t);if(r.length)return r.unshift(e),r}return[]}class Ul{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sw extends NA{constructor(e,t){super(e),this.snapshot=t,SC(this,e)}toString(){return this.snapshot.toString()}}function PA(n,e){const t=function OA(n,e){const c=new Zm([],{},{},"",{},Kt,e,null,n.root,-1,{});return new Gm("",new Ul(c,[]))}(n,e),r=new Ai([new ah("",{})]),i=new Ai({}),s=new Ai({}),c=new Ai({}),h=new Ai(""),p=new Vl(r,i,c,h,s,Kt,e,t.root);return p.snapshot=t.root,new sw(new Ul(p,[]),t)}class Vl{constructor(e,t,r,i,s,c,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,dt.U)(_=>_[oh]))??ut(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>Mc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>Mc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ow(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function DC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Zm{constructor(e,t,r,i,s,c,h,p,_,E,D,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.[oh],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=E,this._correctedLastPathIndex=x??E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gm extends NA{constructor(e,t){super(t),this.url=e,SC(this,t)}toString(){return FA(this._root)}}function SC(n,e){e.value._routerState=n,e.children.forEach(t=>SC(n,t))}function FA(n){const e=n.children.length>0?` { ${n.children.map(FA).join(", ")} } `:"";return`${n.value}${e}`}function AC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Oa(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Oa(e.params,t.params)||n.params.next(t.params),function pp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Oa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Oa(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function xC(n,e){const t=Oa(n.params,e.params)&&function DA(n,e){return Rc(n,e)&&n.every((t,r)=>Oa(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||xC(n.parent,e.parent))}function Wm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function TP(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wm(n,r,i);return Wm(n,r)})}(n,e,t);return new Ul(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Wm(n,h)),c}}const r=function IP(n){return new Vl(new Ai(n.url),new Ai(n.params),new Ai(n.queryParams),new Ai(n.fragment),new Ai(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Wm(n,s));return new Ul(r,i)}}const MC="ngNavigationCancelingError";function LA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=lh(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Bl(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Bl(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[MC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function zm(n){return kC(n)&&lh(n.url)}function kC(n){return n&&n[MC]}class RC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Oc,this.attachRef=null}}let Oc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new RC,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ep=!1;let xu=(()=>{class n{constructor(t,r,i,s,c){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=i||Kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,Ep);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,Ep);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,Ep);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,Ep);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new UA(t,h,i.injector);if(r&&function Mu(n){return!!n.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(c);this.activated=i.createComponent(_,i.length,p)}else this.activated=i.createComponent(c,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Oc),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class UA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Vl?this.route:e===Oc?this.childContexts:this.parent.get(e,t)}}let Km=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[xu],encapsulation:2}),n})();function NC(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Cp(n){const e=n.children&&n.children.map(Cp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=Km),t}function Qi(n){return n.outlet||Kt}function lw(n,e){const t=n.filter(r=>Qi(r)===e);return t.push(...n.filter(r=>Qi(r)!==e)),t}function _h(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class cw{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=fh(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),Yr(i,(s,c)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=fh(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=fh(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=fh(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new tw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new jm(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(AC(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),AC(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=_h(i.snapshot),p=h?.get(l._Vd)??null;c.attachRef=null,c.route=i,c.resolver=p,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class dw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yh{constructor(e,t){this.component=e,this.route=t}}function BA(n,e,t){const r=n._root;return wh(r,e?e._root:null,t,[r.value])}function vh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:r}function wh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=fh(e);return n.children.forEach(c=>{(function HA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function PC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rc(n.url,e.url)||!Oa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xC(n,e)||!Oa(n.queryParams,e.queryParams);default:return!xC(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new dw(r)):(s.data=c.data,s._resolvedData=c._resolvedData),wh(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new yh(h.outlet.component,c))}else c&&bh(e,h,i),i.canActivateChecks.push(new dw(r)),wh(n,null,s.component?h?h.children:null:t,r,i)})(c,s[c.value.outlet],t,r.concat([c.value]),i),delete s[c.value.outlet]}),Yr(s,(c,h)=>bh(c,t.getContext(h),i)),i}function bh(n,e,t){const r=fh(n),i=n.value;Yr(r,(s,c)=>{bh(s,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new yh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Tp(n){return"function"==typeof n}function fw(n){return n instanceof Rl||"EmptyError"===n?.name}const Ym=Symbol("INITIAL_VALUE");function Fc(){return Rr(n=>JE(n.map(e=>e.pipe(Pl(1),fp(Ym)))).pipe((0,dt.U)(e=>{for(const t of e)if(!0!==t){if(t===Ym)return Ym;if(!1===t||t instanceof kc)return t}return!0}),mi(e=>e!==Ym),Pl(1)))}function VC(n){return(0,wA.z)((0,Yi.b)(e=>{if(lh(e))throw LA(0,e)}),(0,dt.U)(e=>!0===e))}const BC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gw(n,e,t,r,i){const s=mw(n,e,t);return s.matched?function YA(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ut(i.map(c=>{const h=vh(c,n);return Fl(function hw(n){return n&&Tp(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Fc(),VC()):ut(!0)}(r=NC(e,r),e,t).pipe((0,dt.U)(c=>!0===c?s:{...BC})):ut(s)}function mw(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...BC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Hv)(t,n,e);if(!i)return{...BC};const s={};Yr(i.posParams,(h,p)=>{s[p]=h.path});const c=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Qm(n,e,t,r,i="corrected"){if(t.length>0&&function JA(n,e,t){return t.some(r=>Lc(n,e,r)&&Qi(r)!==Kt)}(n,t,r)){const c=new nn(e,function _w(n,e,t,r){const i={};i[Kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Qi(s)!==Kt){const c=new nn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Qi(s)]=c}return i}(n,e,r,new nn(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function XA(n,e,t){return t.some(r=>Lc(n,e,r))}(n,t,r)){const c=new nn(n.segments,function QA(n,e,t,r,i,s){const c={};for(const h of r)if(Lc(n,t,h)&&!i[Qi(h)]){const p=new nn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,c[Qi(h)]=p}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const s=new nn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Lc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Jm(n,e,t,r){return!!(Qi(n)===r||r!==Kt&&Lc(e,t,n))&&("**"===n.path||mw(e,n,t).matched)}function Ip(n,e,t){return 0===e.length&&!n.children[t]}const yw=!1;class Eh{constructor(e){this.segmentGroup=e||null}}class ex{constructor(e){this.urlTree=e}}function Ch(n){return ih(new Eh(n))}function vw(n){return ih(new ex(n))}class Hl{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Qm(this.urlTree.root,[],[],this.config).segmentGroup,t=new nn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Kt).pipe((0,dt.U)(s=>this.createUrlTree(Vm(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ro(s=>{if(s instanceof ex)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Eh?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Kt).pipe((0,dt.U)(i=>this.createUrlTree(Vm(i),e.queryParams,e.fragment))).pipe(Ro(i=>{throw i instanceof Eh?this.noMatchError(i):i}))}noMatchError(e){return new l.vHH(4002,yw)}createUrlTree(e,t,r){const i=gC(e);return new kc(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(s=>new nn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,dn.D)(i).pipe(qi(s=>{const c=r.children[s],h=lw(t,s);return this.expandSegmentGroup(e,h,c,s).pipe((0,dt.U)(p=>({segment:p,outlet:s})))}),Au((s,c)=>(s[c.outlet]=c.segment,s),{}),Uv())}expandSegment(e,t,r,i,s,c){return(0,dn.D)(r).pipe(qi(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,c).pipe(Ro(_=>{if(_ instanceof Eh)return ut(null);throw _}))),Ol(h=>!!h),Ro((h,p)=>{if(fw(h))return Ip(t,i,s)?ut(new nn([],{})):Ch(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,c,h){return Jm(i,t,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c):Ch(t):Ch(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vw(s):this.lineralizeSegments(r,s).pipe((0,pn.z)(c=>{const h=new nn(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){const{matched:h,consumedSegments:p,remainingSegments:_,positionalParamSegments:E}=mw(t,i,s);if(!h)return Ch(t);const D=this.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?vw(D):this.lineralizeSegments(i,D).pipe((0,pn.z)(x=>this.expandSegment(e,t,r,x.concat(_),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=NC(r,e),r.loadChildren?(r._loadedRoutes?ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,dt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new nn(i,{})))):ut(new nn(i,{}))):gw(t,r,i,e).pipe(Rr(({matched:c,consumedSegments:h,remainingSegments:p})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,pn.z)(E=>{const D=E.injector??e,x=E.routes,{segmentGroup:P,slicedSegments:U}=Qm(t,h,p,x),Y=new nn(P.segments,P.children);if(0===U.length&&Y.hasChildren())return this.expandChildren(D,x,Y).pipe((0,dt.U)(ze=>new nn(h,ze)));if(0===x.length&&0===U.length)return ut(new nn(h,{}));const ne=Qi(r)===s;return this.expandSegment(D,Y,x,U,ne?Kt:s,!0).pipe((0,dt.U)(Ze=>new nn(h.concat(Ze.segments),Ze.children)))})):Ch(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function pw(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ut(!0):ut(i.map(c=>{const h=vh(c,n);return Fl(function OC(n){return n&&Tp(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Fc(),VC())}(e,t,r).pipe((0,pn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Yi.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function jC(n){return ih(Bl(yw,3))}())):ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[Kt])return ih(new l.vHH(4e3,yw));i=i.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new kc(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let c={};return Yr(t.children,(h,p)=>{c[p]=this.createSegmentGroup(e,h,r,i)}),new nn(s,c)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new l.vHH(4001,yw);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Dp{}class $C{constructor(e,t,r,i,s,c,h,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=p}recognize(){const e=Qm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Kt).pipe((0,dt.U)(t=>{if(null===t)return null;const r=new Zm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ul(r,t),s=new Gm(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=ow(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,dn.D)(Object.keys(r.children)).pipe(qi(i=>{const s=r.children[i],c=lw(t,i);return this.processSegmentGroup(e,c,s,i)}),Au((i,s)=>i&&s?(i.push(...s),i):null),function Vv(n,e=!1){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,An.x)(r,s=>{const c=n(s,i++);(c||e)&&r.next(s),!c&&r.complete()}))})}(i=>null!==i),Pa(null),Uv(),(0,dt.U)(i=>{if(null===i)return null;const s=qC(i);return function nx(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,dn.D)(t).pipe(qi(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,s)),Ol(c=>!!c),Ro(c=>{if(fw(c))return Ip(r,i,s)?ut([]):ut(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!Jm(t,r,i,s))return ut(null);let c;if("**"===t.path){const h=i.length>0?sC(i).parameters:{},p=ix(r)+i.length;c=ut({snapshot:new Zm(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WC(t),Qi(t),t.component??t._loadedComponent??null,t,ZC(r),p,zC(t),p),consumedSegments:[],remainingSegments:[]})}else c=gw(r,t,i,e).pipe((0,dt.U)(({matched:h,consumedSegments:p,remainingSegments:_,parameters:E})=>{if(!h)return null;const D=ix(r)+p.length;return{snapshot:new Zm(p,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WC(t),Qi(t),t.component??t._loadedComponent??null,t,ZC(r),D,zC(t),D),consumedSegments:p,remainingSegments:_}}));return c.pipe(Rr(h=>{if(null===h)return ut(null);const{snapshot:p,consumedSegments:_,remainingSegments:E}=h;e=t._injector??e;const D=t._loadedInjector??e,x=function rx(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:P,slicedSegments:U}=Qm(r,_,E,x.filter(ne=>void 0===ne.redirectTo),this.relativeLinkResolution);if(0===U.length&&P.hasChildren())return this.processChildren(D,x,P).pipe((0,dt.U)(ne=>null===ne?null:[new Ul(p,ne)]));if(0===x.length&&0===U.length)return ut([new Ul(p,[])]);const Y=Qi(t)===s;return this.processSegment(D,x,P,U,Y?Kt:s).pipe((0,dt.U)(ne=>null===ne?null:[new Ul(p,ne)]))}))}}function Sp(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qC(n){const e=[],t=new Set;for(const r of n){if(!Sp(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=qC(r.children);e.push(new Ul(r.value,i))}return e.filter(r=>!t.has(r))}function ZC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ix(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function WC(n){return n.data||{}}function zC(n){return n.resolve||{}}function YC(n){return"string"==typeof n.title||null===n.title}function Tw(n){return Rr(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,dt.U)(()=>e)):ut(e)})}let QC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Kt);return r}getResolvedTitleForRoute(t){return t.data[oh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(JC)},providedIn:"root"}),n})(),JC=(()=>{class n extends QC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(as))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Vc{}class Ap extends class RP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const e_=new l.OlP("",{providedIn:"root",factory:()=>({})}),Dw=new l.OlP("ROUTES");let io=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Fl(t.loadComponent()).pipe((0,Yi.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),sh(()=>{this.componentLoaders.delete(t)})),i=new tC(r,()=>new no.x).pipe(hp());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,dt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,_,E=!1;Array.isArray(h)?_=h:(p=h.create(t).injector,_=iC(p.get(Dw,[],l.XFs.Self|l.XFs.Optional)));return{routes:_.map(Cp),injector:p}}),sh(()=>{this.childrenLoaders.delete(r)})),c=new tC(s,()=>new no.x).pipe(hp());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Fl(t()).pipe((0,pn.z)(r=>r instanceof l.YKP||Array.isArray(r)?ut(r):(0,dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class xp{}class xi{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function n_(n){throw n}function so(n,e,t){return e.parse("/")}const Sw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Th={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Bc(){const n=(0,l.f3M)(Zt),e=(0,l.f3M)(Oc),t=(0,l.f3M)(Fe),r=(0,l.f3M)(l.zs3),i=(0,l.f3M)(l.Sil),s=(0,l.f3M)(Dw,{optional:!0})??[],c=(0,l.f3M)(e_,{optional:!0})??{},h=(0,l.f3M)(JC),p=(0,l.f3M)(QC,{optional:!0}),_=(0,l.f3M)(xp,{optional:!0}),E=(0,l.f3M)(Vc,{optional:!0}),D=new gn(null,n,e,t,r,i,iC(s));return _&&(D.urlHandlingStrategy=_),E&&(D.routeReuseStrategy=E),D.titleStrategy=p??h,function Ih(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,D),D}let gn=(()=>{class n{constructor(t,r,i,s,c,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new no.x,this.errorHandler=n_,this.malformedUriErrorHandler=so,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ut(void 0),this.urlHandlingStrategy=new xi,this.routeReuseStrategy=new Ap,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(io),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new IC(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new bP(x)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const D=c.get(l.R0b);this.isNgZoneEnabled=D instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function aC(){return new kc(new nn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=PA(this.currentUrlTree,this.rootComponentType),this.transitions=new Ai({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(mi(i=>0!==i.id),(0,dt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Rr(i=>{let s=!1,c=!1;return ut(i).pipe((0,Yi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Rr(h=>{const p=this.browserUrlTree.toString(),_=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Hc(h.source)&&(this.browserUrlTree=h.extractedUrl),ut(h).pipe(Rr(D=>{const x=this.transitions.getValue();return r.next(new hh(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?Nl.E:Promise.resolve(D)}),function Xm(n,e,t,r){return Rr(i=>function ww(n,e,t,r,i){return new Hl(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,dt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yi.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function KC(n,e,t,r,i,s){return(0,pn.z)(c=>function bw(n,e,t,r,i,s,c="emptyOnly",h="legacy"){return new $C(n,e,t,r,i,c,h,s).recognize().pipe(Rr(p=>null===p?function tx(n){return new si.y(e=>e.error(n))}(new Dp):ut(p)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,s).pipe((0,dt.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yi.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(P,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new Jv(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(x)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:P,source:U,restoredState:Y,extras:ne}=h,Ae=new hh(x,this.serializeUrl(P),U,Y);r.next(Ae);const Ze=PA(P,this.rootComponentType).snapshot;return ut(i={...h,targetSnapshot:Ze,urlAfterRedirects:P,extras:{...ne,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Nl.E}),(0,Yi.b)(h=>{const p=new Ll(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,dt.U)(h=>i={...h,guards:BA(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function GA(n,e){return(0,pn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?ut({...t,guardsResult:!0}):function FC(n,e,t,r){return(0,dn.D)(n).pipe((0,pn.z)(i=>function La(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ut(s.map(h=>{const p=_h(e)??i,_=vh(h,p);return Fl(function $A(n){return n&&Tp(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):p.runInContext(()=>_(n,e,t,r))).pipe(Ol())})).pipe(Fc()):ut(!0)}(i.component,i.route,t,e,r)),Ol(i=>!0!==i,!0))}(c,r,i,n).pipe((0,pn.z)(h=>h&&function Rs(n){return"boolean"==typeof n}(h)?function WA(n,e,t,r){return(0,dn.D)(e).pipe(qi(i=>Fv(function LC(n,e){return null!==n&&e&&e(new EP(n)),ut(!0)}(i.route.parent,r),function zA(n,e){return null!==n&&e&&e(new $m(n)),ut(!0)}(i.route,r),function KA(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function xP(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>eC(()=>ut(c.guards.map(p=>{const _=_h(c.node)??t,E=vh(p,_);return Fl(function MP(n){return n&&Tp(n.canActivateChild)}(E)?E.canActivateChild(r,n):_.runInContext(()=>E(r,n))).pipe(Ol())})).pipe(Fc())));return ut(s).pipe(Fc())}(n,i.path,t),function UC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(s=>eC(()=>{const c=_h(e)??t,h=vh(s,c);return Fl(function jA(n){return n&&Tp(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(Ol())}));return ut(i).pipe(Fc())}(n,i.route,t))),Ol(i=>!0!==i,!0))}(r,s,n,e):ut(h)),(0,dt.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Yi.b)(h=>{if(i.guardsResult=h.guardsResult,lh(h.guardsResult))throw LA(0,h.guardsResult);const p=new Xv(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),mi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),Tw(h=>{if(h.guards.canActivateChecks.length)return ut(h).pipe((0,Yi.b)(p=>{const _=new TC(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),Rr(p=>{let _=!1;return ut(p).pipe(function Ew(n,e){return(0,pn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);let s=0;return(0,dn.D)(i).pipe(qi(c=>function sx(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!YC(i)&&(s[oh]=i.title),function Cw(n,e,t,r){const i=function ox(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ut({});const s={};return(0,dn.D)(i).pipe((0,pn.z)(c=>function ax(n,e,t,r){const i=_h(e)??r,s=vh(n,i);return Fl(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[c],e,t,r).pipe(Ol(),(0,Yi.b)(h=>{s[c]=h}))),Nm(1),function rC(n){return(0,dt.U)(()=>n)}(s),Ro(c=>fw(c)?Nl.E:ih(c)))}(s,n,e,r).pipe((0,dt.U)(c=>(n._resolvedData=c,n.data=ow(n,t).resolve,i&&YC(i)&&(n.data[oh]=i.title),null)))}(c.route,r,n,e)),(0,Yi.b)(()=>s++),Nm(1),(0,pn.z)(c=>s===i.length?ut(t):Nl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yi.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,Yi.b)(p=>{const _=new ew(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),Tw(h=>{const p=_=>{const E=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Yi.b)(D=>{_.component=D}),(0,dt.U)(()=>{})));for(const D of _.children)E.push(...p(D));return E};return JE(p(h.targetSnapshot.root)).pipe(Pa(),Pl(1))}),Tw(()=>this.afterPreactivation()),(0,dt.U)(h=>{const p=function CP(n,e,t){const r=Wm(n,e._root,t?t._root:void 0);return new sw(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:p}}),(0,Yi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new cw(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Yi.b)({next(){s=!0},complete(){s=!0}}),sh(()=>{s||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ro(h=>{if(c=!0,kC(h)){zm(h)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new bp(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(p),zm(h)){const _=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hc(i.source)};this.scheduleNavigation(_,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new CC(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(h))}catch(_){i.reject(_)}}return Nl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Cp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,_=i||this.routerState.root,E=p?this.currentUrlTree.fragment:c;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),Bm(_,this.currentUrlTree,t,D,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=lh(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Dh(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new l.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Sw}:!1===r?{...Th}:r,lh(t))return lC(this.currentUrlTree,t,i);const s=this.parseUrl(t);return lC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new vi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,c){if(this.disposed)return Promise.resolve(!1);let h,p,_;c?(h=c.resolve,p=c.reject,_=c.promise):_=new Promise((x,P)=>{h=x,p=P});const E=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:E,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new bp(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return Bc()},providedIn:"root"}),n})();function Hc(n){return"imperative"!==n}let Mi=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new no.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gn),l.Y36(Vl),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),Va=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new no.x,this.subscription=t.events.subscribe(s=>{s instanceof vi&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,c){return!!(0!==t||r||i||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gn),l.Y36(Vl),l.Y36(be))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),jc=(()=>{class n{constructor(t,r,i,s,c,h){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=c,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new l.vpe,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof vi&&this.update()})}ngAfterContentInit(){ut(this.links.changes,this.linksWithHrefs.changes,ut(null)).pipe((0,dp.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,dn.D)(t).pipe((0,dp.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function XC(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gn),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(Mi,8),l.Y36(Va,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(l.Suo(i,Mi,5),l.Suo(i,Va,5)),2&t){let s;l.iGM(s=l.CRH())&&(r.links=s),l.iGM(s=l.CRH())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[l.TTD]}),n})();class Aw{}let eT=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(mi(t=>t instanceof vi),qi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,t,`Route: ${s.path}`));const c=s._injector??t,h=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,dn.D)(i).pipe((0,dp.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const s=i.pipe((0,pn.z)(c=>null===c?ut(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,dn.D)([s,c]).pipe((0,dp.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gn),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(Aw),l.LFG(io))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const r_=new l.OlP("");let xw=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof vi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new qm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Sh(n,e){return{\u0275kind:n,\u0275providers:e}}function i_(n){return[{provide:Dw,multi:!0,useValue:n}]}function Mw(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const r=n.get(gn),i=n.get(s_);1===n.get(kp)&&r.initialNavigation(),n.get(l_,null,l.XFs.Optional)?.setUpPreloading(),n.get(r_,null,l.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const s_=new l.OlP("",{factory:()=>new no.x}),kp=new l.OlP("",{providedIn:"root",factory:()=>1});const l_=new l.OlP("");function fx(n){return Sh(0,[{provide:l_,useExisting:eT},{provide:Aw,useExisting:n}])}const kw=new l.OlP("ROUTER_FORROOT_GUARD"),Rw=[Fe,{provide:Zt,useClass:Om},{provide:gn,useFactory:Bc},Oc,{provide:Vl,useFactory:function tT(n){return n.routerState.root},deps:[gn]},io];function rT(){return new l.PXZ("Router",gn)}let Nw=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Rw,[],i_(t),{provide:kw,useFactory:sT,deps:[[gn,new l.FiY,new l.tp0]]},{provide:e_,useValue:r||{}},r?.useHash?{provide:be,useClass:et}:{provide:be,useClass:nt},{provide:r_,useFactory:()=>{const n=(0,l.f3M)(gn),e=(0,l.f3M)(Sd),t=(0,l.f3M)(e_);return t.scrollOffset&&e.setOffset(t.scrollOffset),new xw(n,e,t)}},r?.preloadingStrategy?fx(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:rT},r?.initialNavigation?oT(r):[],[{provide:Ow,useFactory:Mw},{provide:l.tb,multi:!0,useExisting:Ow}]]}}static forChild(t){return{ngModule:n,providers:[i_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(kw,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Km]}),n})();function sT(n){return"guarded"}function oT(n){return["disabled"===n.initialNavigation?Sh(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(gn);return()=>{e.setUpLocationChangeListener()}}},{provide:kp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Sh(2,[{provide:kp,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const c=e.get(gn),h=e.get(s_);(function i(s){e.get(gn).events.pipe(mi(h=>h instanceof vi||h instanceof bp||h instanceof CC),(0,dt.U)(h=>h instanceof vi||h instanceof bp&&(0===h.code||1===h.code)&&null),mi(h=>null!==h),Pl(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),c.afterPreactivation=()=>(s(!0),r||h.closed?ut(void 0):h),c.initialNavigation()}))}}]).\u0275providers:[]]}const Ow=new l.OlP("");var Fw=V(4235),L=V(1319),ki=V(9949),Ns=V(6745),oo=V(8702),u_=V(1696),yn=V(2133);function c_(){return(0,Un.e)((n,e)=>{let t,r=!1;n.subscribe((0,An.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Lw(n,e=Su.y){return n=n??lT,(0,Un.e)((t,r)=>{let i,s=!0;t.subscribe((0,An.x)(r,c=>{const h=e(c);(s||!n(i,h))&&(s=!1,i=h,r.next(c))}))})}function lT(n,e){return n===e}var vt,jr=V(9720),uT=(V(4837),V(1044)),Ee=V(7791),_x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ba={},Nr=Nr||{},jt=_x||self;function d_(){}function h_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var f_="closure_uid_"+(1e9*Math.random()>>>0),cT=0;function Mh(n,e,t){return n.call.apply(n.bind,arguments)}function vx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ri(n,e,t){return(Ri=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mh:vx).apply(null,arguments)}function Rp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function wi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function jl(){this.s=this.s,this.o=this.o}jl.prototype.s=!1,jl.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function yx(n){Object.prototype.hasOwnProperty.call(n,f_)&&n[f_]||(n[f_]=++cT)}(this)},jl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Uw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Np(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function No(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(h_(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let c=0;c<s;c++)n[i+c]=r[c]}else n.push(r)}}function Ni(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ni.prototype.h=function(){this.defaultPrevented=!0};var dT=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",d_,e),jt.removeEventListener("test",d_,e)}catch{}return n}();function Ps(n){return/^[\s\xa0]*$/.test(n)}var ao=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Os(n,e){return n<e?-1:n>e?1:0}function Pp(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function Po(n){return-1!=Pp().indexOf(n)}function Vw(n){return Vw[" "](n),n}Vw[" "]=d_;var Op,n,bx=Po("Opera"),kh=Po("Trident")||Po("MSIE"),p_=Po("Edge"),$c=p_||kh,hT=Po("Gecko")&&!(-1!=Pp().toLowerCase().indexOf("webkit")&&!Po("Edge"))&&!(Po("Trident")||Po("MSIE"))&&!Po("Edge"),fT=-1!=Pp().toLowerCase().indexOf("webkit")&&!Po("Edge");function pT(){var n=jt.document;return n?n.documentMode:void 0}e:{var g_="",Rh=(n=Pp(),hT?/rv:([^\);]+)(\)|;)/.exec(n):p_?/Edge\/([\d\.]+)/.exec(n):kh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):fT?/WebKit\/(\S+)/.exec(n):bx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Rh&&(g_=Rh?Rh[1]:""),kh){var Bw=pT();if(null!=Bw&&Bw>parseFloat(g_)){Op=String(Bw);break e}}Op=g_}var gT={};var _T=jt.document&&kh&&(pT()||parseInt(Op,10))||void 0;function Nh(n,e){if(Ni.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hT){e:{try{Vw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nh.X.h.call(this)}}wi(Nh,Ni);var yT={2:"touch",3:"pen",4:"mouse"};Nh.prototype.h=function(){Nh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ph="closure_listenable_"+(1e6*Math.random()|0),vT=0;function wT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++vT,this.ba=this.ea=!1}function Up(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function m_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function bT(n){const e={};for(const t in n)e[t]=n[t];return e}const ET="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CT(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<ET.length;s++)t=ET[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function __(n){this.src=n,this.g={},this.h=0}function Hw(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Uw(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Up(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jw(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}__.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=jw(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new wT(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var $w="closure_lm_"+(1e6*Math.random()|0),qw={};function TT(n,e,t,r,i){if(r&&r.once)return DT(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)TT(n,e[s],t,r,i);return null}return t=y_(t),n&&n[Ph]?n.N(e,t,xh(r)?!!r.capture:!!r,i):IT(n,e,t,!1,r,i)}function IT(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=xh(i)?!!i.capture:!!i,h=Gw(n);if(h||(n[$w]=h=new __(n)),(t=h.add(e,t,r,c,s)).proxy)return t;if(r=function Ex(){const e=Cx;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dT||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(AT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function DT(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)DT(n,e[s],t,r,i);return null}return t=y_(t),n&&n[Ph]?n.O(e,t,xh(r)?!!r.capture:!!r,i):IT(n,e,t,!0,r,i)}function ST(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ST(n,e[s],t,r,i);else r=xh(r)?!!r.capture:!!r,t=y_(t),n&&n[Ph]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jw(s=n.g[e],t,r,i))&&(Up(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Gw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jw(e,t,r,i)),(t=-1<n?e[n]:null)&&Zw(t))}function Zw(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ph])Hw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(AT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Gw(e))?(Hw(t,n),0==t.h&&(t.src=null,e[$w]=null)):Up(n)}}}function AT(n){return n in qw?qw[n]:qw[n]="on"+n}function Cx(n,e){if(n.ba)n=!0;else{e=new Nh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Zw(n),n=t.call(r,e)}return n}function Gw(n){return(n=n[$w])instanceof __?n:null}var Ww="__closure_events_fn_"+(1e9*Math.random()>>>0);function y_(n){return"function"==typeof n?n:(n[Ww]||(n[Ww]=function(e){return n.handleEvent(e)}),n[Ww])}function Qr(){jl.call(this),this.i=new __(this),this.P=this,this.I=null}function oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ni(e,n);else if(e instanceof Ni)e.target=e.target||n;else{var i=e;CT(e=new Ni(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=Vp(c,r,!0,e)&&i}if(i=Vp(c=e.g=n,r,!0,e)&&i,i=Vp(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Vp(c=e.g=t[s],r,!1,e)&&i}function Vp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ba&&c.capture==t){var h=c.listener,p=c.ha||c.src;c.ea&&Hw(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}wi(Qr,jl),Qr.prototype[Ph]=!0,Qr.prototype.removeEventListener=function(n,e,t,r){ST(this,n,e,t,r)},Qr.prototype.M=function(){if(Qr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Up(t[r]);delete n.g[e],n.h--}}this.I=null},Qr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Qr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var v_=jt.JSON.stringify;function xT(){var n=qc;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $l,zw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kT,n=>n.reset());class kT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function RT(n){jt.setTimeout(()=>{throw n},0)}function Kw(n,e){$l||function Tx(){var n=jt.Promise.resolve(void 0);$l=function(){n.then(FP)}}(),Yw||($l(),Yw=!0),qc.add(n,e)}var Yw=!1,qc=new class MT{constructor(){this.h=this.g=null}add(e,t){const r=zw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function FP(){for(var n;n=xT();){try{n.h.call(n.g)}catch(t){RT(t)}var e=zw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yw=!1}function Oh(n,e){Qr.call(this),this.h=n||1,this.g=e||jt,this.j=Ri(this.lb,this),this.l=Date.now()}function NT(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function w_(n,e,t){if("function"==typeof n)t&&(n=Ri(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ri(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function Qw(n){n.g=w_(()=>{n.g=null,n.i&&(n.i=!1,Qw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}wi(Oh,Qr),(vt=Oh.prototype).ca=!1,vt.R=null,vt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),oi(this,"tick"),this.ca&&(NT(this),this.start()))}},vt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},vt.M=function(){Oh.X.M.call(this),NT(this),delete this.g};class LP extends jl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qw(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(n){jl.call(this),this.h=n,this.g={}}wi(Dt,jl);var PT=[];function OT(n,e,t,r){Array.isArray(t)||(t&&(PT[0]=t.toString()),t=PT);for(var i=0;i<t.length;i++){var s=TT(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function FT(n){m_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Zw(e)},n),n.g={}}function ql(){this.g=!0}function Zl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function UP(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return v_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Dt.prototype.M=function(){Dt.X.M.call(this),FT(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ql.prototype.Aa=function(){this.g=!1},ql.prototype.info=function(){};var ku={},Jw=null;function E_(){return Jw=Jw||new Qr}function Xw(n){Ni.call(this,ku.Pa,n)}function Fh(n){const e=E_();oi(e,new Xw(e))}function eb(n,e){Ni.call(this,ku.STAT_EVENT,n),this.stat=e}function Pi(n){const e=E_();oi(e,new eb(e,n))}function LT(n,e){Ni.call(this,ku.Qa,n),this.size=e}function Bp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}ku.Pa="serverreachability",wi(Xw,Ni),ku.STAT_EVENT="statevent",wi(eb,Ni),ku.Qa="timingevent",wi(LT,Ni);var C_={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Lh={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function tb(){}function VT(){}tb.prototype.h=null;var D_,Ru={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function T_(){Ni.call(this,"d")}function I_(){Ni.call(this,"c")}function S_(){}function Gl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Dt(this),this.O=Dx,this.T=new Oh(n=$c?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Uh}function Uh(){this.i=null,this.g="",this.h=!1}wi(T_,Ni),wi(I_,Ni),wi(S_,tb),S_.prototype.g=function(){return new XMLHttpRequest},S_.prototype.i=function(){return{}},D_=new S_;var Dx=45e3,nb={},A_={};function x_(n,e,t){n.K=1,n.v=jp(Wl(e)),n.s=t,n.P=!0,rb(n,null)}function rb(n,e){n.F=Date.now(),Hp(n),n.A=Wl(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),ob(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Uh,n.g=Vx(n.l,t?e:null,!n.s),0<n.N&&(n.L=new LP(Ri(n.La,n,n.g),n.N)),OT(n.S,n.g,"readystatechange",n.ib),e=n.H?bT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Fh(),function Ix(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var E=_[0];_=_[1];var D=E.split("_");c=2<=D.length&&"type"==D[1]?c+(E+"=")+_+"&":c+(E+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function ib(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function BT(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=HT(n,t),i==A_){4==e&&(n.o=4,Pi(14),r=!1),Zl(n.j,n.m,null,"[Incomplete Response]");break}if(i==nb){n.o=4,Pi(15),Zl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zl(n.j,n.m,i,null),$T(n,i)}ib(n)&&i!=A_&&i!=nb&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),vb(e),e.K=!0,Pi(11))):(Zl(n.j,n.m,t,"[Invalid Chunked Response]"),Vh(n),M_(n))}function HT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?A_:(t=Number(e.substring(t,r)),isNaN(t)?nb:(r+=1)+t>e.length?A_:(e=e.substr(r,t),n.C=r+t,e))}function Hp(n){n.V=Date.now()+n.O,jT(n,n.O)}function jT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Bp(Ri(n.gb,n),e)}function sb(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function M_(n){0==n.l.G||n.I||Lx(n.l,n)}function Vh(n){sb(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,NT(n.T),FT(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function $T(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ub(t.h,n)))if(!n.J&&ub(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Qp(t),V_(t)}yb(t),Pi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Bp(Ri(t.cb,t),6e3));if(1>=lb(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else zc(t,11)}else if((n.J||t.g==n)&&Qp(t),!Ps(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.T=_[0],_=_[1],2==t.G)if("c"==_[0]){t.I=_[1],t.ka=_[2];const E=_[3];null!=E&&(t.ma=E,t.j.info("VER="+t.ma));const D=_[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const x=_[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const U=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=r.h;s.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(cb(s,s.h),s.h=null))}if(r.D){const Y=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Y&&(r.za=Y,sr(r.F,r.D,Y))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=Ux(r,r.H?r.ka:null,r.V),c.J){tI(r.h,c);var h=c,p=r.J;p&&h.setTimeout(p),h.B&&(sb(h),Hp(h)),r.g=c}else uI(r);0<t.i.length&&jh(t)}else"stop"!=_[0]&&"close"!=_[0]||zc(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?zc(t,7):Yp(t):"noop"!=_[0]&&t.l&&t.l.wa(_),t.A=0)}Fh()}catch{}}function ZT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(h_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function k_(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(h_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function qT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(h_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(vt=Gl.prototype).setTimeout=function(n){this.O=n},vt.ib=function(n){n=n.target;const e=this.L;e&&3==Ha(n)?e.l():this.La(n)},vt.La=function(n){try{if(n==this.g)e:{const E=Ha(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>E)&&(3!=E||$c||this.g&&(this.h.h||this.g.fa()||oI(this.g)))){this.I||4!=E||7==e||Fh(),sb(this);var t=this.g.aa();this.Y=t;t:if(ib(this)){var r=oI(this.g);n="";var i=r.length,s=4==Ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vh(this),M_(this);var c="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function b_(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.U,E,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ps(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,Pi(12),Vh(this),M_(this);break e}Zl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$T(this,t)}this.P?(BT(this,E,c),$c&&this.i&&3==E&&(OT(this.S,this.T,"tick",this.hb),this.T.start())):(Zl(this.j,this.m,c,null),$T(this,c)),4==E&&Vh(this),this.i&&!this.I&&(4==E?Lx(this.l,this):(this.i=!1,Hp(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Pi(12)):(this.o=0,Pi(13)),Vh(this),M_(this)}}}catch{}},vt.hb=function(){if(this.g){var n=Ha(this.g),e=this.g.fa();this.C<e.length&&(sb(this),BT(this,n,e),this.i&&4!=n&&Hp(this))}},vt.cancel=function(){this.I=!0,Vh(this)},vt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Ir(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Fh(),Pi(17)),Vh(this),this.o=2,M_(this)):jT(this,this.V-n)};var GT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oo(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Oo){this.h=void 0!==e?e:n.h,R_(this,n.j),this.s=n.s,this.g=n.g,N_(this,n.m),this.l=n.l,e=n.i;var t=new Bh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zT(this,t),this.o=n.o}else n&&(t=String(n).match(GT))?(this.h=!!e,R_(this,t[1]||"",!0),this.s=$p(t[2]||""),this.g=$p(t[3]||"",!0),N_(this,t[4]),this.l=$p(t[5]||"",!0),zT(this,t[6]||"",!0),this.o=$p(t[7]||"")):(this.h=!!e,this.i=new Bh(null,this.h))}function Wl(n){return new Oo(n)}function R_(n,e,t){n.j=t?$p(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function N_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zT(n,e,t){e instanceof Bh?(n.i=e,function xx(n,e){e&&!n.j&&(Nu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(P_(this,r),ob(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=qp(e,QT)),n.i=new Bh(e,n.h))}function sr(n,e,t){n.i.set(e,t)}function jp(n){return sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $p(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Zp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Zp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Oo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qp(e,KT,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qp(e,KT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(qp(t,"/"==t.charAt(0)?Sx:YT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qp(t,Ax)),n.join("")};var KT=/[#\/\?@]/g,YT=/[#\?:]/g,Sx=/[#\?]/g,QT=/[#\?@]/g,Ax=/#/g;function Bh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Nu(n){n.g||(n.g=new Map,n.h=0,n.i&&function WT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function P_(n,e){Nu(n),e=Zc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function JT(n,e){return Nu(n),e=Zc(n,e),n.g.has(e)}function ob(n,e,t){P_(n,e),0<t.length&&(n.i=null,n.g.set(Zc(n,e),Np(t)),n.h+=t.length)}function Zc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function XT(n){this.l=n||ab,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ga&&jt.g.Ga()&&jt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(vt=Bh.prototype).add=function(n,e){Nu(this),this.i=null,n=Zc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},vt.forEach=function(n,e){Nu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},vt.oa=function(){Nu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},vt.W=function(n){Nu(this);let e=[];if("string"==typeof n)JT(this,n)&&(e=e.concat(this.g.get(Zc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},vt.set=function(n,e){return Nu(this),this.i=null,JT(this,n=Zc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},vt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},vt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=s;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var ab=10;function eI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function lb(n){return n.h?1:n.g?n.g.size:0}function ub(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function cb(n,e){n.g?n.g.add(e):n.h=e}function tI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Np(n.i)}function db(){}function kx(){this.g=new db}function Rx(n,e,t){const r=t||"";try{ZT(n,function(i,s){let c=i;xh(i)&&(c=v_(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Gp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Hh(n){this.l=n.ac||null,this.j=n.jb||!1}function O_(n,e){Qr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=hb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}XT.prototype.cancel=function(){if(this.i=nI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},db.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},db.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},wi(Hh,tb),Hh.prototype.g=function(){return new O_(this.l,this.j)},Hh.prototype.i=function(n){return function(){return n}}({}),wi(O_,Qr);var hb=0;function fb(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Wp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,zp(n)}function zp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(vt=O_.prototype).open=function(n,e){if(this.readyState!=hb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,zp(this)},vt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||jt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},vt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wp(this)),this.readyState=hb},vt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,zp(this)),this.g&&(this.readyState=3,zp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fb(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},vt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Wp(this):zp(this),3==this.readyState&&fb(this)}},vt.Va=function(n){this.g&&(this.response=this.responseText=n,Wp(this))},vt.Ua=function(n){this.g&&(this.response=n,Wp(this))},vt.ga=function(){this.g&&Wp(this)},vt.setRequestHeader=function(n,e){this.v.append(n,e)},vt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},vt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(O_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Px=jt.JSON.parse;function or(n){Qr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=F_,this.K=this.L=!1}wi(or,Qr);var F_="",rI=/^https?$/i,pb=["POST","PUT"];function iI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,L_(n),Kp(n)}function L_(n){n.D||(n.D=!0,oi(n,"complete"),oi(n,"error"))}function sI(n){if(n.h&&typeof Nr<"u"&&(!n.C[1]||4!=Ha(n)||2!=n.aa()))if(n.v&&4==Ha(n))w_(n.Ha,0,n);else if(oi(n,"readystatechange"),4==Ha(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(GT)[1]||null;if(!i&&jt.self&&jt.self.location){var s=jt.self.location.protocol;i=s.substr(0,s.length-1)}r=!rI.test(i?i.toLowerCase():"")}t=r}if(t)oi(n,"complete"),oi(n,"success");else{n.m=6;try{var c=2<Ha(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",L_(n)}}finally{Kp(n)}}}function Kp(n,e){if(n.g){Gc(n);const t=n.g,r=n.C[0]?d_:null;n.g=null,n.C=null,e||oi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Gc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function Ha(n){return n.g?n.g.readyState:0}function oI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case F_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Fx(n){let e="";return m_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function U_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Fx(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):sr(n,e,t))}function Wc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function aI(n){this.Ca=0,this.i=[],this.j=new ql,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Wc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Wc("baseRetryDelayMs",5e3,n),this.bb=Wc("retryDelaySeedMs",1e4,n),this.$a=Wc("forwardChannelMaxRetries",2,n),this.ta=Wc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new XT(n&&n.concurrentRequestLimit),this.Fa=new kx,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Yp(n){if(gb(n),3==n.G){var e=n.U++,t=Wl(n.F);sr(t,"SID",n.I),sr(t,"RID",e),sr(t,"TYPE","terminate"),$h(n,t),(e=new Gl(n,n.j,e,void 0)).K=2,e.v=jp(Wl(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Vx(e.l,null),e.g.da(e.v)),e.F=Date.now(),Hp(e)}dI(n)}function V_(n){n.g&&(vb(n),n.g.cancel(),n.g=null)}function gb(n){V_(n),n.u&&(jt.clearTimeout(n.u),n.u=null),Qp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function jh(n){eI(n.h)||n.m||(n.m=!0,Kw(n.Ja,n),n.C=0)}function mb(n,e){var t;t=e?e.m:n.U++;const r=Wl(n.F);sr(r,"SID",n.I),sr(r,"RID",t),sr(r,"AID",n.T),$h(n,r),n.o&&n.s&&U_(r,n.o,n.s),t=new Gl(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=_b(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),cb(n.h,t),x_(t,r,e)}function $h(n,e){n.ia&&m_(n.ia,function(t,r){sr(e,r,t)}),n.l&&ZT({},function(t,r){sr(e,r,t)})}function _b(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ri(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let _=i[p].h;const E=i[p].g;if(_-=s,0>_)s=Math.max(0,i[p].h-100),h=!1;else try{Rx(E,c,"req"+_+"_")}catch{r&&r(E)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function uI(n){n.g||n.u||(n.Z=1,Kw(n.Ia,n),n.A=0)}function yb(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Bp(Ri(n.Ia,n),wb(n,n.A)),n.A++,0))}function vb(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function cI(n){n.g=new Gl(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Wl(n.sa);sr(e,"RID","rpc"),sr(e,"SID",n.I),sr(e,"CI",n.L?"0":"1"),sr(e,"AID",n.T),sr(e,"TYPE","xmlhttp"),$h(n,e),n.o&&n.s&&U_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=jp(Wl(e)),t.s=null,t.P=!0,rb(t,n)}function Qp(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function Lx(n,e){var t=null;if(n.g==e){Qp(n),vb(n),n.g=null;var r=2}else{if(!ub(n.h,e))return;t=e.D,tI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;oi(r=E_(),new LT(r,t)),jh(n)}else uI(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function lI(n,e){return!(lb(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Bp(Ri(n.Ja,n,e),wb(n,n.C)),n.C++,0)))}(n,e)||2==r&&yb(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:zc(n,5);break;case 4:zc(n,10);break;case 3:zc(n,6);break;default:zc(n,2)}}function wb(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function zc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ri(n.kb,n);t||(t=new Oo("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||R_(t,"https"),jp(t)),function Nx(n,e){const t=new ql;if(jt.Image){const r=new Image;r.onload=Rp(Gp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Rp(Gp,t,r,"TestLoadImage: error",!1,e),r.onabort=Rp(Gp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Rp(Gp,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Pi(2);n.G=0,n.l&&n.l.va(e),dI(n),gb(n)}function dI(n){if(n.G=0,n.la=[],n.l){const e=nI(n.h);(0!=e.length||0!=n.i.length)&&(No(n.la,e),No(n.la,n.i),n.h.i.length=0,Np(n.i),n.i.length=0),n.l.ua()}}function Ux(n,e,t){var r=t instanceof Oo?Wl(t):new Oo(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),N_(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Oo(null,void 0);r&&R_(s,r),e&&(s.g=e),i&&N_(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&sr(r,t,e),sr(r,"VER",n.ma),$h(n,r),r}function Vx(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new or(t&&n.Da&&!n.ra?new Hh({jb:!0}):n.ra)).Ka(n.H),e}function hI(){}function B_(){if(kh&&!(10<=Number(_T)))throw Error("Environmental error: no available transport.")}function ds(n,e){Qr.call(this),this.g=new aI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Ps(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ps(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new qh(this)}function fI(n){T_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function pI(){I_.call(this),this.status=1}function qh(n){this.g=n}(vt=or.prototype).Ka=function(n){this.L=n},vt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():D_.g(),this.C=function UT(n){return n.h||(n.h=n.i())}(this.u?this.u:D_),this.g.onreadystatechange=Ri(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void iI(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=Uw(pb,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of t)this.g.setRequestHeader(s,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gc(this),0<this.B&&((this.K=function Ox(n){return kh&&function mT(){return function wx(n){var e=gT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ao(String(Op)).split("."),t=ao("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",s=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Os(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Os(0==i[2].length,0==s[2].length)||Os(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ri(this.qa,this)):this.A=w_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){iI(this,s)}},vt.qa=function(){typeof Nr<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oi(this,"timeout"),this.abort(8))},vt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,oi(this,"complete"),oi(this,"abort"),Kp(this))},vt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kp(this,!0)),or.X.M.call(this)},vt.Ha=function(){this.s||(this.F||this.v||this.l?sI(this):this.fb())},vt.fb=function(){sI(this)},vt.aa=function(){try{return 2<Ha(this)?this.g.status:-1}catch{return-1}},vt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},vt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Px(e)}},vt.Ea=function(){return this.m},vt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(vt=aI.prototype).ma=8,vt.G=1,vt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Gl(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=bT(s),CT(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_b(this,i,e),sr(t=Wl(this.F),"RID",n),sr(t,"CVER",22),this.D&&sr(t,"X-HTTP-Session-Id",this.D),$h(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(Fx(s)))+"&"+e:this.o&&U_(t,this.o,s)),cb(this.h,i),this.Ya&&sr(t,"TYPE","init"),this.O?(sr(t,"$req",e),sr(t,"SID","null"),i.Z=!0,x_(i,t,null)):x_(i,t,e),this.G=2}}else 3==this.G&&(n?mb(this,n):0==this.i.length||eI(this.h)||mb(this))},vt.Ia=function(){if(this.u=null,cI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Bp(Ri(this.eb,this),n)}},vt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Pi(10),V_(this),cI(this))},vt.cb=function(){null!=this.v&&(this.v=null,V_(this),yb(this),Pi(19))},vt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Pi(2)):(this.j.info("Failed to ping google.com"),Pi(1))},(vt=hI.prototype).xa=function(){},vt.wa=function(){},vt.va=function(){},vt.ua=function(){},vt.Ra=function(){},B_.prototype.g=function(n,e){return new ds(n,e)},wi(ds,Qr),ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Pi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Ux(n,null,n.V),jh(n)},ds.prototype.close=function(){Yp(this.g)},ds.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=v_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&jh(e)},ds.prototype.M=function(){this.g.l=null,delete this.j,Yp(this.g),delete this.g,ds.X.M.call(this)},wi(fI,T_),wi(pI,I_),wi(qh,hI),qh.prototype.xa=function(){oi(this.g,"a")},qh.prototype.wa=function(n){oi(this.g,new fI(n))},qh.prototype.va=function(n){oi(this.g,new pI)},qh.prototype.ua=function(){oi(this.g,"b")},B_.prototype.createWebChannel=B_.prototype.g,ds.prototype.send=ds.prototype.u,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,C_.NO_ERROR=0,C_.TIMEOUT=8,C_.HTTP_ERROR=6,Lh.COMPLETE="complete",VT.EventType=Ru,Ru.OPEN="a",Ru.CLOSE="b",Ru.ERROR="c",Ru.MESSAGE="d",Qr.prototype.listen=Qr.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.Oa,or.prototype.getLastErrorCode=or.prototype.Ea,or.prototype.getStatus=or.prototype.aa,or.prototype.getResponseJson=or.prototype.Sa,or.prototype.getResponseText=or.prototype.fa,or.prototype.send=or.prototype.da,or.prototype.setWithCredentials=or.prototype.Ka;var Bx=Ba.createWebChannelTransport=function(){return new B_},Hx=Ba.getStatEventTarget=function(){return E_()},bb=Ba.ErrorCode=C_,jx=Ba.EventType=Lh,$x=Ba.Event=ku,gI=Ba.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Jp=Ba.FetchXmlHttpFactory=Hh,Xp=Ba.WebChannel=VT,mI=Ba.XhrIo=or;const Eb="@firebase/firestore";class Jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");let Kc="9.14.0";const Pu=new Ns.Yd("@firebase/firestore");function Cb(){return Pu.logLevel}function je(n,...e){if(Pu.logLevel<=Ns.in.DEBUG){const t=e.map(Tb);Pu.debug(`Firestore (${Kc}): ${n}`,...t)}}function Pr(n,...e){if(Pu.logLevel<=Ns.in.ERROR){const t=e.map(Tb);Pu.error(`Firestore (${Kc}): ${n}`,...t)}}function Yc(n,...e){if(Pu.logLevel<=Ns.in.WARN){const t=e.map(Tb);Pu.warn(`Firestore (${Kc}): ${n}`,...t)}}function Tb(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function At(n,e){n||ct()}function Je(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}}class Gx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wx{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let c=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const _=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},p=_=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Or)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new Zh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new Jr(e)}}class H_{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(At(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class j_{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new H_(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _I{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zx{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.A=t.token,new _I(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yI(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Gh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function vI(n){return n+"\0"}class yr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yr.fromMillis(Date.now())}static fromDate(e){return yr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new yr(0,0))}static max(){return new Rt(new yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qc{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Qc{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const Ib=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ar extends Qc{construct(e,t,r){return new ar(e,t,r)}static isValidIdentifier(e){return Ib.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ar(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ue(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ue(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ue(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(s(),i++)}if(s(),c)throw new Ue(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ar(t)}static emptyPath(){return new ar([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(fn.fromString(e))}static fromName(e){return new Xe(fn.fromString(e).popFirst(5))}static empty(){return new Xe(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new fn(e.slice()))}}class q_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Db(n){return n.fields.find(e=>2===e.kind)}function Jc(n){return n.fields.filter(e=>2!==e.kind)}q_.UNKNOWN_ID=-1;class Wh{constructor(e,t){this.fieldPath=e,this.kind=t}}class eg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eg(0,Fs.min())}}function Sb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new yr(t+1,0):new yr(t,r));return new Fs(i,Xe.empty(),e)}function Ab(n){return new Fs(n.readTime,n.key,-1)}class Fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fs(Rt.min(),Xe.empty(),-1)}static max(){return new Fs(Rt.max(),Xe.empty(),-1)}}function Z_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const xb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zl(n){return G_.apply(this,arguments)}function G_(){return G_=(0,Ee.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==xb)throw n;je("LocalStore","Unexpectedly lost primary lease")}),G_.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,s=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++s,c&&s===i&&t()},p=>r(p))}),c=!0,s===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const s=e.length,c=new Array(s);let h=0;for(let p=0;p<s;p++){const _=p;t(e[_]).next(E=>{c[_]=E,++h,h===s&&r(c)},E=>i(E))}})}static doWhile(e,t){return new ae((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Kl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new W_(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Mb(r.target.error);this.P.reject(new W_(e,i))}}static open(e,t,r,i){try{return new Kl(t,e.transaction(i,r))}catch(s){throw new W_(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new CI(t)}}class Fo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Fo.D((0,L.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),Ou(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(Fo.N())return!0;const e=(0,L.z$)(),t=Fo.D(e),r=0<t&&t<10,i=Fo.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{i(new W_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Ue(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ue(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new W_(e,h))},s.onupgradeneeded=c=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.F(e);const p=Kl.open(s.db,e,c?"readonly":"readwrite",r),_=i(p).next(E=>(p.V(),E)).catch(E=>(p.abort(E),ae.reject(E))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,E="FirebaseError"!==_.name&&h<3;if(je("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),s.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Yx{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ou(this.U.delete())}}class W_ extends Ue{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xc(n){return"IndexedDbTransactionError"===n.name}class CI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ou(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),Ou(this.store.add(e))}get(e){return Ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),Ou(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),Ou(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(c,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ae((s,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,c,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=s=>{const c=Mb(s.target.error);i(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ae((i,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new Yx(h),_=t(h.primaryKey,h.value,p);if(_ instanceof ae){const E=_.catch(D=>(p.done(),ae.reject(D)));r.push(E)}p.isDone?i():null===p.G?h.continue():h.continue(p.G)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ou(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Mb(r.target.error);t(i)}})}let zh=!1;function Mb(n){const e=Fo.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zh||(zh=!0,setTimeout(()=>{throw r},0)),r}}return n}class kb{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{je("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Xc(r)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield zl(r)}yield t.nt(6e4)}))}}class Qx{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return ae.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return je("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(h=>{i-=h,r.add(c)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,s)).next(h=>(je("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const c=Ab(s);Z_(c,r)>0&&(r=c)}),new Fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function TI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ed(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function II(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ji.at=-1;class lr{constructor(e,t){this.comparator=e,this.root=t||ai.EMPTY}insert(e,t){return new lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ai.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tg(this.root,e,this.comparator,!1)}getReverseIterator(){return new tg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tg(this.root,e,this.comparator,!0)}}class tg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ai{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ai.RED,this.left=i??ai.EMPTY,this.right=s??ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ai(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ai.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}ai.EMPTY=null,ai.RED=!0,ai.BLACK=!1,ai.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ai(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new z_(this.data.getIterator())}getIteratorFrom(e){return new z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ng(n){return n.hasNext()?n.getNext():void 0}class hs{constructor(e){this.fields=e,e.sort(ar.comparator)}static empty(){return new hs([])}unionWith(e){let t=new Cn(ar.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new $r(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new $r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const Kh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fu(n){if(At(!!n),"string"==typeof n){let e=0;const t=Kh.exec(n);if(At(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Yl(n){return"string"==typeof n?$r.fromBase64String(n):$r.fromUint8Array(n)}function DI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function SI(n){const e=n.mapValue.fields.__previous_value__;return DI(e)?SI(e):e}function K_(n){const e=Fu(n.mapValue.fields.__local_write_time__.timestampValue);return new yr(e.seconds,e.nanos)}class Xx{constructor(e,t,r,i,s,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Lu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}function rg(n){return null==n}function Yh(n){return 0===n&&1/n==-1/0}function Rb(n){return"number"==typeof n&&Number.isInteger(n)&&!Yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ig={nullValue:"NULL_VALUE"};function Vu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DI(n)?4:tM(n)?9007199254740991:10:ct()}function ja(n,e){if(n===e)return!0;const t=Vu(n);if(t!==Vu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return K_(n).isEqual(K_(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Fu(r.timestampValue),c=Fu(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Yl(n.bytesValue).isEqual(Yl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vr(r.geoPointValue.latitude)===vr(i.geoPointValue.latitude)&&vr(r.geoPointValue.longitude)===vr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vr(r.integerValue)===vr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=vr(r.doubleValue),c=vr(i.doubleValue);return s===c?Yh(s)===Yh(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return Gh(n.arrayValue.values||[],e.arrayValue.values||[],ja);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(TI(s)!==TI(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!ja(s[h],c[h])))return!1;return!0}(n,e);default:return ct()}var i}function sg(n,e){return void 0!==(n.values||[]).find(t=>ja(t,e))}function Ql(n,e){if(n===e)return 0;const t=Vu(n),r=Vu(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,s){const c=vr(i.integerValue||i.doubleValue),h=vr(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return AI(n.timestampValue,e.timestampValue);case 4:return AI(K_(n),K_(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,s){const c=Yl(i),h=Yl(s);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const _=$t(c[p],h[p]);if(0!==_)return _}return $t(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const c=$t(vr(i.latitude),vr(s.latitude));return 0!==c?c:$t(vr(i.longitude),vr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const _=Ql(c[p],h[p]);if(_)return _}return $t(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Uu.mapValue&&s===Uu.mapValue)return 0;if(i===Uu.mapValue)return 1;if(s===Uu.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=s.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let E=0;E<h.length&&E<_.length;++E){const D=$t(h[E],_[E]);if(0!==D)return D;const x=Ql(c[h[E]],p[_[E]]);if(0!==x)return x}return $t(h.length,_.length)}(n.mapValue,e.mapValue);default:throw ct()}}function AI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Fu(n),r=Fu(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function td(n){return Y_(n)}function Y_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Fu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Yl(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=Y_(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const h of i)c?c=!1:s+=",",s+=`${h}:${Y_(r.fields[h])}`;return s+"}"}(n.mapValue):ct();var e}function Bu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Q_(n){return!!n&&"integerValue"in n}function og(n){return!!n&&"arrayValue"in n}function xI(n){return!!n&&"nullValue"in n}function eM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ag(n){return!!n&&"mapValue"in n}function J_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ed(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=J_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=J_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tM(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function BP(n){return"nullValue"in n?ig:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bu(Lu.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function HP(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bu(Lu.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Uu:ct()}function nM(n,e){const t=Ql(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rM(n,e){const t=Ql(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ag(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=J_(t)}setAll(e){let t=ar.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=J_(c):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());ag(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ag(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ed(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Oi(J_(this.value))}}function iM(n){const e=[];return ed(n.fields,(t,r)=>{const i=new ar([t]);if(ag(r)){const s=iM(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new hs(e)}class Fn{constructor(e,t,r,i,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new Fn(e,0,Rt.min(),Rt.min(),Oi.empty(),0)}static newFoundDocument(e,t,r){return new Fn(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new Fn(e,2,t,Rt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Rt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jP{constructor(e,t=null,r=[],i=[],s=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=h,this.ht=null}}function Nb(n,e=null,t=[],r=[],i=null,s=null,c=null){return new jP(n,e,t,r,i,s,c)}function $a(n){const e=Je(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+td(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),rg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>td(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>td(r)).join(",")),e.ht=t}return e.ht}function Qh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!lM(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ja(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uM(n.startAt,e.startAt)&&uM(n.endAt,e.endAt)}function Pb(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Jh(n,e){return n.filters.filter(t=>t instanceof li&&t.field.isEqual(e))}function Ob(n,e,t){let r=ig,i=!0;for(const s of Jh(n,e)){let c=ig,h=!0;switch(s.op){case"<":case"<=":c=BP(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=ig}nM({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];nM({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function kI(n,e,t){let r=Uu,i=!0;for(const s of Jh(n,e)){let c=Uu,h=!0;switch(s.op){case">=":case">":c=HP(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=Uu}rM({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];rM({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class li extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new $P(e,t,r):"array-contains"===t?new X_(e,r):"in"===t?new aM(e,r):"not-in"===t?new qP(e,r):"array-contains-any"===t?new ZP(e,r):new li(e,t,r)}static lt(e,t,r){return"in"===t?new sM(e,r):new oM(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ql(t,this.value)):null!==t&&Vu(this.value)===Vu(t)&&this.ft(Ql(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class $P extends li{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.ft(t)}}class sM extends li{constructor(e,t){super(e,"in",t),this.keys=RI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oM extends li{constructor(e,t){super(e,"not-in",t),this.keys=RI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class X_ extends li{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return og(t)&&sg(t.arrayValue,this.value)}}class aM extends li{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sg(this.value.arrayValue,t)}}class qP extends li{constructor(e,t){super(e,"not-in",t)}matches(e){if(sg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sg(this.value.arrayValue,t)}}class ZP extends li{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!og(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sg(this.value.arrayValue,r))}}class nd{constructor(e,t){this.position=e,this.inclusive=t}}class Xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function lM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function NI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],c=n.position[i];if(r=s.field.isKeyField()?Xe.comparator(Xe.fromName(c.referenceValue),t.key):Ql(c,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function uM(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ja(n.position[t],e.position[t]))return!1;return!0}class Jl{constructor(e,t=null,r=[],i=[],s=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this._t=null,this.wt=null}}function Fb(n,e,t,r,i,s,c,h){return new Jl(n,e,t,r,i,s,c,h)}function rd(n){return new Jl(n)}function cM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ls(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Lb(n){for(const e of n.filters)if(e.dt())return e.field;return null}function lg(n){return null!==n.collectionGroup}function ef(n){const e=Je(n);if(null===e._t){e._t=[];const t=Lb(e),r=Ls(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Xh(t)),e._t.push(new Xh(ar.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Xh(ar.keyField(),s))}}}return e._t}function Gn(n){const e=Je(n);if(!e.wt)if("F"===e.limitType)e.wt=Nb(e.path,e.collectionGroup,ef(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of ef(e))t.push(new Xh(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new nd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new nd(e.startAt.position,e.startAt.inclusive):null;e.wt=Nb(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function ey(n,e,t){return new Jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function id(n,e){return Qh(Gn(n),Gn(e))&&n.limitType===e.limitType}function PI(n){return`${$a(Gn(n))}|lt:${n.limitType}`}function Ub(n){return`Query(target=${function MI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${td(r.value)}`;var r}).join(", ")}]`),rg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>td(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>td(t)).join(",")),`Target(${e})`}(Gn(n))}; limitType=${n.limitType})`}function ug(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,c){const h=NI(i,s,c);return i.inclusive?h<=0:h<0}(t.startAt,ef(t),r)||t.endAt&&!function(i,s,c){const h=NI(i,s,c);return i.inclusive?h>=0:h>0}(t.endAt,ef(t),r)));var t,r}function Vb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Bb(n){return(e,t)=>{let r=!1;for(const i of ef(n)){const s=dM(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function dM(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,s,c){const h=s.data.field(i),p=c.data.field(i);return null!==h&&null!==p?Ql(h,p):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function Hb(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function jb(n){return{integerValue:""+n}}function OI(n,e){return Rb(e)?jb(e):Hb(n,e)}class cg{constructor(){this._=void 0}}function hM(n,e,t){return n instanceof sd?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof eu?qa(n,e):n instanceof od?fM(n,e):function(r,i){const s=Xl(r,i),c=FI(s)+FI(r.yt);return Q_(s)&&Q_(r.yt)?jb(c):Hb(r.It,c)}(n,e)}function $b(n,e,t){return n instanceof eu?qa(n,e):n instanceof od?fM(n,e):t}function Xl(n,e){return n instanceof tf?Q_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class sd extends cg{}class eu extends cg{constructor(e){super(),this.elements=e}}function qa(n,e){const t=LI(e);for(const r of n.elements)t.some(i=>ja(i,r))||t.push(r);return{arrayValue:{values:t}}}class od extends cg{constructor(e){super(),this.elements=e}}function fM(n,e){let t=LI(e);for(const r of n.elements)t=t.filter(i=>!ja(i,r));return{arrayValue:{values:t}}}class tf extends cg{constructor(e,t){super(),this.It=e,this.yt=t}}function FI(n){return vr(n.integerValue||n.doubleValue)}function LI(n){return og(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class dg{constructor(e,t){this.field=e,this.transform=t}}class GP{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ty(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hg{}function pM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new rf(n.key,Qn.none()):new ad(n.key,n.data,Qn.none());{const t=n.data,r=Oi.empty();let i=new Cn(ar.comparator);for(let s of e.fields)if(!i.has(s)){let c=t.field(s);null===c&&s.length>1&&(s=s.popLast(),c=t.field(s)),null===c?r.delete(s):r.set(s,c),i=i.add(s)}return new Za(n.key,r,new hs(i.toArray()),Qn.none())}}function qb(n,e,t){n instanceof ad?function(r,i,s){const c=r.value.clone(),h=pg(r.fieldTransforms,i,s.transformResults);c.setAll(h),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Za?function(r,i,s){if(!ty(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=pg(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(fg(r)),h.setAll(c),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nf(n,e,t,r){return n instanceof ad?function(i,s,c,h){if(!ty(i.precondition,s))return c;const p=i.value.clone(),_=Gb(i.fieldTransforms,h,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Za?function(i,s,c,h){if(!ty(i.precondition,s))return c;const p=Gb(i.fieldTransforms,h,s),_=s.data;return _.setAll(fg(i)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(c=t,ty(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function VI(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Xl(r.transform,i||null);null!=s&&(null===t&&(t=Oi.empty()),t.set(r.field,s))}return t||null}function Zb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Gh(t,r,(i,s)=>function UI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof eu&&r instanceof eu||t instanceof od&&r instanceof od?Gh(t.elements,r.elements,ja):t instanceof tf&&r instanceof tf?ja(t.yt,r.yt):t instanceof sd&&r instanceof sd);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ad extends hg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Za extends hg{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pg(n,e,t){const r=new Map;At(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],c=s.transform,h=e.data.field(s.field);r.set(s.field,$b(c,h,t[i]))}return r}function Gb(n,e,t){const r=new Map;for(const i of n){const s=i.transform,c=t.data.field(i.field);r.set(i.field,hM(s,c,e))}return r}class rf extends hg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ny extends hg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class BI{constructor(e){this.count=e}}var qr,mn;function gM(n){switch(n){default:return ct();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function mM(n){if(void 0===n)return Pr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case qr.OK:return fe.OK;case qr.CANCELLED:return fe.CANCELLED;case qr.UNKNOWN:return fe.UNKNOWN;case qr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case qr.INTERNAL:return fe.INTERNAL;case qr.UNAVAILABLE:return fe.UNAVAILABLE;case qr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case qr.NOT_FOUND:return fe.NOT_FOUND;case qr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case qr.ABORTED:return fe.ABORTED;case qr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case qr.DATA_LOSS:return fe.DATA_LOSS;default:return ct()}}(mn=qr||(qr={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";class tu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ed(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return II(this.inner)}size(){return this.innerSize}}const _M=new lr(Xe.comparator);function fs(){return _M}const HI=new lr(Xe.comparator);function ry(...n){let e=HI;for(const t of n)e=e.insert(t.key,t);return e}function yM(n){let e=HI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nu(){return iy()}function vM(){return iy()}function iy(){return new tu(n=>n.toString(),(n,e)=>n.isEqual(e))}const wM=new lr(Xe.comparator),sy=new Cn(Xe.comparator);function Yt(...n){let e=sy;for(const t of n)e=e.add(t);return e}const bM=new Cn($t);function gg(){return bM}class Lo{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,sf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lo(Rt.min(),i,gg(),fs(),Yt())}}class sf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sf(r,t,Yt(),Yt(),Yt())}}class af{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class oy{constructor(e,t){this.targetId=e,this.At=t}}class jI{constructor(e,t,r=$r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ay{constructor(){this.Rt=0,this.bt=EM(),this.Pt=$r.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Yt(),t=Yt(),r=Yt();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new sf(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=EM()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Wb{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=fs(),this.qt=mg(),this.Kt=new Cn($t)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(Pb(s))if(0===r){const c=new Xe(s.path);this.jt(t,c,Fn.newNoDocument(c,Rt.min()))}else At(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,c)=>{const h=this.Xt(c);if(h){if(s.current&&Pb(h.target)){const p=new Xe(h.target.path);null!==this.Ut.get(p)||this.ee(c,p)||this.jt(c,p,Fn.newNoDocument(p,e))}s.Dt&&(t.set(c,s.xt()),s.Nt())}});let r=Yt();this.qt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.Ut.forEach((s,c)=>c.setReadTime(e));const i=new Lo(e,t,this.Kt,this.Ut,r);return this.Ut=fs(),this.qt=mg(),this.Kt=new Cn($t),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new ay,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Cn($t),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new ay),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function mg(){return new lr(Xe.comparator)}function EM(){return new lr(Xe.comparator)}const WP={asc:"ASCENDING",desc:"DESCENDING"},zP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class KP{constructor(e,t){this.databaseId=e,this.gt=t}}function lf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $I(n,e){return n.gt?e.toBase64():e.toUint8Array()}function CM(n,e){return lf(n,e.toTimestamp())}function ui(n){return At(!!n),Rt.fromTimestamp(function(e){const t=Fu(e);return new yr(t.seconds,t.nanos)}(n))}function zb(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Kb(n){const e=fn.fromString(n);return At(SM(e)),e}function uf(n,e){return zb(n.databaseId,e.path)}function Uo(n,e){const t=Kb(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(ly(t))}function Yb(n,e){return zb(n.databaseId,e)}function qI(n){const e=Kb(n);return 4===e.length?fn.emptyPath():ly(e)}function cf(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ly(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function TM(n,e,t){return{name:uf(n,e),fields:t.value.mapValue.fields}}function Qb(n,e,t){const r=Uo(n,e.name),i=ui(e.updateTime),s=new Oi({mapValue:{fields:e.fields}}),c=Fn.newFoundDocument(r,i,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function _g(n,e){let t;if(e instanceof ad)t={update:TM(n,e.key,e.value)};else if(e instanceof rf)t={delete:uf(n,e.key)};else if(e instanceof Za)t={update:TM(n,e.key,e.data),updateMask:nO(e.fieldMask)};else{if(!(e instanceof ny))return ct();t={verify:uf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof sd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof od)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tf)return{fieldPath:s.field.canonicalString(),increment:c.yt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:CM(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function ZI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Qn.updateTime(ui(i.updateTime)):void 0!==i.exists?Qn.exists(i.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,c){let h=null;"setToServerValue"in c?(At("REQUEST_TIME"===c.setToServerValue),h=new sd):"appendMissingElements"in c?h=new eu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new od(c.removeAllFromArray.values||[]):"increment"in c?h=new tf(s,c.increment):ct();const p=ar.fromServerFormat(c.fieldPath);return new dg(p,h)}(n,i)):[];var i;if(e.update){const i=Uo(n,e.update.name),s=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new hs((e.updateMask.fieldPaths||[]).map(_=>ar.fromServerFormat(_)));return new Za(i,s,c,t,r)}return new ad(i,s,t,r)}if(e.delete){const i=Uo(n,e.delete);return new rf(i,t)}if(e.verify){const i=Uo(n,e.verify);return new ny(i,t)}return ct()}function GI(n,e){return{documents:[Yb(n,e.path)]}}function Xb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Yb(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Yb(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const _=p.map(E=>function(D){if("=="===D.op){if(eM(D.value))return{unaryFilter:{field:yg(D.field),op:"IS_NAN"}};if(xI(D.value))return{unaryFilter:{field:yg(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(eM(D.value))return{unaryFilter:{field:yg(D.field),op:"IS_NOT_NAN"}};if(xI(D.value))return{unaryFilter:{field:yg(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yg(D.field),op:XP(D.op),value:D.value}}}(E));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:yg((E=_).field),direction:JP(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(_=e.limit,n.gt||rg(_)?_:{value:_});var _,h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function WI(n){let e=qI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){At(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=DM(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(E=>{return new Xh(df((D=E).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(E){let D;return D="object"==typeof E?E.value:E,rg(D)?null:D}(t.limit));let p=null;var E;t.startAt&&(p=new nd((E=t.startAt).values||[],!!E.before));let _=null;return t.endAt&&(_=function(E){return new nd(E.values||[],!E.before)}(t.endAt)),Fb(e,i,c,s,h,"F",p,_)}function DM(n){return n?void 0!==n.unaryFilter?[tO(n)]:void 0!==n.fieldFilter?[eO(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>DM(e)).reduce((e,t)=>e.concat(t)):ct():[]}function JP(n){return WP[n]}function XP(n){return zP[n]}function yg(n){return{fieldPath:n.canonicalString()}}function df(n){return ar.fromServerFormat(n.fieldPath)}function eO(n){return li.create(df(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function tO(n){switch(n.unaryFilter.op){case"IS_NAN":const e=df(n.unaryFilter.field);return li.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=df(n.unaryFilter.field);return li.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=df(n.unaryFilter.field);return li.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=df(n.unaryFilter.field);return li.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function nO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ps(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=o(e)),e=rO(n.get(t),e);return o(e)}function rO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function o(n){return n+"\x01\x01"}function a(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&ct(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,c),i+="\0";break;case"\x11":i+=n.substring(s,c+1);break;default:ct()}s=c+2}return new fn(r)}const u=["userId","batchId"];function d(n,e){return[n,ps(e)]}function f(n,e,t){return[n,ps(e),t]}const g={},v=["prefixPath","collectionGroup","readTime","documentId"],b=["prefixPath","collectionGroup","documentId"],T=["collectionGroup","readTime","prefixPath","documentId"],A=["canonicalId","targetId"],N=["targetId","path"],B=["path","targetId"],K=["collectionId","parent"],se=["indexId","uid"],Te=["uid","sequenceNumber"],qe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qe=["indexId","uid","orderedDocumentKey"],ht=["userId","collectionPath","documentId"],xt=["userId","collectionPath","largestBatchId"],Oe=["userId","collectionGroup","largestBatchId"],Pt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tn=[...Pt,"documentOverlays"],Jn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hu=Jn,e0=[...Hu,"indexConfiguration","indexState","indexEntries"];class vg extends EI{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=Je(n);return Fo.M(t.ie,e)}class wg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qb(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vM();return this.mutations.forEach(i=>{const s=e.get(i.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=t.has(i.key)?null:h;const p=pM(c,h);null!==p&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Gh(this.mutations,e.mutations,(t,r)=>Zb(t,r))&&Gh(this.baseMutations,e.baseMutations,(t,r)=>Zb(t,r))}}class bg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){At(e.mutations.length===r.length);let i=wM;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new bg(e,t,r,i)}}class Eg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ga{constructor(e,t,r,i,s=Rt.min(),c=Rt.min(),h=$r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class uy{constructor(e){this.re=e}}function iO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:uf(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:lf(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Cg(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:Cg(e.version)}}var i,s;return r}function zI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Cg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tg(n){const e=new yr(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function Ig(n,e){const t=(e.baseMutations||[]).map(s=>ZI(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const c=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(c.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>ZI(n.re,s)),i=yr.fromMillis(e.localWriteTimeMs);return new wg(e.batchId,i,t,r)}function n0(n){const e=Tg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tg(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var i;return void 0!==n.query.documents?(At(1===(i=n.query).documents.length),r=Gn(rd(qI(i.documents[0])))):r=Gn(WI(n.query)),new Ga(r,n.targetId,0,n.lastListenSequenceNumber,e,t,$r.fromBase64String(n.resumeToken))}function sO(n,e){const t=Cg(e.snapshotVersion),r=Cg(e.lastLimboFreeSnapshotVersion);let i;i=Pb(e.target)?GI(n.re,e.target):Xb(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$a(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function AM(n){const e=WI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ey(e,e.limit,"L"):e}function xM(n,e){return new Eg(e.largestBatchId,ZI(n.re,e.overlayMutation))}function oO(n,e){const t=e.path.lastSegment();return[n,ps(e.path.popLast()),t]}function aO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Cg(r.readTime),documentKey:ps(r.documentKey.path),largestBatchId:r.largestBatchId}}class lH{getBundleMetadata(e,t){return lO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Tg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return lO(e).put({bundleId:(r=t).id,createTime:Cg(ui(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return uO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:AM(i.bundledQuery),readTime:Tg(i.readTime)};var i})}saveNamedQuery(e,t){return uO(e).put({name:(r=t).name,readTime:Cg(ui(r.readTime)),bundledQuery:r.bundledQuery});var r}}function lO(n){return Zr(n,"bundles")}function uO(n){return Zr(n,"namedQueries")}class KI{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new KI(e,t.uid||"")}getOverlay(e,t){return r0(e).get(oO(this.userId,t)).next(r=>r?xM(this.It,r):null)}getOverlays(e,t){const r=nu();return ae.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,c)=>{const h=new Eg(t,c);i.push(this.ue(e,h))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ps(c.getCollectionPath())));const s=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(r0(e).Y("collectionPathOverlayIndex",h))}),ae.waitFor(s)}getOverlaysForCollection(e,t,r){const i=nu(),s=ps(t),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return r0(e).W("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const _=xM(this.It,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=nu();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return r0(e).Z({index:"collectionGroupOverlayIndex",range:h},(p,_,E)=>{const D=xM(this.It,_);s.size()<i||D.largestBatchId===c?(s.set(D.getKey(),D),c=D.largestBatchId):E.done()}).next(()=>s)}ue(e,t){return r0(e).put(function(r,i,s){const[c,h,p]=oO(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:_g(r.re,s.mutation)}}(this.It,this.userId,t))}}function r0(n){return Zr(n,"documentOverlays")}class Dg{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(vr(e.integerValue));else if("doubleValue"in e){const r=vr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Yh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Yl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?tM(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ct()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Xe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function uH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function cO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=uH(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Dg.Te=new Dg;class cH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=cO(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=cO(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class dH{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class hH{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class s0{constructor(){this.Be=new cH,this.Le=new dH(this.Be),this.Ue=new hH(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Sg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Sg(this.indexId,this.documentKey,this.arrayValue,r)}}function Ag(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=dO(n.arrayValue,e.arrayValue),0!==t?t:(t=dO(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function dO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class fH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Db(e);if(void 0!==t&&!this.ze(t))return!1;const r=Jc(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[s++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class pH{constructor(){this.Ye=new MM}addToCollectionParentIndex(e,t){return this.Ye.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Fs.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class MM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Cn(fn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Cn(fn.comparator)).toArray()}}const YI=new Uint8Array(0);class gH{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new MM,this.Ze=new tu(r=>$a(r),(r,i)=>Qh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:ps(i)};return hO(e).put(s)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[vI(t),""],!1,!0);return hO(e).W(i).next(s=>{for(const c of s){if(c.collectionId!==t)break;r.push(a(c.parent))}return r})}addFieldIndex(e,t){const r=QI(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const s=r.add(i);if(t.indexState){const c=a0(e);return s.next(h=>{c.put(aO(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=QI(e),i=a0(e),s=o0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=o0(e);let i=!0;const s=new Map;return ae.forEach(this.tn(t),c=>this.en(e,c).next(h=>{i&&(i=!!h),s.set(c,h)})).next(()=>{if(i){let c=Yt();const h=[];return ae.forEach(s,(p,_)=>{var E;je("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(ze=>`${ze.fieldPath}:${ze.kind}`).join(",")}`} to execute ${$a(t)}`);const D=function(ze,Ye){const Ct=Db(Ye);if(void 0===Ct)return null;for(const St of Jh(ze,Ct.fieldPath))switch(St.op){case"array-contains-any":return St.value.arrayValue.values||[];case"array-contains":return[St.value]}return null}(_,p),x=function(ze,Ye){const Ct=new Map;for(const St of Jc(Ye))for(const ln of Jh(ze,St.fieldPath))switch(ln.op){case"==":case"in":Ct.set(St.fieldPath.canonicalString(),ln.value);break;case"not-in":case"!=":return Ct.set(St.fieldPath.canonicalString(),ln.value),Array.from(Ct.values())}return null}(_,p),P=function(ze,Ye){const Ct=[];let St=!0;for(const ln of Jc(Ye)){const ei=0===ln.kind?Ob(ze,ln.fieldPath,ze.startAt):kI(ze,ln.fieldPath,ze.startAt);Ct.push(ei.value),St&&(St=ei.inclusive)}return new nd(Ct,St)}(_,p),U=function(ze,Ye){const Ct=[];let St=!0;for(const ln of Jc(Ye)){const ei=0===ln.kind?kI(ze,ln.fieldPath,ze.endAt):Ob(ze,ln.fieldPath,ze.endAt);Ct.push(ei.value),St&&(St=ei.inclusive)}return new nd(Ct,St)}(_,p),Y=this.nn(p,_,P),ne=this.nn(p,_,U),Ae=this.sn(p,_,x),Ze=this.rn(p.indexId,D,Y,P.inclusive,ne,U.inclusive,Ae);return ae.forEach(Ze,ze=>r.J(ze,t.limit).next(Ye=>{Ye.forEach(Ct=>{const St=Xe.fromSegments(Ct.documentKey);c.has(St)||(c=c.add(St),h.push(St))})}))}).next(()=>h)}return ae.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,c,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),_=p/(null!=t?t.length:1),E=[];for(let D=0;D<p;++D){const x=t?this.on(t[D/_]):YI,P=this.un(e,x,r[D%_],i),U=this.cn(e,x,s[D%_],c),Y=h.map(ne=>this.un(e,x,ne,!0));E.push(...this.createRange(P,U,Y))}return E}un(e,t,r,i){const s=new Sg(e,Xe.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new Sg(e,Xe.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new fH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let c=null;for(const h of s)r.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return ae.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(c){let h=new Cn(ar.comparator),p=!1;for(const _ of c.filters){const E=_;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:h=h.add(E.field))}for(const _ of c.orderBy)_.field.isKeyField()||(h=h.add(_.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new s0;for(const i of Jc(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const c=r.qe(i.kind);Dg.Te.ce(s,c)}return r.$e()}on(e){const t=new s0;return Dg.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new s0;return Dg.Te.ce(Bu(this.databaseId,t),r.qe(function(i){const s=Jc(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new s0);let s=0;for(const c of Jc(e)){const h=r[s++];for(const p of i)if(this.ln(t,c.fieldPath)&&og(h))i=this.fn(i,c,h);else{const _=p.qe(c.kind);Dg.Te.ce(h,_)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new s0;p.seed(h.$e()),Dg.Te.ce(c,p.qe(t.kind)),s.push(p)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof li&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=QI(e),i=a0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const c=[];return ae.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(_,E){const D=E?new eg(E.sequenceNumber,new Fs(Tg(E.readTime),new Xe(a(E.documentKey)),E.largestBatchId)):eg.empty(),x=_.fields.map(([P,U])=>new Wh(ar.fromServerFormat(P),U));return new q_(_.indexId,_.collectionGroup,x,D)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=QI(e),s=a0(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ae.forEach(h,p=>s.put(aO(p.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,s)=>{const c=r.get(i.collectionGroup);return(c?ae.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ae.forEach(h,p=>this.wn(e,i,p).next(_=>{const E=this.mn(s,p);return _.isEqual(E)?ae.resolve():this.gn(e,s,p,_,E)}))))})}yn(e,t,r,i){return o0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return o0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=o0(e);let s=new Cn(Ag);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,h)=>{s=s.add(new Sg(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}mn(e,t){let r=new Cn(Ag);const i=this.an(t,e);if(null==i)return r;const s=Db(t);if(null!=s){const c=e.data.field(s.fieldPath);if(og(c))for(const h of c.arrayValue.values||[])r=r.add(new Sg(t.indexId,e.key,this.on(h),i))}else r=r.add(new Sg(t.indexId,e.key,YI,i));return r}gn(e,t,r,i,s){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,p,_,E,D){const x=h.getIterator(),P=p.getIterator();let U=ng(x),Y=ng(P);for(;U||Y;){let ne=!1,Ae=!1;if(U&&Y){const Ze=_(U,Y);Ze<0?Ae=!0:Ze>0&&(ne=!0)}else null!=U?Ae=!0:ne=!0;ne?(E(Y),Y=ng(P)):Ae?(D(U),U=ng(x)):(U=ng(x),Y=ng(P))}}(i,s,Ag,h=>{c.push(this.yn(e,t,r,h))},h=>{c.push(this.pn(e,t,r,h))}),ae.waitFor(c)}_n(e){let t=1;return a0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>Ag(c,h)).filter((c,h,p)=>!h||0!==Ag(c,p[h-1]));const i=[];i.push(e);for(const c of r){const h=Ag(c,e),p=Ag(c,t);if(0===h)i[0]=e.Ke();else if(h>0&&p<0)i.push(c),i.push(c.Ke());else if(p>0)break}i.push(t);const s=[];for(let c=0;c<i.length;c+=2)s.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,YI,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,YI,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fO)}getMinOffset(e,t){return ae.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ct())).next(fO)}}function hO(n){return Zr(n,"collectionParents")}function o0(n){return Zr(n,"indexEntries")}function QI(n){return Zr(n,"indexConfiguration")}function a0(n){return Zr(n,"indexState")}function fO(n){At(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Z_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fs(e.readTime,e.documentKey,t)}const pO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new lo(e,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.Z({range:c},(E,D,x)=>(h++,x.delete()));s.push(p.next(()=>{At(1===h)}));const _=[];for(const E of t.mutations){const D=f(e,E.key.path,t.batchId);s.push(i.delete(D)),_.push(E.key)}return ae.waitFor(s).next(()=>_)}function JI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}lo.DEFAULT_COLLECTION_PERCENTILE=10,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lo.DEFAULT=new lo(41943040,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lo.DISABLED=new lo(-1,0,0);class XI{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){At(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new XI(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hf(e).Z({index:"userMutationsIndex",range:r},(i,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=cy(e),c=hf(e);return c.add({}).next(h=>{At("number"==typeof h);const p=new wg(h,t,r,i),_=function(x,P,U){const Y=U.baseMutations.map(Ae=>_g(x.re,Ae)),ne=U.mutations.map(Ae=>_g(x.re,Ae));return{userId:P,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:Y,mutations:ne}}(this.It,this.userId,p),E=[];let D=new Cn((x,P)=>$t(x.canonicalString(),P.canonicalString()));for(const x of i){const P=f(this.userId,x.key.path,h);D=D.add(x.key.path.popLast()),E.push(c.put(_)),E.push(s.put(P,g))}return D.forEach(x=>{E.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[h]=p.keys()}),ae.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return hf(e).get(t).next(r=>r?(At(r.userId===this.userId),Ig(this.It,r)):null)}Tn(e,t){return this.In[t]?ae.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return hf(e).Z({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(At(h.batchId>=r),s=Ig(this.It,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hf(e).W("userMutationsIndex",t).next(r=>r.map(i=>Ig(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=d(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return cy(e).Z({range:i},(c,h,p)=>{const[_,E,D]=c,x=a(E);if(_===this.userId&&t.path.isEqual(x))return hf(e).get(D).next(P=>{if(!P)throw ct();At(P.userId===this.userId),s.push(Ig(this.It,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn($t);const i=[];return t.forEach(s=>{const c=d(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=cy(e).Z({range:h},(_,E,D)=>{const[x,P,U]=_,Y=a(P);x===this.userId&&s.path.isEqual(Y)?r=r.add(U):D.done()});i.push(p)}),ae.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=d(this.userId,r),c=IDBKeyRange.lowerBound(s);let h=new Cn($t);return cy(e).Z({range:c},(p,_,E)=>{const[D,x,P]=p,U=a(x);D===this.userId&&r.isPrefixOf(U)?U.length===i&&(h=h.add(P)):E.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(hf(e).get(s).next(c=>{if(null===c)throw ct();At(c.userId===this.userId),r.push(Ig(this.It,c))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return gO(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return cy(e).Z({range:r},(s,c,h)=>{if(s[0]===this.userId){const p=a(s[1]);i.push(p)}else h.done()}).next(()=>{At(0===i.length)})})}containsKey(e,t){return mO(e,this.userId,t)}Rn(e){return _O(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mO(n,e,t){const r=d(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return cy(n).Z({range:s,X:!0},(h,p,_)=>{const[E,D,x]=h;E===e&&D===i&&(c=!0),_.done()}).next(()=>c)}function hf(n){return Zr(n,"mutations")}function cy(n){return Zr(n,"documentMutations")}function _O(n){return Zr(n,"mutationQueues")}class xg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new xg(0)}static vn(){return new xg(-1)}}class mH{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new xg(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Rt.fromTimestamp(new yr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>dy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return dy(e).Z((c,h)=>{const p=n0(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>ae.waitFor(s)).next(()=>i)}forEachTarget(e,t){return dy(e).Z((r,i)=>{const s=n0(i);t(s)})}Vn(e){return yO(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}Sn(e,t){return yO(e).put("targetGlobalKey",t)}Dn(e,t){return dy(e).put(sO(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$a(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return dy(e).Z({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const _=n0(h);Qh(t,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ff(e);return t.forEach(c=>{const h=ps(c.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=ff(e);return ae.forEach(t,s=>{const c=ps(s.path);return ae.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ff(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ff(e);let s=Yt();return i.Z({range:r,X:!0},(c,h,p)=>{const _=a(c[1]),E=new Xe(_);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=ps(t.path),i=IDBKeyRange.bound([r],[vI(r)],!1,!0);let s=0;return ff(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,h],p,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}se(e,t){return dy(e).get(t).next(r=>r?n0(r):null)}}function dy(n){return Zr(n,"targets")}function yO(n){return Zr(n,"targetGlobal")}function ff(n){return Zr(n,"targetDocuments")}function vO([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class _H{constructor(e){this.xn=e,this.buffer=new Cn(vO),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xc(r)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield zl(r)}yield t.Fn(3e5)}))}}class vH{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Ji.at);const r=new _H(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(pO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pO):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,c,h,p,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,c=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(_=Date.now(),Cb()<=Ns.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${D} documents in `+(_-p)+`ms\nTotal Duration: ${_-E}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class wH{constructor(e,t){this.db=e,this.garbageCollector=new vH(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return eD(e,r)}removeReference(e,t,r){return eD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return eD(e,t)}Gn(e,t){return function(r,i){let s=!1;return _O(r).tt(c=>mO(r,c,i).next(h=>(h&&(s=!0),ae.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(c,h)=>{if(h<=t){const p=this.Gn(e,c).next(_=>{if(!_)return s++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Rt.min()),ff(e).delete([0,ps(c.path)])))});i.push(p)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return eD(e,t)}Kn(e,t){const r=ff(e);let i,s=Ji.at;return r.Z({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:_})=>{0===c?(s!==Ji.at&&t(new Xe(a(i)),s),s=_,i=p):s=Ji.at}).next(()=>{s!==Ji.at&&t(new Xe(a(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function eD(n,e){return ff(n).put((r=n.currentSequenceNumber,{targetId:0,path:ps(e.path),sequenceNumber:r}));var r}class wO{constructor(){this.changes=new tu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bH{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mg(e).put(r)}removeEntry(e,t,r){return Mg(e).delete(function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],zI(s),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return Mg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(l0(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return Mg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(l0(t))},(i,s)=>{r={document:this.jn(t,s),size:JI(s)}}).next(()=>r)}getEntries(e,t){let r=fs();return this.zn(e,t,(i,s)=>{const c=this.jn(i,s);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=fs(),i=new lr(Xe.comparator);return this.zn(e,t,(s,c)=>{const h=this.jn(s,c);r=r.insert(s,h),i=i.insert(s,JI(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ae.resolve();let i=new Cn(TO);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(l0(i.first()),l0(i.last())),c=i.getIterator();let h=c.getNext();return Mg(e).Z({index:"documentKeyIndex",range:s},(p,_,E)=>{const D=Xe.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;h&&TO(h,D)<0;)r(h,null),h=c.getNext();h&&h.isEqual(D)&&(r(h,_),h=c.hasNext()?c.getNext():null),h?E.j(l0(h)):E.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),zI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mg(e).W(IDBKeyRange.bound(i,s,!0)).next(c=>{let h=fs();for(const p of c){const _=this.jn(Xe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(_.key,_)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=fs();const c=CO(t,r),h=CO(t,Fs.max());return Mg(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,_,E)=>{const D=this.jn(Xe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(D.key,D),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new EH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return EO(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}Qn(e,t){return EO(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function t0(n,e){let t;if(e.document)t=Qb(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Tg(e.noDocument.readTime);t=Fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Xe.fromSegments(e.unknownDocument.path),i=Tg(e.unknownDocument.version);t=Fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new yr(r[0],r[1]);return Rt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return Fn.newInvalidDocument(e)}}function bO(n){return new bH(n)}class EH extends wO{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new tu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Cn((s,c)=>$t(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,h.readTime)),c.isValidDocument()){const p=iO(this.Yn.It,c);i=i.add(s.path.popLast()),r+=JI(p)-h.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=iO(this.Yn.It,c.convertToNoDocument(Rt.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function EO(n){return Zr(n,"remoteDocumentGlobal")}function Mg(n){return Zr(n,"remoteDocumentsV14")}function l0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function CO(n,e){const t=e.documentKey.path.toArray();return[n,zI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function TO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=$t(t[s],r[s]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class CH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class IO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&nf(r.mutation,i,hs.empty(),yr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=nu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let c=ry();return s.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=nu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let s=fs();const c=iy(),h=iy();return t.forEach((p,_)=>{const E=r.get(_.key);i.has(_.key)&&(void 0===E||E.mutation instanceof Za)?s=s.insert(_.key,_):void 0!==E&&(c.set(_.key,E.mutation.getFieldMask()),nf(E.mutation,_,E.mutation.getFieldMask(),yr.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((_,E)=>c.set(_,E)),t.forEach((_,E)=>{var D;return h.set(_,new CH(E,null!==(D=c.get(_))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=iy();let i=new lr((c,h)=>c-h),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let E=r.get(p)||hs.empty();E=h.applyToLocalView(_,E),r.set(p,E);const D=(i.get(h.batchId)||Yt()).add(p);i=i.insert(h.batchId,D)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),_=p.key,E=p.value,D=vM();E.forEach(x=>{if(!s.has(x)){const P=pM(t.get(x),r.get(x));null!==P&&D.set(x,P),s=s.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,_,D))}return ae.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):lg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const c=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ae.resolve(nu());let h=-1,p=s;return c.next(_=>ae.forEach(_,(E,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),s.get(E)?ae.resolve():this.getBaseDocument(e,E,D).next(x=>{p=p.insert(E,x)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,p,_,Yt())).next(E=>({batchId:h,changes:yM(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=ry();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=ry();return this.indexManager.getCollectionParents(e,i).next(c=>ae.forEach(c,h=>{const p=(_=t,E=h.child(i),new Jl(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,E;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((E,D)=>{s=s.insert(E,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((h,p)=>{const _=p.getKey();null===i.get(_)&&(i=i.insert(_,Fn.newInvalidDocument(_)))});let c=ry();return i.forEach((h,p)=>{const _=s.get(h);void 0!==_&&nf(_.mutation,p,hs.empty(),yr.now()),ug(t,p)&&(c=c.insert(h,p))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ae.resolve(Fn.newInvalidDocument(t))}}class TH{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ae.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ui(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:AM(r.bundledQuery),readTime:ui(r.readTime)}),ae.resolve();var r}}class IH{constructor(){this.overlays=new lr(Xe.comparator),this.es=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nu();return ae.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=nu(),s=t.length+1,c=new Xe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new lr((_,E)=>_-E);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let E=s.get(_.largestBatchId);null===E&&(E=nu(),s=s.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const h=nu(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,E)=>h.set(_,E)),!(h.size()>=i)););return ae.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Eg(t,r));let s=this.es.get(t);void 0===s&&(s=Yt(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class kM{constructor(){this.ns=new Cn(Fi.ss),this.rs=new Cn(Fi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Fi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Fi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Xe(new fn([])),r=new Fi(t,e),i=new Fi(t,e+1),s=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Xe(new fn([])),r=new Fi(t,e),i=new Fi(t,e+1);let s=Yt();return this.rs.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new Fi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Xe.comparator(e.key,t.key)||$t(e._s,t._s)}static os(e,t){return $t(e._s,t._s)||Xe.comparator(e.key,t.key)}}class DH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Cn(Fi.ss)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const c=new wg(s,t,r,i);this.mutationQueue.push(c);for(const h of i)this.gs=this.gs.add(new Fi(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fi(t,0),i=new Fi(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],c=>{const h=this.ys(c._s);s.push(h)}),ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn($t);return t.forEach(i=>{const s=new Fi(i,0),c=new Fi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],h=>{r=r.add(h._s)})}),ae.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Xe.isDocumentKey(s)||(s=s.child(""));const c=new Fi(new Xe(s),0);let h=new Cn($t);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(p._s)),!0)},c),ae.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){At(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ae.forEach(t.mutations,i=>{const s=new Fi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Fi(t,0),i=this.gs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class SH{constructor(e){this.Es=e,this.docs=new lr(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=fs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Fn.newInvalidDocument(i))}),ae.resolve(r)}getAllFromCollection(e,t,r){let i=fs();const s=new Xe(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||Z_(Ab(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ct()}As(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new AH(this)}getSize(e){return ae.resolve(this.size)}}class AH extends wO{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class xH{constructor(e){this.persistence=e,this.Rs=new tu(t=>$a(t),Qh),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new kM,this.targetCount=0,this.vs=xg.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ae.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new xg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Dn(t),ae.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ae.waitFor(s).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Ps.containsKey(t))}}class DO{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ji(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new xH(this),this.indexManager=new pH,this.remoteDocumentCache=new SH(r=>this.referenceDelegate.xs(r)),this.It=new uy(t),this.Ns=new TH(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new DH(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new MH(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return ae.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class MH extends EI{constructor(e){super(),this.currentSequenceNumber=e}}class tD{constructor(e){this.persistence=e,this.Fs=new kM,this.$s=null}static Bs(e){return new tD(e)}get Ls(){if(this.$s)return this.$s;throw ct()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ls,r=>{const i=Xe.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,Rt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ae.or([()=>ae.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class kH{constructor(e){this.It=e}$(e,t,r,i){const s=new Kl("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u,{unique:!0}),h.createObjectStore("documentMutations"),SO(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),SO(e)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").W().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u,{unique:!0});const E=p.store("mutations"),D=_.map(x=>E.put(x));return ae.waitFor(D)})}(e,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(s))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(s))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,s))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(s))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:ht});p.createIndex("collectionPathOverlayIndex",xt,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Oe,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:v});p.createIndex("documentKeyIndex",b),p.createIndex("collectionGroupIndex",T)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,s))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:se}).createIndex("sequenceNumberIndex",Te,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:qe}).createIndex("documentKeyIndex",Qe,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=JI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ae.forEach(i,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(h=>ae.forEach(h,p=>{At(p.userId===s.userId);const _=Ig(this.It,p);return gO(e,s.userId,_).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((c,h)=>{const p=new fn(c),_=[0,ps(p)];s.push(t.get(_).next(E=>E?ae.resolve():t.put({targetId:0,path:ps(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:K});const r=t.store("collectionParents"),i=new MM,s=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:ps(p)})}};return t.store("remoteDocuments").Z({X:!0},(c,h)=>{const p=new fn(c);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,h,p],_)=>{const E=a(h);return s(E.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=n0(i),c=sO(this.It,s);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,c)=>{const h=t.store("remoteDocumentsV14"),p=(_=c,_.document?new Xe(fn.fromString(_.document.name).popFirst(5)):_.noDocument?Xe.fromSegments(_.noDocument.path):_.unknownDocument?Xe.fromSegments(_.unknownDocument.path):ct()).path.toArray();var _;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(E))}).next(()=>ae.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=bO(this.It),s=new DO(tD.Bs,this.It.re);return r.W().next(c=>{const h=new Map;return c.forEach(p=>{var _;let E=null!==(_=h.get(p.userId))&&void 0!==_?_:Yt();Ig(this.It,p).keys().forEach(D=>E=E.add(D)),h.set(p.userId,E)}),ae.forEach(h,(p,_)=>{const E=new Jr(_),D=KI.oe(this.It,E),x=s.getIndexManager(E),P=XI.oe(E,this.It,x,s.referenceDelegate);return new IO(i,P,D,x).recalculateAndSaveOverlaysForDocumentKeys(new vg(t,Ji.at),p).next()})})}}function SO(n){n.createObjectStore("targetDocuments",{keyPath:N}).createIndex("documentTargetsIndex",B,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",A,{unique:!0}),n.createObjectStore("targetGlobal")}const RM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class NM{constructor(e,t,r,i,s,c,h,p,_,E,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=c,this.document=h,this.Js=_,this.Ys=E,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!NM.C())throw new Ue(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wH(this,i),this.ii=t+"main",this.It=new uy(p),this.ri=new Fo(this.ii,this.Xs,new kH(this.It)),this.Cs=new mH(this.referenceDelegate,this.It),this.remoteDocumentCache=bO(this.It),this.Ns=new lH,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===E&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(fe.FAILED_PRECONDITION,RM);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ji(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Xc(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return u0(e).get("owner").next(t=>ae.resolve(this.mi(t)))}gi(e){return nD(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Zr(r,"clientMetadata");return i.W().next(s=>{const c=e.Ii(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return ae.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ae.resolve(!0):u0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ue(fe.FAILED_PRECONDITION,RM);return!1}}return!(!this.networkEnabled||!this.inForeground)||nD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new vg(t,Ji.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>nD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return XI.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gH(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return KI.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(c=this.Xs)?e0:14===c?Hu:13===c?Jn:12===c?Tn:11===c?Pt:void ct();var c;let h;return this.ri.runTransaction(e,i,s,p=>(h=new vg(p,this.Ss?this.Ss.next():Ji.at),"readwrite-primary"===t?this.fi(h).next(_=>!!_||this.di(h)).next(_=>{if(!_)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ue(fe.FAILED_PRECONDITION,xb);return r(h)}).next(_=>this.wi(h).next(()=>_)):this.Vi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Vi(e){return u0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(fe.FAILED_PRECONDITION,RM)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return u0(e).put("owner",t)}static C(){return Fo.C()}_i(e){const t=u0(e);return t.get("owner").next(r=>this.mi(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function u0(n){return Zr(n,"owner")}function nD(n){return Zr(n,"clientMetadata")}function PM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class OM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new OM(e,t.fromCache,r,i)}}class AO{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(cM(t))return ae.resolve(null);let r=Gn(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ey(t,null,"F"),r=Gn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const c=Yt(...s);return this.Ni.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.Fi(t,h);return this.$i(t,_,c,p.readTime)?this.ki(e,ey(t,null,"F")):this.Bi(e,_,t,p)}))})))}Oi(e,t,r,i){return cM(t)||i.isEqual(Rt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const c=this.Fi(t,s);return this.$i(t,c,r,i)?this.Mi(e,t):(Cb()<=Ns.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ub(t)),this.Bi(e,c,t,Sb(i,-1)))})}Fi(e,t){let r=new Cn(Bb(e));return t.forEach((i,s)=>{ug(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return Cb()<=Ns.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Ub(t)),this.Ni.getDocumentsMatchingQuery(e,t,Fs.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class RH{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new lr($t),this.qi=new tu(s=>$a(s),Qh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function xO(n,e,t,r){return new RH(n,e,t,r)}function MO(n,e){return FM.apply(this,arguments)}function FM(){return FM=(0,Ee.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const c=[],h=[];let p=Yt();for(const _ of i){c.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}for(const _ of s){h.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(_=>({ji:_,removedBatchIds:c,addedBatchIds:h}))})})}),FM.apply(this,arguments)}function NH(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,_){const E=p.batch,D=E.keys();let x=ae.resolve();return D.forEach(P=>{x=x.next(()=>_.getEntry(h,P)).next(U=>{const Y=p.docVersions.get(P);At(null!==Y),U.version.compareTo(Y)<0&&(E.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Yt();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kO(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function PH(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((E,D)=>{const x=i.get(D);if(!x)return;h.push(t.Cs.removeMatchingKeys(s,E.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(s,E.addedDocuments,D)));let P=x.withSequenceNumber(s.currentSequenceNumber);var U,Y,ne;e.targetMismatches.has(D)?P=P.withResumeToken($r.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),i=i.insert(D,P),Y=P,ne=E,(0===(U=x).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(s,P))});let p=fs(),_=Yt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),h.push(RO(s,c,e.documentUpdates).next(E=>{p=E.Wi,_=E.zi})),!r.isEqual(Rt.min())){const E=t.Cs.getLastRemoteSnapshotVersion(s).next(D=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(E)}return ae.waitFor(h).next(()=>c.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(t.Ui=i,s))}function RO(n,e,t){let r=Yt(),i=Yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let c=fs();return t.forEach((h,p)=>{const _=s.get(h);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(Rt.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):je("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",p.version)}),{Wi:c,zi:i}})}function OH(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hy(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,ae.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new Ga(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function fy(n,e,t){return LM.apply(this,arguments)}function LM(){return LM=(0,Ee.Z)(function*(n,e,t){const r=Je(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Xc(c))throw c;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),LM.apply(this,arguments)}function rD(n,e,t){const r=Je(n);let i=Rt.min(),s=Yt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,_){const E=Je(h),D=E.qi.get(_);return void 0!==D?ae.resolve(E.Ui.get(D)):E.Cs.getTargetData(p,_)}(r,c,Gn(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Rt.min(),t?s:Yt())).next(h=>(OO(r,Vb(e),h),{documents:h,Hi:s})))}function NO(n,e){const t=Je(n),r=Je(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(c=>c?c.target:null))}function PO(n,e){const t=Je(n),r=t.Ki.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Sb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OO(t,e,i),i))}function OO(n,e,t){let r=n.Ki.get(e)||Rt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function UM(){return UM=(0,Ee.Z)(function*(n,e,t,r){const i=Je(n);let s=Yt(),c=fs();for(const _ of t){const E=e.Ji(_.metadata.name);_.document&&(s=s.add(E));const D=e.Yi(_);D.setReadTime(e.Xi(_.metadata.readTime)),c=c.insert(E,D)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield hy(i,(_=r,Gn(rd(fn.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>RO(_,h,c).next(E=>(h.apply(_),E)).next(E=>i.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.Cs.addMatchingKeys(_,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,E.Wi,E.zi)).next(()=>E.Wi)))}),UM.apply(this,arguments)}function LH(n,e){return VM.apply(this,arguments)}function VM(){return VM=(0,Ee.Z)(function*(n,e,t=Yt()){const r=yield hy(n,Gn(AM(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const c=ui(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(s,e);const h=r.withResumeToken($r.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(s,h).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),VM.apply(this,arguments)}function FO(n,e){return`firestore_clients_${n}_${e}`}function LO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function BM(n,e){return`firestore_targets_${n}_${e}`}class iD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(s=new Ue(i.error.code,i.error.message))),c?new iD(e,t,i.state,s):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class c0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ue(r.error.code,r.error.message))),s?new c0(e,r.state,i):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=gg();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Rb(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return i?new sD(e,s):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class HM{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new HM(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jM{constructor(){this.activeTargetIds=gg()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $M{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new lr($t),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=FO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new jM),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(FO(e.persistenceKey,i));if(s){const c=sD.Zi(i,s);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(BM(this.persistenceKey,e));if(r){const i=c0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(BM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let c=Ji.at;if(null!=s)try{const h=JSON.parse(s);At("number"==typeof h),c=h}catch(h){Pr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Ji.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new iD(this.currentUser,e,t,r),s=LO(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=LO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=BM(this.persistenceKey,e),s=new c0(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return sD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return iD.Zi(new Jr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return c0.Zi(i,t)}yr(e){return HM.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),c=[],h=[];return s.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Br(c,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=gg();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UO{constructor(){this.Lr=new jM,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new jM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UH{qr(e){}shutdown(){}}class VO{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const VH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class HH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const c=this.ho(e,t);je("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,s),this.fo(e,c,h,r).then(p=>(je("RestConnection","Received: ",p),p),p=>{throw Yc("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",r),p})}_o(e,t,r,i,s,c){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${VH[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,c)=>{const h=new mI;h.setWithCredentials(!0),h.listenOnce(jx.COMPLETE,()=>{var _;try{switch(h.getLastErrorCode()){case bb.NO_ERROR:const E=h.getResponseJson();je("Connection","XHR received:",JSON.stringify(E)),s(E);break;case bb.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),c(new Ue(fe.DEADLINE_EXCEEDED,"Request time out"));break;case bb.HTTP_ERROR:const D=h.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const P=null===(_=x)||void 0===_?void 0:_.error;if(P&&P.status&&P.message){const U=function(Y){const ne=Y.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(ne)>=0?ne:fe.UNKNOWN}(P.status);c(new Ue(U,P.message))}else c(new Ue(fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ue(fe.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Bx(),c=Hx(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Jp({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=i.join("");je("Connection","Creating WebChannel: "+p,h);const _=s.createWebChannel(p,h);let E=!1,D=!1;const x=new BH({Hr:U=>{D?je("Connection","Not sending because WebChannel is closed:",U):(E||(je("Connection","Opening WebChannel transport."),_.open(),E=!0),je("Connection","WebChannel sending:",U),_.send(U))},Jr:()=>_.close()}),P=(U,Y,ne)=>{U.listen(Y,Ae=>{try{ne(Ae)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return P(_,Xp.EventType.OPEN,()=>{D||je("Connection","WebChannel transport opened.")}),P(_,Xp.EventType.CLOSE,()=>{D||(D=!0,je("Connection","WebChannel transport closed"),x.io())}),P(_,Xp.EventType.ERROR,U=>{D||(D=!0,Yc("Connection","WebChannel transport errored:",U),x.io(new Ue(fe.UNAVAILABLE,"The operation could not be completed")))}),P(_,Xp.EventType.MESSAGE,U=>{var Y;if(!D){const ne=U.data[0];At(!!ne);const Ae=ne,Ze=Ae.error||(null===(Y=Ae[0])||void 0===Y?void 0:Y.error);if(Ze){je("Connection","WebChannel received error:",Ze);const ze=Ze.status;let Ye=function(St){const ln=qr[St];if(void 0!==ln)return mM(ln)}(ze),Ct=Ze.message;void 0===Ye&&(Ye=fe.INTERNAL,Ct="Unknown error status: "+ze+" with message "+Ze.message),D=!0,x.io(new Ue(Ye,Ct)),_.close()}else je("Connection","WebChannel received:",ne),x.ro(ne)}}),P(c,$x.STAT_EVENT,U=>{U.stat===gI.PROXY?je("Connection","Detected buffering proxy"):U.stat===gI.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function BO(){return typeof window<"u"?window:null}function oD(){return typeof document<"u"?document:null}function d0(n){return new KP(n,!0)}class qM{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class HO{constructor(e,t,r,i,s,c,h,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new qM(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ue(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jH extends HO{constructor(e,t,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function IM(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ct(),i=e.targetChange.targetIds||[],s=function(p,_){return p.gt?(At(void 0===_||"string"==typeof _),$r.fromBase64String(_||"")):(At(void 0===_||_ instanceof Uint8Array),$r.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const _=void 0===p.code?fe.UNKNOWN:mM(p.code);return new Ue(_,p.message||"")}(c);t=new jI(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Uo(n,r.document.name),s=ui(r.document.updateTime),c=new Oi({mapValue:{fields:r.document.fields}}),h=Fn.newFoundDocument(i,s,c);t=new af(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Uo(n,r.document),s=r.readTime?ui(r.readTime):Rt.min(),c=Fn.newNoDocument(i,s);t=new af([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Uo(n,r.document);t=new af([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,s=new BI(r.count||0);t=new oy(r.targetId,s)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Rt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Rt.min():s.readTime?ui(s.readTime):Rt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=cf(this.It),t.addTarget=function(i,s){let c;const h=s.target;return c=Pb(h)?{documents:GI(i,h)}:{query:Xb(i,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=$I(i,s.resumeToken):s.snapshotVersion.compareTo(Rt.min())>0&&(c.readTime=lf(i,s.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function QP(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=cf(this.It),t.removeTarget=e,this.Bo(t)}}class $H extends HO{constructor(e,t,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function YP(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,i){let s=ui(r.updateTime?r.updateTime:i);return s.isEqual(Rt.min())&&(s=ui(i)),new GP(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ui(e.commitTime);return this.listener.Zo(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=cf(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_g(this.It,r))};this.Bo(t)}}class qH extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ue(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(fe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection._o(e,t,r,s,c,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(fe.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class GH{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Pr(t),this.ou=!1):je("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class WH{constructor(e,t,r,i,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(h=>{r.enqueueAndForget((0,Ee.Z)(function*(){var p;ld(c)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ee.Z)(function*(_){const E=Je(_);E._u.add(4),yield py(E),E.gu.set("Unknown"),E._u.delete(4),yield h0(E)}),function(_){return p.apply(this,arguments)})(c))}))}),this.gu=new GH(r,i)}}function h0(n){return GM.apply(this,arguments)}function GM(){return GM=(0,Ee.Z)(function*(n){if(ld(n))for(const e of n.wu)yield e(!0)}),GM.apply(this,arguments)}function py(n){return WM.apply(this,arguments)}function WM(){return WM=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),WM.apply(this,arguments)}function aD(n,e){const t=Je(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),YM(t)?KM(t):my(t).ko()&&zM(t,e))}function f0(n,e){const t=Je(n),r=my(t);t.du.delete(e),r.ko()&&jO(t,e),0===t.du.size&&(r.ko()?r.Fo():ld(t)&&t.gu.set("Unknown"))}function zM(n,e){n.yu.Mt(e.targetId),my(n).zo(e)}function jO(n,e){n.yu.Mt(e),my(n).Ho(e)}function KM(n){n.yu=new Wb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),my(n).start(),n.gu.uu()}function YM(n){return ld(n)&&!my(n).No()&&n.du.size>0}function ld(n){return 0===Je(n)._u.size}function $O(n){n.yu=void 0}function zH(n){return QM.apply(this,arguments)}function QM(){return QM=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{zM(n,e)})}),QM.apply(this,arguments)}function KH(n,e){return JM.apply(this,arguments)}function JM(){return JM=(0,Ee.Z)(function*(n,e){$O(n),YM(n)?(n.gu.hu(e),KM(n)):n.gu.set("Unknown")}),JM.apply(this,arguments)}function YH(n,e,t){return XM.apply(this,arguments)}function XM(){return XM=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof jI&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,s){const c=s.cause;for(const h of s.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.du.delete(h),i.yu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lD(n,r)}else if(e instanceof af?n.yu.Gt(e):e instanceof oy?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Rt.min()))try{const r=yield kO(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const c=i.yu.te(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=i.du.get(p);_&&i.du.set(p,_.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const p=i.du.get(h);if(!p)return;i.du.set(h,p.withResumeToken($r.EMPTY_BYTE_STRING,p.snapshotVersion)),jO(i,h);const _=new Ga(p.target,h,1,p.sequenceNumber);zM(i,_)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield lD(n,r)}var r}),XM.apply(this,arguments)}function lD(n,e,t){return e1.apply(this,arguments)}function e1(){return e1=(0,Ee.Z)(function*(n,e,t){if(!Xc(e))throw e;n._u.add(1),yield py(n),n.gu.set("Offline"),t||(t=()=>kO(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield h0(n)}))}),e1.apply(this,arguments)}function qO(n,e){return e().catch(t=>lD(n,t,e))}function gy(n){return t1.apply(this,arguments)}function t1(){return t1=(0,Ee.Z)(function*(n){const e=Je(n),t=pf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;QH(e);)try{const i=yield OH(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,JH(e,i)}catch(i){yield lD(e,i)}ZO(e)&&GO(e)}),t1.apply(this,arguments)}function QH(n){return ld(n)&&n.fu.length<10}function JH(n,e){n.fu.push(e);const t=pf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function ZO(n){return ld(n)&&!pf(n).No()&&n.fu.length>0}function GO(n){pf(n).start()}function XH(n){return n1.apply(this,arguments)}function n1(){return n1=(0,Ee.Z)(function*(n){pf(n).eu()}),n1.apply(this,arguments)}function ej(n){return r1.apply(this,arguments)}function r1(){return r1=(0,Ee.Z)(function*(n){const e=pf(n);for(const t of n.fu)e.Xo(t.mutations)}),r1.apply(this,arguments)}function tj(n,e,t){return s1.apply(this,arguments)}function s1(){return s1=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=bg.from(r,e,t);yield qO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield gy(n)}),s1.apply(this,arguments)}function nj(n,e){return o1.apply(this,arguments)}function o1(){return o1=(0,Ee.Z)(function*(n,e){var t;e&&pf(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(gM(s=i.code)&&s!==fe.ABORTED){const c=r.fu.shift();pf(r).Mo(),yield qO(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield gy(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),ZO(n)&&GO(n)}),o1.apply(this,arguments)}function WO(n,e){return a1.apply(this,arguments)}function a1(){return a1=(0,Ee.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=ld(t);t._u.add(3),yield py(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield h0(t)}),a1.apply(this,arguments)}function l1(n,e){return u1.apply(this,arguments)}function u1(){return u1=(0,Ee.Z)(function*(n,e){const t=Je(n);e?(t._u.delete(2),yield h0(t)):e||(t._u.add(2),yield py(t),t.gu.set("Unknown"))}),u1.apply(this,arguments)}function my(n){return n.pu||(n.pu=function(e,t,r){const i=Je(e);return i.su(),new jH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:zH.bind(null,n),Zr:KH.bind(null,n),Wo:YH.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Mo(),YM(n)?KM(n):n.gu.set("Unknown")):(yield n.pu.stop(),$O(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function pf(n){return n.Iu||(n.Iu=function(e,t,r){const i=Je(e);return i.su(),new $H(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:XH.bind(null,n),Zr:nj.bind(null,n),tu:ej.bind(null,n),Zo:tj.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Mo(),yield gy(n)):(yield n.Iu.stop(),n.fu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class c1{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,h=new c1(e,t,c,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),Xc(n))return new Ue(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class yy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=ry(),this.sortedSet=new lr(this.comparator)}static emptySet(e){return new yy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new yy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zO{constructor(){this.Tu=new lr(Xe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ct():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class vy{constructor(e,t,r,i,s,c,h,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,s){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new vy(e,t,yy.emptySet(t),c,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class rj{constructor(){this.Au=void 0,this.listeners=[]}}class ij{constructor(){this.queries=new tu(e=>PI(e),id),this.onlineState="Unknown",this.Ru=new Set}}function d1(n,e){return h1.apply(this,arguments)}function h1(){return h1=(0,Ee.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new rj),i)try{s.Au=yield t.onListen(r)}catch(c){const h=_y(c,`Initialization of query '${Ub(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&g1(t)}),h1.apply(this,arguments)}function f1(n,e){return p1.apply(this,arguments)}function p1(){return p1=(0,Ee.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),p1.apply(this,arguments)}function sj(n,e){const t=Je(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Pu(i)&&(r=!0);c.Au=i}}r&&g1(t)}function oj(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function g1(n){n.Ru.forEach(e=>{e.next()})}class m1{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new vy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=vy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class aj{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class KO{constructor(e){this.It=e}Ji(e){return Uo(this.It,e)}Yi(e){return e.metadata.exists?Qb(this.It,e.document,!1):Fn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ui(e)}}class lj{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=YO(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=fn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new KO(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Yt()).add(s);t.set(c,h)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function FH(n,e,t,r){return UM.apply(this,arguments)}(e.localStore,new KO(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield LH(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function YO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class QO{constructor(e){this.key=e}}class JO{constructor(e){this.key=e}}class XO{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=Bb(e),this.Qu=new yy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new zO,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,D)=>{const x=i.get(E),P=ug(this.query,D)?D:null,U=!!x&&this.mutatedKeys.has(x.key),Y=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let ne=!1;x&&P?x.data.isEqual(P.data)?U!==Y&&(r.track({type:3,doc:P}),ne=!0):this.Hu(x,P)||(r.track({type:2,doc:P}),ne=!0,(p&&this.Gu(P,p)>0||_&&this.Gu(P,_)<0)&&(h=!0)):!x&&P?(r.track({type:0,doc:P}),ne=!0):x&&!P&&(r.track({type:1,doc:x}),ne=!0,(p||_)&&(h=!0)),ne&&(P?(c=c.add(P),s=Y?s.add(E):s.delete(E)):(c=c.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const E="F"===this.query.limitType?c.last():c.first();c=c.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{Qu:c,zu:r,$i:h,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((_,E)=>function(D,x){const P=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return P(D)-P(x)}(_.type,E.type)||this.Gu(_.doc,E.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==s.length||p?{snapshot:new vy(this.query,e.Qu,i,s,e.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new zO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new JO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new QO(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return vy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class uj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cj{constructor(e){this.key=e,this.nc=!1}}class dj{constructor(e,t,r,i,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new tu(h=>PI(h),id),this.rc=new Map,this.oc=new Set,this.uc=new lr(Xe.comparator),this.cc=new Map,this.ac=new kM,this.hc={},this.lc=new Map,this.fc=xg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function hj(n,e){return _1.apply(this,arguments)}function _1(){return _1=(0,Ee.Z)(function*(n,e){const t=B1(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const c=yield hy(t.localStore,Gn(e));t.isPrimaryClient&&aD(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield y1(t,e,r,"current"===h,c.resumeToken)}return i}),_1.apply(this,arguments)}function y1(n,e,t,r,i){return v1.apply(this,arguments)}function v1(){return v1=(0,Ee.Z)(function*(n,e,t,r,i){n._c=(D,x,P)=>{return(U=(0,Ee.Z)(function*(Y,ne,Ae,Ze){let ze=ne.view.Wu(Ae);ze.$i&&(ze=yield rD(Y.localStore,ne.query,!1).then(({documents:St})=>ne.view.Wu(St,ze)));const Ye=Ze&&Ze.targetChanges.get(ne.targetId),Ct=ne.view.applyChanges(ze,Y.isPrimaryClient,Ye);return x1(Y,ne.targetId,Ct.Xu),Ct.snapshot}),function(Y,ne,Ae,Ze){return U.apply(this,arguments)})(n,D,x,P);var U};const s=yield rD(n.localStore,e,!0),c=new XO(e,s.Hi),h=c.Wu(s.documents),p=sf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=c.applyChanges(h,n.isPrimaryClient,p);x1(n,t,_.Xu);const E=new uj(e,t,c);return n.ic.set(e,E),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),_.snapshot}),v1.apply(this,arguments)}function fj(n,e){return w1.apply(this,arguments)}function w1(){return w1=(0,Ee.Z)(function*(n,e){const t=Je(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!id(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),f0(t.remoteStore,r.targetId),wy(t,r.targetId)}).catch(zl))):(wy(t,r.targetId),yield fy(t.localStore,r.targetId,!0))}),w1.apply(this,arguments)}function b1(){return b1=(0,Ee.Z)(function*(n,e,t){const r=H1(n);try{const i=yield function(s,c){const h=Je(s),p=yr.now(),_=c.reduce((x,P)=>x.add(P.key),Yt());let E,D;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let P=fs(),U=Yt();return h.Gi.getEntries(x,_).next(Y=>{P=Y,P.forEach((ne,Ae)=>{Ae.isValidDocument()||(U=U.add(ne))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,P)).next(Y=>{E=Y;const ne=[];for(const Ae of c){const Ze=VI(Ae,E.get(Ae.key).overlayedDocument);null!=Ze&&ne.push(new Za(Ae.key,Ze,iM(Ze.value.mapValue),Qn.exists(!0)))}return h.mutationQueue.addMutationBatch(x,p,ne,c)}).next(Y=>{D=Y;const ne=Y.applyToLocalDocumentSet(E,U);return h.documentOverlayCache.saveOverlays(x,Y.batchId,ne)})}).then(()=>({batchId:D.batchId,changes:yM(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,h){let p=s.hc[s.currentUser.toKey()];p||(p=new lr($t)),p=p.insert(c,h),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield ud(r,i.changes),yield gy(r.remoteStore)}catch(i){const s=_y(i,"Failed to persist write");t.reject(s)}}),b1.apply(this,arguments)}function eF(n,e){return E1.apply(this,arguments)}function E1(){return E1=(0,Ee.Z)(function*(n,e){const t=Je(n);try{const r=yield PH(t.localStore,e);e.targetChanges.forEach((i,s)=>{const c=t.cc.get(s);c&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?At(c.nc):i.removedDocuments.size>0&&(At(c.nc),c.nc=!1))}),yield ud(t,r,e)}catch(r){yield zl(r)}}),E1.apply(this,arguments)}function tF(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,c)=>{const h=c.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(s,c){const h=Je(s);h.onlineState=c;let p=!1;h.queries.forEach((_,E)=>{for(const D of E.listeners)D.bu(c)&&(p=!0)}),p&&g1(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gj(n,e,t){return C1.apply(this,arguments)}function C1(){return C1=(0,Ee.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let c=new lr(Xe.comparator);c=c.insert(s,Fn.newNoDocument(s,Rt.min()));const h=Yt().add(s),p=new Lo(Rt.min(),new Map,new Cn($t),c,h);yield eF(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),M1(r)}else yield fy(r.localStore,e,!1).then(()=>wy(r,e,t)).catch(zl)}),C1.apply(this,arguments)}function mj(n,e){return T1.apply(this,arguments)}function T1(){return T1=(0,Ee.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield NH(t.localStore,e);A1(t,r,null),S1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ud(t,i)}catch(i){yield zl(i)}}),T1.apply(this,arguments)}function _j(n,e,t){return I1.apply(this,arguments)}function I1(){return I1=(0,Ee.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(s,c){const h=Je(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.mutationQueue.lookupMutationBatch(p,c).next(E=>(At(null!==E),_=E.keys(),h.mutationQueue.removeMutationBatch(p,E))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>h.localDocuments.getDocuments(p,_))})}(r.localStore,e);A1(r,e,t),S1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ud(r,i)}catch(i){yield zl(i)}}),I1.apply(this,arguments)}function D1(){return D1=(0,Ee.Z)(function*(n,e){const t=Je(n);ld(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=Je(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=_y(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),D1.apply(this,arguments)}function S1(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function A1(n,e,t){const r=Je(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function wy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||nF(n,r)})}function nF(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(f0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),M1(n))}function x1(n,e,t){for(const r of t)r instanceof QO?(n.ac.addReference(r.key,e),vj(n,r)):r instanceof JO?(je("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||nF(n,r.key)):ct()}function vj(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(je("SyncEngine","New document in limbo: "+t),n.oc.add(r),M1(n))}function M1(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Xe(fn.fromString(e)),r=n.fc.next();n.cc.set(r,new cj(t)),n.uc=n.uc.insert(t,r),aD(n.remoteStore,new Ga(Gn(rd(t.path)),r,2,Ji.at))}}function ud(n,e,t){return k1.apply(this,arguments)}function k1(){return k1=(0,Ee.Z)(function*(n,e,t){const r=Je(n),i=[],s=[],c=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,p)=>{c.push(r._c(p,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const E=OM.Ci(p.targetId,_);s.push(E)}}))}),yield Promise.all(c),r.sc.Wo(i),yield(h=(0,Ee.Z)(function*(p,_){const E=Je(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ae.forEach(_,x=>ae.forEach(x.Si,P=>E.persistence.referenceDelegate.addReference(D,x.targetId,P)).next(()=>ae.forEach(x.Di,P=>E.persistence.referenceDelegate.removeReference(D,x.targetId,P)))))}catch(D){if(!Xc(D))throw D;je("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const x=D.targetId;if(!D.fromCache){const P=E.Ui.get(x),Y=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);E.Ui=E.Ui.insert(x,Y)}}}),function(p,_){return h.apply(this,arguments)})(r.localStore,s))}),k1.apply(this,arguments)}function wj(n,e){return R1.apply(this,arguments)}function R1(){return R1=(0,Ee.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield MO(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(h=>{h.reject(new Ue(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ud(t,r.ji)}var i}),R1.apply(this,arguments)}function bj(n,e){const t=Je(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const s=t.rc.get(e);if(!s)return i;for(const c of s){const h=t.ic.get(c);i=i.unionWith(h.view.ju)}return i}}function Ej(n,e){return N1.apply(this,arguments)}function N1(){return N1=(0,Ee.Z)(function*(n,e){const t=Je(n),r=yield rD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&x1(t,e.targetId,i.Xu),i}),N1.apply(this,arguments)}function Cj(n,e){return P1.apply(this,arguments)}function P1(){return P1=(0,Ee.Z)(function*(n,e){const t=Je(n);return PO(t.localStore,e).then(r=>ud(t,r))}),P1.apply(this,arguments)}function Tj(n,e,t,r){return O1.apply(this,arguments)}function O1(){return O1=(0,Ee.Z)(function*(n,e,t,r){const i=Je(n),s=yield function(c,h){const p=Je(c),_=Je(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>_.Tn(E,h).next(D=>D?p.localDocuments.getDocuments(E,D):ae.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield gy(i.remoteStore):"acknowledged"===t||"rejected"===t?(A1(i,e,r||null),S1(i,e),h=e,Je(Je(i.localStore).mutationQueue).An(h)):ct(),yield ud(i,s)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),O1.apply(this,arguments)}function F1(){return F1=(0,Ee.Z)(function*(n,e){const t=Je(n);if(B1(t),H1(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield rF(t,r.toArray());t.dc=!0,yield l1(t.remoteStore,!0);for(const s of i)aD(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(wy(t,c),fy(t.localStore,c,!0))),f0(t.remoteStore,c)}),yield i,yield rF(t,r),function(s){const c=Je(s);c.cc.forEach((h,p)=>{f0(c.remoteStore,p)}),c.ac.fs(),c.cc=new Map,c.uc=new lr(Xe.comparator)}(t),t.dc=!1,yield l1(t.remoteStore,!1)}}),F1.apply(this,arguments)}function rF(n,e,t){return L1.apply(this,arguments)}function L1(){return L1=(0,Ee.Z)(function*(n,e,t){const r=Je(n),i=[],s=[];for(const c of e){let h;const p=r.rc.get(c);if(p&&0!==p.length){h=yield hy(r.localStore,Gn(p[0]));for(const _ of p){const E=r.ic.get(_),D=yield Ej(r,E);D.snapshot&&s.push(D.snapshot)}}else{const _=yield NO(r.localStore,c);h=yield hy(r.localStore,_),yield y1(r,iF(_),c,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(s),i}),L1.apply(this,arguments)}function iF(n){return Fb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Dj(n){const e=Je(n);return Je(Je(e.localStore).persistence).vi()}function Sj(n,e,t,r){return U1.apply(this,arguments)}function U1(){return U1=(0,Ee.Z)(function*(n,e,t,r){const i=Je(n);if(i.dc)return void je("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield PO(i.localStore,Vb(s[0])),h=Lo.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,$r.EMPTY_BYTE_STRING);yield ud(i,c,h);break}case"rejected":yield fy(i.localStore,e,!0),wy(i,e,r);break;default:ct()}}),U1.apply(this,arguments)}function Aj(n,e,t){return V1.apply(this,arguments)}function V1(){return V1=(0,Ee.Z)(function*(n,e,t){const r=B1(n);if(r.dc){for(const i of e){if(r.rc.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const s=yield NO(r.localStore,i),c=yield hy(r.localStore,s);yield y1(r,iF(s),c.targetId,!1,c.resumeToken),aD(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield fy(r.localStore,i,!1).then(()=>{f0(r.remoteStore,i),wy(r,i)}).catch(zl))}}),V1.apply(this,arguments)}function B1(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gj.bind(null,e),e.sc.Wo=sj.bind(null,e.eventManager),e.sc.wc=oj.bind(null,e.eventManager),e}function H1(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_j.bind(null,e),e}class sF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=d0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return xO(this.persistence,new AO,e.initialUser,this.It)}yc(e){return new DO(tD.Bs,this.It)}gc(e){return new UO}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oF extends sF{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield H1(r.Ac.syncEngine),yield gy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return xO(this.persistence,new AO,e.initialUser,this.It)}Tc(e,t){return new yH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Qx(t,this.persistence);return new kb(e.asyncQueue,r)}yc(e){const t=PM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?lo.withCacheSize(this.cacheSizeBytes):lo.DEFAULT;return new NM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,BO(),oD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new UO}}class Mj extends oF{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof $M&&(r.sharedClientState.syncEngine={Fr:Tj.bind(null,i),$r:Sj.bind(null,i),Br:Aj.bind(null,i),vi:Dj.bind(null,i),Mr:Cj.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,Ee.Z)(function*(c){yield function Ij(n,e){return F1.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}gc(e){const t=BO();if(!$M.C(t))throw new Ue(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=PM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $M(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class j1{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>tF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=wj.bind(null,r.syncEngine),yield l1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ij}createDatastore(e){const t=d0(e.databaseInfo.databaseId),r=new HH(e.databaseInfo);return new qH(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>tF(this.syncEngine,h,0),c=VO.C()?new VO:new UH,new WH(t,r,i,s,c);var t,r,i,s,c}createSyncEngine(e,t){return function(r,i,s,c,h,p,_){const E=new dj(r,i,s,c,h,p);return _&&(E.dc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Je(t);je("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield py(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $1(n,e,t){if(!t)throw new Ue(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aF(n,e,t,r){if(!0===e&&!0===r)throw new Ue(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lF(n){if(!Xe.isDocumentKey(n))throw new Ue(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uF(n){if(Xe.isDocumentKey(n))throw new Ue(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uD(n);throw new Ue(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cF(n,e){if(e<=0)throw new Ue(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const dF=new Map;class hF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,aF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class p0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Zx;switch(t.type){case"gapi":return new j_(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dF.get(e);t&&(je("ComponentProvider","Removing Datastore"),dF.delete(e),t.terminate())}(this),Promise.resolve()}}class wr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class gs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class ju extends gs{constructor(e,t,r){super(e,t,rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new Xe(e))}withConverter(e){return new ju(this.firestore,e,this._path)}}function pF(n,e,...t){if(n=(0,L.m9)(n),$1("collection","path",e),n instanceof p0){const r=fn.fromString(e,...t);return uF(r),new ju(n,null,r)}{if(!(n instanceof wr||n instanceof ju))throw new Ue(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return uF(r),new ju(n.firestore,null,r)}}function cD(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=$_.R()),$1("doc","path",e),n instanceof p0){const r=fn.fromString(e,...t);return lF(r),new wr(n,null,new Xe(r))}{if(!(n instanceof wr||n instanceof ju))throw new Ue(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return lF(r),new wr(n.firestore,n instanceof ju?n.converter:null,new Xe(r))}}function gF(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof wr||n instanceof ju)&&(e instanceof wr||e instanceof ju)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function q1(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof gs&&e instanceof gs&&n.firestore===e.firestore&&id(n._query,e._query)&&n.converter===e.converter}function mF(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Rj{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Or,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new aj(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Oj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(s,c){const h=Je(s),p=cf(h.It)+"/documents",_={documents:c.map(P=>uf(h.It,P))},E=yield h._o("BatchGetDocuments",p,_,c.length),D=new Map;E.forEach(P=>{const U=function Jb(n,e){return"found"in e?function(t,r){At(!!r.found);const i=Uo(t,r.found.name),s=ui(r.found.updateTime),c=new Oi({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(i,s,c)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const i=Uo(t,r.missing),s=ui(r.readTime);return Fn.newNoDocument(i,s)}(n,e):ct()}(h.It,P);D.set(U.key.toString(),U)});const x=[];return c.forEach(P=>{const U=D.get(P.toString());At(!!U),x.push(U)}),x}),function(s,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Xe.fromPath(i);e.mutations.push(new ny(s,e.precondition(s)))}),yield(r=(0,Ee.Z)(function*(i,s){const c=Je(i),h=cf(c.It)+"/documents",p={writes:s.map(_=>_g(c.It,_))};yield c.ao("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Rt.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Ue(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Fj{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new qM(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ee.Z)(function*(){const t=new Oj(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!rg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!gM(t)}return!1}}class Lj{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jr.UNAUTHENTICATED,this.clientId=$_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=_y(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function _F(n,e){return Z1.apply(this,arguments)}function Z1(){return Z1=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(s){r.isEqual(s)||(yield MO(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Z1.apply(this,arguments)}function yF(n,e){return G1.apply(this,arguments)}function G1(){return G1=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield W1(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>WO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>WO(e.remoteStore,s)),n.onlineComponents=e}),G1.apply(this,arguments)}function W1(n){return z1.apply(this,arguments)}function z1(){return z1=(0,Ee.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield _F(n,new sF)),n.offlineComponents}),z1.apply(this,arguments)}function hD(n){return K1.apply(this,arguments)}function K1(){return K1=(0,Ee.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield yF(n,new j1)),n.onlineComponents}),K1.apply(this,arguments)}function vF(n){return W1(n).then(e=>e.persistence)}function fD(n){return W1(n).then(e=>e.localStore)}function Y1(n){return hD(n).then(e=>e.remoteStore)}function Q1(n){return hD(n).then(e=>e.syncEngine)}function by(n){return J1.apply(this,arguments)}function J1(){return J1=(0,Ee.Z)(function*(n){const e=yield hD(n),t=e.eventManager;return t.onListen=hj.bind(null,e.syncEngine),t.onUnlisten=fj.bind(null,e.syncEngine),t}),J1.apply(this,arguments)}function bF(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,s,c,h,p){const _=new dD({next:D=>{s.enqueueAndForget(()=>f1(i,E));const x=D.docs.has(c);!x&&D.fromCache?p.reject(new Ue(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&h&&"server"===h.source?p.reject(new Ue(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new m1(rd(c.path),_,{includeMetadataChanges:!0,Nu:!0});return d1(i,E)}(yield by(n),n.asyncQueue,e,t,r)})),r.promise}function EF(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,s,c,h,p){const _=new dD({next:D=>{s.enqueueAndForget(()=>f1(i,E)),D.fromCache&&"server"===h.source?p.reject(new Ue(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new m1(c,_,{includeMetadataChanges:!0,Nu:!0});return d1(i,E)}(yield by(n),n.asyncQueue,e,t,r)})),r.promise}class Zj{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new qM(this,"async_queue_retry"),this.Wc=()=>{const t=oD();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=oD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=oD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Or;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Xc(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=c1.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.qc.push(i),i}zc(){this.Kc&&ct()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function X1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Gj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class br extends p0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Zj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CF(this),this._firestoreClient.terminate()}}function Xr(n){return n._firestoreClient||CF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CF(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Xx(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new Lj(n._authCredentials,n._appCheckCredentials,n._queue,r)}function TF(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield _F(n,t),yield yF(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(c=s).name?c.code===fe.FAILED_PRECONDITION||c.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;Yc("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var c})).then(()=>r.promise)}function IF(n){if(n._initialized||n._terminated)throw new Ue(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $u($r.fromBase64String(e))}catch(t){throw new Ue(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $u($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kg{constructor(e){this._methodName=e}}class pD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const n3=/^__.*__$/;class r3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Za(e,this.data,this.fieldMask,t,this.fieldTransforms):new ad(e,this.data,t,this.fieldTransforms)}}class DF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class gD{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new gD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return yD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(SF(this.sa)&&n3.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class i3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||d0(e)}da(e,t,r,i=!1){return new gD({sa:e,methodName:t,fa:r,path:ar.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Rg(n){const e=n._freezeSettings(),t=d0(n._databaseId);return new i3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mD(n,e,t,r,i,s={}){const c=n.da(s.merge||s.mergeFields?2:0,e,t,i);rk("Data must be an object, but it was:",c,r);const h=MF(r,c);let p,_;if(s.merge)p=new hs(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const E=[];for(const D of s.mergeFields){const x=ik(e,D,t);if(!c.contains(x))throw new Ue(fe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);RF(E,x)||E.push(x)}p=new hs(E),_=c.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,_=c.fieldTransforms;return new r3(new Oi(h),p,_)}class g0 extends kg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof g0}}function AF(n,e,t){return new gD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ek extends kg{_toFieldTransform(e){return new dg(e.path,new sd)}isEqual(e){return e instanceof ek}}class s3 extends kg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=AF(this,e,!0),r=this._a.map(s=>Ng(s,t)),i=new eu(r);return new dg(e.path,i)}isEqual(e){return this===e}}class o3 extends kg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=AF(this,e,!0),r=this._a.map(s=>Ng(s,t)),i=new od(r);return new dg(e.path,i)}isEqual(e){return this===e}}class a3 extends kg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new tf(e.It,OI(e.It,this.wa));return new dg(e.path,t)}isEqual(e){return this===e}}function tk(n,e,t,r){const i=n.da(1,e,t);rk("Data must be an object, but it was:",i,r);const s=[],c=Oi.empty();ed(r,(p,_)=>{const E=_D(e,p,t);_=(0,L.m9)(_);const D=i.ca(E);if(_ instanceof g0)s.push(E);else{const x=Ng(_,D);null!=x&&(s.push(E),c.set(E,x))}});const h=new hs(s);return new DF(c,h,i.fieldTransforms)}function nk(n,e,t,r,i,s){const c=n.da(1,e,t),h=[ik(e,r,t)],p=[i];if(s.length%2!=0)throw new Ue(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)h.push(ik(e,s[x])),p.push(s[x+1]);const _=[],E=Oi.empty();for(let x=h.length-1;x>=0;--x)if(!RF(_,h[x])){const P=h[x];let U=p[x];U=(0,L.m9)(U);const Y=c.ca(P);if(U instanceof g0)_.push(P);else{const ne=Ng(U,Y);null!=ne&&(_.push(P),E.set(P,ne))}}const D=new hs(_);return new DF(E,D,c.fieldTransforms)}function xF(n,e,t,r=!1){return Ng(t,n.da(r?4:3,e))}function Ng(n,e){if(kF(n=(0,L.m9)(n)))return rk("Unsupported field value:",e,n),MF(n,e);if(n instanceof kg)return function(t,r){if(!SF(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const c of t){let h=Ng(c,r.aa(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return OI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=yr.fromDate(t);return{timestampValue:lf(r.It,i)}}if(t instanceof yr){const i=new yr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:lf(r.It,i)}}if(t instanceof pD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $u)return{bytesValue:$I(r.It,t._byteString)};if(t instanceof wr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${uD(t)}`)}(n,e)}function MF(n,e){const t={};return II(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ed(n,(r,i)=>{const s=Ng(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function kF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof yr||n instanceof pD||n instanceof $u||n instanceof wr||n instanceof kg)}function rk(n,e,t){if(!kF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=uD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function ik(n,e,t){if((e=(0,L.m9)(e))instanceof cd)return e._internalPath;if("string"==typeof e)return _D(n,e);throw yD("Field path arguments must be of type string or ",n,!1,void 0,t)}const l3=new RegExp("[~\\*/\\[\\]]");function _D(n,e,t){if(e.search(l3)>=0)throw yD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cd(...e.split("."))._internalPath}catch{throw yD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yD(n,e,t,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new Ue(fe.INVALID_ARGUMENT,h+n+p)}function RF(n,e){return n.some(t=>t.isEqual(e))}class m0{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new u3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class u3 extends m0{data(){return super.data()}}function vD(n,e){return"string"==typeof e?_D(n,e):e instanceof cd?e._internalPath:e._delegate._internalPath}function NF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _0{}function gf(n,...e){for(const t of e)n=t._apply(n);return n}class c3 extends _0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Rg(e.firestore),r=function(i,s,c,h,p,_,E){let D;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Ue(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){VF(E,_);const P=[];for(const U of E)P.push(UF(h,i,U));D={arrayValue:{values:P}}}else D=UF(h,i,E)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||VF(E,_),D=xF(c,"where",E,"in"===_||"not-in"===_);const x=li.create(p,_,D);return function(P,U){if(U.dt()){const ne=Lb(P);if(null!==ne&&!ne.isEqual(U.field))throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ne.toString()}' and '${U.field.toString()}'`);const Ae=Ls(P);null!==Ae&&BF(0,U.field,Ae)}const Y=function(ne,Ae){for(const Ze of ne.filters)if(Ae.indexOf(Ze.op)>=0)return Ze.op;return null}(P,function(ne){switch(ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==Y)throw new Ue(fe.INVALID_ARGUMENT,Y===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${Y.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new gs(e.firestore,e.converter,function(i,s){const c=i.filters.concat([s]);return new Jl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class h3 extends _0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Ue(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Xh(i,s);return function(h,p){if(null===Ls(h)){const _=Lb(h);null!==_&&BF(0,_,p.field)}}(r,c),c}(e._query,this.ma,this.pa);return new gs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Jl(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class PF extends _0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new gs(e.firestore,e.converter,ey(e._query,this.Ia,this.Ta))}}class OF extends _0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=LF(e,this.type,this.Ea,this.Aa);return new gs(e.firestore,e.converter,(i=t,new Jl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class FF extends _0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=LF(e,this.type,this.Ea,this.Aa);return new gs(e.firestore,e.converter,(i=t,new Jl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function LF(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof m0)return function(i,s,c,h,p){if(!h)throw new Ue(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const E of ef(i))if(E.field.isKeyField())_.push(Bu(s,h.key));else{const D=h.data.field(E.field);if(DI(D))throw new Ue(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=E.field.canonicalString();throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}_.push(D)}return new nd(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Rg(n.firestore);return function(s,c,h,p,_,E){const D=s.explicitOrderBy;if(_.length>D.length)throw new Ue(fe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let P=0;P<_.length;P++){const U=_[P];if(D[P].field.isKeyField()){if("string"!=typeof U)throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!lg(s)&&-1!==U.indexOf("/"))throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const Y=s.path.child(fn.fromString(U));if(!Xe.isDocumentKey(Y))throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Y}' is not because it contains an odd number of segments.`);const ne=new Xe(Y);x.push(Bu(c,ne))}else{const Y=xF(h,p,U);x.push(Y)}}return new nd(x,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function UF(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Ue(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lg(e)&&-1!==t.indexOf("/"))throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Xe.isDocumentKey(r))throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bu(n,new Xe(r))}if(t instanceof wr)return Bu(n,t._key);throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uD(t)}.`)}function VF(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function BF(n,e,t){if(!t.isEqual(e))throw new Ue(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sk{convertValue(e,t="none"){switch(Vu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return ed(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new pD(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=SI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(K_(e));default:return null}}convertTimestamp(e){const t=Fu(e);return new yr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);At(SM(r));const i=new Lu(r.get(1),r.get(3)),s=new Xe(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function wD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class w3 extends sk{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}class Pg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dd extends m0{constructor(e,t,r,i,s,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class y0 extends dd{data(e={}){return super.data(e)}}class mf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Pg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new y0(this._firestore,this._userDataWriter,r.key,r,new Pg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new y0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Pg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new y0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Pg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:b3(c.type),doc:h,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function b3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function HF(n,e){return n instanceof dd&&e instanceof dd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mf&&e instanceof mf&&n._firestore===e._firestore&&q1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class _f extends sk{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}function jF(n,e,t){n=_n(n,wr);const r=_n(n.firestore,br),i=wD(n.converter,e,t);return Ey(r,[mD(Rg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Qn.none())])}function $F(n,e,t,...r){n=_n(n,wr);const i=_n(n.firestore,br),s=Rg(i);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof cd?nk(s,"updateDoc",n._key,e,t,r):tk(s,"updateDoc",n._key,e),Ey(i,[c.toMutation(n._key,Qn.exists(!0))])}function qF(n,...e){var t,r,i;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||X1(e[c])||(s=e[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(X1(e[c])){const D=e[c];e[c]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[c+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[c+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,_,E;if(n instanceof wr)_=_n(n.firestore,br),E=rd(n._key.path),p={next:D=>{e[c]&&e[c](ok(_,n,D))},error:e[c+1],complete:e[c+2]};else{const D=_n(n,gs);_=_n(D.firestore,br),E=D._query;const x=new _f(_);p={next:P=>{e[c]&&e[c](new mf(_,x,D,P))},error:e[c+1],complete:e[c+2]},NF(n._query)}return function(D,x,P,U){const Y=new dD(U),ne=new m1(x,Y,P);return D.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return d1(yield by(D),ne)})),()=>{Y.bc(),D.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return f1(yield by(D),ne)}))}}(Xr(_),E,h,p)}function Ey(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function pj(n,e,t){return b1.apply(this,arguments)}(yield Q1(t),r,i)})),i.promise}(Xr(n),e)}function ok(n,e,t){const r=t.docs.get(e._key),i=new _f(n);return new dd(n,i,e._key,r,new Pg(t.hasPendingWrites,t.fromCache),e.converter)}const k3={maxAttempts:5};class ZF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rg(e)}set(e,t,r){this._verifyNotCommitted();const i=yf(e,this._firestore),s=wD(i.converter,t,r),c=mD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=yf(e,this._firestore);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof cd?nk(this._dataReader,"WriteBatch.update",s._key,t,r,i):tk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yf(e,this._firestore);return this._mutations=this._mutations.concat(new rf(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yf(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Ue(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class R3 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rg(e)}get(e){const t=yf(e,this._firestore),r=new w3(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const s=i[0];if(s.isFoundDocument())return new m0(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new m0(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=yf(e,this._firestore),s=wD(i.converter,t,r),c=mD(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const s=yf(e,this._firestore);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof cd?nk(this._dataReader,"Transaction.update",s._key,t,r,i):tk(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=yf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yf(e,this._firestore),r=new _f(this._firestore);return super.get(e).then(i=>new dd(this._firestore,r,t._key,i._document,new Pg(!1,!1),t.converter))}}function ak(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WF(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function zF(){if(!function Jx(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Kc=ki.SDK_VERSION,(0,ki._registerComponent)(new oo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),c=new br(new Wx(t.getProvider("auth-internal")),new zx(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ue(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(h.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,ki.registerVersion)(Eb,"3.7.3",n),(0,ki.registerVersion)(Eb,"3.7.3","esm2017")}();class v0{constructor(e){this._delegate=e}static fromBase64String(e){return zF(),new v0($u.fromBase64String(e))}static fromUint8Array(e){return WF(),new v0($u.fromUint8Array(e))}toBase64(){return zF(),this._delegate.toBase64()}toUint8Array(){return WF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lk(n){return function H3(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class j3{enableIndexedDbPersistence(e,t){return function zj(n,e){IF(n=_n(n,br));const t=Xr(n),r=n._freezeSettings(),i=new j1;return TF(t,i,new oF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Kj(n){IF(n=_n(n,br));const e=Xr(n),t=n._freezeSettings(),r=new j1;return TF(e,r,new Mj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Yj(n){if(n._initialized&&!n._terminated)throw new Ue(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Fo.C())return Promise.resolve();const i=r+"main";yield Fo.delete(i)}),function(r){return t.apply(this,arguments)})(PM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class KF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function fF(n,e,t,r={}){var i;const s=(n=_n(n,p0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Yc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=Jr.MOCK_USER;else{c=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ue(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Jr(p)}n._authCredentials=new Gx(new Zh(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function Jj(n){return function Uj(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield vF(n),t=yield Y1(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i._u.delete(0),h0(i)}(t)}))}(Xr(n=_n(n,br)))}(this._delegate)}disableNetwork(){return function Xj(n){return function Vj(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield vF(n),t=yield Y1(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const s=Je(i);s._u.add(0),yield py(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Xr(n=_n(n,br)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,aF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Qj(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function yj(n,e){return D1.apply(this,arguments)}(yield Q1(e),t)})),t.promise}(Xr(n=_n(n,br)))}(this._delegate)}onSnapshotsInSync(e){return function M3(n,e){return function jj(n,e){const t=new dD(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield by(n),i=t,Je(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield by(n),i=t,void Je(r).Ru.delete(i);var r,i}))}}(Xr(n=_n(n,br)),X1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cy(this,pF(this._delegate,e))}catch(t){throw Us(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wa(this,cD(this._delegate,e))}catch(t){throw Us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function kj(n,e){if(n=_n(n,p0),$1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(n,null,(t=e,new Jl(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function N3(n,e,t){n=_n(n,br);const r=Object.assign(Object.assign({},k3),t);return function(i){if(i.maxAttempts<1)throw new Ue(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,c){const h=new Or;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const p=yield function wF(n){return hD(n).then(e=>e.datastore)}(i);new Fj(i.asyncQueue,p,c,s,h).run()})),h.promise}(Xr(n),i=>e(new R3(n,i)),r)}(this._delegate,t=>e(new YF(this,t)))}batch(){return Xr(this._delegate),new QF(new ZF(this._delegate,e=>Ey(this._delegate,e)))}loadBundle(e){return function e3(n,e){const t=Xr(n=_n(n,br)),r=new Gj;return function $j(n,e,t,r){const i=function(s,c){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return mF(p,_);if(p instanceof ArrayBuffer)return mF(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new Rj(p,c);var p}(t,d0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function xj(n,e,t){const r=Je(n);var i;(i=(0,Ee.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(x,P){const U=Je(x),Y=ui(P.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",ne=>U.Ns.getBundleMetadata(ne,P.id)).then(ne=>!!ne&&ne.createTime.compareTo(Y)>=0)}(s.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(YO(p));const _=new lj(p,s.localStore,c.It);let E=yield c.mc();for(;E;){const x=yield _.Fu(E);x&&h._updateProgress(x),E=yield c.mc()}const D=yield _.complete();return yield ud(s,D.Lu,void 0),yield function(x,P){const U=Je(x);return U.persistence.runTransaction("Save bundle","readwrite",Y=>U.Ns.saveBundleMetadata(Y,P))}(s.localStore,p),h._completeWith(D.progress),Promise.resolve(D.Bu)}catch(p){return Yc("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var x}),function(s,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Q1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function t3(n,e){return function qj(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield fD(n),e)}))}(Xr(n=_n(n,br)),e).then(t=>t?new gs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class bD extends sk{constructor(e){super(),this.firestore=e}convertBytes(e){return new v0(new $u(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wa.forKey(t,this.firestore,null)}}class YF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}get(e){const t=Fg(e);return this._delegate.get(t).then(r=>new w0(this._firestore,new dd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fg(e);return r?(ak("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fg(e);return this._delegate.delete(t),this}}class QF{constructor(e){this._delegate=e}set(e,t,r){const i=Fg(e);return r?(ak("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Fg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Fg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Og{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new y0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new b0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Og.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Og(e,new bD(e),t),i.set(t,s)),s}}Og.INSTANCES=new WeakMap;class Wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wa(t,new wr(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new Wa(t,new wr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cy(this.firestore,pF(this._delegate,e))}catch(t){throw Us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof wr&&gF(this._delegate,e)}set(e,t){t=ak("DocumentReference.set",t);try{return t?jF(this._delegate,e,t):jF(this._delegate,e)}catch(r){throw Us(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$F(this._delegate,e):$F(this._delegate,e,t,...r)}catch(i){throw Us(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A3(n){return Ey(_n(n.firestore,br),[new rf(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=JF(e),r=XF(e,i=>new w0(this.firestore,new dd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return qF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function C3(n){n=_n(n,wr);const e=_n(n.firestore,br),t=Xr(e),r=new _f(e);return function Bj(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,s,c){try{const h=yield function(p,_){const E=Je(p);return E.persistence.runTransaction("read document","readonly",D=>E.localDocuments.getDocument(D,_))}(i,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ue(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=_y(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield fD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new dd(e,r,n._key,i,new Pg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function T3(n){n=_n(n,wr);const e=_n(n.firestore,br);return bF(Xr(e),n._key,{source:"server"}).then(t=>ok(e,n,t))}(this._delegate):function E3(n){n=_n(n,wr);const e=_n(n.firestore,br);return bF(Xr(e),n._key).then(t=>ok(e,n,t))}(this._delegate),t.then(r=>new w0(this.firestore,new dd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wa(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}function Us(n,e,t){return n.message=n.message.replace(e,t),n}function JF(n){for(const e of n)if("object"==typeof e&&!lk(e))return e;return{}}function XF(n,e){var t,r;let i;return i=lk(n[0])?n[0]:lk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class w0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HF(this._delegate,e._delegate)}}class b0 extends w0{data(e){const t=this._delegate.data(e);return function qx(n,e){n||ct()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}where(e,t,r){try{return new Vs(this.firestore,gf(this._delegate,function d3(n,e,t){const r=e,i=vD("where",n);return new c3(i,r,t)}(e,t,r)))}catch(i){throw Us(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,gf(this._delegate,function f3(n,e="asc"){const t=e,r=vD("orderBy",n);return new h3(r,t)}(e,t)))}catch(r){throw Us(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,gf(this._delegate,function p3(n){return cF("limit",n),new PF("limit",n,"F")}(e)))}catch(t){throw Us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,gf(this._delegate,function g3(n){return cF("limitToLast",n),new PF("limitToLast",n,"L")}(e)))}catch(t){throw Us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,gf(this._delegate,function m3(...n){return new OF("startAt",n,!0)}(...e)))}catch(t){throw Us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,gf(this._delegate,function _3(...n){return new OF("startAfter",n,!1)}(...e)))}catch(t){throw Us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,gf(this._delegate,function y3(...n){return new FF("endBefore",n,!1)}(...e)))}catch(t){throw Us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,gf(this._delegate,function v3(...n){return new FF("endAt",n,!0)}(...e)))}catch(t){throw Us(t,"endAt()","Query.endAt()")}}isEqual(e){return q1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function D3(n){n=_n(n,gs);const e=_n(n.firestore,br),t=Xr(e),r=new _f(e);return function Hj(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,s,c){try{const h=yield rD(i,s,!0),p=new XO(s,h.Hi),_=p.Wu(h.documents),E=p.applyChanges(_,!1);c.resolve(E.snapshot)}catch(h){const p=_y(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(i,s,c){return r.apply(this,arguments)})(yield fD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new mf(e,r,n,i))}(this._delegate):"server"===e?.source?function S3(n){n=_n(n,gs);const e=_n(n.firestore,br),t=Xr(e),r=new _f(e);return EF(t,n._query,{source:"server"}).then(i=>new mf(e,r,n,i))}(this._delegate):function I3(n){n=_n(n,gs);const e=_n(n.firestore,br),t=Xr(e),r=new _f(e);return NF(n._query),EF(t,n._query).then(i=>new mf(e,r,n,i))}(this._delegate),t.then(r=>new uk(this.firestore,new mf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=JF(e),r=XF(e,i=>new uk(this.firestore,new mf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return qF(this._delegate,t,r)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}class q3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new b0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new b0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new q3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new b0(this._firestore,r))})}isEqual(e){return HF(this._delegate,e._delegate)}}class Cy extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wa(this.firestore,e):null}doc(e){try{return new Wa(this.firestore,void 0===e?cD(this._delegate):cD(this._delegate,e))}catch(t){throw Us(t,"doc()","CollectionReference.doc()")}}add(e){return function x3(n,e){const t=_n(n.firestore,br),r=cD(n),i=wD(n.converter,e);return Ey(t,[mD(Rg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Wa(this.firestore,t))}isEqual(e){return gF(this._delegate,e._delegate)}withConverter(e){return new Cy(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}function Fg(n){return _n(n,wr)}class ck{constructor(...e){this._delegate=new cd(...e)}static documentId(){return new ck(ar.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof cd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function O3(){return new ek("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lg(e)}static delete(){const e=function P3(){return new g0("deleteField")}();return e._methodName="FieldValue.delete",new Lg(e)}static arrayUnion(...e){const t=function F3(...n){return new s3("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lg(t)}static arrayRemove(...e){const t=function L3(...n){return new o3("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lg(t)}static increment(e){const t=function U3(n){return new a3("increment",n)}(e);return t._methodName="FieldValue.increment",new Lg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Z3={Firestore:KF,GeoPoint:pD,Timestamp:yr,Blob:v0,Transaction:YF,WriteBatch:QF,DocumentReference:Wa,DocumentSnapshot:w0,Query:Vs,QueryDocumentSnapshot:b0,QuerySnapshot:uk,CollectionReference:Cy,FieldPath:ck,FieldValue:Lg,setLogLevel:function $3(n){!function VP(n){Pu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function W3(n){(function G3(n,e){n.INTERNAL.registerComponent(new oo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Z3)))})(n,(e,t)=>new KF(e,t,new j3)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(uT.Z);var ED=V(4749),CD=V(249),z3=V(2792);class K3 extends no.x{constructor(e=1/0,t=1/0,r=z3.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:c}=this;t||(r.push(e),!i&&r.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let c=0;c<s.length&&!e.closed;c+=r?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var eL=V(8288);function tL(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,eL.B)({connector:()=>new K3(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function nL(n,e){return(0,Cr.m)(e)?Rr(()=>n,e):Rr(()=>n)}var dk=V(675);V(2546);const fk=new Map,iL={activated:!1,tokenObservers:[]},e$={initialized:!1,enabled:!1};function Xi(n){return fk.get(n)||Object.assign({},iL)}function ID(){return e$}class o${constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function a$(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Bs=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function oL(n){if(!Xi(n).activated)throw Bs.create("use-before-activation",{appName:n.name})}function mk(n,e){return _k.apply(this,arguments)}function _k(){return _k=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const P=yield c.getHeartbeatsHeader();P&&(s["X-Firebase-Client"]=P)}const h={method:"POST",body:JSON.stringify(e),headers:s};let p,_;try{p=yield fetch(n,h)}catch(P){throw Bs.create("fetch-network-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}if(200!==p.status)throw Bs.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(P){throw Bs.create("fetch-parse-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}const E=_.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const D=1e3*Number(E[1]),x=Date.now();return{token:_.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}}),_k.apply(this,arguments)}function d$(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const E0="firebase-app-check-store";let AD=null;function lL(){return AD||(AD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Bs.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(E0,{keyPath:"compositeKey"})}}catch(r){e(Bs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),AD)}function yk(){return yk=(0,Ee.Z)(function*(n,e){const r=(yield lL()).transaction(E0,"readwrite"),s=r.objectStore(E0).put({compositeKey:n,value:e});return new Promise((c,h)=>{s.onsuccess=p=>{c()},r.onerror=p=>{var _;h(Bs.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})}),yk.apply(this,arguments)}const C0=new Ns.Yd("@firebase/app-check");function bk(n,e){return(0,L.hl)()?function g$(n,e){return function uL(n,e){return yk.apply(this,arguments)}(function dL(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{C0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hL(){return ID().enabled}function fL(){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,Ee.Z)(function*(){const n=ID();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Ck.apply(this,arguments)}const b$={error:"UNKNOWN_ERROR"};function E$(n){return L.US.encodeString(JSON.stringify(n),!1)}function xD(n){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,Ee.Z)(function*(n,e=!1){const t=n.app;oL(t);const r=Xi(t);let s,i=r.token;if(i&&!Ty(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(Ty(p)?i=p:yield bk(t,void 0))}if(!e&&i&&Ty(i))return{token:i.token};let h,c=!1;if(hL()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mk(d$(t,yield fL()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const p=yield r.exchangeTokenPromise;return yield bk(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Xi(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?C0.warn(p.message):C0.error(p),s=p}return i?s?h=Ty(i)?{token:i.token,internalError:s}:mL(s):(h={token:i.token},r.token=i,yield bk(t,i)):h=mL(s),c&&gL(t,h),h}),Tk.apply(this,arguments)}function Dk(n,e){const t=Xi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function pL(n){const{app:e}=n,t=Xi(e);let r=t.tokenRefresher;r||(r=function C$(n){const{app:e}=n;return new o$((0,Ee.Z)(function*(){let r;if(r=Xi(e).token?yield xD(n,!0):yield xD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Xi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gL(n,e){const t=Xi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ty(n){return n.expireTimeMillis-Date.now()>0}function mL(n){return{token:E$(b$),error:n}}class T${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Xi(this.app);for(const t of e)Dk(this.app,t.next);return Promise.resolve()}}const TL="app-check-internal";!function U$(){(0,ki._registerComponent)(new oo.wA("app-check",n=>function I$(n,e){return new T$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(TL).initialize()})),(0,ki._registerComponent)(new oo.wA(TL,n=>function D$(n){return{getToken:e=>xD(n,e),addTokenListener:e=>function Ik(n,e,t,r){const{app:i}=n,s=Xi(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Ty(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),pL(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>pL(n))}(n,"INTERNAL",e),removeTokenListener:e=>Dk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ki.registerVersion)("@firebase/app-check","0.5.17")}();class T0{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window;var kD=V(6455);const kk=new l.OlP("angularfire2.auth.use-emulator"),Rk=new l.OlP("angularfire2.auth.settings"),Nk=new l.OlP("angularfire2.auth.tenant-id"),Pk=new l.OlP("angularfire2.auth.langugage-code"),Ok=new l.OlP("angularfire2.auth.use-device-language"),Fk=new l.OlP("angularfire.auth.persistence"),Lk=(n,e,t,r,i,s,c,h)=>(0,jr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),c)for(const[_,E]of Object.entries(c))p.settings[_]=E;return h&&p.setPersistence(h),p},[t,r,i,s,c,h]);let Iy=(()=>{class n{constructor(t,r,i,s,c,h,p,_,E,D,x,P){const U=new no.x,Y=ut(void 0).pipe((0,CD.Q)(c.outsideAngular),Rr(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,4837)))),(0,dt.U)(()=>(0,jr.on)(t,s,r)),(0,dt.U)(ne=>Lk(ne,s,h,_,E,D,p,x)),tL({bufferSize:1,refCount:!1}));if(ea(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{Y.pipe(Ol()).subscribe();const Ae=Y.pipe(Rr(Ye=>Ye.getRedirectResult().then(Ct=>Ct,()=>null)),yn.iC,tL({bufferSize:1,refCount:!1})),Ze=Y.pipe(Rr(Ye=>new si.y(Ct=>({unsubscribe:s.runOutsideAngular(()=>Ye.onAuthStateChanged(St=>Ct.next(St),St=>Ct.error(St),()=>Ct.complete()))})))),ze=Y.pipe(Rr(Ye=>new si.y(Ct=>({unsubscribe:s.runOutsideAngular(()=>Ye.onIdTokenChanged(St=>Ct.next(St),St=>Ct.error(St),()=>Ct.complete()))}))));this.authState=Ae.pipe(nL(Ze),(0,dk.R)(c.outsideAngular),(0,CD.Q)(c.insideAngular)),this.user=Ae.pipe(nL(ze),(0,dk.R)(c.outsideAngular),(0,CD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Rr(Ye=>Ye?(0,dn.D)(Ye.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(Rr(Ye=>Ye?(0,dn.D)(Ye.getIdTokenResult()):ut(null))),this.credential=(0,ED.T)(Ae,U,this.authState.pipe(mi(Ye=>!Ye))).pipe((0,dt.U)(Ye=>Ye?.user?Ye:null),(0,dk.R)(c.outsideAngular),(0,CD.Q)(c.insideAngular))}return(0,jr.pX)(this,Y,s,{spy:{apply:(ne,Ae,Ze)=>{(ne.startsWith("signIn")||ne.startsWith("createUser"))&&Ze.then(ze=>U.next(ze))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(jr.Dh),l.LFG(jr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(yn.HU),l.LFG(kk,8),l.LFG(Rk,8),l.LFG(Nk,8),l.LFG(Pk,8),l.LFG(Ok,8),l.LFG(Fk,8),l.LFG(T0,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q$=(()=>{class n{constructor(){kD.Z.registerVersion("angularfire",yn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Iy]}),n})();function DL(n,e){return function Z$(n,e=u_.z){return new si.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Uk(n,e){return DL(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function RD(n,e){return Uk(n,e).pipe(fp(void 0),c_(),(0,dt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(E=>E.doc.ref.isEqual(c.ref)),_=t?.payload.docs.find(E=>E.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function SL(n,e,t){return RD(n,t).pipe(Au((r,i)=>function W$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function z$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Vk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Vk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Vk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Lw(),(0,dt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Vk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function AL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class xL{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(fp(void 0),c_(),mi(([r,i])=>i.length>0||!r),(0,dt.U)(([r,i])=>i),yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Au((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AL(e);return SL(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return Uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(yn.iC)}add(e){return this.ref.add(e)}doc(e){return new ML(this.ref.doc(e),this.afs)}}class ML{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=NL(r,t);return new xL(i,s,this.afs)}snapshotChanges(){return function G$(n,e){return DL(n,e).pipe(fp(void 0),c_(),(0,dt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(yn.iC)}}class K${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RD(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),mi(t=>t.length>0),yn.iC):RD(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Au((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AL(e);return SL(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return Uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),yn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(yn.iC)}}const kL=new l.OlP("angularfire2.enableFirestorePersistence"),RL=new l.OlP("angularfire2.firestore.persistenceSettings"),Y$=new l.OlP("angularfire2.firestore.settings"),Q$=new l.OlP("angularfire2.firestore.use-emulator");function NL(n,e=(t=>t)){return{query:e(n),ref:n}}let Bk=(()=>{class n{constructor(t,r,i,s,c,h,p,_,E,D,x,P,U,Y,ne,Ae,Ze){this.schedulers=p;const ze=(0,jr.on)(t,h,r),Ye=E;D&&Lk(ze,h,x,U,Y,ne,P,Ae),[this.firestore,this.persistenceEnabled$]=(0,jr.cc)(`${ze.name}.firestore`,"AngularFirestore",ze.name,()=>{const Ct=h.runOutsideAngular(()=>ze.firestore());if(s&&Ct.settings(s),Ye&&Ct.useEmulator(...Ye),i&&!ea(c)){const St=()=>{try{return(0,dn.D)(Ct.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(ln){return typeof console<"u"&&console.warn(ln),ut(!1)}};return[Ct,h.runOutsideAngular(St)]}return[Ct,ut(!1)]},[s,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=NL(i,r),h=this.schedulers.ngZone.run(()=>s);return new xL(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),s=this.firestore.collectionGroup(t);return new K$(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new ML(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(jr.Dh),l.LFG(jr.xv,8),l.LFG(kL,8),l.LFG(Y$,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(yn.HU),l.LFG(RL,8),l.LFG(Q$,8),l.LFG(Iy,8),l.LFG(kk,8),l.LFG(Rk,8),l.LFG(Nk,8),l.LFG(Pk,8),l.LFG(Ok,8),l.LFG(Fk,8),l.LFG(T0,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),J$=(()=>{class n{constructor(){kD.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kL,useValue:!0},{provide:RL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Bk]}),n})();var X$=V(1369);const PL="@firebase/database",OL="0.13.10";let Hk="";function FL(n){Hk=n}class nq{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class rq{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const LL=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nq(e)}}catch{}return new rq},Ug=LL("localStorage"),jk=LL("sessionStorage"),Dy=new Ns.Yd("@firebase/database"),UL=function(){let n=1;return function(){return n++}}(),VL=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},I0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=I0.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let Vg=null,BL=!0;const HL=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Dy.logLevel=Ns.in.VERBOSE,Vg=Dy.log.bind(Dy),e&&jk.set("logging_enabled",!0)):"function"==typeof n?Vg=n:(Vg=null,jk.remove("logging_enabled"))},Li=function(...n){if(!0===BL&&(BL=!1,null===Vg&&!0===jk.get("logging_enabled")&&HL(!0)),Vg){const e=I0.apply(null,n);Vg(e)}},D0=function(n){return function(...e){Li(n,...e)}},$k=function(...n){const e="FIREBASE INTERNAL ERROR: "+I0(...n);Dy.error(e)},qu=function(...n){const e=`FIREBASE FATAL ERROR: ${I0(...n)}`;throw Dy.error(e),new Error(e)},ms=function(...n){const e="FIREBASE WARNING: "+I0(...n);Dy.warn(e)},ND=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},hd="[MIN_NAME]",Zu="[MAX_NAME]",Bg=function(n,e){if(n===e)return 0;if(n===hd||e===Zu)return-1;if(e===hd||n===Zu)return 1;{const t=PD(n),r=PD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},oq=function(n,e){return n===e?0:n<e?-1:1},S0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},qk=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=qk(n[e[r]]);return t+="}",t},jL=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ui(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const $L=function(n){(0,L.hu)(!ND(n),"Invalid JSON number");const r=1023;let i,s,c,h,p;0===n?(s=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(i?1:0),_.reverse();const E=_.join("");let D="";for(p=0;p<64;p+=8){let x=parseInt(E.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},cq=new RegExp("^-?(0*)\\d{1,10}$"),qL=-2147483648,Zk=2147483647,PD=function(n){if(cq.test(n)){const e=Number(n);if(e>=qL&&e<=Zk)return e}return null},Sy=function(n){try{n()}catch(e){setTimeout(()=>{throw ms("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},A0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class hq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ms(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class fq{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Li("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ms(e)}}let x0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const KL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,JL="websocket",XL="long_polling";class Wk{constructor(e,t,r,i,s=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ug.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ug.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function eU(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===JL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==XL)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function pq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ui(t,(s,c)=>{i.push(s+"="+c)}),r+i.join("&")}class gq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const zk={},Kk={};function Yk(n){const e=n.toString();return zk[e]||(zk[e]=new gq),zk[e]}class _q{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Sy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class vf{constructor(e,t,r,i,s,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=D0(e),this.stats_=Yk(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),eU(t,XL,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _q(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qk((...s)=>{const[c,h,p,_,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&KL.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vf.forceAllow_=!0}static forceDisallow(){vf.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!vf.forceAllow_&&(vf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=jL(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Qk{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=UL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Qk.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Li("frame writing exception"),h.stack&&Li(h.stack),Li(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Li("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Li("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let FD=null;typeof MozWebSocket<"u"?FD=MozWebSocket:typeof WebSocket<"u"&&(FD=WebSocket);let Ay=(()=>{class n{constructor(t,r,i,s,c,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=D0(this.connId),this.stats_=Yk(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,c){const h={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&KL.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),c&&(h.p=c),eU(t,JL,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ug.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Hk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new FD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==FD&&!n.forceDisallow_}static previouslyFailed(){return Ug.isInMemoryStorage||!0===Ug.get("previous_websocket_failure")}markConnectionHealthy(){Ug.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=jL(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),aU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[vf,Ay]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Ay&&Ay.isAvailable();let i=r&&!Ay.previouslyFailed();if(t.webSocketOnly&&(r||ms("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ay];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class pU{constructor(e,t,r,i,s,c,h,p,_,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=D0("c:"+this.id+":"),this.transportManager_=new aU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=A0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=S0("t",e),r=S0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=S0("t",e),r=S0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=S0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?$k("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$k("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ms("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),A0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):A0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ug.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gU{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class mU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class LD extends mU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new LD}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Vn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xn(){return new Vn("")}function on(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wf(n){return n.pieces_.length-n.pieceNum_}function Xn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Vn(n.pieces_,e)}function Xk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function M0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function vU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Vn(e,0)}function Dr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Vn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Vn(t,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function Hs(n,e){const t=on(n),r=on(e);if(null===t)return e;if(t===r)return Hs(Xn(n),Xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Vq(n,e){const t=M0(n,0),r=M0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Bg(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function eR(n,e){if(wf(n)!==wf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function za(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(wf(n)>wf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Bq{constructor(e,t){this.errorPrefix_=t,this.parts_=M0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);wU(this)}}function wU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Hg(n))}function Hg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class tR extends mU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new tR}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const k0=1e3;let VD,jg=(()=>{class n extends gU{constructor(t,r,i,s,c,h,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=D0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=k0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&LD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,c={r:s,a:t,b:r};this.log_((0,L.Wl)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const _=p.d,E=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(i,s),t.onComplete&&t.onComplete(E,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ms(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const c=s.s,h=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const c={p:t};s&&(c.q=i,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):$k("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=k0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=k0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=k0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,_=null;const E=function(){_?_.close():(p=!0,s())};t.realtime_={close:E,sendRequest:function(P){(0,L.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(P)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,U]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?Li("getToken() completed but was canceled"):(Li("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=U&&U.token,_=new pU(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,Y=>{ms(Y+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(P){t.log_("Failed to get token: "+P),p||(t.repoInfo_.nodeAdmin&&ms(P),E())}}})()}interrupt(t){Li("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Li("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=k0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>qk(c)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Vn(t).toString();let s;if(this.listens.has(i)){const c=this.listens.get(i);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Li("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Li("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Hk.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=LD.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new hn(e,t)}}class UD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new hn(hd,e),i=new hn(hd,t);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class CU extends UD{static get __EMPTY_NODE(){return VD}static set __EMPTY_NODE(e){VD=e}compare(e,t){return Bg(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return hn.MIN}maxPost(){return new hn(Zu,VD)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new hn(e,VD)}toString(){return".key"}}const Gu=new CU;class BD{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let rR,ru=(()=>{class n{constructor(t,r,i,s,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??uo.EMPTY_NODE,this.right=c??uo.EMPTY_NODE}copy(t,r,i,s,c){return new n(t??this.key,r??this.value,i??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const c=i(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return uo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return uo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class uo{constructor(e,t=uo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new uo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ru.BLACK,null,null))}remove(e){return new uo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ru.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new BD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new BD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new BD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new BD(this.root_,null,this.comparator_,!0,e)}}function zq(n,e){return Bg(n.name,e.name)}function nR(n,e){return Bg(n,e)}uo.EMPTY_NODE=new class Wq{copy(e,t,r,i,s){return this}insert(e,t,r){return new ru(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const TU=function(n){return"number"==typeof n?"number:"+$L(n):"string:"+n},IU=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===rR||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===rR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let DU,SU,AU,xy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),IU(this.priorityNode_)}static set __childrenNodeConstructor(t){DU=t}static get __childrenNodeConstructor(){return DU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return an(t)?this:".priority"===on(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=on(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===wf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+TU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?$L(this.value_):this.value_,this.lazyHash_=VL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(s>=0,"Unknown leaf type: "+r),(0,L.hu)(c>=0,"Unknown leaf type: "+i),s===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ur=new class Jq extends UD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Bg(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(Zu,new xy("[PRIORITY-POST]",AU))}makePost(e,t){const r=SU(e);return new hn(t,new xy("[PRIORITY-POST]",r))}toString(){return".priority"}},Xq=Math.log(2);class eZ{constructor(e){this.count=parseInt(Math.log(e+1)/Xq,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const HD=function(n,e,t,r){n.sort(e);const i=function(p,_){const E=_-p;let D,x;if(0===E)return null;if(1===E)return D=n[p],x=t?t(D):D,new ru(x,D.node,ru.BLACK,null,null);{const P=parseInt(E/2,10)+p,U=i(p,P),Y=i(P+1,_);return D=n[P],x=t?t(D):D,new ru(x,D.node,ru.BLACK,U,Y)}},h=function(p){let _=null,E=null,D=n.length;const x=function(U,Y){const ne=D-U,Ae=D;D-=U;const Ze=i(ne+1,Ae),ze=n[ne],Ye=t?t(ze):ze;P(new ru(Ye,ze.node,Y,null,Ze))},P=function(U){_?(_.left=U,_=U):(E=U,_=U)};for(let U=0;U<p.count;++U){const Y=p.nextBitIsOne(),ne=Math.pow(2,p.count-(U+1));Y?x(ne,ru.BLACK):(x(ne,ru.BLACK),x(ne,ru.RED))}return E}(new eZ(n.length));return new uo(r||e,h)};let iR;const My={};class fd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(My&&ur,"ChildrenNode.ts has not been loaded"),iR=iR||new fd({".priority":My},{".priority":ur}),iR}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof uo?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Gu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(hn.Wrap);let h,c=s.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=s.getNext();h=i?HD(r,e.getCompare()):My;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const E=Object.assign({},this.indexes_);return E[p]=h,new fd(E,_)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,s)=>{const c=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(c,"Missing index implementation for "+s),i===My){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(hn.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&h.push(_),_=p.getNext();return h.push(e),HD(h,c.getCompare())}return My}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new hn(e.name,h))),p.insert(e,e.node)}});return new fd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===My)return i;{const s=t.get(e.name);return s?i.remove(new hn(e.name,s)):i}});return new fd(r,this.indexSet_)}}let R0,Jt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&IU(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return R0||(R0=new n(new uo(nR),null,fd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||R0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?R0:r}}getChild(t){const r=on(t);return null===r?this:this.getImmediateChild(r).getChild(Xn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new hn(t,r);let s,c;r.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?R0:this.priorityNode_;return new n(s,h,c)}}updateChild(t,r){const i=on(t);if(null===i)return r;{(0,L.hu)(".priority"!==on(t)||1===wf(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Xn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,c=!0;if(this.forEachChild(ur,(h,p)=>{r[h]=p.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!t&&c&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+TU(this.getPriority().val())+":"),this.forEachChild(ur,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":VL(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const c=s.getPredecessorKey(new hn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new hn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new hn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,hn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,hn.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===N0?-1:0}withIndex(t){if(t===Gu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Gu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ur),s=r.getIterator(ur);let c=i.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Gu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const N0=new class tZ extends Jt{constructor(){super(new uo(nR),Jt.EMPTY_NODE,fd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Jt.EMPTY_NODE}isEmpty(){return!1}};function Fr(n,e=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new xy(n,Fr(e));if(n instanceof Array){let t=Jt.EMPTY_NODE;return Ui(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const s=Fr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Fr(e))}{const t=[];let r=!1;if(Ui(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Fr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new hn(c,p)))}}),0===t.length)return Jt.EMPTY_NODE;const s=HD(t,zq,c=>c.name,nR);if(r){const c=HD(t,ur.getCompare());return new Jt(s,Fr(e),new fd({".priority":c},{".priority":ur}))}return new Jt(s,Fr(e),fd.Default)}}Object.defineProperties(hn,{MIN:{value:new hn(hd,Jt.EMPTY_NODE)},MAX:{value:new hn(Zu,N0)}}),CU.__EMPTY_NODE=Jt.EMPTY_NODE,xy.__childrenNodeConstructor=Jt,function Kq(n){rR=n}(N0),function Qq(n){AU=n}(N0),function Yq(n){SU=n}(Fr);class sR extends UD{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!an(e)&&".priority"!==on(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Bg(e.name,t.name):s}makePost(e,t){const r=Fr(e),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(t,i)}maxPost(){const e=Jt.EMPTY_NODE.updateChild(this.indexPath_,N0);return new hn(Zu,e)}toString(){return M0(this.indexPath_,0).join("/")}}const oR=new class rZ extends UD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Bg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(e,t){const r=Fr(e);return new hn(t,r)}toString(){return".value"}},ky="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",iZ=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=ky.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let c=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=ky.charAt(e[i]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),kU=function(n){if(n===""+Zk)return"-";const e=PD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Zu;const s=ky.charAt(ky.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},RU=function(n){if(n===""+qL)return hd;const e=PD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Zk:(delete t[t.length-1],t.join("")):(t[t.length-1]=ky.charAt(ky.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function NU(n){return{type:"value",snapshotNode:n}}function Ry(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function P0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function O0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class lR{constructor(e){this.index_=e}updateChild(e,t,r,i,s,c){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(P0(t,h)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Ry(t,r)):c.trackChildChange(O0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ur,(i,s)=>{t.hasChild(i)||r.trackChildChange(P0(i,s))}),t.isLeafNode()||t.forEachChild(ur,(i,s)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(s)||r.trackChildChange(O0(i,s,c))}else r.trackChildChange(Ry(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class F0{constructor(e){this.indexedFilter_=new lR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=F0.getStartPost_(e),this.endPost_=F0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,c){return this.matches(new hn(t,r))||(r=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Jt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Jt.EMPTY_NODE);const s=this;return t.forEachChild(ur,(c,h)=>{s.matches(new hn(c,h))||(i=i.updateImmediateChild(c,Jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class oZ{constructor(e){this.rangedFilter_=new F0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,c){return this.rangedFilter_.matches(new hn(t,r))||(r=Jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,c):this.fullLimitUpdateChild_(e,t,r,s,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Jt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let s,c,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Jt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(x,P)=>D(P,x)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let _=0,E=!1;for(;p.hasNext();){const D=p.getNext();!E&&h(s,D)<=0&&(E=!0),E&&_<this.limit_&&h(D,c)<=0?_++:i=i.updateImmediateChild(D.name,Jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let c;if(this.reverse_){const D=this.index_.getCompare();c=(x,P)=>D(P,x)}else c=this.index_.getCompare();const h=e;(0,L.hu)(h.numChildren()===this.limit_,"");const p=new hn(t,r),_=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(h.hasChild(t)){const D=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const P=null==x?1:c(x,p);if(E&&!r.isEmpty()&&P>=0)return s?.trackChildChange(O0(t,r,D)),h.updateImmediateChild(t,r);{s?.trackChildChange(P0(t,D));const Y=h.updateImmediateChild(t,Jt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(s?.trackChildChange(Ry(x.name,x.node)),Y.updateImmediateChild(x.name,x.node)):Y}}return r.isEmpty()?e:E&&c(_,p)>=0?(null!=s&&(s.trackChildChange(P0(_.name,_.node)),s.trackChildChange(Ry(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(_.name,Jt.EMPTY_NODE)):e}}class jD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ur}copy(){const e=new jD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function cR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function $D(n,e){const t=n.copy();return t.index_=e,t}function PU(n){const e={};if(n.isDefault())return e;let t;return n.index_===ur?t="$priority":n.index_===oR?t="$value":n.index_===Gu?t="$key":((0,L.hu)(n.index_ instanceof sR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_&&(e.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function OU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ur&&(e.i=n.index_.toString()),e}class qD extends gU{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=D0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=qD.getListenId_(e,r),h={};this.listens_[c]=h;const p=PU(e._queryParams);this.restRequest_(s+".json",p,(_,E)=>{let D=E;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(s,D,!1,r),(0,L.DV)(this.listens_,c)===h){let x;x=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(x,null)}})}unlisten(e,t){const r=qD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=PU(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,L.cI)(h.responseText)}catch{ms("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&ms("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class hZ{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ZD(){return{value:null,children:new Map}}function Ny(n,e,t){if(an(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=on(e);n.children.has(r)||n.children.set(r,ZD()),Ny(n.children.get(r),e=Xn(e),t)}}function dR(n,e){if(an(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ur,(r,i)=>{Ny(n,new Vn(r),i)}),dR(n,e)}}if(n.children.size>0){const t=on(e);return e=Xn(e),n.children.has(t)&&dR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function hR(n,e,t){null!==n.value?t(e,n.value):function fZ(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{hR(i,new Vn(e.toString()+"/"+r),t)})}class pZ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ui(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class _Z{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new pZ(e);const r=1e4+2e4*Math.random();A0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ui(e,(i,s)=>{s>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),A0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ka=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ka||(Ka={})),Ka))();function gR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class GD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ka.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(an(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Vn(e));return new GD(xn(),t,this.revert)}}return(0,L.hu)(on(this.path)===e,"operationForChild called for unrelated child."),new GD(Xn(this.path),this.affectedTree,this.revert)}}class L0{constructor(e,t){this.source=e,this.path=t,this.type=Ka.LISTEN_COMPLETE}operationForChild(e){return an(this.path)?new L0(this.source,xn()):new L0(this.source,Xn(this.path))}}class $g{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ka.OVERWRITE}operationForChild(e){return an(this.path)?new $g(this.source,xn(),this.snap.getImmediateChild(e)):new $g(this.source,Xn(this.path),this.snap)}}class Py{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ka.MERGE}operationForChild(e){if(an(this.path)){const t=this.children.subtree(new Vn(e));return t.isEmpty()?null:t.value?new $g(this.source,xn(),t.value):new Py(this.source,xn(),t)}return(0,L.hu)(on(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Py(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(an(e))return this.isFullyInitialized()&&!this.filtered_;const t=on(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yZ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function U0(n,e,t,r,i,s){const c=r.filter(h=>h.type===t);c.sort((h,p)=>function bZ(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new hn(e.childName,e.snapshotNode),i=new hn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function wZ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(_=>{_.respondsTo(h.type)&&e.push(_.createEvent(p,n.query_))})})}function WD(n,e){return{eventCache:n,serverCache:e}}function V0(n,e,t,r){return WD(new bf(e,t,r),n.serverCache)}function LU(n,e,t,r){return WD(n.eventCache,new bf(e,t,r))}function zD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function qg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let mR;class cr{constructor(e,t=(()=>(mR||(mR=new uo(oq)),mR))()){this.value=e,this.children=t}static fromObject(e){let t=new cr(null);return Ui(e,(r,i)=>{t=t.set(new Vn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xn(),value:this.value};if(an(e))return null;{const r=on(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Xn(e),t);return null!=s?{path:Dr(new Vn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(an(e))return this;{const t=on(e),r=this.children.get(t);return null!==r?r.subtree(Xn(e)):new cr(null)}}set(e,t){if(an(e))return new cr(t,this.children);{const r=on(e),s=(this.children.get(r)||new cr(null)).set(Xn(e),t),c=this.children.insert(r,s);return new cr(this.value,c)}}remove(e){if(an(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const t=on(e),r=this.children.get(t);if(r){const i=r.remove(Xn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new cr(null):new cr(this.value,s)}return this}}get(e){if(an(e))return this.value;{const t=on(e),r=this.children.get(t);return r?r.get(Xn(e)):null}}setTree(e,t){if(an(e))return t;{const r=on(e),s=(this.children.get(r)||new cr(null)).setTree(Xn(e),t);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new cr(this.value,c)}}fold(e){return this.fold_(xn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Dr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,xn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(an(e))return null;{const s=on(e),c=this.children.get(s);return c?c.findOnPath_(Xn(e),Dr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xn(),t)}foreachOnPath_(e,t,r){if(an(e))return this;{this.value&&r(t,this.value);const i=on(e),s=this.children.get(i);return s?s.foreachOnPath_(Xn(e),Dr(t,i),r):new cr(null)}}foreach(e){this.foreach_(xn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Dr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class iu{constructor(e){this.writeTree_=e}static empty(){return new iu(new cr(null))}}function B0(n,e,t){if(an(e))return new iu(new cr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const c=Hs(i,e);return s=s.updateChild(c,t),new iu(n.writeTree_.set(i,s))}{const i=new cr(t),s=n.writeTree_.setTree(e,i);return new iu(s)}}}function _R(n,e,t){let r=n;return Ui(t,(i,s)=>{r=B0(r,Dr(e,i),s)}),r}function UU(n,e){if(an(e))return iu.empty();{const t=n.writeTree_.setTree(e,new cr(null));return new iu(t)}}function yR(n,e){return null!=Zg(n,e)}function Zg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Hs(t.path,e)):null}function VU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ur,(r,i)=>{e.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new hn(r,i.value))}),e}function Ef(n,e){if(an(e))return n;{const t=Zg(n,e);return new iu(null!=t?new cr(t):n.writeTree_.subtree(e))}}function vR(n){return n.writeTree_.isEmpty()}function Oy(n,e){return BU(xn(),n.writeTree_,e)}function BU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=BU(Dr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Dr(n,".priority"),r)),t}}function KD(n,e){return ZU(e,n)}function SZ(n,e){if(n.snap)return za(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&za(Dr(n.path,t),e))return!0;return!1}function xZ(n){return n.visible}function HU(n,e,t){let r=iu.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const c=s.path;let h;if(s.snap)za(t,c)?(h=Hs(t,c),r=B0(r,h,s.snap)):za(c,t)&&(h=Hs(c,t),r=B0(r,xn(),s.snap.getChild(h)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(za(t,c))h=Hs(t,c),r=_R(r,h,s.children);else if(za(c,t))if(h=Hs(c,t),an(h))r=_R(r,xn(),s.children);else{const p=(0,L.DV)(s.children,on(h));if(p){const _=p.getChild(Xn(h));r=B0(r,xn(),_)}}}}}return r}function jU(n,e,t,r,i){if(r||i){const s=Ef(n.visibleWrites,e);return!i&&vR(s)?t:i||null!=t||yR(s,xn())?Oy(HU(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(za(_.path,e)||za(e,_.path))},e),t||Jt.EMPTY_NODE):null}{const s=Zg(n.visibleWrites,e);if(null!=s)return s;{const c=Ef(n.visibleWrites,e);return vR(c)?t:null!=t||yR(c,xn())?Oy(c,t||Jt.EMPTY_NODE):null}}}function YD(n,e,t,r){return jU(n.writeTree,n.treePath,e,t,r)}function wR(n,e){return function MZ(n,e,t){let r=Jt.EMPTY_NODE;const i=Zg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ur,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(t){const s=Ef(n.visibleWrites,e);return t.forEachChild(ur,(c,h)=>{const p=Oy(Ef(s,new Vn(c)),h);r=r.updateImmediateChild(c,p)}),VU(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return VU(Ef(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function $U(n,e,t,r){return function kZ(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Dr(e,t);if(yR(n.visibleWrites,s))return null;{const c=Ef(n.visibleWrites,s);return vR(c)?i.getChild(t):Oy(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function QD(n,e){return function NZ(n,e){return Zg(n.visibleWrites,e)}(n.writeTree,Dr(n.treePath,e))}function bR(n,e,t){return function RZ(n,e,t,r){const i=Dr(e,t),s=Zg(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Oy(Ef(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function qU(n,e){return ZU(Dr(n.treePath,e),n.writeTree)}function ZU(n,e){return{treePath:n,writeTree:e}}class LZ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,O0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,P0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Ry(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,O0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const GU=new class UZ{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ER{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new bf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qg(this.viewCache_),s=function FZ(n,e,t,r,i,s){return function PZ(n,e,t,r,i,s,c){let h;const p=Ef(n.visibleWrites,e),_=Zg(p,xn());if(null!=_)h=_;else{if(null==t)return[];h=Oy(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const E=[],D=c.getCompare(),x=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let P=x.getNext();for(;P&&E.length<i;)0!==D(P,r)&&E.push(P),P=x.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function WU(n,e,t,r,i,s){const c=e.eventCache;if(null!=QD(r,t))return e;{let h,p;if(an(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=qg(e),D=wR(r,_ instanceof Jt?_:Jt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const _=YD(r,qg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),_,s)}else{const _=on(t);if(".priority"===_){(0,L.hu)(1===wf(t),"Can't have a priority with additional path components");const E=c.getNode();p=e.serverCache.getNode();const D=$U(r,t,E,p);h=null!=D?n.filter.updatePriority(E,D):c.getNode()}else{const E=Xn(t);let D;if(c.isCompleteForChild(_)){p=e.serverCache.getNode();const x=$U(r,t,c.getNode(),p);D=null!=x?c.getNode().getImmediateChild(_).updateChild(E,x):c.getNode().getImmediateChild(_)}else D=bR(r,_,e.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),_,D,E,i,s):c.getNode()}}return V0(e,h,c.isFullyInitialized()||an(t),n.filter.filtersNodes())}}function JD(n,e,t,r,i,s,c,h){const p=e.serverCache;let _;const E=c?n.filter:n.filter.getIndexedFilter();if(an(t))_=E.updateFullNode(p.getNode(),r,null);else if(E.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(t,r);_=E.updateFullNode(p.getNode(),P,null)}else{const P=on(t);if(!p.isCompleteForPath(t)&&wf(t)>1)return e;const U=Xn(t),ne=p.getNode().getImmediateChild(P).updateChild(U,r);_=".priority"===P?E.updatePriority(p.getNode(),ne):E.updateChild(p.getNode(),P,ne,U,GU,null)}const D=LU(e,_,p.isFullyInitialized()||an(t),E.filtersNodes());return WU(n,D,t,i,new ER(i,D,s),h)}function CR(n,e,t,r,i,s,c){const h=e.eventCache;let p,_;const E=new ER(i,e,s);if(an(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=V0(e,_,!0,n.filter.filtersNodes());else{const D=on(t);if(".priority"===D)_=n.filter.updatePriority(e.eventCache.getNode(),r),p=V0(e,_,h.isFullyInitialized(),h.isFiltered());else{const x=Xn(t),P=h.getNode().getImmediateChild(D);let U;if(an(x))U=r;else{const Y=E.getCompleteChild(D);U=null!=Y?".priority"===Xk(x)&&Y.getChild(vU(x)).isEmpty()?Y:Y.updateChild(x,r):Jt.EMPTY_NODE}p=P.equals(U)?e:V0(e,n.filter.updateChild(h.getNode(),D,U,x,E,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function zU(n,e){return n.eventCache.isCompleteForChild(e)}function KU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function TR(n,e,t,r,i,s,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=an(t)?r:new cr(null).setTree(t,r);const E=e.serverCache.getNode();return _.children.inorderTraversal((D,x)=>{if(E.hasChild(D)){const U=KU(0,e.serverCache.getNode().getImmediateChild(D),x);p=JD(n,p,new Vn(D),U,i,s,c,h)}}),_.children.inorderTraversal((D,x)=>{const P=!e.serverCache.isCompleteForChild(D)&&null===x.value;if(!E.hasChild(D)&&!P){const Y=KU(0,e.serverCache.getNode().getImmediateChild(D),x);p=JD(n,p,new Vn(D),Y,i,s,c,h)}}),p}class WZ{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new lR(r.getIndex()),s=function aZ(n){return n.loadsAllData()?new lR(n.getIndex()):n.hasLimit()?new oZ(n):new F0(n)}(r);this.processor_=function VZ(n){return{filter:n}}(s);const c=t.serverCache,h=t.eventCache,p=i.updateFullNode(Jt.EMPTY_NODE,c.getNode(),null),_=s.updateFullNode(Jt.EMPTY_NODE,h.getNode(),null),E=new bf(p,c.isFullyInitialized(),i.filtersNodes()),D=new bf(_,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=WD(D,E),this.eventGenerator_=new yZ(this.query_)}get query(){return this.query_}}function YZ(n,e){const t=qg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!an(e)&&!t.getImmediateChild(on(e)).isEmpty())?t.getChild(e):null}function YU(n){return 0===n.eventRegistrations_.length}function QU(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JU(n,e,t,r){e.type===Ka.MERGE&&null!==e.source.queryId&&((0,L.hu)(qg(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(zD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function HZ(n,e,t,r,i){const s=new LZ;let c,h;if(t.type===Ka.OVERWRITE){const _=t;_.source.fromUser?c=CR(n,e,_.path,_.snap,r,i,s):((0,L.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered()&&!an(_.path),c=JD(n,e,_.path,_.snap,r,i,h,s))}else if(t.type===Ka.MERGE){const _=t;_.source.fromUser?c=function $Z(n,e,t,r,i,s,c){let h=e;return r.foreach((p,_)=>{const E=Dr(t,p);zU(e,on(E))&&(h=CR(n,h,E,_,i,s,c))}),r.foreach((p,_)=>{const E=Dr(t,p);zU(e,on(E))||(h=CR(n,h,E,_,i,s,c))}),h}(n,e,_.path,_.children,r,i,s):((0,L.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered(),c=TR(n,e,_.path,_.children,r,i,h,s))}else if(t.type===Ka.ACK_USER_WRITE){const _=t;c=_.revert?function GZ(n,e,t,r,i,s){let c;if(null!=QD(r,t))return e;{const h=new ER(r,e,i),p=e.eventCache.getNode();let _;if(an(t)||".priority"===on(t)){let E;if(e.serverCache.isFullyInitialized())E=YD(r,qg(e));else{const D=e.serverCache.getNode();(0,L.hu)(D instanceof Jt,"serverChildren would be complete if leaf node"),E=wR(r,D)}_=n.filter.updateFullNode(p,E,s)}else{const E=on(t);let D=bR(r,E,e.serverCache);null==D&&e.serverCache.isCompleteForChild(E)&&(D=p.getImmediateChild(E)),_=null!=D?n.filter.updateChild(p,E,D,Xn(t),h,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Jt.EMPTY_NODE,Xn(t),h,s):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=YD(r,qg(e)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=QD(r,xn()),V0(e,_,c,n.filter.filtersNodes())}}(n,e,_.path,r,i,s):function qZ(n,e,t,r,i,s,c){if(null!=QD(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(an(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return JD(n,e,t,p.getNode().getChild(t),i,s,h,c);if(an(t)){let _=new cr(null);return p.getNode().forEachChild(Gu,(E,D)=>{_=_.set(new Vn(E),D)}),TR(n,e,t,_,i,s,h,c)}return e}{let _=new cr(null);return r.foreach((E,D)=>{const x=Dr(t,E);p.isCompleteForPath(x)&&(_=_.set(E,p.getNode().getChild(x)))}),TR(n,e,t,_,i,s,h,c)}}(n,e,_.path,_.affectedTree,r,i,s)}else{if(t.type!==Ka.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);c=function ZZ(n,e,t,r,i){const s=e.serverCache;return WU(n,LU(e,s.getNode(),s.isFullyInitialized()||an(t),s.isFiltered()),t,r,GU,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function jZ(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=zD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(NU(zD(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,i,e,t,r);return function BZ(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,XU(n,s.changes,s.viewCache.eventCache.getNode(),null)}function XU(n,e,t,r){return function vZ(n,e,t,r){const i=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function sZ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),U0(n,i,"child_removed",e,r,t),U0(n,i,"child_added",e,r,t),U0(n,i,"child_moved",s,r,t),U0(n,i,"child_changed",e,r,t),U0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let XD,tS;class e2{constructor(){this.views=new Map}}function IR(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),JU(s,e,t,r)}{let s=[];for(const c of n.views.values())s=s.concat(JU(c,e,t,r));return s}}function t2(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=YD(t,i?r:null),p=!1;h?p=!0:r instanceof Jt?(h=wR(t,r),p=!1):(h=Jt.EMPTY_NODE,p=!1);const _=WD(new bf(h,p,!1),new bf(r,i,!1));return new WZ(e,_)}return c}function n2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Cf(n,e){let t=null;for(const r of n.views.values())t=t||YZ(r,e);return t}function r2(n,e){return e._queryParams.loadsAllData()?eS(n):n.views.get(e._queryIdentifier)}function i2(n,e){return null!=r2(n,e)}function Tf(n){return null!=eS(n)}function eS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let oG=1;class s2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_=function OZ(){return{visibleWrites:iu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function DR(n,e,t,r,i){return function CZ(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=B0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Fy(n,new $g({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function If(n,e,t=!1){const r=function IZ(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function DZ(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&SZ(h,r.path)?i=!1:za(r.path,h.path)&&(s=!0)),c--}return!!i&&(s?(function AZ(n){n.visibleWrites=HU(n.allWrites,xZ,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=UU(n.visibleWrites,r.path):Ui(r.children,p=>{n.visibleWrites=UU(n.visibleWrites,Dr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new cr(null);return null!=r.snap?s=s.set(xn(),!0):Ui(r.children,c=>{s=s.set(new Vn(c),!0)}),Fy(n,new GD(r.path,s,t))}return[]}function H0(n,e,t){return Fy(n,new $g({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function nS(n,e,t,r,i=!1){const s=e._path,c=n.syncPointTree_.get(s);let h=[];if(c&&("default"===e._queryIdentifier||i2(c,e))){const p=function rG(n,e,t,r){const i=e._queryIdentifier,s=[];let c=[];const h=Tf(n);if("default"===i)for(const[p,_]of n.views.entries())c=c.concat(QU(_,t,r)),YU(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(i);p&&(c=c.concat(QU(p,t,r)),YU(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Tf(n)&&s.push(new(function eG(){return(0,L.hu)(XD,"Reference.ts has not been loaded"),XD}())(e._repo,e._path)),{removed:s,events:c}}(c,e,t,r);(function tG(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=p.removed;if(h=p.events,!i){const E=-1!==_.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(x,P)=>Tf(P));if(E&&!D){const x=n.syncPointTree_.subtree(s);if(!x.isEmpty()){const P=function fG(n){return n.fold((e,t,r)=>{if(t&&Tf(t))return[eS(t)];{let i=[];return t&&(i=n2(t)),Ui(r,(s,c)=>{i=i.concat(c)}),i}})}(x);for(let U=0;U<P.length;++U){const Y=P[U],ne=Y.query,Ae=u2(n,Y);n.listenProvider_.startListening($0(ne),j0(n,ne),Ae.hashFn,Ae.onComplete)}}}!D&&_.length>0&&!r&&(E?n.listenProvider_.stopListening($0(e),null):_.forEach(x=>{const P=n.queryToTagMap.get(iS(x));n.listenProvider_.stopListening($0(x),P)}))}!function pG(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=iS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,_)}return h}function o2(n,e,t,r){const i=AR(n,r);if(null!=i){const s=xR(i),c=s.path,h=s.queryId,p=Hs(c,e);return MR(n,c,new $g(gR(h),p,t))}return[]}function SR(n,e,t,r=!1){const i=e._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(i,(x,P)=>{const U=Hs(x,i);s=s||Cf(P,U),c=c||Tf(P)});let p,h=n.syncPointTree_.get(i);h?(c=c||Tf(h),s=s||Cf(h,xn())):(h=new e2,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=s?p=!0:(p=!1,s=Jt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((P,U)=>{const Y=Cf(U,xn());Y&&(s=s.updateImmediateChild(P,Y))}));const _=i2(h,e);if(!_&&!e._queryParams.loadsAllData()){const x=iS(e);(0,L.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const P=function gG(){return oG++}();n.queryToTagMap.set(x,P),n.tagToQueryMap.set(P,x)}let D=function nG(n,e,t,r,i,s){const c=t2(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function QZ(n,e){n.eventRegistrations_.push(e)}(c,t),function JZ(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ur,(s,c)=>{r.push(Ry(s,c))}),t.isFullyInitialized()&&r.push(NU(t.getNode())),XU(n,r,t.getNode(),e)}(c,t)}(h,e,t,KD(n.pendingWriteTree_,i),s,p);if(!_&&!c&&!r){const x=r2(h,e);D=D.concat(function mG(n,e,t){const r=e._path,i=j0(n,e),s=u2(n,t),c=n.listenProvider_.startListening($0(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Tf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((_,E,D)=>{if(!an(_)&&E&&Tf(E))return[eS(E).query];{let x=[];return E&&(x=x.concat(n2(E).map(P=>P.query))),Ui(D,(P,U)=>{x=x.concat(U)}),x}});for(let _=0;_<p.length;++_){const E=p[_];n.listenProvider_.stopListening($0(E),j0(n,E))}}return c}(n,e,x))}return D}function rS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,h)=>{const _=Cf(h,Hs(c,e));if(_)return _});return jU(i,e,s,t,!0)}function Fy(n,e){return a2(e,n.syncPointTree_,null,KD(n.pendingWriteTree_,xn()))}function a2(n,e,t,r){if(an(n.path))return l2(n,e,t,r);{const i=e.get(xn());null==t&&null!=i&&(t=Cf(i,xn()));let s=[];const c=on(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const _=t?t.getImmediateChild(c):null,E=qU(r,c);s=s.concat(a2(h,p,_,E))}return i&&(s=s.concat(IR(i,n,r,t))),s}}function l2(n,e,t,r){const i=e.get(xn());null==t&&null!=i&&(t=Cf(i,xn()));let s=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,_=qU(r,c),E=n.operationForChild(c);E&&(s=s.concat(l2(E,h,p,_)))}),i&&(s=s.concat(IR(i,n,r,t))),s}function u2(n,e){const t=e.query,r=j0(n,t);return{hashFn:()=>(function zZ(n){return n.viewCache_.serverCache.getNode()}(e)||Jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function cG(n,e,t){const r=AR(n,t);if(r){const i=xR(r),s=i.path,c=i.queryId,h=Hs(s,e);return MR(n,s,new L0(gR(c),h))}return[]}(n,t._path,r):function uG(n,e){return Fy(n,new L0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function uq(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return nS(n,t,null,s)}}}}function j0(n,e){const t=iS(e);return n.queryToTagMap.get(t)}function iS(n){return n._path.toString()+"$"+n._queryIdentifier}function AR(n,e){return n.tagToQueryMap.get(e)}function xR(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Vn(n.substr(0,e))}}function MR(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),IR(r,t,KD(n.pendingWriteTree_,e),null)}function $0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function sG(){return(0,L.hu)(tS,"Reference.ts has not been loaded"),tS}())(n._repo,n._path):n}class kR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new kR(t)}node(){return this.node_}}class RR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Dr(this.path_,e);return new RR(this.syncTree_,t)}node(){return rS(this.syncTree_,this.path_)}}const c2=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?yG(n[".sv"],e,t):"object"==typeof n[".sv"]?vG(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},yG=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},vG=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},d2=function(n,e,t,r){return PR(e,new RR(t,n),r)},NR=function(n,e,t){return PR(n,new kR(e),t)};function PR(n,e,t){const r=n.getPriority().val(),i=c2(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,h=c2(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new xy(h,Fr(i)):n}{const c=n;return s=c,i!==c.getPriority().val()&&(s=s.updatePriority(new xy(i))),c.forEachChild(ur,(h,p)=>{const _=PR(p,e.getImmediateChild(h),t);_!==p&&(s=s.updateImmediateChild(h,_))}),s}}class OR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function sS(n,e){let t=e instanceof Vn?e:new Vn(e),r=n,i=on(t);for(;null!==i;){const s=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new OR(i,r,s),t=Xn(t),i=on(t)}return r}function Gg(n){return n.node.value}function FR(n,e){n.node.value=e,LR(n)}function h2(n){return n.node.childCount>0}function oS(n,e){Ui(n.node.children,(t,r)=>{e(new OR(t,n,r))})}function f2(n,e,t,r){t&&!r&&e(n),oS(n,i=>{f2(i,e,!0,r)}),t&&r&&e(n)}function q0(n){return new Vn(null===n.parent?n.name:q0(n.parent)+"/"+n.name)}function LR(n){null!==n.parent&&function EG(n,e,t){const r=function wG(n){return void 0===Gg(n)&&!h2(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,LR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,LR(n))}(n.parent,n.name,n)}const CG=/[\[\].#$\/\u0000-\u001F\u007F]/,TG=/[\[\].#$\u0000-\u001F\u007F]/,UR=10485760,aS=function(n){return"string"==typeof n&&0!==n.length&&!CG.test(n)},p2=function(n){return"string"==typeof n&&0!==n.length&&!TG.test(n)},Z0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ND(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Wu=function(n,e,t,r){r&&void 0===e||G0((0,L.gK)(n,"value"),e,t)},G0=function(n,e,t){const r=t instanceof Vn?new Bq(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Hg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Hg(r)+" with contents = "+e.toString());if(ND(e))throw new Error(n+"contains "+e.toString()+" "+Hg(r));if("string"==typeof e&&e.length>UR/3&&(0,L.ug)(e)>UR)throw new Error(n+"contains a string greater than "+UR+" utf8 bytes "+Hg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Ui(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!aS(c)))throw new Error(n+" contains an invalid key ("+c+") "+Hg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Hq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),wU(n)})(r,c),G0(n,h,r),function jq(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Hg(r)+" in addition to actual children.")}},g2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Ui(e,(c,h)=>{const p=new Vn(c);if(G0(i,h,Dr(t,p)),".priority"===Xk(p)&&!Z0(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=M0(r);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!aS(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Vq);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&za(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},VR=function(n,e,t){if(!t||void 0!==e){if(ND(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Z0(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},W0=function(n,e,t,r){if(!(r&&void 0===t||aS(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},z0=function(n,e,t,r){if(!(r&&void 0===t||p2(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ya=function(n,e){if(".info"===on(e))throw new Error(n+" failed = Can't modify data under /.info/")},m2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!aS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),p2(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class AG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!eR(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function _2(n,e,t){lS(n,t),y2(n,r=>eR(r,e))}function Vo(n,e,t){lS(n,t),y2(n,r=>za(r,e)||za(e,r))}function y2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(xG(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function xG(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Vg&&Li("event: "+t.toString()),Sy(r)}}}const v2="repo_interrupt";class kG{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ZD(),this.transactionQueueTree_=new OR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function w2(n){const t=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function K0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:w2(n)})}function b2(n,e,t,r,i){n.dataUpdateCount++;const s=new Vn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const p=(0,L.UI)(t,_=>Fr(_));c=function dG(n,e,t,r){const i=AR(n,r);if(i){const s=xR(i),c=s.path,h=s.queryId,p=Hs(c,e),_=cr.fromObject(t);return MR(n,c,new Py(gR(h),p,_))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Fr(t);c=o2(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,L.UI)(t,_=>Fr(_));c=function lG(n,e,t){const r=cr.fromObject(t);return Fy(n,new Py({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Fr(t);c=H0(n.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=Uy(n,s)),Vo(n.eventQueue_,h,c)}function E2(n,e){BR(n,"connected",e),!1===e&&function FG(n){Ly(n,"onDisconnectEvents");const e=K0(n),t=ZD();hR(n.onDisconnect_,xn(),(i,s)=>{const c=d2(i,s,n.serverSyncTree_,e);Ny(t,i,c)});let r=[];hR(t,xn(),(i,s)=>{r=r.concat(H0(n.serverSyncTree_,i,s));const c=qR(n,i);Uy(n,c)}),n.onDisconnect_=ZD(),Vo(n.eventQueue_,xn(),r)}(n)}function BR(n,e,t){const r=new Vn("/.info/"+e),i=Fr(t);n.infoData_.updateSnapshot(r,i);const s=H0(n.infoSyncTree_,r,i);Vo(n.eventQueue_,r,s)}function uS(n){return n.nextWriteId_++}function HR(n,e,t,r,i){Ly(n,"set",{path:e.toString(),value:t,priority:r});const s=K0(n),c=Fr(t,r),h=rS(n.serverSyncTree_,e),p=NR(c,h,s),_=uS(n),E=DR(n.serverSyncTree_,e,p,_,!0);lS(n.eventQueue_,E),n.server_.put(e.toString(),c.val(!0),(x,P)=>{const U="ok"===x;U||ms("set at "+e+" failed: "+x);const Y=If(n.serverSyncTree_,_,!U);Vo(n.eventQueue_,e,Y),Df(0,i,x,P)});const D=qR(n,e);Uy(n,D),Vo(n.eventQueue_,D,[])}function LG(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&dR(n.onDisconnect_,e),Df(0,t,r,i)})}function C2(n,e,t,r){const i=Fr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,c)=>{"ok"===s&&Ny(n.onDisconnect_,e,i),Df(0,r,s,c)})}function jR(n,e,t){let r;r=".info"===on(e._path)?nS(n.infoSyncTree_,e,t):nS(n.serverSyncTree_,e,t),_2(n.eventQueue_,e._path,r)}function T2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(v2)}function Ly(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Li(t,...e)}function Df(n,e,t,r){e&&Sy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const c=new Error(s);c.code=i,e(c)}})}function $R(n,e,t){return rS(n.serverSyncTree_,e,t)||Jt.EMPTY_NODE}function cS(n,e=n.transactionQueueTree_){if(e||dS(n,e),Gg(e)){const t=D2(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function $G(n,e,t){const r=t.map(_=>_.currentWriteId),i=$R(n,e,r);let s=i;const c=i.hash();for(let _=0;_<t.length;_++){const E=t[_];(0,L.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const D=Hs(e,E.path);s=s.updateChild(D,E.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,_=>{Ly(n,"transaction put response",{path:p.toString(),status:_});let E=[];if("ok"===_){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,E=E.concat(If(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();dS(n,sS(n.transactionQueueTree_,e)),cS(n,n.transactionQueueTree_),Vo(n.eventQueue_,e,E);for(let x=0;x<D.length;x++)Sy(D[x])}else{if("datastale"===_)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{ms("transaction at "+p.toString()+" failed: "+_);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=_}Uy(n,e)}},c)}(n,q0(e),t)}else h2(e)&&oS(e,t=>{cS(n,t)})}function Uy(n,e){const t=I2(n,e),r=q0(t);return function qG(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],_=Hs(t,p.path);let D,E=!1;if((0,L.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,D=p.abortReason,i=i.concat(If(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,D="maxretry",i=i.concat(If(n.serverSyncTree_,p.currentWriteId,!0));else{const x=$R(n,p.path,c);p.currentInputSnapshot=x;const P=e[h].update(x.val());if(void 0!==P){G0("transaction failed: Data returned ",P,p.path);let U=Fr(P);"object"==typeof P&&null!=P&&(0,L.r3)(P,".priority")||(U=U.updatePriority(x.getPriority()));const ne=p.currentWriteId,Ae=K0(n),Ze=NR(U,x,Ae);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=Ze,p.currentWriteId=uS(n),c.splice(c.indexOf(ne),1),i=i.concat(DR(n.serverSyncTree_,p.path,Ze,p.currentWriteId,p.applyLocally)),i=i.concat(If(n.serverSyncTree_,ne,!0))}else E=!0,D="nodata",i=i.concat(If(n.serverSyncTree_,p.currentWriteId,!0))}Vo(n.eventQueue_,t,i),i=[],E&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}dS(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Sy(r[h]);cS(n,n.transactionQueueTree_)}(n,D2(n,t),r),r}function I2(n,e){let t,r=n.transactionQueueTree_;for(t=on(e);null!==t&&void 0===Gg(r);)r=sS(r,t),t=on(e=Xn(e));return r}function D2(n,e){const t=[];return S2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function S2(n,e,t){const r=Gg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);oS(e,i=>{S2(n,i,t)})}function dS(n,e){const t=Gg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,FR(e,t.length>0?t:void 0)}oS(e,r=>{dS(n,r)})}function qR(n,e){const t=q0(I2(n,e)),r=sS(n.transactionQueueTree_,e);return function bG(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ZR(n,i)}),ZR(n,r),f2(r,i=>{ZR(n,i)}),t}function ZR(n,e){const t=Gg(e);if(t){const r=[];let i=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,L.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,L.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(If(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?FR(e,void 0):t.length=s+1,Vo(n.eventQueue_,q0(e),i);for(let c=0;c<r.length;c++)Sy(r[c])}}const GR=function(n,e){const t=WG(n),r=t.namespace;return"firebase.com"===t.domain&&qu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&qu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ms("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Wk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Vn(t.pathString)}},WG=function(n){let e="",t="",r="",i="",s="",c=!0,h="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(h=n.substring(0,_-1),n=n.substring(_+2));let E=n.indexOf("/");-1===E&&(E=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(E,D)),E<D&&(i=function ZG(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,D)));const x=function GG(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ms(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));_=e.indexOf(":"),_>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(_+1),10)):_=e.length;const P=e.slice(0,_);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),s=r}"ns"in x&&(s=x.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:s}};class A2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class x2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class WR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class M2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return LG(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ya("OnDisconnect.remove",this._path);const e=new L.BH;return C2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ya("OnDisconnect.set",this._path),Wu("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return C2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ya("OnDisconnect.setWithPriority",this._path),Wu("OnDisconnect.setWithPriority",e,this._path,!1),VR("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function UG(n,e,t,r,i){const s=Fr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,h)=>{"ok"===c&&Ny(n.onDisconnect_,e,s),Df(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ya("OnDisconnect.update",this._path),g2("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function VG(n,e,t,r){if((0,L.xb)(t))return Li("onDisconnect().update() called with empty data.  Don't do anything."),void Df(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Ui(t,(c,h)=>{const p=Fr(h);Ny(n.onDisconnect_,Dr(e,c),p)}),Df(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class co{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return an(this._path)?null:Xk(this._path)}get ref(){return new Qa(this._repo,this._path)}get _queryIdentifier(){const e=OU(this._queryParams),t=qk(e);return"{}"===t?"default":t}get _queryObject(){return OU(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof co))return!1;const t=this._repo===e._repo,r=eR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Uq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function hS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Sf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Gu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==hd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Zu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===ur){if(null!=e&&!Z0(e)||null!=t&&!Z0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof sR||n.getIndex()===oR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function fS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Qa extends co{constructor(e,t){super(e,t,new jD,!1)}get parent(){const e=vU(this._path);return null===e?null:new Qa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Wg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Vn(e),r=zg(this.ref,e);return new Wg(this._node.getChild(t),r,ur)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Wg(i,zg(this.ref,r),ur)))}hasChild(e){const t=new Vn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function k2(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?zg(n._root,e):n._root}function R2(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=GR(e,n._repo.repoInfo_.nodeAdmin);m2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&qu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),k2(n,t.path.toString())}function zg(n,e){return null===on((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),z0("child","path",t,!1)):z0("child","path",e,!1),new Qa(n._repo,Dr(n._path,e));var t}function zR(n,e){n=(0,L.m9)(n),Ya("set",n._path),Wu("set",e,n._path,!1);const t=new L.BH;return HR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function JG(n,e){g2("update",e,n._path,!1);const t=new L.BH;return function OG(n,e,t,r){Ly(n,"update",{path:e.toString(),value:t});let i=!0;const s=K0(n),c={};if(Ui(t,(h,p)=>{i=!1,c[h]=d2(Dr(e,h),Fr(p),n.serverSyncTree_,s)}),i)Li("update() called with empty data.  Don't do anything."),Df(0,r,"ok",void 0);else{const h=uS(n),p=function aG(n,e,t,r){!function TZ(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=_R(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=cr.fromObject(t);return Fy(n,new Py({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);lS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(_,E)=>{const D="ok"===_;D||ms("update at "+e+" failed: "+_);const x=If(n.serverSyncTree_,h,!D),P=x.length>0?Uy(n,e):e;Vo(n.eventQueue_,P,x),Df(0,r,_,E)}),Ui(t,_=>{const E=qR(n,Dr(e,_));Uy(n,E)}),Vo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function XG(n){n=(0,L.m9)(n);const e=new WR(()=>{}),t=new Y0(e);return function PG(n,e,t){const r=function hG(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,E)=>{const D=Hs(_,t);r=r||Cf(E,D)});let i=n.syncPointTree_.get(t);i?r=r||Cf(i,xn()):(i=new e2,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,c=s?new bf(r,!0,!1):null;return function KZ(n){return zD(n.viewCache_)}(t2(i,e,KD(n.pendingWriteTree_,e._path),s?c.getNode():Jt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Fr(i).withIndex(e._queryParams.getIndex());let c;if(SR(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=H0(n.serverSyncTree_,e._path,s);else{const h=j0(n.serverSyncTree_,e);c=o2(n.serverSyncTree_,e._path,s,h)}return Vo(n.eventQueue_,e._path,c),nS(n.serverSyncTree_,e,t,null,!0),s},i=>(Ly(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Wg(r,new Qa(n._repo,n._path),n._queryParams.getIndex()))}class Y0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new A2("value",this,new Wg(e.snapshotNode,new Qa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new x2(this,e,t):null}matches(e){return e instanceof Y0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class pS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new x2(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=zg(new Qa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new A2(e.type,this,new Wg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof pS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Q0(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,_=(E,D)=>{jR(n._repo,n,h),p(E,D)};_.userCallback=t.userCallback,_.context=t.context,t=_}const c=new WR(t,s||void 0),h="value"===e?new Y0(c):new pS(e,c);return function BG(n,e,t){let r;r=".info"===on(e._path)?SR(n.infoSyncTree_,e,t):SR(n.serverSyncTree_,e,t),_2(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>jR(n._repo,n,h)}function KR(n,e,t,r){return Q0(n,"value",e,t,r)}function N2(n,e,t,r){return Q0(n,"child_added",e,t,r)}function P2(n,e,t,r){return Q0(n,"child_changed",e,t,r)}function O2(n,e,t,r){return Q0(n,"child_moved",e,t,r)}function F2(n,e,t,r){return Q0(n,"child_removed",e,t,r)}function L2(n,e,t){let r=null;const i=t?new WR(t):null;"value"===e?r=new Y0(i):e&&(r=new pS(e,i)),jR(n._repo,n,r)}class su{}class U2 extends su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wu("endAt",this._value,e._path,!0);const t=cR(e._queryParams,this._value,this._key);if(fS(t),Sf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new co(e._repo,e._path,t,e._orderByCalled)}}class tW extends su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wu("endBefore",this._value,e._path,!1);const t=function dZ(n,e,t){let r,i;return n.index_===Gu?("string"==typeof e&&(e=RU(e)),i=cR(n,e,t)):(r=null==t?hd:RU(t),i=cR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(fS(t),Sf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new co(e._repo,e._path,t,e._orderByCalled)}}class V2 extends su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wu("startAt",this._value,e._path,!0);const t=uR(e._queryParams,this._value,this._key);if(fS(t),Sf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new co(e._repo,e._path,t,e._orderByCalled)}}class iW extends su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wu("startAfter",this._value,e._path,!1);const t=function cZ(n,e,t){let r;if(n.index_===Gu)"string"==typeof e&&(e=kU(e)),r=uR(n,e,t);else{let i;i=null==t?Zu:kU(t),r=uR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(fS(t),Sf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new co(e._repo,e._path,t,e._orderByCalled)}}class oW extends su{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new co(e._repo,e._path,function lZ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class lW extends su{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new co(e._repo,e._path,function uZ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class cW extends su{constructor(e){super(),this._path=e}_apply(e){hS(e,"orderByChild");const t=new Vn(this._path);if(an(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new sR(t),i=$D(e._queryParams,r);return Sf(i),new co(e._repo,e._path,i,!0)}}class hW extends su{_apply(e){hS(e,"orderByKey");const t=$D(e._queryParams,Gu);return Sf(t),new co(e._repo,e._path,t,!0)}}class pW extends su{_apply(e){hS(e,"orderByPriority");const t=$D(e._queryParams,ur);return Sf(t),new co(e._repo,e._path,t,!0)}}class mW extends su{_apply(e){hS(e,"orderByValue");const t=$D(e._queryParams,oR);return Sf(t),new co(e._repo,e._path,t,!0)}}class yW extends su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Wu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new U2(this._value,this._key)._apply(new V2(this._value,this._key)._apply(e))}}function ou(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function XZ(n){(0,L.hu)(!XD,"__referenceConstructor has already been defined"),XD=n})(Qa),function iG(n){(0,L.hu)(!tS,"__referenceConstructor has already been defined"),tS=n}(Qa);const YR={};function H2(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||qu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Li("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,c=GR(s,i),h=c.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${h.namespace}`,c=GR(s,i),h=c.repoInfo):p=!c.repoInfo.secure;const E=i&&p?new x0(x0.OWNER):new fq(n.name,n.options,e);m2("Invalid Firebase Database URL",c),an(c.path)||qu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function CW(n,e,t,r){let i=YR[e.name];i||(i={},YR[e.name]=i);let s=i[n.toURLString()];return s&&qu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new kG(n,false,t,r),i[n.toURLString()]=s,s}(h,n,E,new hq(n.name,t));return new IW(D,n)}class IW{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function RG(n,e,t){if(n.stats_=Yk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new qD(n.repoInfo_,(r,i,s,c)=>{b2(n,r,i,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>E2(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new jg(n.repoInfo_,e,(r,i,s,c)=>{b2(n,r,i,s,c)},r=>{E2(n,r)},r=>{!function NG(n,e){Ui(e,(t,r)=>{BR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function mq(n,e){const t=n.toString();return Kk[t]||(Kk[t]=e()),Kk[t]}(n.repoInfo_,()=>new _Z(n.stats_,n.server_)),n.infoData_=new hZ,n.infoSyncTree_=new s2({startListening:(r,i,s,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=H0(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),BR(n,"connected",!1),n.serverSyncTree_=new s2({startListening:(r,i,s,c)=>(n.server_.listen(r,s,i,(h,p)=>{const _=c(h,p);Vo(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qa(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function EW(n,e){const t=YR[e];(!t||t[n.key]!==n)&&qu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),T2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&qu("Cannot call "+e+" on a deleted database.")}}function j2(){aU.IS_TRANSPORT_INITIALIZED&&ms("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function DW(){j2(),vf.forceDisallow()}function SW(){j2(),Ay.forceDisallow(),vf.forceAllow()}function MW(n,e){HL(n,e)}const RW={".sv":"timestamp"};class OW{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}jg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},jg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function kW(n){FL(ki.SDK_VERSION),(0,ki._registerComponent)(new oo.wA("database",(e,{instanceIdentifier:t})=>H2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ki.registerVersion)(PL,OL,n),(0,ki.registerVersion)(PL,OL,"esm2017")}();const VW=new Ns.Yd("@firebase/database-compat"),q2=function(n){VW.warn("FIREBASE WARNING: "+n)};class jW{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,q2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class $W{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Af{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),z0("DataSnapshot.child","path",e,!1),new Af(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),z0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Af(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Bo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class es{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const c=es.getCancelAndContextArgs_("Query.on",r,i),h=(_,E)=>{t.call(c.context,new Af(this.database,_),E)};h.userCallback=t,h.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return KR(this._delegate,h,p),t;case"child_added":return N2(this._delegate,h,p),t;case"child_removed":return F2(this._delegate,h,p),t;case"child_changed":return P2(this._delegate,h,p),t;case"child_moved":return O2(this._delegate,h,p),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,L2(this._delegate,e,i)}else L2(this._delegate,e)}get(){return XG(this._delegate).then(e=>new Af(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const s=es.getCancelAndContextArgs_("Query.once",r,i),c=new L.BH,h=(_,E)=>{const D=new Af(this.database,_);t&&t.call(s.context,D,E),c.resolve(D)};h.userCallback=t,h.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),c.reject(_)};switch(e){case"value":KR(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":N2(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":F2(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":P2(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":O2(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new es(this.database,ou(this._delegate,function aW(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oW(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new es(this.database,ou(this._delegate,function uW(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new lW(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new es(this.database,ou(this._delegate,function dW(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return z0("orderByChild","path",n,!1),new cW(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new es(this.database,ou(this._delegate,function fW(){return new hW}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new es(this.database,ou(this._delegate,function gW(){return new pW}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new es(this.database,ou(this._delegate,function _W(){return new mW}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new es(this.database,ou(this._delegate,function rW(n=null,e){return W0("startAt","key",e,!0),new V2(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new es(this.database,ou(this._delegate,function sW(n,e){return W0("startAfter","key",e,!0),new iW(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new es(this.database,ou(this._delegate,function eW(n,e){return W0("endAt","key",e,!0),new U2(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new es(this.database,ou(this._delegate,function nW(n,e){return W0("endBefore","key",e,!0),new tW(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new es(this.database,ou(this._delegate,function vW(n,e){return W0("equalTo","key",e,!0),new yW(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof es))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Bo(this.database,new Qa(this._delegate._repo,this._delegate._path))}}class Bo extends es{constructor(e,t){super(e,new co(t._repo,t._path,new jD,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Bo(this.database,zg(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Bo(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Bo(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=zR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,q2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ya("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=JG(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function QG(n,e,t){if(Ya("setWithPriority",n._path),Wu("setWithPriority",e,n._path,!1),VR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return HR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function KG(n){return Ya("remove",n._path),zR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function FW(n,e,t){var r;if(n=(0,L.m9)(n),Ya("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new L.BH,h=KR(n,()=>{});return function jG(n,e,t,r,i,s){Ly(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:UL(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=$R(n,e,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{G0("transaction failed: Data returned ",p,c.path),c.status=0;const _=sS(n.transactionQueueTree_,e),E=Gg(_)||[];let D;E.push(c),FR(_,E),"object"==typeof p&&null!==p&&(0,L.r3)(p,".priority")?(D=(0,L.DV)(p,".priority"),(0,L.hu)(Z0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(rS(n.serverSyncTree_,e)||Jt.EMPTY_NODE).getPriority().val();const x=K0(n),P=Fr(p,D),U=NR(P,h,x);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=U,c.currentWriteId=uS(n);const Y=DR(n.serverSyncTree_,e,U,c.currentWriteId,c.applyLocally);Vo(n.eventQueue_,e,Y),cS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,_,E)=>{let D=null;p?s.reject(p):(D=new Wg(E,new Qa(n._repo,n._path),ur),s.resolve(new OW(_,D)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new $W(s.committed,new Af(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function YG(n,e){n=(0,L.m9)(n),Ya("setPriority",n._path),VR("setPriority",e,!1);const t=new L.BH;return HR(n._repo,Dr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function zG(n,e){n=(0,L.m9)(n),Ya("push",n._path),Wu("push",e,n._path,!0);const t=w2(n._repo),r=iZ(t),i=zg(n,r),s=zg(n,r);let c;return c=null!=e?zR(s,e).then(()=>s):Promise.resolve(s),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Bo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const s=new Bo(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Ya("Reference.onDisconnect",this._delegate._path),new jW(new M2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class J0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:DW,forceLongPolling:SW}}useEmulator(e,t,r={}){!function $2(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&qu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&qu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new x0(x0.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);s=new x0(c)}!function bW(n,e,t,r){n.repoInfo_=new Wk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Bo){const t=R2(this._delegate,e.toString());return new Bo(this,t)}{const t=k2(this._delegate,e);return new Bo(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=R2(this._delegate,e);return new Bo(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function AW(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),T2(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function xW(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function HG(n){n.persistentConnection_&&n.persistentConnection_.resume(v2)}(n._repo)}(this._delegate)}}J0.ServerValue={TIMESTAMP:function NW(){return RW}(),increment:n=>function PW(n){return{".sv":{increment:n}}}(n)};var ZW=Object.freeze({__proto__:null,initStandalone:function qW({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){FL(t);const c=new oo.zt("auth-internal",new oo.H0("database-standalone"));return c.setComponent(new oo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new J0(H2(n,c,void 0,e,s),n),namespace:i}}});const GW=J0.ServerValue;function Z2(n){return null==n}function G2(n){return"function"==typeof n.set}function W2(n,e){return G2(e)?e:n.ref(e)}function z2(n,e){if(function zW(n){return"string"==typeof n}(n))return e.stringCase();if(G2(n))return e.firebaseCase();if(function KW(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function X0(n,e,t="on",r=u_.z){return new si.y(i=>{let s=null;return s=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,dt.U)(i=>{const{snapshot:s,prevKey:c}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:c,key:h}}),(0,eL.B)())}function K2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function JW(n,e){const{payload:t,prevKey:r,key:i}=e,s=K2(n,i),c=function QW(n,e){if(Z2(e))return 0;{const t=K2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function Y2(n){return(Z2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Q2(n,e,t){return function YW(n,e,t){return X0(n,"value","once",t).pipe(Rr(r=>{const i=[ut(r)];return e.forEach(s=>i.push(X0(n,s,"on",t))),(0,ED.T)(...i).pipe(Au(JW,[]))}),Lw())}(n,e=Y2(e),t)}function J2(n,e,t){const r=(e=Y2(e)).map(i=>X0(n,i,"on",t));return(0,ED.T)(...r)}function X2(n,e){return function(r,i){return z2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function n6(n){return function(t){return t?z2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function eV(n,e){return function(){return X0(n,"value","on",e)}}!function WW(n){n.INTERNAL.registerComponent(new oo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new J0(i,r)},"PUBLIC").setServiceProps({Reference:Bo,Query:es,Database:J0,DataSnapshot:Af,enableLogging:MW,INTERNAL:ZW,ServerValue:GW}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(uT.Z);const s6=new l.OlP("angularfire2.realtimeDatabaseURL"),o6=new l.OlP("angularfire2.database.use-emulator");let Vy=(()=>{class n{constructor(t,r,i,s,c,h,p,_,E,D,x,P,U,Y,ne){this.schedulers=h;const Ae=p,Ze=(0,jr.on)(t,c,r);_&&Lk(Ze,c,E,x,P,U,D,Y),this.database=(0,jr.cc)(`${Ze.name}.database.${i}`,"AngularFireDatabase",Ze.name,()=>{const ze=c.runOutsideAngular(()=>Ze.database(i||void 0));return Ae&&ze.useEmulator(...Ae),ze},[Ae])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>W2(this.database,t));let s=i;return r&&(s=r(i)),function r6(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:X2(r,"update"),set:X2(r,"set"),push:i=>r.push(i),remove:n6(r),snapshotChanges:i=>Q2(n,i,t).pipe(yn.iC),stateChanges:i=>J2(n,i,t).pipe(yn.iC),auditTrail:i=>function XW(n,e,t){return function t6(n,e,t){return function e6(n,e){return X0(n,"value","on",e).pipe((0,dt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function eq(...n){const e=(0,$i.jO)(n);return(0,Un.e)((t,r)=>{const i=n.length,s=new Array(i);let c=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,Tu.Xf)(n[p]).subscribe((0,An.x)(r,_=>{s[p]=_,!h&&!c[p]&&(c[p]=!0,(h=c.every(Su.y))&&(c=null))},X$.Z));t.subscribe((0,An.x)(r,p=>{if(h){const _=[p,...s];r.next(e?e(..._):_)}}))})}(e),(0,dt.U)(([i,s])=>{const c=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function tq(n){return(0,Un.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,An.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,dt.U)(i=>i.actions))}(n,J2(n,e).pipe(Au((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(yn.iC),valueChanges:(i,s)=>Q2(n,i,t).pipe((0,dt.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),yn.iC)}}(s,this)}object(t){return function i6(n,e){return{query:n,snapshotChanges:()=>eV(n,e.schedulers.outsideAngular)().pipe(yn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>eV(n,e.schedulers.outsideAngular)().pipe(yn.iC,(0,dt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>W2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(jr.Dh),l.LFG(jr.xv,8),l.LFG(s6,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(yn.HU),l.LFG(o6,8),l.LFG(Iy,8),l.LFG(kk,8),l.LFG(Rk,8),l.LFG(Nk,8),l.LFG(Pk,8),l.LFG(Ok,8),l.LFG(Fk,8),l.LFG(T0,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),a6=(()=>{class n{constructor(){kD.Z.registerVersion("angularfire",yn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Vy]}),n})(),_s=(()=>{class n{constructor(t,r,i,s,c){this.afs=t,this.afAuth=r,this.db=i,this.router=s,this.ngZone=c,this.success=new Ai(!1),this.error=new Ai(!1),this.errorMessage=new Ai(""),this.alert=new Ai(""),this.afAuth.authState.subscribe(h=>{if(h){this.userData=h,console.log(h);const p=this.db.object("users/"+h.uid);p.query.ref.on("value",_=>{const E=_.val();null===E?(p.set({admin:!1,username:h.displayName,email:h.email,isDisabled:!1}),localStorage.setItem("role",JSON.stringify({admin:!1}))):localStorage.setItem("role",JSON.stringify({admin:E.admin}))},_=>{console.log("The read failed: "+_.name)}),localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user")),JSON.parse(localStorage.getItem("role"))}else localStorage.setItem("user","null"),localStorage.setItem("role","null"),JSON.parse(localStorage.getItem("user")),JSON.parse(localStorage.getItem("role"))})}setError(t){this.error.next(t)}getError(){return this.error.asObservable()}setErrorMessage(t){this.errorMessage.next(t)}getErrorMessage(){return this.errorMessage.asObservable()}setSuccess(t){this.success.next(t)}getSuccess(){return this.success.asObservable()}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{console.log(i),this.SetUserData(i.user),this.afAuth.authState.subscribe(s=>{s&&(s.emailVerified?(this.setError(!1),this.router.navigate([""])):this.router.navigate(["verify-email-address"]))})}).catch(i=>{console.log(i.code),this.setError(!0),this.setErrorMessage(i.message)})}SignUp(t,r,i){return this.afAuth.createUserWithEmailAndPassword(t,r).then(s=>{s.user?.updateProfile({displayName:i}),this.SendVerificationMail(),this.SetUserData(s.user)}).catch(s=>{window.alert(s.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}get user(){return JSON.parse(localStorage.getItem("user"))}get role(){return JSON.parse(localStorage.getItem("role"))}GoogleAuth(){return this.AuthLogin(new Fw.Q).then(t=>{this.afAuth.authState.subscribe(r=>{r&&this.router.navigate([""])})})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.SetUserData(r.user)}).catch(r=>{"auth/user-disabled"===r.code?window.alert("Account has been disabled.\nPlease contact rwill33@uwo.ca for help."):window.alert(r)})}ChangePassword(t,r,i){r===i?this.afAuth.currentUser.then(s=>{if(s){const c=Fw.M.credential(s.email,t);s.reauthenticateWithCredential(c).then(h=>{console.log("Reauthenticated!"),h.user.updatePassword(r).then(()=>{console.log("Update Success!"),this.setSuccess(!0)}).catch(p=>{this.setError(!0),this.setErrorMessage("auth/weak-password"===p.code?"Password must be at least 6 characters":p.code),console.log(p),this.setSuccess(!1)})}).catch(h=>{this.setError(!0),this.setErrorMessage("auth/wrong-password"===h.code?"Invalid old password":h.code),console.log(h),this.setSuccess(!1)})}}):(console.log("Passwords must match"),this.setError(!0),this.setErrorMessage("Passwords Must Match"))}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("role"),this.router.navigate(["home"])})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Bk),l.LFG(Iy),l.LFG(Vy),l.LFG(gn),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l6=(()=>{class n{constructor(t){this.authService=t,this.error=!1,this.errorMessage=null,this.authService.getError().subscribe(r=>{this.error=r}),this.authService.getErrorMessage().subscribe(r=>{this.errorMessage=r})}ngOnInit(){this.error=!1,this.errorMessage=null}inputValidation(t,r){console.log(this.validateEmail(t)),""!==t&&this.validateEmail(t)?""===r?(this.error=!0,this.errorMessage="Please enter a password"):this.authService.SignIn(t,r):(this.error=!0,this.errorMessage="Please enter a valid email")}validateEmail(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sign-in"]],decls:32,vars:3,consts:[[1,"container-sm","d-flex","justify-content-center","align-items-center"],[1,"container-fluid","sign-in-container"],["routerLink","/",1,"material-symbols-outlined","back-button"],[1,"d-flex","justify-content-center"],[1,"input-group","flex-nowrap","mt-5","mb-4"],["id","addon-wrapping",1,"input-group-text"],["type","email","placeholder","Email","aria-label","Username","aria-describedby","addon-wrapping","required","",3,"ngClass"],["userName",""],[1,"input-group","has-validation","mb-2"],["type","password","placeholder","Password","aria-label","Password","aria-describedby","addon-wrapping","required","",3,"ngClass"],["userPassword",""],[1,"invalid-feedback",3,"textContent"],[1,"input-group","flex-nowrap","mb-3"],["type","button","value","Log in",1,"btn","btn-primary",3,"click"],[1,"formGroup"],[1,"or"],[1,"orInner"],[1,"input-group","flex-nowrap","mb-2"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"fab","fa-google-plus-g"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"span",2),l._uU(3," arrow_back "),l.qZA(),l.TgZ(4,"h3",3),l._uU(5,"Sign In"),l.qZA(),l.TgZ(6,"div",4)(7,"span",5),l._uU(8,"@"),l.qZA(),l._UZ(9,"input",6,7),l.qZA(),l.TgZ(11,"div",8),l._UZ(12,"input",9,10)(14,"div",11),l.qZA(),l.TgZ(15,"div",12)(16,"input",13),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(10),h=l.MAs(13);return l.KtG(r.inputValidation(c.value,h.value))}),l.qZA()(),l.TgZ(17,"div",14)(18,"span",15)(19,"span",16),l._uU(20,"Or"),l.qZA()()(),l.TgZ(21,"div",17)(22,"button",18),l.NdJ("click",function(){return r.authService.GoogleAuth()}),l._UZ(23,"i",19),l._uU(24," Log in with Google "),l.qZA()(),l.TgZ(25,"a",20),l._uU(26,"Forgot Password?"),l.qZA(),l.TgZ(27,"div",21)(28,"span"),l._uU(29,"Don't have an account?"),l.TgZ(30,"a",22),l._uU(31," Sign Up"),l.qZA()()()()()}2&t&&(l.xp6(9),l.Q6J("ngClass",r.error?"form-control is-invalid":"form-control"),l.xp6(3),l.Q6J("ngClass",r.error?"form-control is-invalid":"form-control"),l.xp6(2),l.Q6J("textContent",r.errorMessage))},dependencies:[tn,Mi,Va],styles:[".container-sm[_ngcontent-%COMP%]{height:100%}.sign-in-container[_ngcontent-%COMP%]{width:350px;background-color:#f3efefc7;box-shadow:1px 0 33px 9px #7d7d7dbf;-webkit-box-shadow:1px 0px 33px 9px rgba(125,125,125,.75);-moz-box-shadow:1px 0px 33px 9px rgba(125,125,125,.75);padding:24px;border-radius:8px}.back-button[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),u6=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sign-up"]],decls:19,vars:0,consts:[[1,"container-sm","d-flex","justify-content-center","align-items-center"],[1,"container-fluid","sign-in-container"],["routerLink","/sign-in",1,"material-symbols-outlined","back-button"],[1,"d-flex","justify-content-center"],[1,"input-group","flex-nowrap","mt-5","mb-3"],["type","text","placeholder","Username","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control"],["userName",""],[1,"input-group","flex-nowrap","mb-3"],["id","addon-wrapping",1,"input-group-text"],["type","email","placeholder","Email","aria-label","Email","aria-describedby","addon-wrapping","required","",1,"form-control"],["email",""],[1,"input-group","flex-nowrap","mb-4"],["type","password","placeholder","Password","aria-label","Password","aria-describedby","addon-wrapping","required","",1,"form-control"],["userPassword",""],["type","button","value","Sign Up",1,"btn","btn-primary",3,"click"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"span",2),l._uU(3," arrow_back "),l.qZA(),l.TgZ(4,"h3",3),l._uU(5,"Sign Up"),l.qZA(),l.TgZ(6,"div",4),l._UZ(7,"input",5,6),l.qZA(),l.TgZ(9,"div",7)(10,"span",8),l._uU(11,"@"),l.qZA(),l._UZ(12,"input",9,10),l.qZA(),l.TgZ(14,"div",11),l._UZ(15,"input",12,13),l.qZA(),l.TgZ(17,"div",7)(18,"input",14),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(13),h=l.MAs(16),p=l.MAs(8);return l.KtG(r.authService.SignUp(c.value,h.value,p.value))}),l.qZA()()()()}},dependencies:[Mi],styles:[".container-sm[_ngcontent-%COMP%]{height:100%}.sign-in-container[_ngcontent-%COMP%]{width:350px;background-color:#f3efefc7;box-shadow:1px 0 33px 9px #7d7d7dbf;-webkit-box-shadow:1px 0px 33px 9px rgba(125,125,125,.75);-moz-box-shadow:1px 0px 33px 9px rgba(125,125,125,.75);padding:24px;border-radius:8px}.back-button[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();function c6(n,e){1&n&&(l.TgZ(0,"button",12),l._uU(1,"Log In"),l.qZA()),2&n&&l.Q6J("routerLink","/dashboard")("ngClass","btn btn-outline-dark")}function d6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",13)(1,"div",14)(2,"span",15)(3,"span",16),l._uU(4," account_circle "),l.qZA()(),l.TgZ(5,"button",12),l._uU(6),l.qZA()(),l.TgZ(7,"button",17),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.authService.SignOut())}),l._uU(8,"Log Out"),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(5),l.Q6J("routerLink","/dashboard")("ngClass","btn btn-outline-dark"),l.xp6(1),l.Oqu(t.isAdmin),l.xp6(1),l.Q6J("routerLink","/")("ngClass","btn btn-dark text-nowrap")}}let eE=(()=>{class n{constructor(t,r){this.authService=t,this.cdRef=r,this.loggedIn=!1,this.isAdmin=this.authService.role?.admin?"Admin":"Account",this.authService.afAuth.authState.subscribe(i=>{this.loggedIn=!(!i||!i?.emailVerified),this.cdRef.detectChanges()})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-navbar"]],decls:16,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","/home",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["href","/playlists",1,"nav-link"],["href","/tracks",1,"nav-link"],[3,"routerLink","ngClass",4,"ngIf"],["class","d-flex",4,"ngIf"],[3,"routerLink","ngClass"],[1,"d-flex"],[1,"input-group","me-3"],["id","basic-addon1",1,"input-group-text"],[1,"material-symbols-outlined"],[3,"routerLink","ngClass","click"]],template:function(t,r){1&t&&(l.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),l._uU(3,"Music Database"),l.qZA(),l.TgZ(4,"button",3),l._UZ(5,"span",4),l.qZA(),l.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),l._uU(10,"Public Playlists"),l.qZA()(),l.TgZ(11,"li",7)(12,"a",9),l._uU(13,"Tracks"),l.qZA()()(),l.YNc(14,c6,2,2,"button",10),l.YNc(15,d6,9,5,"div",11),l.qZA()()()),2&t&&(l.xp6(14),l.Q6J("ngIf",!r.loggedIn),l.xp6(1),l.Q6J("ngIf",r.loggedIn))},dependencies:[tn,Nn,Mi],styles:['.navbar-light[_ngcontent-%COMP%]{background-color:#1db954!important}.input-group-text[_ngcontent-%COMP%]{background-color:#00000021;border:1px solid black}.container[_ngcontent-%COMP%]{margin:8px 0;width:300px}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 48}']}),n})();function h6(n,e){1&n&&(l.TgZ(0,"li",6)(1,"a",11),l._uU(2," Admin "),l.qZA()())}function f6(n,e){1&n&&(l.TgZ(0,"li",6)(1,"a",12),l._uU(2," Disputes "),l.qZA()())}const p6=function(){return{exact:!0}};let g6=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-dashboard"]],decls:17,vars:4,consts:[[2,"height","100%","display","flex","flex-direction","column"],[2,"flex-shrink","0"],[1,"row",2,"display","flex","height","100%","overflow","auto"],[1,"col-md-2","d-md-block","bg-light","sidebar",2,"height","100%"],[1,"sidebar-sticky"],[1,"nav","nav-pills","flex-column"],[1,"nav-item"],["routerLinkActive","active","routerLink","/dashboard",1,"nav-link",3,"routerLinkActiveOptions"],["routerLinkActive","active","routerLink","playlists",1,"nav-link"],["class","nav-item",4,"ngIf"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","main"],["routerLinkActive","active","routerLink","admin",1,"nav-link"],["routerLinkActive","active","routerLink","disputes",1,"nav-link"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"app-navbar"),l.qZA(),l.TgZ(3,"div",2)(4,"nav",3)(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),l._uU(9," Account "),l.qZA()(),l.TgZ(10,"li",6)(11,"a",8),l._uU(12," Playlists "),l.qZA()(),l.YNc(13,h6,3,0,"li",9),l.YNc(14,f6,3,0,"li",9),l.qZA()()(),l.TgZ(15,"main",10),l._UZ(16,"router-outlet"),l.qZA()()()),2&t&&(l.xp6(8),l.Q6J("routerLinkActiveOptions",l.DdM(3,p6)),l.xp6(5),l.Q6J("ngIf",r.authService.role.admin),l.xp6(1),l.Q6J("ngIf",r.authService.role.admin))},dependencies:[Nn,xu,Va,jc,eE],styles:[".sidebar[_ngcontent-%COMP%]{padding:0}.nav-link[_ngcontent-%COMP%]{border-radius:0;color:#000}.main[_ngcontent-%COMP%]{height:100%;overflow:auto;padding:0}.row[_ngcontent-%COMP%]{width:100%}.nav-link.active[_ngcontent-%COMP%]{background-color:#1db954}"]}),n})(),m6=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-forgot-password"]],decls:11,vars:0,consts:[[1,"container-sm","d-flex","justify-content-center","align-items-center"],[1,"container-fluid","sign-in-container"],["routerLink","/sign-in",1,"material-symbols-outlined","back-button"],[1,"d-flex","justify-content-center"],[1,"input-group","flex-nowrap","mt-5","mb-4"],["type","text","placeholder","Email Address","required","",1,"form-control"],["passwordResetEmail",""],[1,"input-group","flex-nowrap","mb-3"],["type","button","value","Reset Password",1,"btn","btn-primary",3,"click"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"span",2),l._uU(3," arrow_back "),l.qZA(),l.TgZ(4,"h3",3),l._uU(5,"Reset Password"),l.qZA(),l.TgZ(6,"div",4),l._UZ(7,"input",5,6),l.qZA(),l.TgZ(9,"div",7)(10,"input",8),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(8);return l.KtG(r.authService.ForgotPassword(c.value))}),l.qZA()()()()}},dependencies:[Mi],styles:[".container-sm[_ngcontent-%COMP%]{height:100%}.sign-in-container[_ngcontent-%COMP%]{width:350px;background-color:#f3efefc7;box-shadow:1px 0 33px 9px #7d7d7dbf;-webkit-box-shadow:1px 0px 33px 9px rgba(125,125,125,.75);-moz-box-shadow:1px 0px 33px 9px rgba(125,125,125,.75);padding:24px;border-radius:8px}.back-button[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();function _6(n,e){if(1&n&&(l.TgZ(0,"div",8)(1,"p",9),l._uU(2,"We have sent a confirmation email to "),l.TgZ(3,"strong"),l._uU(4),l.qZA(),l._uU(5,"."),l.qZA(),l.TgZ(6,"p",9),l._uU(7,"Please check your email and click on the link to verfiy your email address."),l.qZA()()),2&n){const t=e.ngIf;l.xp6(4),l.Oqu(t.email)}}let y6=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-verify-email"]],decls:11,vars:1,consts:[[1,"container-sm","d-flex","justify-content-center","align-items-center"],[1,"container-fluid","sign-in-container"],["routerLink","/sign-in",1,"material-symbols-outlined","back-button"],[1,"d-flex","justify-content-center","mt-4"],["class","formGroup",4,"ngIf"],[1,"formGroup","d-flex","justify-content-center"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-redo-alt"],[1,"formGroup"],[1,"text-center"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"span",2),l._uU(3," arrow_back "),l.qZA(),l.TgZ(4,"h3",3),l._uU(5,"Thank You for Registering"),l.qZA(),l.YNc(6,_6,8,1,"div",4),l.TgZ(7,"div",5)(8,"button",6),l.NdJ("click",function(){return r.authService.SendVerificationMail()}),l._UZ(9,"i",7),l._uU(10," Resend Verification Email "),l.qZA()()()()),2&t&&(l.xp6(6),l.Q6J("ngIf",r.authService.userData))},dependencies:[Nn,Mi],styles:[".container-sm[_ngcontent-%COMP%]{height:100%}.sign-in-container[_ngcontent-%COMP%]{width:400px;background-color:#f3efefc7;box-shadow:1px 0 33px 9px #7d7d7dbf;-webkit-box-shadow:1px 0px 33px 9px rgba(125,125,125,.75);-moz-box-shadow:1px 0px 33px 9px rgba(125,125,125,.75);padding:24px;border-radius:8px}.back-button[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),v6=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:37,vars:0,consts:[[1,"box"],["href","/privacy-policy"],["href","/acceptable-use-policy"],["href","/dmca-policy"]],template:function(t,r){1&t&&(l.TgZ(0,"body"),l._UZ(1,"app-navbar"),l.TgZ(2,"h1"),l._uU(3,"Music Database"),l.qZA(),l.TgZ(4,"div")(5,"div",0),l._uU(6,"\nWelcome to Music Database!"),l._UZ(7,"br")(8,"br"),l._uU(9,"\nSearch for your favourite tracks and"),l._UZ(10,"br"),l._uU(11,"find them on youtube, browse and"),l._UZ(12,"br"),l._uU(13,"listen to public playlists."),l._UZ(14,"br")(15,"br"),l._uU(16,"\nCreate an account to make"),l._UZ(17,"br"),l._uU(18,"and manage your own playlists,"),l._UZ(19,"br"),l._uU(20,"and review other members playlists."),l._UZ(21,"br")(22,"br"),l._uU(23,"\nGet started from the"),l._UZ(24,"br"),l._uU(25,"navigation bar at the top! "),l.qZA()(),l.TgZ(26,"div"),l._UZ(27,"br"),l.TgZ(28,"p")(29,"a",1),l._uU(30,"Privacy Policy"),l.qZA(),l._uU(31," - "),l.TgZ(32,"a",2),l._uU(33,"Acceptable use Policy"),l.qZA(),l._uU(34," - "),l.TgZ(35,"a",3),l._uU(36,"DMCA Policy"),l.qZA()()()())},dependencies:[eE],styles:[".box[_ngcontent-%COMP%]{width:300px;border:3px solid rgb(255,255,255);padding:10px;margin:auto;border-radius:10px}body[_ngcontent-%COMP%]{background-color:#191414}div[_ngcontent-%COMP%]{text-align:center;color:#fff}h1[_ngcontent-%COMP%]{color:#1db954;text-align:center}a[_ngcontent-%COMP%]{color:#1db954}"]}),n})(),Kg=(()=>{class n{constructor(t){this.http=t,this.hostName="https://ronin.software:3000"}createPlaylist(t,r,i){return this.http.put(`${this.hostName}/api/playlists`,{name:t,description:r,uid:i})}editPlaylist(t,r,i){return this.http.post(`${this.hostName}/api/playlists`,{name:t,description:""===r?null:r,playlistId:i})}getUserPlaylists(t){return this.http.get(`${this.hostName}/api/playlists?uid=`+t)}getGenres(){return this.http.get(`${this.hostName}/api/genres`)}getArtists(t){return this.http.get(`${this.hostName}/api/tracks/`+t)}getPlaylistById(t){return this.http.get(`${this.hostName}/api/playlists/`+t)}getNumberOfTracks(t){return this.http.get(`${this.hostName}/api/countTracks/`+t)}deletePlaylist(t){return this.http.delete(`${this.hostName}/api/playlists/`+t)}getPlaylistTracksById(t){return this.http.get(`${this.hostName}/api/playlists/tracks/`+t)}addTrackToPlaylist(t,r){return this.http.put(`${this.hostName}/api/playlists/tracks/`+r,{trackId:t})}deleteTrackFromPlaylist(t,r){return this.http.delete(`${this.hostName}/api/playlists/tracks/`+r,{body:{trackId:t}})}changePlaylistPublic(t,r){return this.http.post(`${this.hostName}/api/playlists`,{isPublic:r,playlistId:t})}getPublicPlaylists(){return this.http.get(`${this.hostName}/api/publicPlaylists`)}getPlaylistAllComments(t){return this.http.get(`${this.hostName}/api/comment/`+t)}getPlaylistComments(t){return this.http.get(`${this.hostName}/api/publicComments/`+t)}addPlaylistReview(t,r,i,s,c){return this.http.put(`${this.hostName}/api/comment/`+t,{playlistId:t,uid:r,username:i,review:s,rating:c})}hideReview(t,r){return this.http.post(`${this.hostName}/api/comment`,{isHidden:t,reviewId:r})}addDispute(t,r,i){return this.http.put(`${this.hostName}/api/disputes`,{reviewId:t,dateD:r,dateR:i})}getDispute(){return this.http.get(`${this.hostName}/api/disputes`)}getTrackById(t){return this.http.get(`${this.hostName}/api/track/`+t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ms))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function w6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",3)(1,"div",4),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.getPlaylist(s.playlistId))}),l.TgZ(2,"div",5),l._UZ(3,"img",6),l.TgZ(4,"h5",7),l._uU(5),l.qZA(),l.TgZ(6,"div",8),l._uU(7),l.qZA(),l.TgZ(8,"div",8),l._uU(9),l.qZA(),l.TgZ(10,"div",8),l._uU(11),l.qZA(),l.TgZ(12,"div",8),l._uU(13),l.qZA()()()()}if(2&n){const t=e.$implicit;l.xp6(5),l.Oqu(t.playlistName),l.xp6(2),l.Oqu(t.username),l.xp6(2),l.hij("Track Count: ",t.trackCount,""),l.xp6(2),l.Oqu(t.duration?"Duration: "+t.duration+" Minutes":"Duration: 0 Minutes"),l.xp6(2),l.Oqu(t.rating?"Rating: "+t.rating:"No reviews")}}let b6=(()=>{class n{constructor(t,r,i){this.expressService=t,this.router=r,this.db=i,this.playlists=null}ngOnInit(){this.getPublicPlaylists()}getPublicPlaylists(){this.expressService.getPublicPlaylists().subscribe(t=>{const r=t.splice(0,10);console.log(r),r.forEach(i=>{this.expressService.getNumberOfTracks(i.playlistId).subscribe(c=>{i.trackCount=c.count,i.duration=c.duration,i.rating=c.rating},c=>{console.log(c)}),this.db.object("users/"+i.uid).query.ref.on("value",c=>{i.username=c.val().username},c=>{console.log("The read failed: "+c.name)})}),this.playlists=r},t=>{console.log(t)})}getPlaylist(t){this.router.navigate(["/playlists/"+t]),console.log(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Kg),l.Y36(gn),l.Y36(Vy))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-public-playlist"]],decls:5,vars:1,consts:[[1,"container","text-center"],[1,"row","row-cols-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card",2,"width","18rem",3,"click"],[1,"card-body"],["src","../../../assets/musicicon.jpeg","alt","...",1,"card-img-top"],[1,"card-title"],[1,"username"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2," Public Playlists "),l.qZA(),l.TgZ(3,"div",1),l.YNc(4,w6,14,5,"div",2),l.qZA()()),2&t&&(l.xp6(4),l.Q6J("ngForOf",r.playlists))},dependencies:[zr],styles:[".container[_ngcontent-%COMP%]{height:100%;margin-top:3rem;margin-bottom:3rem;overflow:auto}.card[_ngcontent-%COMP%]{background-color:#e8e8e8;cursor:pointer;width:200px!important}img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:5px}.col[_ngcontent-%COMP%]{margin:10px 0}"]}),n})();function E6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"tr")(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td")(6,"button",11),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.playSongOnyoutube(s.title))}),l.TgZ(7,"i",12),l._uU(8,"\uf16a"),l.qZA()()(),l.TgZ(9,"td")(10,"button",13),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.viewTrackDetails(s.id))}),l._uU(11,"View Track Details"),l.qZA()()()}if(2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.name),l.xp6(2),l.Oqu(t.title)}}let C6=(()=>{class n{constructor(t,r,i){this.http=t,this.expressService=r,this.router=i,this.ROOT_URL="localhost:3000/api",this.artist="",this.track="",this.genre="",this.data=[],this.obj=[],this.isOn=!1,this.isHidden=!0,this.showMe=!1,this.search=[]}ngOnInit(){}getArtists(){this.search[0]=this.artist,this.search[0]&&(this.artist=""),this.search[2]=this.genre,this.search[2]&&(this.genre=""),this.search[1]=this.track,this.search[1]&&(this.track="");let t=this.search.toString();console.log(t[1]),this.expressService.getArtists(t).subscribe(r=>{this.artists=r,this.obj=this.artists,console.log(this.search),this.search=[]},r=>{console.log(r)})}getSearchArtist(){this.search[0]=this.artist,this.artist=""}getSearchGenre(){this.search[2]=this.genre,this.artist=""}getSearchTrack(){this.search[1]=this.track,this.artist=""}getPost(){this.posts=this.http.get("http://localhost:3000/api/tracks/"+this.artist)}viewTrackDetails(t){console.log(this.obj),this.router.navigate(["/tracks/"+t])}playSongOnyoutube(t){window.open("https://www.youtube.com/results?search_query="+t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ms),l.Y36(Kg),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-tracks"]],decls:26,vars:4,consts:[["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"],[1,"container"],[1,"input-group"],["type","text","id","searchBar","placeholder","Artist",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","searchBar","placeholder","Track",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","searchBar","placeholder","Genre",1,"form-control",3,"ngModel","ngModelChange"],["id","addon-wrapping",1,"input-group-text",3,"click"],[1,"material-symbols-outlined"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"play",3,"click"],[1,"fa"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(l._UZ(0,"app-navbar")(1,"link",0),l.TgZ(2,"body")(3,"div",1)(4,"div",2)(5,"input",3),l.NdJ("ngModelChange",function(s){return r.artist=s}),l.qZA(),l.TgZ(6,"input",4),l.NdJ("ngModelChange",function(s){return r.track=s}),l.qZA(),l.TgZ(7,"input",5),l.NdJ("ngModelChange",function(s){return r.genre=s}),l.qZA(),l.TgZ(8,"button",6),l.NdJ("click",function(){return r.getArtists()}),l.TgZ(9,"span",7),l._uU(10," search "),l.qZA()()()(),l.TgZ(11,"div"),l._UZ(12,"br"),l.TgZ(13,"table",8)(14,"thead")(15,"tr")(16,"th",9),l._uU(17,"Artist Name"),l.qZA(),l.TgZ(18,"th",9),l._uU(19,"Title"),l.qZA(),l.TgZ(20,"th",9),l._uU(21,"Search on Youtube"),l.qZA(),l.TgZ(22,"th",9),l._uU(23,"Details"),l.qZA()()(),l.TgZ(24,"tbody"),l.YNc(25,E6,12,2,"tr",10),l.qZA()()()()),2&t&&(l.xp6(5),l.Q6J("ngModel",r.artist),l.xp6(1),l.Q6J("ngModel",r.track),l.xp6(1),l.Q6J("ngModel",r.genre),l.xp6(18),l.Q6J("ngForOf",r.obj))},dependencies:[zr,xa,Jd,Ev,eE],styles:["body[_ngcontent-%COMP%]{padding:10px}.container[_ngcontent-%COMP%]{width:500px}i[_ngcontent-%COMP%]{color:red;font-size:32px;background-color:#fff}.play[_ngcontent-%COMP%]{outline:0;border:hidden;background-color:#fff}button[_ngcontent-%COMP%]{background-color:#1db954;border:hidden}.cbox[_ngcontent-%COMP%]{color:#1db954}.btn[_ngcontent-%COMP%]:hover{background-color:#189c46;border-color:#189c46}"]}),n})(),T6=(()=>{class n{constructor(t){this.authService=t,this.contentEditable=!0}ngOnInit(){this.contentEditable=!0===this.authService?.role.admin}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-acceptable-use-policy"]],decls:168,vars:1,consts:[["name","privacy",3,"contentEditable"],["href","/"],[1,"wpembed-index"],["href","#prohibited-activities-and-uses"],["href","#system-abuse"],["href","#service-resources"],["href","#no-spam-policy"],["href","#defamation-and-objectionable-content"],["href","#copyrighted-content"],["href","#security"],["href","#enforcement"],["href","#reporting-violations"],["href","#changes-and-amendments"],["href","#acceptance-of-this-policy"],["href","#contacting-us"],["id","prohibited-activities-and-uses"],["id","system-abuse"],["id","service-resources"],["id","no-spam-policy"],["id","defamation-and-objectionable-content"],["id","copyrighted-content"],["id","security"],["id","enforcement"],["id","reporting-violations"],["id","changes-and-amendments"],["id","acceptance-of-this-policy"],["href","https://www.websitepolicies.com","target","_blank","rel","nofollow"],["id","contacting-us"],["href","mailto:rwill33@uwo.ca"],["href","mailto:jgilli33@uwo.ca"],["href","mailto:jdailly2@uwo.ca"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Acceptable use policy"),l.qZA(),l.TgZ(3,"p"),l._uU(4,"This acceptable use policy (\u201cPolicy\u201d) sets forth the general guidelines and acceptable and prohibited uses of the "),l.TgZ(5,"a",1),l._uU(6,"MusicDatabase"),l.qZA(),l._uU(7," website (\u201cWebsite\u201d or \u201cService\u201d) and any of its related products and services (collectively, \u201cServices\u201d). This Policy is a legally binding agreement between you (\u201cUser\u201d, \u201cyou\u201d or \u201cyour\u201d) and this Website operator (\u201cOperator\u201d, \u201cwe\u201d, \u201cus\u201d or \u201cour\u201d). If you are entering into this agreement on behalf of a business or other legal entity, you represent that you have the authority to bind such entity to this agreement, in which case the terms \u201cUser\u201d, \u201cyou\u201d or \u201cyour\u201d shall refer to such entity. If you do not have such authority, or if you do not agree with the terms of this agreement, you must not accept this agreement and may not access and use the Website and Services. By accessing and using the Website and Services, you acknowledge that you have read, understood, and agree to be bound by the terms of this Agreement. You acknowledge that this Agreement is a contract between you and the Operator, even though it is electronic and is not physically signed by you, and it governs your use of the Website and Services."),l.qZA(),l.TgZ(8,"div",2)(9,"h3"),l._uU(10,"Table of contents"),l.qZA(),l.TgZ(11,"ol",2)(12,"li")(13,"a",3),l._uU(14,"Prohibited activities and uses"),l.qZA()(),l.TgZ(15,"li")(16,"a",4),l._uU(17,"System abuse"),l.qZA()(),l.TgZ(18,"li")(19,"a",5),l._uU(20,"Service resources"),l.qZA()(),l.TgZ(21,"li")(22,"a",6),l._uU(23,"No spam policy"),l.qZA()(),l.TgZ(24,"li")(25,"a",7),l._uU(26,"Defamation and objectionable content"),l.qZA()(),l.TgZ(27,"li")(28,"a",8),l._uU(29,"Copyrighted content"),l.qZA()(),l.TgZ(30,"li")(31,"a",9),l._uU(32,"Security"),l.qZA()(),l.TgZ(33,"li")(34,"a",10),l._uU(35,"Enforcement"),l.qZA()(),l.TgZ(36,"li")(37,"a",11),l._uU(38,"Reporting violations"),l.qZA()(),l.TgZ(39,"li")(40,"a",12),l._uU(41,"Changes and amendments"),l.qZA()(),l.TgZ(42,"li")(43,"a",13),l._uU(44,"Acceptance of this policy"),l.qZA()(),l.TgZ(45,"li")(46,"a",14),l._uU(47,"Contacting us"),l.qZA()()()(),l.TgZ(48,"h2",15),l._uU(49,"Prohibited activities and uses"),l.qZA(),l.TgZ(50,"p"),l._uU(51,"You may not use the Website and Services to publish content or engage in activity that is illegal under applicable law, that is harmful to others, or that would subject us to liability, including, without limitation, in connection with any of the following, each of which is prohibited under this Policy:"),l.qZA(),l.TgZ(52,"ul")(53,"li"),l._uU(54,"Distributing malware or other malicious code."),l.qZA(),l.TgZ(55,"li"),l._uU(56,"Disclosing sensitive personal information about others."),l.qZA(),l.TgZ(57,"li"),l._uU(58,"Collecting, or attempting to collect, personal information about third parties without their knowledge or consent."),l.qZA(),l.TgZ(59,"li"),l._uU(60,"Distributing pornography or adult related content."),l.qZA(),l.TgZ(61,"li"),l._uU(62,"Promoting or facilitating prostitution or any escort services."),l.qZA(),l.TgZ(63,"li"),l._uU(64,"Hosting, distributing or linking to child pornography or content that is harmful to minors."),l.qZA(),l.TgZ(65,"li"),l._uU(66,"Promoting or facilitating gambling, violence, terrorist activities or selling weapons or ammunition."),l.qZA(),l.TgZ(67,"li"),l._uU(68,"Engaging in the unlawful distribution of controlled substances, drug contraband or prescription medications."),l.qZA(),l.TgZ(69,"li"),l._uU(70,"Managing payment aggregators or facilitators such as processing payments on behalf of other businesses or charities."),l.qZA(),l.TgZ(71,"li"),l._uU(72,"Facilitating pyramid schemes or other models intended to seek payments from public actors."),l.qZA(),l.TgZ(73,"li"),l._uU(74,"Threatening harm to persons or property or otherwise harassing behavior."),l.qZA(),l.TgZ(75,"li"),l._uU(76,"Infringing the intellectual property or other proprietary rights of others."),l.qZA(),l.TgZ(77,"li"),l._uU(78,"Facilitating, aiding, or encouraging any of the above activities through the Website and Services."),l.qZA()(),l.TgZ(79,"h2",16),l._uU(80,"System abuse"),l.qZA(),l.TgZ(81,"p"),l._uU(82,"Any User in violation of the Website and Services security is subject to criminal and civil liability, as well as immediate account termination. Examples include, but are not limited to the following:"),l.qZA(),l.TgZ(83,"ul")(84,"li"),l._uU(85,"Use or distribution of tools designed for compromising security of the Website and Services."),l.qZA(),l.TgZ(86,"li"),l._uU(87,"Intentionally or negligently transmitting files containing a computer virus or corrupted data."),l.qZA(),l.TgZ(88,"li"),l._uU(89,"Accessing another network without permission, including to probe or scan for vulnerabilities or breach security or authentication measures."),l.qZA(),l.TgZ(90,"li"),l._uU(91,"Unauthorized scanning or monitoring of data on any network or system without proper authorization of the owner of the system or network."),l.qZA()(),l.TgZ(92,"h2",17),l._uU(93,"Service resources"),l.qZA(),l.TgZ(94,"p"),l._uU(95,"You may not consume excessive amounts of the resources of the Website and Services or use the Website and Services in any way which results in performance issues or which interrupts the Services for other Users. Prohibited activities that contribute to excessive use, include without limitation:"),l.qZA(),l.TgZ(96,"ul")(97,"li"),l._uU(98,"Deliberate attempts to overload the Website and Services and broadcast attacks (i.e. denial of service attacks)."),l.qZA(),l.TgZ(99,"li"),l._uU(100,"Engaging in any other activities that degrade the usability and performance of the Website and Services."),l.qZA()(),l.TgZ(101,"h2",18),l._uU(102,"No spam policy"),l.qZA(),l.TgZ(103,"p"),l._uU(104,"You may not use the Website and Services to send spam or bulk unsolicited messages. We maintain a zero tolerance policy for use of the Website and Services in any manner associated with the transmission, distribution or delivery of any bulk e-mail, including unsolicited bulk or unsolicited commercial e-mail, or the sending, assisting, or commissioning the transmission of commercial e-mail that does not comply with the U.S. CAN-SPAM Act of 2003 (\u201cSPAM\u201d)."),l.qZA(),l.TgZ(105,"p"),l._uU(106,"Your products or services advertised via SPAM (i.e. Spamvertised) may not be used in conjunction with the Website and Services. This provision includes, but is not limited to, SPAM sent via fax, phone, postal mail, email, instant messaging, or newsgroups."),l.qZA(),l.TgZ(107,"p"),l._uU(108,"Sending emails through the Website and Services to purchased email lists (\u201csafe lists\u201d) will be treated as SPAM."),l.qZA(),l.TgZ(109,"h2",19),l._uU(110,"Defamation and objectionable content"),l.qZA(),l.TgZ(111,"p"),l._uU(112,"We value the freedom of expression and encourage Users to be respectful with the content they post. We are not a publisher of User content and are not in a position to investigate the veracity of individual defamation claims or to determine whether certain material, which we may find objectionable, should be censored. However, we reserve the right to moderate, disable or remove any content to prevent harm to others or to us or the Website and Services, as determined in our sole discretion."),l.qZA(),l.TgZ(113,"h2",20),l._uU(114,"Copyrighted content"),l.qZA(),l.TgZ(115,"p"),l._uU(116,"Copyrighted material must not be published via the Website and Services without the explicit permission of the copyright owner or a person explicitly authorized to give such permission by the copyright owner. Upon receipt of a claim for copyright infringement, or a notice of such violation, we may, at our discretion, run an investigation and, upon confirmation, may remove the infringing material from the Website and Services. We may terminate the Service of Users with repeated copyright infringements. Further procedures may be carried out if necessary. We will assume no liability to any User of the Website and Services for the removal of any such material. If you believe your copyright is being infringed by a person or persons using the Website and Services, please get in touch with us to report copyright infringement."),l.qZA(),l.TgZ(117,"h2",21),l._uU(118,"Security"),l.qZA(),l.TgZ(119,"p"),l._uU(120,"You take full responsibility for maintaining reasonable security precautions for your account. You are responsible for protecting and updating any login account provided to you for the Website and Services. You must protect the confidentiality of your login details, and you should change your password periodically."),l.qZA(),l.TgZ(121,"h2",22),l._uU(122,"Enforcement"),l.qZA(),l.TgZ(123,"p"),l._uU(124,"We reserve our right to be the sole arbiter in determining the seriousness of each infringement and to immediately take corrective actions, including but not limited to:"),l.qZA(),l.TgZ(125,"ul")(126,"li"),l._uU(127,"Disabling or removing any content which is prohibited by this Policy, including to prevent harm to others or to us or the Website and Services, as determined by us in our sole discretion."),l.qZA(),l.TgZ(128,"li"),l._uU(129,"Reporting violations to law enforcement as determined by us in our sole discretion."),l.qZA(),l.TgZ(130,"li"),l._uU(131,"A failure to respond to an email from our abuse team within 2 days, or as otherwise specified in the communication to you, may result in the suspension or termination of your account."),l.qZA()(),l.TgZ(132,"p"),l._uU(133,"Suspended and terminated User accounts due to violations will not be re-activated."),l.qZA(),l.TgZ(134,"p"),l._uU(135,"Nothing contained in this Policy shall be construed to limit our actions or remedies in any way with respect to any of the prohibited activities. In addition, we reserve at all times all rights and remedies available to us with respect to such activities at law or in equity."),l.qZA(),l.TgZ(136,"h2",23),l._uU(137,"Reporting violations"),l.qZA(),l.TgZ(138,"p"),l._uU(139,"If you have discovered and would like to report a violation of this Policy, please contact us immediately. We will investigate the situation and provide you with full assistance."),l.qZA(),l.TgZ(140,"h2",24),l._uU(141,"Changes and amendments"),l.qZA(),l.TgZ(142,"p"),l._uU(143,"We reserve the right to modify this Policy or its terms related to the Website and Services at any time at our discretion. When we do, we will revise the updated date at the bottom of this page. We may also provide notice to you in other ways at our discretion, such as through the contact information you have provided."),l.qZA(),l.TgZ(144,"p"),l._uU(145,"An updated version of this Policy will be effective immediately upon the posting of the revised Policy unless otherwise specified. Your continued use of the Website and Services after the effective date of the revised Policy (or such other act specified at that time) will constitute your consent to those changes."),l.qZA(),l.TgZ(146,"h2",25),l._uU(147,"Acceptance of this policy"),l.qZA(),l.TgZ(148,"p"),l._uU(149,"You acknowledge that you have read this Policy and agree to all its terms and conditions. By accessing and using the Website and Services you agree to be bound by this Policy. If you do not agree to abide by the terms of this Policy, you are not authorized to access or use the Website and Services. This acceptable use policy was created with the help of "),l.TgZ(150,"a",26),l._uU(151,"WebsitePolicies"),l.qZA(),l._uU(152,"."),l.qZA(),l.TgZ(153,"h2",27),l._uU(154,"Contacting us"),l.qZA(),l.TgZ(155,"p"),l._uU(156,"If you have any questions, concerns, or complaints regarding this Policy, we encourage you to contact us using the details below:"),l.qZA(),l.TgZ(157,"p")(158,"a",28),l._uU(159,"rwill33@uwo.ca"),l.qZA(),l._UZ(160,"br"),l.TgZ(161,"a",29),l._uU(162,"jgilli33@uwo.ca"),l.qZA(),l._UZ(163,"br"),l.TgZ(164,"a",30),l._uU(165,"jdailly2@uwo.ca"),l.qZA()(),l.TgZ(166,"p"),l._uU(167,"This document was last updated on November 30, 2022"),l.qZA()()),2&t&&l.Q6J("contentEditable",r.contentEditable)}}),n})(),I6=(()=>{class n{constructor(t){this.authService=t,this.contentEditable=!0,this.hidden=!1}ngOnInit(){console.log(this.authService?.role.admin),!0===this.authService?.role.admin?this.contentEditable=!0:(this.contentEditable=!1,this.hidden=!0)}save(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-privacy-policy"]],decls:155,vars:2,consts:[["name","privacy",3,"contentEditable"],["href","/"],[1,"wpembed-index"],["href","#collection-of-personal-information"],["href","#privacy-of-children"],["href","#use-and-processing-of-collected-information"],["href","#disclosure-of-information"],["href","#retention-of-information"],["href","#do-not-track-signals"],["href","#links-to-other-resources"],["href","#information-security"],["href","#data-breach"],["href","#changes-and-amendments"],["href","#acceptance-of-this-policy"],["href","#contacting-us"],["id","collection-of-personal-information"],["id","privacy-of-children"],["id","use-and-processing-of-collected-information"],["id","disclosure-of-information"],["id","retention-of-information"],["id","do-not-track-signals"],["href","https://www.internetcookies.com","target","_blank","ref","nofollow noreferrer noopener external"],["id","links-to-other-resources"],["id","information-security"],["id","data-breach"],["id","changes-and-amendments"],["id","acceptance-of-this-policy"],["href","https://www.websitepolicies.com","target","_blank","rel","nofollow"],["id","contacting-us"],["href","mailto:rwill33@uwo.ca"],["href","mailto:jgilli33@uwo.ca"],["href","mailto:jdailly2@uwo.ca"],[1,"madewith"],["href","https://www.websitepolicies.com/?via=madewithbadge","target","_blank","rel","nofollow"],["width","200","height","25","alt","Made with WebsitePolicies","src","https://cdn.websitepolicies.io/img/badge.png","srcset","https://cdn.websitepolicies.io/img/badge_2x.png 2x"],[3,"hidden","click"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Privacy policy"),l.qZA(),l.TgZ(3,"p"),l._uU(4,"We respect your privacy and are committed to protecting it through our compliance with this privacy policy (\u201cPolicy\u201d). This Policy describes the types of information we may collect from you or that you may provide (\u201cPersonal Information\u201d) on the "),l.TgZ(5,"a",1),l._uU(6,"MusicDatabase"),l.qZA(),l._uU(7," website (\u201cWebsite\u201d or \u201cService\u201d) and any of its related products and services (collectively, \u201cServices\u201d), and our practices for collecting, using, maintaining, protecting, and disclosing that Personal Information. It also describes the choices available to you regarding our use of your Personal Information and how you can access and update it."),l.qZA(),l.TgZ(8,"p"),l._uU(9,"This Policy is a legally binding agreement between you (\u201cUser\u201d, \u201cyou\u201d or \u201cyour\u201d) and this Website operator (\u201cOperator\u201d, \u201cwe\u201d, \u201cus\u201d or \u201cour\u201d). If you are entering into this agreement on behalf of a business or other legal entity, you represent that you have the authority to bind such entity to this agreement, in which case the terms \u201cUser\u201d, \u201cyou\u201d or \u201cyour\u201d shall refer to such entity. If you do not have such authority, or if you do not agree with the terms of this agreement, you must not accept this agreement and may not access and use the Website and Services. By accessing and using the Website and Services, you acknowledge that you have read, understood, and agree to be bound by the terms of this Policy. This Policy does not apply to the practices of companies that we do not own or control, or to individuals that we do not employ or manage."),l.qZA(),l.TgZ(10,"div",2)(11,"h3"),l._uU(12,"Table of contents"),l.qZA(),l.TgZ(13,"ol",2)(14,"li")(15,"a",3),l._uU(16,"Collection of personal information"),l.qZA()(),l.TgZ(17,"li")(18,"a",4),l._uU(19,"Privacy of children"),l.qZA()(),l.TgZ(20,"li")(21,"a",5),l._uU(22,"Use and processing of collected information"),l.qZA()(),l.TgZ(23,"li")(24,"a",6),l._uU(25,"Disclosure of information"),l.qZA()(),l.TgZ(26,"li")(27,"a",7),l._uU(28,"Retention of information"),l.qZA()(),l.TgZ(29,"li")(30,"a",8),l._uU(31,"Do Not Track signals"),l.qZA()(),l.TgZ(32,"li")(33,"a",9),l._uU(34,"Links to other resources"),l.qZA()(),l.TgZ(35,"li")(36,"a",10),l._uU(37,"Information security"),l.qZA()(),l.TgZ(38,"li")(39,"a",11),l._uU(40,"Data breach"),l.qZA()(),l.TgZ(41,"li")(42,"a",12),l._uU(43,"Changes and amendments"),l.qZA()(),l.TgZ(44,"li")(45,"a",13),l._uU(46,"Acceptance of this policy"),l.qZA()(),l.TgZ(47,"li")(48,"a",14),l._uU(49,"Contacting us"),l.qZA()()()(),l.TgZ(50,"h2",15),l._uU(51,"Collection of personal information"),l.qZA(),l.TgZ(52,"p"),l._uU(53,"You can access and use the Website and Services without telling us who you are or revealing any information by which someone could identify you as a specific, identifiable individual. If, however, you wish to use some of the features offered on the Website, you may be asked to provide certain Personal Information (for example, your name and e-mail address)."),l.qZA(),l.TgZ(54,"p"),l._uU(55,"We receive and store any information you knowingly provide to us when you create an account, publish content, or fill any forms on the Website. When required, this information may include the following:"),l.qZA(),l.TgZ(56,"ul")(57,"li"),l._uU(58,"Account details (such as user name, unique user ID, password, etc)"),l.qZA(),l.TgZ(59,"li"),l._uU(60,"Contact information (such as email address, phone number, etc)"),l.qZA(),l.TgZ(61,"li"),l._uU(62,"Basic personal information (such as name, country of residence, etc)"),l.qZA()(),l.TgZ(63,"p"),l._uU(64,"You can choose not to provide us with your Personal Information, but then you may not be able to take advantage of some of the features on the Website. Users who are uncertain about what information is mandatory are welcome to contact us."),l.qZA(),l.TgZ(65,"h2",16),l._uU(66,"Privacy of children"),l.qZA(),l.TgZ(67,"p"),l._uU(68,"We do not knowingly collect any Personal Information from children under the age of 13. If you are under the age of 13, please do not submit any Personal Information through the Website and Services. If you have reason to believe that a child under the age of 13 has provided Personal Information to us through the Website and Services, please contact us to request that we delete that child\u2019s Personal Information from our Services."),l.qZA(),l.TgZ(69,"p"),l._uU(70,"We encourage parents and legal guardians to monitor their children\u2019s Internet usage and to help enforce this Policy by instructing their children never to provide Personal Information through the Website and Services without their permission. We also ask that all parents and legal guardians overseeing the care of children take the necessary precautions to ensure that their children are instructed to never give out Personal Information when online without their permission."),l.qZA(),l.TgZ(71,"h2",17),l._uU(72,"Use and processing of collected information"),l.qZA(),l.TgZ(73,"p"),l._uU(74,"We act as a data controller and a data processor when handling Personal Information, unless we have entered into a data processing agreement with you in which case you would be the data controller and we would be the data processor."),l.qZA(),l.TgZ(75,"p"),l._uU(76," Our role may also differ depending on the specific situation involving Personal Information. We act in the capacity of a data controller when we ask you to submit your Personal Information that is necessary to ensure your access and use of the Website and Services. In such instances, we are a data controller because we determine the purposes and means of the processing of Personal Information."),l.qZA(),l.TgZ(77,"p"),l._uU(78,"We act in the capacity of a data processor in situations when you submit Personal Information through the Website and Services. We do not own, control, or make decisions about the submitted Personal Information, and such Personal Information is processed only in accordance with your instructions. In such instances, the User providing Personal Information acts as a data controller."),l.qZA(),l.TgZ(79,"p"),l._uU(80,"In order to make the Website and Services available to you, or to meet a legal obligation, we may need to collect and use certain Personal Information. If you do not provide the information that we request, we may not be able to provide you with the requested products or services. Any of the information we collect from you may be used for the following purposes:"),l.qZA(),l.TgZ(81,"ul")(82,"li"),l._uU(83,"Create and manage user accounts"),l.qZA(),l.TgZ(84,"li"),l._uU(85,"Run and operate the Website and Services"),l.qZA()(),l.TgZ(86,"p"),l._uU(87,"Processing your Personal Information depends on how you interact with the Website and Services, where you are located in the world and if one of the following applies: (i) you have given your consent for one or more specific purposes; (ii) provision of information is necessary for the performance of an agreement with you and/or for any pre-contractual obligations thereof; (iii) processing is necessary for compliance with a legal obligation to which you are subject; (iv) processing is related to a task that is carried out in the public interest or in the exercise of official authority vested in us; (v) processing is necessary for the purposes of the legitimate interests pursued by us or by a third party."),l.qZA(),l.TgZ(88,"p"),l._uU(89," Note that under some legislations we may be allowed to process information until you object to such processing by opting out, without having to rely on consent or any other of the legal bases. In any case, we will be happy to clarify the specific legal basis that applies to the processing, and in particular whether the provision of Personal Information is a statutory or contractual requirement, or a requirement necessary to enter into a contract."),l.qZA(),l.TgZ(90,"h2",18),l._uU(91,"Disclosure of information"),l.qZA(),l.TgZ(92,"p"),l._uU(93," To maintain the highest level of privacy and to protect your Personal Information to the full extent, we do not share your Personal Information with anyone and for any reason."),l.qZA(),l.TgZ(94,"h2",19),l._uU(95,"Retention of information"),l.qZA(),l.TgZ(96,"p"),l._uU(97,"We will retain and use your Personal Information for the period necessary as long as your user account remains active, to enforce our agreements, resolve disputes, and unless a longer retention period is required or permitted by law."),l.qZA(),l.TgZ(98,"p"),l._uU(99,"We may use any aggregated data derived from or incorporating your Personal Information after you update or delete it, but not in a manner that would identify you personally. Once the retention period expires, Personal Information shall be deleted. Therefore, the right to access, the right to erasure, the right to rectification, and the right to data portability cannot be enforced after the expiration of the retention period."),l.qZA(),l.TgZ(100,"h2",20),l._uU(101,"Do Not Track signals"),l.qZA(),l.TgZ(102,"p"),l._uU(103,"Some browsers incorporate a Do Not Track feature that signals to websites you visit that you do not want to have your online activity tracked. Tracking is not the same as using or collecting information in connection with a website. For these purposes, tracking refers to collecting personally identifiable information from consumers who use or visit a website or online service as they move across different websites over time. How browsers communicate the Do Not Track signal is not yet uniform. As a result, the Website and Services are not yet set up to interpret or respond to Do Not Track signals communicated by your browser. Even so, as described in more detail throughout this Policy, we limit our use and collection of your Personal Information. For a description of Do Not Track protocols for browsers and mobile devices or to learn more about the choices available to you, visit "),l.TgZ(104,"a",21),l._uU(105,"internetcookies.com"),l.qZA()(),l.TgZ(106,"h2",22),l._uU(107,"Links to other resources"),l.qZA(),l.TgZ(108,"p"),l._uU(109,"The Website and Services contain links to other resources that are not owned or controlled by us. Please be aware that we are not responsible for the privacy practices of such other resources or third parties. We encourage you to be aware when you leave the Website and Services and to read the privacy statements of each and every resource that may collect Personal Information."),l.qZA(),l.TgZ(110,"h2",23),l._uU(111,"Information security"),l.qZA(),l.TgZ(112,"p"),l._uU(113,"No data transmission over the Internet or wireless network can be guaranteed. Therefore, while we strive to protect your Personal Information, you acknowledge that (i) there are security and privacy limitations of the Internet which are beyond our control; (ii) the security, integrity, and privacy of any and all information and data exchanged between you and the Website and Services cannot be guaranteed; and (iii) any such information and data may be viewed or tampered with in transit by a third party, despite best efforts."),l.qZA(),l.TgZ(114,"p"),l._uU(115,"As the security of Personal Information depends in part on the security of the device you use to communicate with us and the security you use to protect your credentials, please take appropriate measures to protect this information."),l.qZA(),l.TgZ(116,"h2",24),l._uU(117,"Data breach"),l.qZA(),l.TgZ(118,"p"),l._uU(119,"In the event we become aware that the security of the Website and Services has been compromised or Users\u2019 Personal Information has been disclosed to unrelated third parties as a result of external activity, including, but not limited to, security attacks or fraud, we reserve the right to take reasonably appropriate measures, including, but not limited to, investigation and reporting, as well as notification to and cooperation with law enforcement authorities. In the event of a data breach, we will make reasonable efforts to notify affected individuals if we believe that there is a reasonable risk of harm to the User as a result of the breach or if notice is otherwise required by law. When we do, we will post a notice on the Website."),l.qZA(),l.TgZ(120,"h2",25),l._uU(121,"Changes and amendments"),l.qZA(),l.TgZ(122,"p"),l._uU(123,"We reserve the right to modify this Policy or its terms related to the Website and Services at any time at our discretion. When we do, we will revise the updated date at the bottom of this page. We may also provide notice to you in other ways at our discretion, such as through the contact information you have provided."),l.qZA(),l.TgZ(124,"p"),l._uU(125,"An updated version of this Policy will be effective immediately upon the posting of the revised Policy unless otherwise specified. Your continued use of the Website and Services after the effective date of the revised Policy (or such other act specified at that time) will constitute your consent to those changes. However, we will not, without your consent, use your Personal Information in a manner materially different than what was stated at the time your Personal Information was collected."),l.qZA(),l.TgZ(126,"h2",26),l._uU(127,"Acceptance of this policy"),l.qZA(),l.TgZ(128,"p"),l._uU(129,"You acknowledge that you have read this Policy and agree to all its terms and conditions. By accessing and using the Website and Services and submitting your information you agree to be bound by this Policy. If you do not agree to abide by the terms of this Policy, you are not authorized to access or use the Website and Services. This privacy policy was created with the help of "),l.TgZ(130,"a",27),l._uU(131,"WebsitePolicies"),l.qZA(),l._uU(132,"."),l.qZA(),l.TgZ(133,"h2",28),l._uU(134,"Contacting us"),l.qZA(),l.TgZ(135,"p"),l._uU(136,"If you have any questions, concerns, or complaints regarding this Policy, the information we hold about you, or if you wish to exercise your rights, we encourage you to contact us using the details below:"),l.qZA(),l.TgZ(137,"p")(138,"a",29),l._uU(139,"rwill33@uwo.ca"),l.qZA(),l._UZ(140,"br"),l.TgZ(141,"a",30),l._uU(142,"jgilli33@uwo.ca"),l.qZA(),l._UZ(143,"br"),l.TgZ(144,"a",31),l._uU(145,"jdailly2@uwo.ca"),l.qZA()(),l.TgZ(146,"p"),l._uU(147,"We will attempt to resolve complaints and disputes and make every reasonable effort to honor your wish to exercise your rights as quickly as possible and in any event, within the timescales provided by applicable data protection laws."),l.qZA(),l.TgZ(148,"p"),l._uU(149,"This document was last updated on November 30, 2022"),l.qZA(),l.TgZ(150,"p",32)(151,"a",33),l._UZ(152,"img",34),l.qZA()(),l.TgZ(153,"button",35),l.NdJ("click",function(){return r.save()}),l._uU(154,"Save"),l.qZA()()),2&t&&(l.Q6J("contentEditable",r.contentEditable),l.xp6(153),l.Q6J("hidden",r.hidden))}}),n})(),D6=(()=>{class n{constructor(t){this.authService=t,this.contentEditable=!0}ngOnInit(){this.contentEditable=!0===this.authService?.role.admin}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-dmca-policy"]],decls:80,vars:1,consts:[["name","privacy",3,"contentEditable"],["href","/"],["href","https://www.copyright.gov","target","_blank","rel","nofollow noreferrer noopener external"],["href","https://www.websitepolicies.com","target","_blank","rel","nofollow"],[1,"wpembed-index"],["href","#what-to-consider-before-submitting-a-copyright-complaint"],["href","#notifications-of-infringement"],["href","#changes-and-amendments"],["href","#reporting-copyright-infringement"],["id","what-to-consider-before-submitting-a-copyright-complaint"],["href","https://www.copyrighted.com/professional-takedowns","target","_blank"],["id","notifications-of-infringement"],["href","https://www.websitepolicies.com/create/dmca-takedown-notice","target","_blank"],["id","changes-and-amendments"],["id","reporting-copyright-infringement"],["href","mailto:rwill33@uwo.ca"],["href","mailto:jgilli33@uwo.ca"],["href","mailto:jdailly2@uwo.ca"],[1,"madewith"],["href","https://www.websitepolicies.com/?via=madewithbadge","target","_blank","rel","nofollow"],["width","200","height","25","alt","Made with WebsitePolicies","src","https://cdn.websitepolicies.io/img/badge.png","srcset","https://cdn.websitepolicies.io/img/badge_2x.png 2x"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"DMCA policy"),l.qZA(),l.TgZ(3,"p"),l._uU(4,"This Digital Millennium Copyright Act policy (\u201cPolicy\u201d) applies to the "),l.TgZ(5,"a",1),l._uU(6,"MusicDatabase"),l.qZA(),l._uU(7," website (\u201cWebsite\u201d or \u201cService\u201d) and any of its related products and services (collectively, \u201cServices\u201d) and outlines how this Website operator (\u201cOperator\u201d, \u201cwe\u201d, \u201cus\u201d or \u201cour\u201d) addresses copyright infringement notifications and how you (\u201cyou\u201d or \u201cyour\u201d) may submit a copyright infringement complaint."),l.qZA(),l.TgZ(8,"p"),l._uU(9,"Protection of intellectual property is of utmost importance to us and we ask our users and their authorized agents to do the same. It is our policy to expeditiously respond to clear notifications of alleged copyright infringement that comply with the United States Digital Millennium Copyright Act (\u201cDMCA\u201d) of 1998, the text of which can be found at the U.S. Copyright Office "),l.TgZ(10,"a",2),l._uU(11,"website"),l.qZA(),l._uU(12,". This DMCA policy was created with the help of "),l.TgZ(13,"a",3),l._uU(14,"WebsitePolicies"),l.qZA(),l._uU(15,"."),l.qZA(),l.TgZ(16,"div",4)(17,"h3"),l._uU(18,"Table of contents"),l.qZA(),l.TgZ(19,"ol",4)(20,"li")(21,"a",5),l._uU(22,"What to consider before submitting a copyright complaint"),l.qZA()(),l.TgZ(23,"li")(24,"a",6),l._uU(25,"Notifications of infringement"),l.qZA()(),l.TgZ(26,"li")(27,"a",7),l._uU(28,"Changes and amendments"),l.qZA()(),l.TgZ(29,"li")(30,"a",8),l._uU(31,"Reporting copyright infringement"),l.qZA()()()(),l.TgZ(32,"h2",9),l._uU(33,"What to consider before submitting a copyright complaint"),l.qZA(),l.TgZ(34,"p"),l._uU(35,"Before submitting a copyright complaint to us, consider whether the use could be considered fair use. Fair use states that brief excerpts of copyrighted material may, under certain circumstances, be quoted verbatim for purposes such as criticism, news reporting, teaching, and research, without the need for permission from or payment to the copyright holder. If you have considered fair use, and you still wish to continue with a copyright complaint, you may want to first reach out to the user in question to see if you can resolve the matter directly with the user."),l.qZA(),l.TgZ(36,"p"),l._uU(37,"Please note that if you are unsure whether the material you are reporting is in fact infringing, you may wish to contact an attorney before filing a notification with us."),l.qZA(),l.TgZ(38,"p"),l._uU(39,"We may, at our discretion or as required by law, share a copy of your notification or counter-notification with the account holder engaged in the allegedly infringing activity or for publication. If you are concerned about your information being forwarded, you may wish to "),l.TgZ(40,"a",10),l._uU(41,"hire an agent"),l.qZA(),l._uU(42," to report infringing material for you."),l.qZA(),l.TgZ(43,"h2",11),l._uU(44,"Notifications of infringement"),l.qZA(),l.TgZ(45,"p"),l._uU(46,"If you are a copyright owner or an agent thereof, and you believe that any material available on our Services infringes your copyrights, then you may submit a written copyright infringement notification (\u201cNotification\u201d) using the contact details below pursuant to the DMCA. All such Notifications must comply with the DMCA requirements. You may refer to a "),l.TgZ(47,"a",12),l._uU(48,"DMCA takedown notice generator"),l.qZA(),l._uU(49," or other similar services to avoid making mistake and ensure compliance of your Notification."),l.qZA(),l.TgZ(50,"p"),l._uU(51,"Filing a DMCA complaint is the start of a pre-defined legal process. Your complaint will be reviewed for accuracy, validity, and completeness. If your complaint has satisfied these requirements, our response may include the removal or restriction of access to allegedly infringing material."),l.qZA(),l.TgZ(52,"p"),l._uU(53,"If we remove or restrict access to materials or terminate an account in response to a Notification of alleged infringement, we will make a good faith effort to contact the affected user with information concerning the removal or restriction of access, which may include a full copy of your Notification (including your name, address, phone, and email address)."),l.qZA(),l.TgZ(54,"p"),l._uU(55,"Notwithstanding anything to the contrary contained in any portion of this Policy, the Operator reserves the right to take no action upon receipt of a DMCA copyright infringement notification if it fails to comply with all the requirements of the DMCA for such notifications."),l.qZA(),l.TgZ(56,"h2",13),l._uU(57,"Changes and amendments"),l.qZA(),l.TgZ(58,"p"),l._uU(59,"We reserve the right to modify this Policy or its terms related to the Website and Services at any time at our discretion. When we do, we will revise the updated date at the bottom of this page. We may also provide notice to you in other ways at our discretion, such as through the contact information you have provided."),l.qZA(),l.TgZ(60,"p"),l._uU(61,"An updated version of this Policy will be effective immediately upon the posting of the revised Policy unless otherwise specified. Your continued use of the Website and Services after the effective date of the revised Policy (or such other act specified at that time) will constitute your consent to those changes."),l.qZA(),l.TgZ(62,"h2",14),l._uU(63,"Reporting copyright infringement"),l.qZA(),l.TgZ(64,"p"),l._uU(65,"If you would like to notify us of the infringing material or activity, we encourage you to contact us using the details below:"),l.qZA(),l.TgZ(66,"p")(67,"a",15),l._uU(68,"rwill33@uwo.ca"),l.qZA(),l._UZ(69,"br"),l.TgZ(70,"a",16),l._uU(71,"jgilli33@uwo.ca"),l.qZA(),l._UZ(72,"br"),l.TgZ(73,"a",17),l._uU(74,"jdailly2@uwo.ca"),l.qZA()(),l.TgZ(75,"p"),l._uU(76,"This document was last updated on November 30, 2022"),l.qZA(),l.TgZ(77,"p",18)(78,"a",19),l._UZ(79,"img",20),l.qZA()()()),2&t&&l.Q6J("contentEditable",r.contentEditable)}}),n})(),S6=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-takedown-procedure"]],decls:27,vars:0,consts:[["href","/dashboard/disputes"],[1,"b"]],template:function(t,r){1&t&&(l.TgZ(0,"h1"),l._uU(1,"DMCA Notice Takedown Procedure"),l.qZA(),l.TgZ(2,"h2"),l._uU(3,"Logging Disputes"),l.qZA(),l.TgZ(4,"p"),l._uU(5,"The first step to take is to ensure that the dispute is legitimate. Verify claims made in the dispute and check copyrighted material as well as the disputed review for infringement."),l.qZA(),l.TgZ(6,"p"),l._uU(7,"Once a dispute is verified, find the "),l.TgZ(8,"a",0),l._uU(9,"Disputes Page"),l.qZA(),l._uU(10,". Here, you may enter the review ID, date the request was received, and the date the dispute was received and save it to the website."),l.qZA(),l.TgZ(11,"h2"),l._uU(12,"Removing Material"),l.qZA(),l.TgZ(13,"p"),l._uU(14,"The next step is to hide the disputed review pending evaluation. Ensure you are logged in to a valid administrator account, and navigate to the disputed review via the playlist it is writted to. From here, click on view reviews, find the infringing review, and click hide."),l.qZA(),l.TgZ(15,"h2"),l._uU(16,"Notifying the user"),l.qZA(),l.TgZ(17,"p"),l._uU(18,"Once the review is removed, the poster must be notified. This can be done using the email linked to their account. Forward the user a copy of the dispute, as well as a copy of their removed review. Inform them of the importance of responding to the dispute. Ask them if they agree with the removal of the dispute, or if they plan to counter the claim."),l.qZA(),l.TgZ(19,"h2"),l._uU(20,"Further Steps"),l.qZA(),l.TgZ(21,"p",1),l._uU(22,"With a response from the user who posted the disputed content, do the following:"),l.qZA(),l.TgZ(23,"p"),l._uU(24,"1. If the user agrees with the review's removal, the review can be deleted."),l.qZA(),l.TgZ(25,"p"),l._uU(26,"2. If the user files a counter-dispute, do not delete the review, but ensure it is still hidden pending the results of the counter claim. If the claim is successful, the content can be restored to the website. Otherwise, it can be removed."),l.qZA())},styles:["h2[_ngcontent-%COMP%]{font-weight:700;font-size:medium}p[_ngcontent-%COMP%]{text-indent:20px}.b[_ngcontent-%COMP%]{text-indent:0}"]}),n})(),A6=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_s),l.LFG(gn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x6=(()=>{class n{constructor(t){this.authService=t}hasPermission(){return this.authService.role.admin}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_s))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QR=(()=>{class n{constructor(t,r){this.permissionService=t,this.router=r}canActivate(t,r){return this.permissionService.hasPermission()||this.router.navigate(["sign-in"]),this.permissionService.hasPermission()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(x6),l.LFG(gn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class M6{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const k6={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const Sr=typeof window<"u"&&window||{};var gS=(()=>(function(n){n.isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5"}(gS||(gS={})),gS))();let Ho;function JR(){if(typeof Sr.document>"u")return"bs4";const n=Sr.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),Sr.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=Sr.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(Sr.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(Sr.document.head.removeChild(n),"bs4"):(Sr.document.head.removeChild(n),"bs5")}function By(){return typeof Sr>"u"||(typeof Sr.__theme>"u"?(Ho||(Ho=JR()),"bs3"===Ho):"bs3"===Sr.__theme)}function nV(){return!By()&&(Ho||(Ho=JR()),"bs4"===Ho)}function tE(){return{isBs3:By(),isBs4:nV(),isBs5:!By()&&!nV()&&(Ho||(Ho=JR()),"bs5"===Ho)}}function L6(){const n="Change";return function(t,r){const i=` __${r}Value`;Object.defineProperty(t,r,{get(){return this[i]},set(s){const c=this[i];this[i]=s,c!==s&&this[r+n]&&this[r+n].emit(s)}})}}typeof console>"u"||console;let XR,B6=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(i=>i!==t);let r=this._focusTrapStack;r.length&&r[r.length-1]._disable(),r.push(t),t._enable()}deregister(t){t._disable();const r=this._focusTrapStack,i=r.indexOf(t);-1!==i&&(r.splice(i,1),r.length&&r[r.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{XR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{XR=!1}let iV=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?pi(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!XR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sV=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function j6(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function H6(n){try{return n.frameElement}catch{return null}}(function Y6(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===aV(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=aV(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function z6(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function K6(n){return!function q6(n){return function G6(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function $6(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Z6(n){return function W6(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||oV(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(iV))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oV(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function aV(n){if(!oV(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function lV(n){return null!=n&&"false"!=`${n}`}class Q6{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return t?.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Pl(1)).subscribe(e)}}let J6=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new Q6(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sV),l.LFG(l.R0b),l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X6=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=lV(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=lV(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const r=t.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(J6),l.Y36(pe))},n.\u0275dir=l.lG2({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[l.TTD]}),n})(),uV=(()=>{class n{static forRoot(){return{ngModule:n,providers:[B6,iV,sV]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Dd]}),n})();var e4=V(3696);const t4=["addListener","removeListener"],n4=["addEventListener","removeEventListener"],r4=["on","off"];function mS(n,e,t,r){if((0,Cr.m)(t)&&(r=t,t=void 0),r)return mS(n,e,t).pipe(zd(r));const[i,s]=function o4(n){return(0,Cr.m)(n.addEventListener)&&(0,Cr.m)(n.removeEventListener)}(n)?n4.map(c=>h=>n[c](e,h,t)):function i4(n){return(0,Cr.m)(n.addListener)&&(0,Cr.m)(n.removeListener)}(n)?t4.map(cV(n,e)):function s4(n){return(0,Cr.m)(n.on)&&(0,Cr.m)(n.off)}(n)?r4.map(cV(n,e)):[];if(!i&&(0,e4.z)(n))return(0,pn.z)(c=>mS(c,e,t))((0,Tu.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new si.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function cV(n,e){return t=>r=>n[t](e,r)}var a4=V(2411);const nE={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=nE;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new xc.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=nE;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=nE;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var u4=V(5577);const d4=new class c4 extends u4.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class l4 extends a4.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=nE.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(nE.cancelAnimationFrame(t),e._scheduled=void 0)}});var _S=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top"}(_S||(_S={})),_S))(),rE=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top"}(rE||(rE={})),rE))();function Yg(n,e){if(1!==n.nodeType)return[];const r=n.ownerDocument.defaultView?.getComputedStyle(n,null);return e?r&&r[e]:r}function eN(n){if(!n)return document.documentElement;let r,t=n?.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===Yg(t,"position")?eN(t):t:r?r.ownerDocument.documentElement:document.documentElement}function tN(n){return null!==n.parentNode?tN(n.parentNode):n}function yS(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,s=document.createRange();s.setStart(r,0),s.setEnd(i,0);const c=s.commonAncestorContainer;if(n!==c&&e!==c||r.contains(i))return function h4(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||eN(n.firstElementChild)===n)}(c)?c:eN(c);const h=tN(n);return h.host?yS(h.host,e):yS(n,tN(e).host)}function dV(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;e?.parentElement&&"none"===Yg(e,"transform");)e=e.parentElement;return e||document.documentElement}function hV(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function fV(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function pV(n){const e=n.body,t=n.documentElement;return{height:fV("Height",e,t),width:fV("Width",e,t)}}function iE(n){return{...n,right:(n.left||0)+n.width,bottom:(n.top||0)+n.height}}function Ar(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function gV(n){const e=n.getBoundingClientRect();if(!(e&&Ar(e.top)&&Ar(e.left)&&Ar(e.bottom)&&Ar(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?pV(n.ownerDocument):void 0,i=r?.width||n.clientWidth||Ar(e.right)&&Ar(t.left)&&e.right-t.left||0,s=r?.height||n.clientHeight||Ar(e.bottom)&&Ar(t.top)&&e.bottom-t.top||0;let c=n.offsetWidth-i,h=n.offsetHeight-s;if(c||h){const p=Yg(n);c-=hV(p,"x"),h-=hV(p,"y"),t.width-=c,t.height-=h}return iE(t)}function nN(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function rN(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=Yg(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:rN(nN(n))}function iN(n,e,t=!1){const r="HTML"===e.nodeName,i=gV(n),s=gV(e),h=(rN(n),Yg(e)),p=parseFloat(h.borderTopWidth),_=parseFloat(h.borderLeftWidth);t&&r&&(s.top=Math.max(s.top??0,0),s.left=Math.max(s.left??0,0));const E=iE({top:(i.top??0)-(s.top??0)-p,left:(i.left??0)-(s.left??0)-_,width:i.width,height:i.height});if(E.marginTop=0,E.marginLeft=0,r){const D=parseFloat(h.marginTop),x=parseFloat(h.marginLeft);Ar(E.top)&&(E.top-=p-D),Ar(E.bottom)&&(E.bottom-=p-D),Ar(E.left)&&(E.left-=_-x),Ar(E.right)&&(E.right-=_-x),E.marginTop=D,E.marginLeft=x}return E}function mV(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function _V(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===Yg(n,"position")||_V(nN(n)))}function sN(n,e,t=0,r,i=!1){let s={top:0,left:0};const c=i?dV(n):yS(n,e);if("viewport"===r)s=function p4(n,e=!1){const t=n.ownerDocument.documentElement,r=iN(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),s=Math.max(t.clientHeight,window.innerHeight||0),c=e?0:mV(t),h=e?0:mV(t,"left");return iE({top:c-Number(r?.top)+Number(r?.marginTop),left:h-Number(r?.left)+Number(r?.marginLeft),width:i,height:s})}(c,i);else{let h;"scrollParent"===r?(h=rN(nN(e)),"BODY"===h.nodeName&&(h=n.ownerDocument.documentElement)):h="window"===r?n.ownerDocument.documentElement:r;const p=iN(h,c,i);if(p&&"HTML"===h.nodeName&&!_V(c)){const{height:_,width:E}=pV(n.ownerDocument);Ar(s.top)&&Ar(p.top)&&Ar(p.marginTop)&&(s.top+=p.top-p.marginTop),Ar(s.top)&&(s.bottom=Number(_)+Number(p.top)),Ar(s.left)&&Ar(p.left)&&Ar(p.marginLeft)&&(s.left+=p.left-p.marginLeft),Ar(s.top)&&(s.right=Number(E)+Number(p.left))}else p&&(s=p)}return Ar(s.left)&&(s.left+=t),Ar(s.top)&&(s.top+=t),Ar(s.right)&&(s.right-=t),Ar(s.bottom)&&(s.bottom-=t),s}function g4({width:n,height:e}){return n*e}function yV(n,e,t,r,i=["top","bottom","right","left"],s="viewport",c=0){if(-1===n.indexOf("auto"))return n;const h=sN(t,r,c,s),p={top:{width:h?.width??0,height:(e?.top??0)-(h?.top??0)},right:{width:(h?.right??0)-(e?.right??0),height:h?.height??0},bottom:{width:h?.width??0,height:(h?.bottom??0)-(e?.bottom??0)},left:{width:(e.left??0)-(h?.left??0),height:h?.height??0}},_=Object.keys(p).map(P=>({position:P,...p[P],area:g4(p[P])})).sort((P,U)=>U.area-P.area);let E=_.filter(({width:P,height:U})=>P>=t.clientWidth&&U>=t.clientHeight);E=E.filter(({position:P})=>i.some(U=>U===P));const D=E.length>0?E[0].position:_[0].position,x=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${tE().isBs5?rE[D]:D}`),D+(x?`-${x}`:"")}const vS=(n,e=0)=>n?parseFloat(n):e;function vV(n){const t=n.ownerDocument.defaultView?.getComputedStyle(n),r=vS(t?.marginTop)+vS(t?.marginBottom),i=vS(t?.marginLeft)+vS(t?.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function wV(n,e,t){return iN(e,t?dV(n):yS(n,e),t)}function oN(n,e,t){const r=t.split(" ")[0],i=vV(n),s={width:i.width,height:i.height},c=-1!==["right","left"].indexOf(r),h=c?"top":"left",p=c?"left":"top",_=c?"height":"width",E=c?"width":"height";return s[h]=(e[h]??0)+e[_]/2-i[_]/2,s[p]=r===p?(e[p]??0)-i[E]:e[function _4(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(p)]??0,s}function bV(n,e){return!!n.modifiers[e]?.enabled}const v4={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function wS(n,e){return!!tE().isBs5&&v4[e].includes(n)}function EV(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function f4(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function E4(n){let e=n.offsets.target;const t=n.instance.target.querySelector(".arrow");if(!t)return n;const r=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),i=r?"height":"width",s=r?"Top":"Left",c=s.toLowerCase(),h=r?"left":"top",p=r?"bottom":"right",_=vV(t)[i],E=n.placement.split(" ")[1];(n.offsets.host[p]??0)-_<(e[c]??0)&&(e[c]-=(e[c]??0)-((n.offsets.host[p]??0)-_)),Number(n.offsets.host[c])+Number(_)>(e[p]??0)&&(e[c]+=Number(n.offsets.host[c])+Number(_)-Number(e[p])),e=iE(e);const D=Yg(n.instance.target),x=parseFloat(D[`margin${s}`])||0,P=parseFloat(D[`border${s}Width`])||0;let U;if(E){const ne=parseFloat(D.borderRadius)||0,Ae=Number(x+P+ne);U=c===E?Number(n.offsets.host[c])+Ae:Number(n.offsets.host[c])+Number(n.offsets.host[i]-Ae)}else U=Number(n.offsets.host[c])+Number(n.offsets.host[i]/2-_/2);let Y=U-(e[c]??0)-x-P;return Y=Math.max(Math.min(e[i]-(_+5),Y),0),n.offsets.arrow={[c]:Math.round(Y),[h]:""},n.instance.arrow=t,n}function C4(n){if(n.offsets.target=iE(n.offsets.target),!bV(n.options,"flip"))return n.offsets.target={...n.offsets.target,...oN(n.instance.target,n.offsets.host,n.placement)},n;const e=sN(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const h=yV("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),p=[t,h];return p.forEach((_,E)=>{if(t!==_||p.length===E+1)return;t=n.placement.split(" ")[0];const D="left"===t&&Math.floor(n.offsets.target.right??0)>Math.floor(n.offsets.host.left??0)||"right"===t&&Math.floor(n.offsets.target.left??0)<Math.floor(n.offsets.host.right??0)||"top"===t&&Math.floor(n.offsets.target.bottom??0)>Math.floor(n.offsets.host.top??0)||"bottom"===t&&Math.floor(n.offsets.target.top??0)<Math.floor(n.offsets.host.bottom??0),x=Math.floor(n.offsets.target.left??0)<Math.floor(e.left??0),P=Math.floor(n.offsets.target.right??0)>Math.floor(e.right??0),U=Math.floor(n.offsets.target.top??0)<Math.floor(e.top??0),Y=Math.floor(n.offsets.target.bottom??0)>Math.floor(e.bottom??0),ne="left"===t&&x||"right"===t&&P||"top"===t&&U||"bottom"===t&&Y,Ae=-1!==["top","bottom"].indexOf(t),Ze=Ae&&"left"===r&&x||Ae&&"right"===r&&P||!Ae&&"left"===r&&U||!Ae&&"right"===r&&Y;(D||ne||Ze)&&((D||ne)&&(t=p[E+1]),Ze&&(r=function y4(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target={...n.offsets.target,...oN(n.instance.target,n.offsets.host,n.placement)})}),n}function I4(n){if(!bV(n.options,"preventOverflow"))return n;const e="transform",t=n.instance.target.style,{top:r,left:i,[e]:s}=t;t.top="",t.left="",t[e]="";const c=sN(n.instance.target,n.instance.host,0,n.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);t.top=r,t.left=i,t[e]=s;const p={primary(_){let E=n.offsets.target[_];return(n.offsets.target[_]??0)<(c[_]??0)&&(E=Math.max(n.offsets.target[_]??0,c[_]??0)),{[_]:E}},secondary(_){const E="right"===_,D=E?"left":"top";let P=n.offsets.target[D];return(n.offsets.target[_]??0)>(c[_]??0)&&(P=Math.min(n.offsets.target[D]??0,(c[_]??0)-n.offsets.target[E?"width":"height"])),{[D]:P}}};return["left","right","top","bottom"].forEach(_=>{const E=-1!==["left","top","start"].indexOf(_)?p.primary:p.secondary;n.offsets.target={...n.offsets.target,...E(_)}}),n}function D4(n){const e=n.placement,t=e.split(" ")[0],r=e.split(" ")[1];if(r){const{host:i,target:s}=n.offsets,c=-1!==["bottom","top"].indexOf(t),h=c?"left":"top",p=c?"width":"height",_={start:{[h]:i[h]},end:{[h]:(i[h]??0)+i[p]-s[p]}};n.offsets.target={...s,[h]:h===r?_.start[h]:_.end[h]}}return n}const A4=new class S4{position(e,t){return this.offset(e,t)}offset(e,t){return wV(t,e)}positionElements(e,t,r,i,s){const c=[C4,D4,I4,E4],p=function T4(n,e,t,r){if(!n||!e)return;const i=wV(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const s=!!t.match(/auto/g);let c=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const h=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return h&&(c=h[1]+(h[2]?` ${h[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(c)&&(c="auto"),c=yV(c,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:oN(n,i,c),host:i,arrow:void 0},positionFixed:!1,placement:c,placementAuto:s}}(t,e,_S[r],s);if(p)return c.reduce((_,E)=>E(_),p)}};function x4(n,e,t,r,i,s){const c=A4.positionElements(n,e,t,r,i);if(!c)return;const h=function m4(n){return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(n.offsets.target.left??0),top:Math.round(n.offsets.target.top??0),bottom:Math.round(n.offsets.target.bottom??0),right:Math.floor(n.offsets.target.right??0)}}(c);EV(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${h.left}px, ${h.top}px, 0px)`},s),c.instance.arrow&&EV(c.instance.arrow,c.offsets.arrow,s),function b4(n,e){const t=n.instance.target;let r=t.className;const i=tE().isBs5?rE[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function w4(n){return tE().isBs5?wS(n,"end")?"ms-2":wS(n,"start")?"me-2":wS(n,"top")?"mb-2":wS(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(c,s)}let aN=(()=>{class n{constructor(t,r,i){this.update$$=new no.x,this.positionElements=new Map,this.isDisabled=!1,pi(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,ED.T)(mS(window,"scroll",{passive:!0}),mS(window,"resize",{passive:!0}),ut(0,d4),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(s=>{x4(bS(s.target),bS(s.element),s.attachment,s.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(bS(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(bS(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b),l.LFG(l.FYo),l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bS(n){return"string"==typeof n?document.querySelector(n):n instanceof l.SBq?n.nativeElement:n??null}class sE{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class M4{constructor(e,t,r,i,s,c,h,p,_){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=s,this._ngZone=c,this._applicationRef=h,this._posService=p,this._document=_,this.onBeforeShow=new l.vpe,this.onShown=new l.vpe,this.onBeforeHide=new l.vpe,this.onHidden=new l.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=l.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof l.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&typeof this._document<"u"){const r=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const t=this._componentRef.location.nativeElement;return t.parentNode?.removeChild(t),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||this._elementRef?.nativeElement;const t=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),r=this._listenOpts.show=s=>{e.show?e.show(s):this.show(s),s()};return this._renderer&&(this._unregisterListenersFn=function R6(n,e){const t=function tV(n,e=k6){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(s=>s.split(":")).map(s=>{const c=e[s[0]]||s;return new M6(c[0],c[1])}),i=r.filter(s=>s.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],s=[],c=()=>{s.forEach(h=>i.push(h())),s.length=0};return t.forEach(h=>{const p=h.open===h.close,_=p?e.toggle:e.show;if(!p&&h.close&&e.hide){const E=n.listen(r,h.close,e.hide);s.push(()=>E)}_&&i.push(n.listen(r,h.open,()=>_(c)))}),()=>{i.forEach(h=>h())}}(this._renderer,{target:e.target,triggers:e.triggers,show:r,hide:t,toggle:s=>{this.isShown?t():r(s)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function N6(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function P6(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new sE([]);if(e instanceof l.Rgc){if(this._viewContainerRef){const c=this._viewContainerRef.createEmbeddedView(e,t);return c.markForCheck(),new sE([c.rootNodes],c)}const s=e.createEmbeddedView({});return this._applicationRef.attachView(s),new sE([s.rootNodes],s)}if("function"==typeof e){const s=this._componentFactoryResolver.resolveComponentFactory(e),c=l.zs3.create({providers:this._providers,parent:this._injector}),h=s.create(c);return Object.assign(h.instance,r),this._applicationRef.attachView(h.hostView),new sE([[h.location.nativeElement]],h.hostView,h)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new sE([i])}}let lN=(()=>{class n{constructor(t,r,i,s,c,h){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=s,this._applicationRef=c,this._document=h}createLoader(t,r,i){return new M4(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l._Vd),l.LFG(l.R0b),l.LFG(l.zs3),l.LFG(aN),l.LFG(l.z2F),l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const k4=["*"];let CV=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),TV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ES={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},R4=new l.OlP("override-default-config");let N4=(()=>{class n{constructor(t,r,i){this._element=r,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,By()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(this.bsModalService?.setDismissReason("backdrop-click"),this.hide())}onPopState(){this.bsModalService?.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===this.bsModalService?.getModalsCount()&&(this.bsModalService?.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,By()?"in":"show"),setTimeout(()=>{this.isShown=!1,document&&document.body&&1===this.bsModalService?.getModalsCount()&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),this.bsModalService?.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(TV),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275cmp=l.Xpm({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,r){1&t&&l.NdJ("mousedown",function(s){return r.onClickStarted(s)})("click",function(s){return r.onClickStop(s)})("popstate",function(){return r.onPopState()},!1,l.Jf7)("keydown.esc",function(s){return r.onEsc(s)},!1,l.Jf7),2&t&&l.uIk("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},ngContentSelectors:k4,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,r){1&t&&(l.F$t(),l.TgZ(0,"div",0)(1,"div",1),l.Hsn(2),l.qZA()()),2&t&&l.Tol("modal-dialog"+(r.config.class?" "+r.config.class:""))},dependencies:[X6],encapsulation:2}),n})(),P4=(()=>{class n{constructor(t,r){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=r}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),By()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class U6{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=Sr),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function F6(){const n=tE(),e=Object.keys(n).find(t=>n[t]);return gS[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275cmp=l.Xpm({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),O4=1,Hy=(()=>{class n{constructor(t,r,i){this.clf=r,this.modalDefaultOption=i,this.onShow=new l.vpe,this.onShown=new l.vpe,this.onHide=new l.vpe,this.onHidden=new l.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=i?Object.assign({},ES,i):ES}show(t,r){this.modalsCount++,this._createLoaders();const i=r?.id||O4++;return this.config=this.modalDefaultOption?Object.assign({},ES,this.modalDefaultOption,r):Object.assign({},ES,r),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,r=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&r&&(this._backdropLoader.attach(P4).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){const r=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const c of this.config.providers)r.provide(c);const i=new CV,s=r.provide({provide:TV,useValue:this.config}).provide({provide:CV,useValue:i}).attach(N4).to("body");return i.hide=()=>s.instance?.hide(),i.setClass=c=>{s.instance&&(s.instance.config.class=c)},i.onHidden=new l.vpe,i.onHide=new l.vpe,this.copyEvent(r.onBeforeHide,i.onHide),this.copyEvent(r.onHidden,i.onHidden),s.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),s.instance&&(s.instance.level=this.getModalsCount(),i.content=r.getInnerComponent(),i.id=s.instance.config?.id),i}_hideModal(t){if(null!=t){const r=this.loaders.findIndex(s=>s.instance?.config.id===t),i=this.loaders[r];i&&i.hide(t)}else this.loaders.forEach(r=>{r.instance&&r.hide(r.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const r=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),r}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const r=this.loaders.findIndex(i=>i.instance?.config.id===t);r>=0&&(this.loaders.splice(r,1),this.loaders.forEach((i,s)=>{i.instance&&(i.instance.level=s+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,r){t.subscribe(i=>{r.emit(this.lastDismissReason||i)})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(lN),l.LFG(R4,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();uV.forRoot();let F4=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Hy,lN,aN]}}static forChild(){return{ngModule:n,providers:[Hy,lN,aN]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[uV]}),n})();function L4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",10)(1,"div",11),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.getPlaylist(s.playlistId))}),l.TgZ(2,"div",12),l._UZ(3,"img",13),l.TgZ(4,"h5",14),l._uU(5),l.qZA(),l.TgZ(6,"div",15),l._uU(7),l.qZA(),l.TgZ(8,"div",15),l._uU(9),l.qZA(),l.TgZ(10,"div",15),l._uU(11),l.qZA()()()()}if(2&n){const t=e.$implicit;l.xp6(5),l.Oqu(t.playlistName),l.xp6(2),l.hij("Track Count: ",t.trackCount,""),l.xp6(2),l.Oqu(t.duration?"Duration: "+t.duration+" Minutes":"Duration: 0 Minutes"),l.xp6(2),l.Oqu(t.rating?"Rating: "+t.rating:"No reviews")}}function U4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",16)(1,"h4",17),l._uU(2,"Create New Playlist"),l.qZA(),l.TgZ(3,"button",18),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l.TgZ(4,"span",19),l._uU(5,"\xd7"),l.qZA()()(),l.TgZ(6,"div",20)(7,"div",21),l._UZ(8,"input",22,23)(10,"div",24),l.qZA(),l.TgZ(11,"div",25),l._UZ(12,"textarea",26,27),l.qZA()(),l.TgZ(14,"div",28)(15,"button",29),l.NdJ("click",function(){l.CHM(t);const i=l.MAs(9),s=l.MAs(13),c=l.oxw();return l.KtG(c.inputValidation(i.value,s.value))}),l._uU(16," Create Playlist "),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(8),l.Q6J("ngClass",t.error?"form-control is-invalid":"form-control"),l.xp6(2),l.Q6J("textContent",t.errorMessage)}}let V4=(()=>{class n{constructor(t,r,i,s){this.modalService=t,this.expressService=r,this.router=i,this.authService=s,this.user=this.authService.user,this.modalService.onHidden.subscribe(()=>{this.error=!1,this.errorMessage=""})}ngOnInit(){this.expressService.getUserPlaylists(this.authService.user.uid).subscribe(t=>{const r=t;console.log(r),r.forEach(i=>{this.expressService.getNumberOfTracks(i.playlistId).subscribe(s=>{i.trackCount=s.count,i.duration=s.duration,i.rating=s.rating},s=>{console.log(s)})}),this.playlists=r},t=>{console.log(t)})}openModal(t){this.modalRef=this.modalService.show(t)}closeModal(){this.modalRef?.hide()}inputValidation(t,r){if(""===t)return this.error=!0,void(this.errorMessage="Please enter a playlist name.");this.expressService.createPlaylist(t,r,this.user?.uid).subscribe(i=>{this.playlists=i,this.closeModal()},i=>{this.error=!0,this.errorMessage=i.error})}getPlaylist(t){this.router.navigate(["/dashboard/playlists/"+t]),console.log(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hy),l.Y36(Kg),l.Y36(gn),l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-playlists"]],decls:13,vars:1,consts:[[1,"container"],[1,"row","align-items-start"],[1,"col-md-5","col-lg-4"],[1,"col-md-4","col-lg-5"],[1,"col-3",2,"display","flex","justify-content","end"],[1,"btn","btn-dark","text-nowrap",3,"click"],[1,"container","text-center"],[1,"row","row-cols-4"],["class","col",4,"ngFor","ngForOf"],["template",""],[1,"col"],[1,"card",2,"width","18rem",3,"click"],[1,"card-body"],["src","../../../assets/musicicon.jpeg","alt","...",1,"card-img-top"],[1,"card-title"],[1,"username"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"input-group","has-validation","mb-4"],["type","text","placeholder","Playlist Name","aria-label","Playlist Name","aria-describedby","addon-wrapping","required","",3,"ngClass"],["playlistName",""],[1,"invalid-feedback",3,"textContent"],[1,"input-group"],["placeholder","Description","aria-label","With textarea",1,"form-control"],["description",""],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"div",2)(3,"div",3),l.TgZ(4,"div",4)(5,"button",5),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(12);return l.KtG(r.openModal(c))}),l._uU(6,"New Playlist"),l.qZA()()()(),l.TgZ(7,"div",6)(8,"div",7),l.YNc(9,L4,12,4,"div",8),l.qZA(),l._UZ(10,"router-outlet"),l.qZA(),l.YNc(11,U4,17,2,"ng-template",null,9,l.W1O)}2&t&&(l.xp6(9),l.Q6J("ngForOf",r.playlists))},dependencies:[tn,zr,xu],styles:[".container[_ngcontent-%COMP%]{margin:24px 0}.card[_ngcontent-%COMP%]{background-color:#e8e8e8;cursor:pointer;width:200px!important}img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:5px}.col[_ngcontent-%COMP%]{margin:10px 0}"]}),n})();function B4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"tr")(1,"th",26),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td")(8,"button",27),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.playSongOnyoutube(s.trackTitle))}),l._uU(9,"Play song on youtube"),l.qZA()(),l.TgZ(10,"td")(11,"button",28),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.viewTrackDetails(s.trackId))}),l._uU(12,"View Track Details"),l.qZA()(),l.TgZ(13,"td")(14,"button",28),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.deleteTrack(s.trackId))}),l._uU(15,"Remove"),l.qZA()()()}if(2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.trackTitle),l.xp6(2),l.Oqu(t.albumTitle),l.xp6(2),l.Oqu(t.artistName)}}function H4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",29)(1,"h4",30),l._uU(2,"Edit Playlist"),l.qZA(),l.TgZ(3,"button",31),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l.TgZ(4,"span",32),l._uU(5,"\xd7"),l.qZA()()(),l.TgZ(6,"div",33)(7,"div",34),l._UZ(8,"input",35,36)(10,"div",37),l.qZA(),l.TgZ(11,"div",38),l._UZ(12,"textarea",39,40),l.qZA()(),l.TgZ(14,"div",41)(15,"button",28),l.NdJ("click",function(){l.CHM(t);const i=l.MAs(9),s=l.MAs(13),c=l.oxw();return l.KtG(c.inputValidation(i.value,s.value))}),l._uU(16," Save "),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(8),l.Q6J("defaultValue",null==t.playlist?null:t.playlist.playlistName)("ngClass",t.error?"form-control is-invalid":"form-control"),l.xp6(2),l.Q6J("textContent",t.errorMessage),l.xp6(2),l.Q6J("defaultValue",null!=t.playlist&&t.playlist.description?null==t.playlist?null:t.playlist.description:"")}}function j4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",29)(1,"h4",30),l._uU(2,"Are you sure?"),l.qZA(),l.TgZ(3,"button",31),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l.TgZ(4,"span",32),l._uU(5,"\xd7"),l.qZA()()(),l.TgZ(6,"div",41)(7,"button",27),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l._uU(8," Cancel "),l.qZA(),l.TgZ(9,"button",28),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.deletePlaylist())}),l._uU(10," Delete "),l.qZA()()}}function $4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",28),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw(2);return l.KtG(s.addTrack(i.id))}),l._uU(1,"Add"),l.qZA()}}function q4(n,e){if(1&n&&(l.TgZ(0,"tr")(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l.YNc(6,$4,2,0,"button",45),l.qZA()()),2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.title),l.xp6(2),l.Oqu(t.name),l.xp6(2),l.Q6J("ngIf",!t.isInPlaylist)}}function Z4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",29)(1,"h4",30),l._uU(2,"Search"),l.qZA(),l.TgZ(3,"button",31),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l.TgZ(4,"span",32),l._uU(5,"\xd7"),l.qZA()()(),l.TgZ(6,"div",33)(7,"div",38),l._UZ(8,"input",42,43),l.TgZ(10,"button",28),l.NdJ("click",function(){l.CHM(t);const i=l.MAs(9),s=l.oxw();return l.KtG(s.searchTracks(i.value))}),l._uU(11," Search "),l.qZA()(),l.TgZ(12,"table",44)(13,"thead")(14,"tr")(15,"th",21),l._uU(16,"Track Name"),l.qZA(),l.TgZ(17,"th",21),l._uU(18,"Artist Name"),l.qZA(),l.TgZ(19,"th",21),l._uU(20,"Add"),l.qZA()()(),l.TgZ(21,"tbody"),l.YNc(22,q4,7,3,"tr",22),l.qZA()()(),l._UZ(23,"div",41)}if(2&n){const t=l.oxw();l.xp6(22),l.Q6J("ngForOf",t.artists)}}let G4=(()=>{class n{constructor(t,r,i,s,c,h){this.route=t,this.expressService=r,this.db=i,this.modalService=s,this.router=c,this.authService=h,this.routeSub=xc.w0.EMPTY,this.id=-1,this.modalService.onHidden.subscribe(()=>{this.error=!1,this.errorMessage="",this.artists=[]})}ngOnInit(){this.routeSub=this.route.params.subscribe(t=>{this.id=t.id}),this.getPlaylist(this.id),this.getPlaylistTracks(this.id)}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe()}openModal(t){this.modalRef=this.modalService.show(t)}closeModal(){this.modalRef?.hide()}inputValidation(t,r){if(""===t)return this.error=!0,void(this.errorMessage="Please enter a playlist name.");this.expressService.editPlaylist(t,r,this.playlist?.playlistId).subscribe(i=>{console.log(i),this.getPlaylist(this.id),this.closeModal()},i=>{this.error=!0,this.errorMessage=i.error})}getPlaylist(t){this.expressService.getPlaylistById(t).subscribe(r=>{console.log(r),r.uid!==this.authService.user.uid&&this.router.navigate(["/dashboard"]),this.db.object("users/"+r.uid).query.ref.on("value",s=>{this.username=s.val().username},s=>{console.log("The read failed: "+s.name)}),this.playlist=r},r=>{console.log(r)})}getPlaylistTracks(t){this.expressService.getPlaylistTracksById(t).subscribe(r=>{console.log(r),this.tracks=r},r=>{console.log(r)})}changePublic(t,r){console.log(t.target.checked,r),this.expressService.changePlaylistPublic(r,t.target.checked).subscribe(i=>{console.log(i),this.getPlaylist(this.id)},i=>{console.log(i)})}searchTracks(t){console.log(t),this.expressService.getArtists(t).subscribe(r=>{const i=r.splice(0,10);i.forEach(s=>{s.isInPlaylist=!!this.tracks?.find(c=>c.trackId===s.id)}),console.log(i),this.artists=i},r=>{console.log(r)})}addTrack(t){this.expressService.addTrackToPlaylist(t,this.playlist?.playlistId).subscribe(r=>{console.log(r),this.getPlaylistTracks(this.id),this.closeModal()},r=>{console.log(r)})}deleteTrack(t){this.expressService.deleteTrackFromPlaylist(t,this.playlist?.playlistId).subscribe(r=>{console.log(r),this.getPlaylistTracks(this.id)},r=>{console.log(r)})}deletePlaylist(){this.expressService.deletePlaylist(this.id).subscribe(t=>{console.log(t),this.closeModal(),this.router.navigate(["/dashboard/playlists"])},t=>{console.log(t)})}playSongOnyoutube(t){window.open("https://www.youtube.com/results?search_query="+t)}viewTrackDetails(t){this.router.navigate(["/tracks/"+t])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Vl),l.Y36(Kg),l.Y36(Vy),l.Y36(Hy),l.Y36(gn),l.Y36(_s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-playlist"]],decls:52,vars:5,consts:[[1,"container"],[1,"back-button"],["routerLink","../",1,"material-symbols-outlined"],[1,"header"],[1,"card",2,"width","18rem"],[1,"card-body"],["src","../../../assets/musicicon.jpeg","alt","...",1,"card-img-top"],[2,"width","100%"],[1,"details"],[2,"display","flex","align-items","center"],[1,"playlist-name"],[1,"btn","btn-primary",2,"height","30%","margin-left","40px",3,"click"],[1,"btn","btn-outline-primary",2,"height","30%",3,"click"],[1,"details",2,"margin-top","16px"],[1,"user-name"],[1,"form-check","form-switch",2,"font-size","20px"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input",3,"checked","change"],["for","flexSwitchCheckDefault",1,"form-check-label"],[2,"display","flex","justify-content","end","padding","20px 0"],[1,"btn","btn-outline-dark",3,"click"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["template",""],["deleteTemplate",""],["tracksTemplate",""],["scope","row"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"input-group","has-validation","mb-4"],["type","text","placeholder","Playlist Name","aria-label","Playlist Name","aria-describedby","addon-wrapping","required","",3,"defaultValue","ngClass"],["playlistName",""],[1,"invalid-feedback",3,"textContent"],[1,"input-group"],["placeholder","Description","aria-label","With textarea",1,"form-control",3,"defaultValue"],["description",""],[1,"modal-footer"],["type","text","placeholder","Search","aria-label","Track Search","aria-describedby","addon-wrapping",1,"form-control"],["search",""],[1,"table","table-striped"],["class","btn btn-primary",3,"click",4,"ngIf"]],template:function(t,r){if(1&t){const i=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"span",2),l._uU(3," arrow_back_ios "),l.qZA()(),l.TgZ(4,"div",3)(5,"div",4)(6,"div",5),l._UZ(7,"img",6),l.qZA()(),l.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"h3",10),l._uU(12),l.qZA(),l.TgZ(13,"button",11),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(47);return l.KtG(r.openModal(c))}),l._uU(14,"Edit"),l.qZA(),l.TgZ(15,"button",12),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(49);return l.KtG(r.openModal(c))}),l._uU(16,"Delete"),l.qZA()(),l.TgZ(17,"div"),l._uU(18),l.qZA()(),l.TgZ(19,"div",13)(20,"div",14),l._uU(21),l.qZA(),l.TgZ(22,"div",15)(23,"input",16),l.NdJ("change",function(c){return r.changePublic(c,null==r.playlist?null:r.playlist.playlistId)}),l.qZA(),l.TgZ(24,"label",17),l._uU(25,"Playlist Public"),l.qZA()()()()(),l.TgZ(26,"div",18)(27,"button",19),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(51);return l.KtG(r.openModal(c))}),l._uU(28," Add Track "),l.qZA()(),l.TgZ(29,"table",20)(30,"thead")(31,"tr")(32,"th",21),l._uU(33,"Track Name"),l.qZA(),l.TgZ(34,"th",21),l._uU(35,"Album Name"),l.qZA(),l.TgZ(36,"th",21),l._uU(37,"Artist Name"),l.qZA(),l.TgZ(38,"th",21),l._uU(39,"Play On Youtube"),l.qZA(),l.TgZ(40,"th",21),l._uU(41,"Track Details"),l.qZA(),l.TgZ(42,"th",21),l._uU(43,"Remove from playlist"),l.qZA()()(),l.TgZ(44,"tbody"),l.YNc(45,B4,16,3,"tr",22),l.qZA()()(),l.YNc(46,H4,17,4,"ng-template",null,23,l.W1O),l.YNc(48,j4,11,0,"ng-template",null,24,l.W1O),l.YNc(50,Z4,24,1,"ng-template",null,25,l.W1O)}2&t&&(l.xp6(12),l.hij(" ",null==r.playlist?null:r.playlist.playlistName," "),l.xp6(6),l.hij(" ",null==r.playlist?null:r.playlist.description," "),l.xp6(3),l.hij(" ",r.username," "),l.xp6(2),l.Q6J("checked",null==r.playlist?null:r.playlist.isPublic),l.xp6(22),l.Q6J("ngForOf",r.tracks))},dependencies:[tn,zr,Nn,Mi],styles:[".container[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px}.card[_ngcontent-%COMP%]{background-color:#e8e8e8;display:flex;align-items:center}img[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:5px}.header[_ngcontent-%COMP%]{display:flex;padding-bottom:24px}.playlist-name[_ngcontent-%COMP%]{font-size:4rem}.user-name[_ngcontent-%COMP%]{font-size:2rem}.details[_ngcontent-%COMP%]{padding-left:3rem}.back-button[_ngcontent-%COMP%]{padding:10px}.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:10px}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#1db954;border-color:#1db954}button[_ngcontent-%COMP%]{background-color:#1db954;color:#fff;border-color:#1db954}.btn[_ngcontent-%COMP%]:hover{background-color:#1c9c49;border-color:#1c9c49}"]}),n})(),IV=(()=>{class n{constructor(t,r,i,s,c,h){this.afs=t,this.afAuth=r,this.db=i,this.router=s,this.ngZone=c,this.http=h,this.users=this.db.object("users").valueChanges()}GetUsers(){return this.users}ChangeUserPermission(t,r){this.db.object("users/"+r).update({admin:t})}setDisabled(t,r){return this.http.post("http://localhost:3000/api/updateUser",{disabled:t,uid:r})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Bk),l.LFG(Iy),l.LFG(Vy),l.LFG(gn),l.LFG(l.R0b),l.LFG(Ms))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function W4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"tr")(1,"th",4),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td")(8,"div",5)(9,"input",6),l.NdJ("change",function(i){const c=l.CHM(t).$implicit,h=l.oxw();return l.KtG(h.changeUserPermission(i,c.uid))}),l.qZA()()(),l.TgZ(10,"td")(11,"div",5)(12,"input",6),l.NdJ("change",function(i){const c=l.CHM(t).$implicit,h=l.oxw();return l.KtG(h.setDisabled(i,c.uid))}),l.qZA()()()()}if(2&n){const t=e.$implicit;l.xp6(2),l.Oqu(null==t?null:t.uid),l.xp6(2),l.Oqu(null==t?null:t.email),l.xp6(2),l.Oqu(null==t?null:t.username),l.xp6(3),l.Q6J("checked",t.admin),l.xp6(3),l.Q6J("checked",t.isDisabled)}}let z4=(()=>{class n{constructor(t){this.adminService=t,this.users=[],this.subscription=void 0}ngOnInit(){this.adminService.GetUsers()?.pipe(Pl(1),(0,dt.U)(t=>{this.users=[],Object.keys(t).forEach(r=>{let i=t[r];i.uid=r,this.users.push(i)})})).subscribe()}changeUserPermission(t,r){console.log(t.target.checked,r),this.adminService.ChangeUserPermission(t.target.checked,r)}setDisabled(t,r){console.log(t.target.checked,r),this.subscription=this.adminService.setDisabled(t.target.checked,r).subscribe(i=>{this.subscription?.unsubscribe()},i=>{console.log(i)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(IV))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-admin"]],decls:15,vars:1,consts:[[1,"table"],["scope","col",2,"width","300px","max-width","200px"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input",3,"checked","change"]],template:function(t,r){1&t&&(l.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),l._uU(4,"UID"),l.qZA(),l.TgZ(5,"th",2),l._uU(6,"Email"),l.qZA(),l.TgZ(7,"th",2),l._uU(8,"Username"),l.qZA(),l.TgZ(9,"th",2),l._uU(10,"IsAdmin"),l.qZA(),l.TgZ(11,"th",2),l._uU(12,"IsDisabled"),l.qZA()()(),l.TgZ(13,"tbody"),l.YNc(14,W4,13,5,"tr",3),l.qZA()()),2&t&&(l.xp6(14),l.Q6J("ngForOf",r.users))},dependencies:[zr],styles:[".form-check-input[_ngcontent-%COMP%]:checked{background-color:#1db954;border-color:#1db954}"]}),n})();var DV=V(9312);function K4(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",2),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.close())}),l.TgZ(1,"span",3),l._uU(2,"\xd7"),l.qZA(),l.TgZ(3,"span",4),l._uU(4,"Close"),l.qZA()()}}function Y4(n,e){if(1&n&&(l.TgZ(0,"div",1),l.YNc(1,K4,5,0,"ng-template",0),l.Hsn(2),l.qZA()),2&n){const t=l.oxw();l.Tol("alert alert-"+t.type),l.Q6J("ngClass",t.classes),l.xp6(1),l.Q6J("ngIf",t.dismissible)}}const Q4=["*"];let J4=(()=>{class n{constructor(){this.type="warning",this.dismissible=!1,this.dismissOnTimeout=void 0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X4=(()=>{class n{constructor(t,r){this.changeDetection=r,this.type="warning",this.dismissible=!1,this.isOpen=!0,this.onClose=new l.vpe,this.onClosed=new l.vpe,this.classes="",this.dismissibleChange=new l.vpe,Object.assign(this,t),this.dismissibleChange.subscribe(()=>{this.classes=this.dismissible?"alert-dismissible":"",this.changeDetection.markForCheck()})}ngOnInit(){this.dismissOnTimeout&&setTimeout(()=>this.close(),parseInt(this.dismissOnTimeout,10))}close(){!this.isOpen||(this.onClose.emit(this),this.isOpen=!1,this.changeDetection.markForCheck(),this.onClosed.emit(this))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(J4),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["alert"],["bs-alert"]],inputs:{type:"type",dismissible:"dismissible",dismissOnTimeout:"dismissOnTimeout",isOpen:"isOpen"},outputs:{onClose:"onClose",onClosed:"onClosed"},ngContentSelectors:Q4,decls:1,vars:1,consts:[[3,"ngIf"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"sr-only","visually-hidden"]],template:function(t,r){1&t&&(l.F$t(),l.YNc(0,Y4,3,4,"ng-template",0)),2&t&&l.Q6J("ngIf",r.isOpen)},dependencies:[tn,Nn],encapsulation:2,changeDetection:0}),(0,DV.gn)([L6(),(0,DV.w6)("design:type",Object)],n.prototype,"dismissible",void 0),n})(),ez=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Dd]}),n})();function tz(n,e){1&n&&(l.TgZ(0,"button",13),l._uU(1," DMCA Takedown Procedure "),l.qZA()),2&n&&l.Q6J("routerLink","/dashboard/takedown")}function nz(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"h1"),l._uU(5,"Hello "),l.TgZ(6,"strong"),l._uU(7),l.qZA()(),l.TgZ(8,"p"),l._uU(9,"Email: "),l.TgZ(10,"strong"),l._uU(11),l.qZA()(),l.TgZ(12,"p"),l._uU(13,"Email Verified: "),l.TgZ(14,"strong"),l._uU(15),l.qZA()()()(),l.TgZ(16,"div",10)(17,"button",11),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(),s=l.MAs(9);return l.KtG(i.openModal(s))}),l._uU(18,"Change Password"),l.qZA(),l.YNc(19,tz,2,1,"button",12),l.qZA()()()}if(2&n){const t=e.ngIf,r=l.oxw();l.xp6(7),l.Oqu(t.displayName?t.displayName:"User"),l.xp6(4),l.Oqu(t.email),l.xp6(4),l.Oqu(t.emailVerified),l.xp6(4),l.Q6J("ngIf",r.isAdmin)}}function rz(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",14)(1,"h4",15),l._uU(2,"Change Password"),l.qZA(),l.TgZ(3,"button",16),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l.TgZ(4,"span",17),l._uU(5,"\xd7"),l.qZA()()(),l.TgZ(6,"div",18)(7,"div",19),l._UZ(8,"input",20,21),l.qZA(),l.TgZ(10,"div",19),l._UZ(11,"input",22,23),l.qZA(),l.TgZ(13,"div",24),l._UZ(14,"input",25,26)(16,"div",27),l.qZA()(),l.TgZ(17,"div",28)(18,"button",29),l.NdJ("click",function(){l.CHM(t);const i=l.MAs(9),s=l.MAs(12),c=l.MAs(15),h=l.oxw();return l.KtG(h.inputValidation(i.value,s.value,c.value))}),l._uU(19," Change Password "),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(8),l.Q6J("ngClass",t.error||t.oldPasswordError?"form-control is-invalid":"form-control"),l.xp6(3),l.Q6J("ngClass",t.error||t.passwordError?"form-control is-invalid":"form-control"),l.xp6(3),l.Q6J("ngClass",t.error||t.confirmPasswordError?"form-control is-invalid":"form-control"),l.xp6(2),l.Q6J("textContent",t.errorMessage)}}let iz=(()=>{class n{constructor(t,r){this.authService=t,this.modalService=r,this.success=!1,this.isAdmin=this.authService.role.admin,this.authService.getError().subscribe(i=>{this.error=i}),this.authService.getErrorMessage().subscribe(i=>{this.errorMessage=i}),this.authService.getSuccess().subscribe(i=>{this.success=i,!0===i&&this.modalRef?.hide()}),this.modalService.onHidden.subscribe(()=>{this.error=!1,this.errorMessage="",this.oldPasswordError=!1,this.passwordError=!1,this.confirmPasswordError=!1})}openModal(t){this.modalRef=this.modalService.show(t)}closeModal(){this.modalRef?.hide()}inputValidation(t,r,i){this.oldPasswordError=""===t,this.passwordError=""===r,this.confirmPasswordError=""===i,""!==t&&""!==r&&""!==i&&this.authService.ChangePassword(t,r,i)}ngOnInit(){this.success=!1}ngOnDestroy(){this.success=!1}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_s),l.Y36(Hy))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-account"]],decls:10,vars:3,consts:[[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["type","success",3,"dismissible","isOpen"],["class","row",4,"ngIf"],["template",""],[1,"row"],[1,"col-md-12"],[1,"media"],[1,"media-body"],[1,"buttons"],["type","button",1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"input-group","flex-nowrap","mb-4"],["type","password","placeholder","Old Password","aria-label","Old Password","aria-describedby","addon-wrapping","required","",3,"ngClass"],["oldPassword",""],["type","password","placeholder","New Password","aria-label","New Password","aria-describedby","addon-wrapping","required","",3,"ngClass"],["password",""],[1,"input-group","has-validation","mb-4"],["type","password","placeholder","Confirm Password","aria-label","Confirm Password","aria-describedby","addon-wrapping","required","",3,"ngClass"],["confirmPassword",""],[1,"invalid-feedback",3,"textContent"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"body")(1,"div",0)(2,"div",1)(3,"h1",2),l._uU(4,"User Profile"),l.qZA()(),l.TgZ(5,"bs-alert",3),l._uU(6,"Password Changed"),l.qZA(),l.YNc(7,nz,20,4,"div",4),l.qZA(),l.YNc(8,rz,20,4,"ng-template",null,5,l.W1O),l.qZA()),2&t&&(l.xp6(5),l.Q6J("dismissible",!0)("isOpen",r.success),l.xp6(2),l.Q6J("ngIf",r.authService.userData))},dependencies:[tn,Nn,Mi,X4],styles:[".row[_ngcontent-%COMP%]{width:100%}body[_ngcontent-%COMP%]{padding:10px}button[_ngcontent-%COMP%]{background-color:#1db954;border-color:#1db954;margin-right:10px}.btn[_ngcontent-%COMP%]:hover{background-color:#199e47;border-color:#199e47}"]}),n})(),sz=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-container"]],decls:4,vars:0,consts:[[2,"height","100%","display","flex","flex-direction","column"],[2,"flex-shrink","0"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"app-navbar"),l.qZA(),l._UZ(3,"router-outlet"),l.qZA())},dependencies:[xu,eE]}),n})();class cN{}const pd="*";function SV(n,e=null){return{type:4,styles:e,timings:n}}function AV(n,e=null){return{type:2,steps:n,options:e}}function jy(n){return{type:6,styles:n,offset:null}}function xV(n){Promise.resolve().then(n)}class oE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){xV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class MV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?xV(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==s&&this._onFinish()}),c.onDestroy(()=>{++r==s&&this._onDestroy()}),c.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const kV="400ms cubic-bezier(0.4,0.0,0.2,1)",az=[jy({height:0,visibility:"hidden"}),SV(kV,jy({height:"*",visibility:"visible"}))],lz=[jy({height:"*",visibility:"visible"}),SV(kV,jy({height:0,visibility:"hidden"}))];let uz=(()=>{class n{constructor(t,r,i){this._el=t,this._renderer=r,this.collapsed=new l.vpe,this.collapses=new l.vpe,this.expanded=new l.vpe,this.expands=new l.vpe,this.isExpanded=!0,this.collapseNewValue=!0,this.isCollapsed=!1,this.isCollapse=!0,this.isCollapsing=!1,this.isAnimated=!1,this._display="block",this._stylesLoaded=!1,this._COLLAPSE_ACTION_NAME="collapse",this._EXPAND_ACTION_NAME="expand",this._factoryCollapseAnimation=i.build(lz),this._factoryExpandAnimation=i.build(az)}set display(t){this._display=t,"none"!==t?this.isAnimated?this.toggle():this.show():this.hide()}set collapse(t){this.collapseNewValue=t,(!this._player||this._isAnimationDone)&&(this.isExpanded=t,this.toggle())}get collapse(){return this.isExpanded}ngAfterViewChecked(){this._stylesLoaded=!0,this._player&&this._isAnimationDone&&(this._player.reset(),this._renderer.setStyle(this._el.nativeElement,"height","*"))}toggle(){this.isExpanded?this.hide():this.show()}hide(){this.isCollapsing=!0,this.isExpanded=!1,this.isCollapsed=!0,this.isCollapsing=!1,this.collapses.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._COLLAPSE_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.show():(this.collapsed.emit(this),this._renderer.setStyle(this._el.nativeElement,"display","none"))})}show(){this._renderer.setStyle(this._el.nativeElement,"display",this._display),this.isCollapsing=!0,this.isExpanded=!0,this.isCollapsed=!1,this.isCollapsing=!1,this.expands.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._EXPAND_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.hide():(this.expanded.emit(this),this._renderer.removeStyle(this._el.nativeElement,"overflow"))})}animationRun(t,r){if(!t||!this._stylesLoaded)return s=>s();this._renderer.setStyle(this._el.nativeElement,"overflow","hidden"),this._renderer.addClass(this._el.nativeElement,"collapse");const i=r===this._EXPAND_ACTION_NAME?this._factoryExpandAnimation:this._factoryCollapseAnimation;return this._player&&this._player.reset(),this._player=i.create(this._el.nativeElement),this._player.play(),s=>this._player?.onDone(s)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(cN))},n.\u0275dir=l.lG2({type:n,selectors:[["","collapse",""]],hostVars:9,hostBindings:function(t,r){2&t&&(l.uIk("aria-hidden",r.isCollapsed),l.ekj("collapse",r.isCollapse)("in",r.isExpanded)("show",r.isExpanded)("collapsing",r.isCollapsing))},inputs:{display:"display",isAnimated:"isAnimated",collapse:"collapse"},outputs:{collapsed:"collapsed",collapses:"collapses",expanded:"expanded",expands:"expands"},exportAs:["bs-collapse"]}),n})(),cz=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function dz(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",18),l.NdJ("click",function(){l.CHM(t);const i=l.oxw().$implicit,s=l.oxw(),c=l.MAs(47);return l.KtG(s.confirmHide(c,i))}),l._uU(1),l.qZA()}if(2&n){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.isHidden?"Unhide":"Hide"," ")}}function hz(n,e){if(1&n&&(l.TgZ(0,"li",27)(1,"div"),l._uU(2),l.qZA(),l.TgZ(3,"div"),l._uU(4),l.qZA(),l.TgZ(5,"div"),l._uU(6),l.qZA(),l.TgZ(7,"div"),l._uU(8),l.qZA(),l.YNc(9,dz,2,1,"button",28),l.qZA()),2&n){const t=e.$implicit,r=l.oxw();l.xp6(2),l.hij(" Username: ",t.username," "),l.xp6(2),l.hij(" Review: ",t.review," "),l.xp6(2),l.hij(" Rating: ",t.rating," "),l.xp6(2),l.hij(" Date: ",r.formatDate(t.createdAtDate)," "),l.xp6(1),l.Q6J("ngIf",r.getRole())}}function fz(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"tr")(1,"th",29),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td")(8,"button",30),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.playSongOnyoutube(s.trackTitle))}),l.TgZ(9,"i",31),l._uU(10,"\uf16a"),l.qZA()()(),l.TgZ(11,"td")(12,"button",18),l.NdJ("click",function(){const s=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.viewTrackDetails(s.trackId))}),l._uU(13,"View Track Details"),l.qZA()()()}if(2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.trackTitle),l.xp6(2),l.Oqu(t.albumTitle),l.xp6(2),l.Oqu(t.artistName)}}function pz(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",32)(1,"h4",33),l._uU(2,"Are you sure?"),l.qZA(),l.TgZ(3,"button",34),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l.TgZ(4,"span",35),l._uU(5,"\xd7"),l.qZA()()(),l.TgZ(6,"div",36)(7,"button",37),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l._uU(8," Cancel "),l.qZA(),l.TgZ(9,"button",18),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.hideComment())}),l._uU(10),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(10),l.hij(" ",t.selectedComment.isHidden?"Unhide":"Hide"," ")}}function gz(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",32)(1,"h4",33),l._uU(2,"Add Review"),l.qZA(),l.TgZ(3,"button",34),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeModal())}),l.TgZ(4,"span",35),l._uU(5,"\xd7"),l.qZA()()(),l.TgZ(6,"div",38)(7,"div",39)(8,"label",40),l._uU(9),l.qZA(),l.TgZ(10,"input",41),l.NdJ("change",function(i){l.CHM(t);const s=l.oxw();return l.KtG(s.handleRatingChange(i))}),l.qZA()(),l.TgZ(11,"div",42),l._UZ(12,"textarea",43,44),l.qZA()(),l.TgZ(14,"div",36)(15,"button",18),l.NdJ("click",function(){l.CHM(t);const i=l.MAs(13),s=l.oxw();return l.KtG(s.inputValidation(s.rating,i.value))}),l._uU(16," Add Review "),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(9),l.hij("Rating: ",t.rating,""),l.xp6(1),l.Q6J("value",t.rating)}}let mz=(()=>{class n{constructor(t,r,i,s,c,h){this.route=t,this.expressService=r,this.db=i,this.modalService=s,this.authService=c,this.router=h,this.isReviewsCollapsed=!0,this.isTracksCollapsed=!1,this.rating=3,this.routeSub=xc.w0.EMPTY,this.id=-1,this.modalService.onHidden.subscribe(()=>{this.error=!1,this.errorMessage=""})}ngOnInit(){this.routeSub=this.route.params.subscribe(t=>{this.id=t.id}),this.getPlaylist(this.id),this.getPlaylistTracks(this.id),this.getReviews(this.id)}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe()}getRole(){return this.authService.role.admin}openModal(t){this.modalRef=this.modalService.show(t),this.rating=3}closeModal(){this.modalRef?.hide()}handleRatingChange(t){console.log(t.target.valueAsNumber),this.rating=t.target.valueAsNumber}confirmHide(t,r){this.openModal(t),this.selectedComment=r}hideComment(){this.expressService.hideReview(!this.selectedComment.isHidden,this.selectedComment.reviewId).subscribe(t=>{console.log(t),this.getReviews(this.id),this.closeModal()},t=>{console.log(t)})}formatDate(t){return Nt(t,"dd/MM/yyyy hh:mm a","en-US")}inputValidation(t,r){""!==r&&this.expressService.addPlaylistReview(this.playlist?.playlistId,this.authService.user.uid,null===this.authService.user.providerData[0].displayName?"Anonymous":this.authService.user.providerData[0].displayName,r,t).subscribe(i=>{console.log(i),this.getReviews(this.id),this.closeModal()},i=>{console.log(i)})}getReviews(t){console.log(this.authService.role.admin),!0===this.authService.role.admin?this.expressService.getPlaylistAllComments(t).subscribe(r=>{this.comments=r,console.log(r)},r=>{console.log(r)}):this.expressService.getPlaylistComments(t).subscribe(r=>{this.comments=r,console.log(r)},r=>{console.log(r)})}viewReviews(){this.isTracksCollapsed=!0,this.isReviewsCollapsed=!1}viewTracks(){this.isReviewsCollapsed=!0,this.isTracksCollapsed=!1}getPlaylist(t){this.expressService.getPlaylistById(t).subscribe(r=>{console.log(r),r||(this.router.navigate(["/playlists"]),window.alert("Playlist does not exist")),this.db.object("users/"+r.uid).query.ref.on("value",s=>{this.username=s.val().username},s=>{console.log("The read failed: "+s.name)}),this.playlist=r},r=>{console.log(r)})}getPlaylistTracks(t){this.expressService.getPlaylistTracksById(t).subscribe(r=>{console.log(r),this.tracks=r},r=>{console.log(r)})}playSongOnyoutube(t){window.open("https://www.youtube.com/results?search_query="+t)}viewTrackDetails(t){this.router.navigate(["/tracks/"+t])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Vl),l.Y36(Kg),l.Y36(Vy),l.Y36(Hy),l.Y36(_s),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-public-playlist-details"]],decls:50,vars:11,consts:[["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"],[1,"container"],[1,"back-button"],["routerLink","../",1,"material-symbols-outlined"],[1,"header"],[1,"card",2,"width","18rem"],[1,"card-body"],["src","../../../assets/musicicon.jpeg","alt","...",1,"card-img-top"],[2,"width","100%"],[1,"details"],[1,"playlist-name"],[1,"details",2,"margin-top","16px"],[1,"user-name"],[2,"display","flex","justify-content","end","padding","20px 0"],["type","button","aria-controls","collapseTracks",3,"ngClass","click"],["type","button","aria-controls","collapseReviews",3,"ngClass","click"],["id","collapseReviews",2,"width","100%","margin-top","16px","margin-bottom","16px",3,"collapse"],[2,"display","flex","justify-content","end","margin-bottom","16px"],[1,"btn","btn-primary",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["id","collapseTracks",2,"width","100%","margin-top","16px","margin-bottom","16px",3,"collapse"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["commentConfirm",""],["template",""],[1,"list-group-item"],["class","btn btn-primary",3,"click",4,"ngIf"],["scope","row"],[1,"play",3,"click"],[1,"fa"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-footer"],[1,"btn","btn-outline-primary",3,"click"],[1,"modal-body"],[1,"input-group","has-validation","mb-4"],["for","customRange2",1,"form-label"],["type","range","min","1","max","5","id","customRange2",1,"form-range",3,"value","change"],[1,"input-group"],["placeholder","Comment","aria-label","With textarea",1,"form-control"],["comment",""]],template:function(t,r){if(1&t){const i=l.EpF();l._UZ(0,"link",0),l.TgZ(1,"div",1)(2,"div",2)(3,"span",3),l._uU(4," arrow_back_ios "),l.qZA()(),l.TgZ(5,"div",4)(6,"div",5)(7,"div",6),l._UZ(8,"img",7),l.qZA()(),l.TgZ(9,"div",8)(10,"div",9)(11,"h3",10),l._uU(12),l.qZA(),l.TgZ(13,"div"),l._uU(14),l.qZA()(),l.TgZ(15,"div",11)(16,"div",12),l._uU(17),l.qZA()()()(),l.TgZ(18,"div",13)(19,"button",14),l.NdJ("click",function(){return r.viewTracks()}),l._uU(20,"View Tracks "),l.qZA(),l.TgZ(21,"button",15),l.NdJ("click",function(){return r.viewReviews()}),l._uU(22,"View Reviews "),l.qZA(),l._UZ(23,"hr"),l.qZA(),l.TgZ(24,"div",16)(25,"div",17)(26,"button",18),l.NdJ("click",function(){l.CHM(i);const c=l.MAs(49);return l.KtG(r.openModal(c))}),l._uU(27," Add Review "),l.qZA()(),l.TgZ(28,"ul",19),l.YNc(29,hz,10,5,"li",20),l.qZA()(),l.TgZ(30,"div",21)(31,"table",22)(32,"thead")(33,"tr")(34,"th",23),l._uU(35,"Track Name"),l.qZA(),l.TgZ(36,"th",23),l._uU(37,"Album Name"),l.qZA(),l.TgZ(38,"th",23),l._uU(39,"Artist Name"),l.qZA(),l.TgZ(40,"th",23),l._uU(41,"Play On Youtube"),l.qZA(),l.TgZ(42,"th",23),l._uU(43,"Track Details"),l.qZA()()(),l.TgZ(44,"tbody"),l.YNc(45,fz,14,3,"tr",24),l.qZA()()()(),l.YNc(46,pz,11,1,"ng-template",null,25,l.W1O),l.YNc(48,gz,17,2,"ng-template",null,26,l.W1O)}2&t&&(l.xp6(12),l.hij(" ",null==r.playlist?null:r.playlist.playlistName," "),l.xp6(2),l.hij(" ",null==r.playlist?null:r.playlist.description," "),l.xp6(3),l.hij(" ",r.username," "),l.xp6(2),l.Q6J("ngClass",r.isTracksCollapsed?"btn btn-outline-primary":"btn btn-primary"),l.uIk("aria-expanded",!r.isTracksCollapsed),l.xp6(2),l.Q6J("ngClass",r.isReviewsCollapsed?"btn btn-outline-primary":"btn btn-primary"),l.uIk("aria-expanded",!r.isReviewsCollapsed),l.xp6(3),l.Q6J("collapse",r.isReviewsCollapsed),l.xp6(5),l.Q6J("ngForOf",r.comments),l.xp6(1),l.Q6J("collapse",r.isTracksCollapsed),l.xp6(15),l.Q6J("ngForOf",r.tracks))},dependencies:[tn,zr,Nn,Mi,uz],styles:[".container[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px}.card[_ngcontent-%COMP%]{background-color:#e8e8e8;display:flex;align-items:center}.comments[_ngcontent-%COMP%]{background-color:#fff;border-radius:0}img[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:5px}.header[_ngcontent-%COMP%]{display:flex;padding-bottom:24px}.playlist-name[_ngcontent-%COMP%]{font-size:4rem}.user-name[_ngcontent-%COMP%]{font-size:2rem}.details[_ngcontent-%COMP%]{padding-left:3rem}.back-button[_ngcontent-%COMP%]{padding:10px}.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:10px}i[_ngcontent-%COMP%]{color:red;font-size:50px;background-color:#fff}.play[_ngcontent-%COMP%]{outline:0;border:hidden;background-color:#fff}.btn-primary[_ngcontent-%COMP%]{--bs-btn-color: #fff;--bs-btn-bg: #1DB954;--bs-btn-border-color: #1DB954;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #189c46;--bs-btn-hover-border-color: #189c46;--bs-btn-focus-shadow-rgb: 49,132,253;--bs-btn-active-color: #fff;--bs-btn-active-bg: #189c46;--bs-btn-active-border-color: #189c46;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);--bs-btn-disabled-color: #fff;--bs-btn-disabled-bg: #1DB954;--bs-btn-disabled-border-color: #1DB954}.btn-outline-primary[_ngcontent-%COMP%]{--bs-btn-color: #1DB954;--bs-btn-border-color: #1DB954;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #1DB954;--bs-btn-hover-border-color: #1DB954;--bs-btn-focus-shadow-rgb: 13,110,253;--bs-btn-active-color: #fff;--bs-btn-active-bg: #1DB954;--bs-btn-active-border-color: #1DB954;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);--bs-btn-disabled-color: #1DB954;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #1DB954;--bs-gradient: none}"]}),n})();function _z(n,e){if(1&n&&(l.TgZ(0,"tr")(1,"th",8),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA()()),2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.reviewId),l.xp6(2),l.Oqu(t.dateRequest),l.xp6(2),l.Oqu(t.dateNotice),l.xp6(2),l.Oqu(t.dateDispute)}}let yz=(()=>{class n{constructor(t,r,i,s){this.adminService=t,this.http=r,this.expressService=i,this.router=s,this.users=[],this.subscription=void 0,this.dateR="",this.dateD="",this.dateN="",this.obj=[]}ngOnInit(){this.adminService.GetUsers()?.pipe(Pl(1),(0,dt.U)(t=>{this.users=[],Object.keys(t).forEach(r=>{let i=t[r];i.uid=r,this.users.push(i)})})).subscribe(),this.getAllDisputes()}storeResults(){void 0===this.reviewN||""===this.dateD||""===this.dateR?console.log("error"):this.expressService.addDispute(this.reviewN,this.dateD,this.dateR).subscribe(t=>{console.log(t)},t=>{console.log("hello World"),console.log(t)}),this.refresh()}getAllDisputes(){this.expressService.getDispute().subscribe(t=>{this.obj=t,console.log(this.obj.reviewId)},t=>{console.log("hello World"),console.log(t)})}refresh(){window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(IV),l.Y36(Ms),l.Y36(Kg),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-disputes"]],decls:20,vars:4,consts:[["scope","col",2,"width","300px","max-width","200px"],["scope","col"],[4,"ngFor","ngForOf"],["type","search","placeholder","enter review Id here",3,"ngModel","ngModelChange"],["type","search","placeholder","date request received",3,"ngModel","ngModelChange"],["type","search","placeholder","date dispute received ",3,"ngModel","ngModelChange"],[3,"click"],["href","dashboard/takedown/"],["scope","row"]],template:function(t,r){1&t&&(l.TgZ(0,"table")(1,"thead")(2,"tr")(3,"th",0),l._uU(4,"Review Number"),l.qZA(),l.TgZ(5,"th",1),l._uU(6,"date request received"),l.qZA(),l.TgZ(7,"th",1),l._uU(8,"date notice sent"),l.qZA(),l.TgZ(9,"th",1),l._uU(10,"date dispute received"),l.qZA()()(),l.TgZ(11,"tbody"),l.YNc(12,_z,9,4,"tr",2),l.qZA(),l.TgZ(13,"input",3),l.NdJ("ngModelChange",function(s){return r.reviewN=s}),l.qZA(),l.TgZ(14,"input",4),l.NdJ("ngModelChange",function(s){return r.dateR=s}),l.qZA(),l.TgZ(15,"input",5),l.NdJ("ngModelChange",function(s){return r.dateD=s}),l.qZA(),l.TgZ(16,"button",6),l.NdJ("click",function(){return r.storeResults()}),l._uU(17,"Add"),l.qZA()(),l.TgZ(18,"a",7),l._uU(19,"Procedure"),l.qZA()),2&t&&(l.xp6(12),l.Q6J("ngForOf",r.obj),l.xp6(1),l.Q6J("ngModel",r.reviewN),l.xp6(1),l.Q6J("ngModel",r.dateR),l.xp6(1),l.Q6J("ngModel",r.dateD))},dependencies:[zr,xa,Jd,Ev],styles:["a[_ngcontent-%COMP%]{color:#1db954}"]}),n})();function vz(n,e){if(1&n&&(l.TgZ(0,"div",11),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.Oqu(t.genre_title)}}const wz=[{path:"",component:v6},{path:"playlists",component:sz,children:[{path:"",component:b6},{path:":id",component:mz}]},{path:"tracks",children:[{path:"",component:C6},{path:":id",component:(()=>{class n{constructor(t,r,i,s){this.expressService=t,this.route=r,this.router=i,this.location=s,this.genres=[],this.routeSub=xc.w0.EMPTY,this.id=-1}back(){this.location.back()}ngOnInit(){this.routeSub=this.route.params.subscribe(t=>{this.id=t.id}),this.expressService.getTrackById(this.id).subscribe(t=>{this.track=t[0],t[0].trackGenres.slice(1,t[0].trackGenres.length-1).split("}, ").forEach(r=>{const i={};r.replace(/\'/g,"").replace(/[{}]/g,"").split(", ").forEach(c=>{const h=c.split(": ");i[h[0]]=h[1]}),this.genres.push(i),console.log(this.genres)})},t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Kg),l.Y36(Vl),l.Y36(gn),l.Y36(Fe))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-track-details"]],decls:19,vars:6,consts:[[1,"cont"],[1,"btn","btn-success","back-button",3,"click"],[1,"details-cont"],[1,"details"],[1,"title"],[1,"album"],[1,"artist-name"],[1,"track-duration"],[1,"track-date-recorded"],[1,"genres"],["class","genre",4,"ngFor","ngForOf"],[1,"genre"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l._UZ(1,"app-navbar"),l.TgZ(2,"button",1),l.NdJ("click",function(){return r.router.navigate([r.back()])}),l._uU(3,"Back"),l.qZA(),l.TgZ(4,"div",2)(5,"div",3)(6,"p",4),l._uU(7),l.qZA(),l.TgZ(8,"p",5),l._uU(9),l.qZA(),l.TgZ(10,"p",6),l._uU(11),l.qZA(),l.TgZ(12,"p",7),l._uU(13),l.qZA(),l.TgZ(14,"p",8),l._uU(15),l.qZA(),l.TgZ(16,"div",9),l._uU(17,"Genres: "),l.YNc(18,vz,2,1,"div",10),l.qZA()()()()),2&t&&(l.xp6(7),l.Oqu(r.track.trackTitle),l.xp6(2),l.hij("Album Title: ",r.track.albumTitle,""),l.xp6(2),l.hij("Artist Name: ",r.track.artistName,""),l.xp6(2),l.hij("Track Duration: ",r.track.trackDuration,""),l.xp6(2),l.hij("Track Date Recorded: ",r.track.trackDateRecorded,""),l.xp6(3),l.Q6J("ngForOf",r.genres))},dependencies:[zr,eE],styles:[".cont[_ngcontent-%COMP%]{height:100%;background-color:#191414}.back-button[_ngcontent-%COMP%]{margin-top:3rem;margin-left:3rem}.details-cont[_ngcontent-%COMP%]{display:flex;height:600px;justify-content:center;align-items:center}.details[_ngcontent-%COMP%]{padding:30px;border-radius:8px;border:1px solid white}.genres[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#1db954}.title[_ngcontent-%COMP%]{font-size:30px}"]}),n})()}]},{path:"home",redirectTo:"",pathMatch:"full"},{path:"sign-in",component:l6},{path:"register-user",component:u6},{path:"acceptable-use-policy",component:T6},{path:"privacy-policy",component:I6},{path:"dmca-policy",component:D6},{path:"dashboard",component:g6,children:[{path:"",component:iz},{path:"playlists",children:[{path:"",component:V4},{path:":id",component:G4}]},{path:"admin",component:z4,canActivate:[QR]},{path:"disputes",component:yz,canActivate:[QR]},{path:"takedown",component:S6,canActivate:[QR]}],canActivate:[A6]},{path:"forgot-password",component:m6},{path:"verify-email-address",component:y6}];let bz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Nw.forRoot(wz),Nw]}),n})(),Ez=(()=>{class n{constructor(){this.title="frontend"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[xu]}),n})();const RV="firebasestorage.googleapis.com",NV="storageBucket";class Lr extends L.ZR{constructor(e,t,r=0){super(hN(e),`Firebase Storage: ${t} (${hN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function hN(n){return"storage/"+n}function fN(){return new Lr("unknown","An unknown error occurred, please check the error payload for server response.")}function PV(){return new Lr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function OV(){return new Lr("canceled","User canceled the upload/download.")}function FV(){return new Lr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $y(n){return new Lr("invalid-argument",n)}function LV(){return new Lr("app-deleted","The Firebase app was deleted.")}function UV(n){return new Lr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function aE(n,e){return new Lr("invalid-format","String does not match format '"+n+"': "+e)}function lE(n){throw new Lr("internal-error","Internal error: "+n)}class ys{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ys.makeFromUrl(e,t)}catch{return new ys(e,"")}if(""===r.path)return r;throw function Nz(n){return new Lr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Ye){Ye.path_=decodeURIComponent(Ye.path)}const D=t.replace(/[.]/g,"\\."),ze=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===RV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Ye=0;Ye<ze.length;Ye++){const Ct=ze[Ye],St=Ct.regex.exec(e);if(St){let ei=St[Ct.indices.path];ei||(ei=""),r=new ys(St[Ct.indices.bucket],ei),Ct.postModify(r);break}}if(null==r)throw function Rz(n){return new Lr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Uz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function TS(n){return"string"==typeof n||n instanceof String}function VV(n){return pN()&&n instanceof Blob}function pN(){return typeof Blob<"u"&&!(0,L.UG)()}function gN(n,e,t,r){if(r<e)throw $y(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw $y(`Invalid value for '${n}'. Expected ${t} or less.`)}function gd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function BV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var xf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(xf||(xf={})),xf))();function HV(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class qz{constructor(e,t,r,i,s,c,h,p,_,E,D,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=D,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,U)=>{this.resolve_=P,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function Hz(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==h){const p=fN();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(i.canceled?this.appDelete_?LV():OV():PV())};this.canceled_?t(0,new IS(!1,null,!0)):this.backoffId_=function Vz(n,e,t){let r=1,i=null,s=null,c=!1,h=0;function p(){return 2===h}let _=!1;function E(...ne){_||(_=!0,e.apply(null,ne))}function D(ne){i=setTimeout(()=>{i=null,n(P,p())},ne)}function x(){s&&clearTimeout(s)}function P(ne,...Ae){if(_)return void x();if(ne)return x(),void E.call(null,ne,...Ae);if(p()||c)return x(),void E.call(null,ne,...Ae);let ze;r<64&&(r*=2),1===h?(h=2,ze=0):ze=1e3*(r+Math.random()),D(ze)}let U=!1;function Y(ne){U||(U=!0,x(),!_&&(null!==i?(ne||(h=2),clearTimeout(i),D(0)):ne||(h=1)))}return D(0),s=setTimeout(()=>{c=!0,Y(!0)},t),Y}((r,i)=>{if(i)return void r(!1,new IS(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===xf.NO_ERROR,p=s.getStatus();if((!h||HV(p,this.additionalRetryCodes_))&&this.retry){const E=s.getErrorCode()===xf.ABORT;return void r(!1,new IS(!1,null,E))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new IS(_,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Bz(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class IS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Qz(...n){const e=function Yz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(pN())return new Blob(n);throw new Lr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mN{constructor(e,t){this.data=e,this.contentType=t||null}}function _N(n,e){switch(n){case jo.RAW:return new mN(jV(e));case jo.BASE64:case jo.BASE64URL:return new mN($V(n,e));case jo.DATA_URL:return new mN(function t5(n){const e=new qV(n);return e.base64?$V(jo.BASE64,e.rest):function e5(n){let e;try{e=decodeURIComponent(n)}catch{throw aE(jo.DATA_URL,"Malformed data URL.")}return jV(e)}(e.rest)}(e),function n5(n){return new qV(n).contentType}(e))}throw fN()}function jV(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function $V(n,e){switch(n){case jo.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw aE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jo.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw aE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Xz(n){if(typeof atob>"u")throw function Lz(n){return new Lr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:aE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class qV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw aE(jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function r5(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class zu{constructor(e,t){let r=0,i="";VV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(VV(this.data_)){const i=function Jz(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new zu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new zu(r,!0)}}static getBlob(...e){if(pN()){const t=e.map(r=>r instanceof zu?r.data_:r);return new zu(Qz.apply(null,t))}{const t=e.map(c=>TS(c)?_N(jo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[s++]=c[h]}),new zu(i,!0)}}uploadData(){return this.data_}}function yN(n){let e;try{e=JSON.parse(n)}catch{return null}return function $z(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function ZV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function o5(n,e){return e}class js{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||o5}}let DS=null;function uE(){if(DS)return DS;const n=[];n.push(new js("bucket")),n.push(new js("generation")),n.push(new js("metageneration")),n.push(new js("name","fullPath",!0));const t=new js("name");t.xform=function e(s,c){return function a5(n){return!TS(n)||n.length<2?n:ZV(n)}(c)},n.push(t);const i=new js("size");return i.xform=function r(s,c){return void 0!==c?Number(c):c},n.push(i),n.push(new js("timeCreated")),n.push(new js("updated")),n.push(new js("md5Hash",null,!0)),n.push(new js("cacheControl",null,!0)),n.push(new js("contentDisposition",null,!0)),n.push(new js("contentEncoding",null,!0)),n.push(new js("contentLanguage",null,!0)),n.push(new js("contentType",null,!0)),n.push(new js("metadata","customMetadata",!0)),DS=n,DS}function GV(n,e,t){const r=yN(e);return null===r?null:function u5(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const c=t[s];r[c.local]=c.xform(r,e[c.server])}return function l5(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ys(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function vN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const WV="prefixes";class Ku{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yu(n){if(!n)throw fN()}function SS(n,e){return function t(r,i){const s=GV(n,i,e);return Yu(null!==s),s}}function qy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Mz(){return new Lr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function xz(){return new Lr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Az(n){return new Lr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function kz(n){return new Lr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function cE(n){const e=qy(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function Sz(n){return new Lr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function KV(n,e,t){const i=gd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Ku(i,"GET",SS(n,t),c);return h.errorHandler=cE(e),h}function g5(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=gd(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,E=new Ku(h,"GET",function f5(n,e){return function t(r,i){const s=function h5(n,e,t){const r=yN(t);return null===r?null:function d5(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[WV])for(const i of t[WV]){const s=i.replace(/\/$/,""),c=n._makeStorageReference(new ys(e,s));r.prefixes.push(c)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new ys(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Yu(null!==s),s}}(n,e.bucket),_);return E.urlParams=s,E.errorHandler=qy(e),E}function QV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function v5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class AS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function wN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Yu(!1)}return Yu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const C5={STATE_CHANGED:"state_changed"},$s={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bN(n){switch(n){case"running":case"pausing":case"canceling":return $s.RUNNING;case"paused":return $s.PAUSED;case"success":return $s.SUCCESS;case"canceled":return $s.CANCELED;default:return $s.ERROR}}class T5{constructor(e,t,r){if(function jz(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Zy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class D5 extends class I5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw lE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function au(){return new D5}class tB{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=uE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(HV(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=PV()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function w5(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c=QV(e,r,i),h={name:c.fullPath},p=gd(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=vN(c,t),U=new Ku(p,"POST",function P(Y){let ne;wN(Y);try{ne=Y.getResponseHeader("X-Goog-Upload-URL")}catch{Yu(!1)}return Yu(TS(ne)),ne},n.maxUploadRetryTime);return U.urlParams=h,U.headers=E,U.body=D,U.errorHandler=qy(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,au,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function b5(n,e,t,r){const p=new Ku(t,"POST",function s(_){const E=wN(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yu(!1)}D||Yu(!1);const x=Number(D);return Yu(!isNaN(x)),new AS(x,r.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=qy(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,au,t,r);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new AS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let c;try{c=function E5(n,e,t,r,i,s,c,h){const p=new AS(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function Oz(){return new Lr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let E=_;i>0&&(E=Math.min(E,i));const D=p.current;let P="";P=0===E?"finalize":_===E?"upload, finalize":"upload";const U={"X-Goog-Upload-Command":P,"X-Goog-Upload-Offset":`${p.current}`},Y=r.slice(D,D+E);if(null===Y)throw FV();const ze=new Ku(t,"POST",function ne(Ye,Ct){const St=wN(Ye,["active","final"]),ln=p.current+E,ei=r.size();let Zo;return Zo="final"===St?SS(e,s)(Ye,Ct):null,new AS(ln,ei,"final"===St,Zo)},e.maxUploadRetryTime);return ze.headers=U,ze.body=Y.uploadData(),ze.progressCallback=h||null,ze.errorHandler=qy(n),ze}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,au,i,s,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=KV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,au,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function JV(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let ze="";for(let Ye=0;Ye<2;Ye++)ze+=Math.random().toString().slice(2);return ze}();c["Content-Type"]="multipart/related; boundary="+p;const _=QV(e,r,i),E=vN(_,t),P=zu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===P)throw FV();const U={name:_.fullPath},Y=gd(s,n.host,n._protocol),Ae=n.maxUploadRetryTime,Ze=new Ku(Y,"POST",SS(n,t),Ae);return Ze.urlParams=U,Ze.headers=c,Ze.body=P.uploadData(),Ze.errorHandler=qy(e),Ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,au,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=OV(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=bN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new T5(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(bN(this._state)){case $s.SUCCESS:Zy(this._resolve.bind(null,this.snapshot))();break;case $s.CANCELED:case $s.ERROR:Zy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bN(this._state)){case $s.RUNNING:case $s.PAUSED:e.next&&Zy(e.next.bind(e,this.snapshot))();break;case $s.SUCCESS:e.complete&&Zy(e.complete.bind(e))();break;default:e.error&&Zy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Qg{constructor(e,t){this._service=e,this._location=t instanceof ys?t:ys.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qg(e,t)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZV(this._location.path)}get storage(){return this._service}get parent(){const e=function i5(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ys(this._location.bucket,e);return new Qg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw UV(e)}}function rB(n,e,t){return EN.apply(this,arguments)}function EN(){return EN=(0,Ee.Z)(function*(n,e,t){const i=yield iB(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield rB(n,e,i.nextPageToken))}),EN.apply(this,arguments)}function iB(n,e){null!=e&&"number"==typeof e.maxResults&&gN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=g5(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,au)}function U5(n){n._throwIfRoot("getDownloadURL");const e=function m5(n,e,t){const i=gd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Ku(i,"GET",function p5(n,e){return function t(r,i){const s=GV(n,i,e);return Yu(null!==s),function c5(n,e,t,r){const i=yN(e);if(null===i||!TS(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(_=>{const D=n.fullPath;return gd("/b/"+c(n.bucket)+"/o/"+c(D),t,r)+BV({alt:"media",token:_})})[0]}(s,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=cE(e),h}(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(e,au).then(t=>{if(null===t)throw function Fz(){return new Lr("no-download-url","The given file does not have any download URLs.")}();return t})}function sB(n,e){const t=function s5(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ys(n._location.bucket,t);return new Qg(n.storage,r)}function oB(n,e){if(n instanceof CN){const t=n;if(null==t._bucket)throw function Pz(){return new Lr("no-default-bucket","No default bucket found. Did you set the '"+NV+"' property when initializing the app?")}();const r=new Qg(t,t._bucket);return null!=e?oB(r,e):r}return void 0!==e?sB(n,e):n}function j5(n,e){if(e&&function B5(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof CN)return function H5(n,e){return new Qg(n,e)}(n,e);throw $y("To use ref(service, url), the first argument must be a Storage instance.")}return oB(n,e)}function aB(n,e){const t=e?.[NV];return null==t?null:ys.makeFromBucketSpec(t,n)}class CN{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=RV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ys.makeFromBucketSpec(i,this._host):aB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ys.makeFromBucketSpec(this._url,e):aB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qg(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Uz(LV());{const c=function Kz(n,e,t,r,i,s,c=!0){const h=BV(n.urlParams),p=n.url+h,_=Object.assign({},n.headers);return function Wz(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function Zz(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function Gz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,s),function zz(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new qz(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const lB="@firebase/storage";function dB(n,e){return j5(n=(0,L.m9)(n),e)}function J5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new CN(t,r,i,e,ki.SDK_VERSION)}!function X5(){(0,ki._registerComponent)(new oo.wA("storage",J5,"PUBLIC").setMultipleInstances(!0)),(0,ki.registerVersion)(lB,"0.9.14",""),(0,ki.registerVersion)(lB,"0.9.14","esm2017")}();class xS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class fB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new xS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new xS(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?c=>t(new xS(c,this,this._ref)):{next:t.next?c=>t.next(new xS(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class pB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new md(e,this._service))}get items(){return this._delegate.items.map(e=>new md(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class md{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Q5(n,e){return sB(n,e)}(this._delegate,e);return new md(t,this.storage)}get root(){return new md(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new md(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new fB(function q5(n,e,t){return function N5(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new tB(n,new zu(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=jo.RAW,r){this._throwIfRoot("putString");const i=_N(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new fB(new tB(this._delegate,new zu(i.data,!0),s),this)}listAll(){return function z5(n){return function O5(n){const e={prefixes:[],items:[]};return rB(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new pB(e,this.storage))}list(e){return function W5(n,e){return iB(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new pB(t,this.storage))}getMetadata(){return function Z5(n){return function F5(n){n._throwIfRoot("getMetadata");const e=KV(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(e,au)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function G5(n,e){return function L5(n,e){n._throwIfRoot("updateMetadata");const t=function _5(n,e,t,r){const s=gd(e.fullServerUrl(),n.host,n._protocol),h=vN(t,r),_=n.maxOperationRetryTime,E=new Ku(s,"PATCH",SS(n,r),_);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=h,E.errorHandler=cE(e),E}(n.storage,n._location,e,uE());return n.storage.makeRequestWithTokens(t,au)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function K5(n){return U5(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Y5(n){return function V5(n){n._throwIfRoot("deleteObject");const e=function y5(n,e){const r=gd(e.fullServerUrl(),n.host,n._protocol),h=new Ku(r,"DELETE",function c(p,_){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=cE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,au)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw UV(e)}}class gB{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(mB(e))throw $y("ref() expected a child path but got a URL, use refFromURL instead.");return new md(dB(this._delegate,e),this)}refFromURL(e){if(!mB(e))throw $y("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ys.makeFromUrl(e,this._delegate.host)}catch{throw $y("refFromUrl() expected a valid full URL but got an invalid one.")}return new md(dB(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function hB(n,e,t,r={}){!function $5(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function mB(n){return/^[A-Za-z]+:\/\//.test(n)}function r8(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new gB(t,r)}function _B(n){const e=function s8(n){return new si.y(e=>{const t=c=>e.next(c);t(n.snapshot);const s=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){s()}}).pipe(function Cz(n,e=u_.z){return(0,Un.e)((t,r)=>{let i=null,s=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const _=s;s=null,r.next(_)}};function p(){const _=c+n,E=e.now();if(E<_)return i=this.schedule(void 0,_-E),void r.add(i);h()}t.subscribe((0,An.x)(r,_=>{s=_,c=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,dt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function MS(n){return{getDownloadURL:()=>ut(void 0).pipe(yn.fc,Rr(()=>n.getDownloadURL()),yn.iC),getMetadata:()=>ut(void 0).pipe(yn.fc,Rr(()=>n.getMetadata()),yn.iC),delete:()=>(0,dn.D)(n.delete()),child:e=>MS(n.child(e)),updateMetadata:e=>(0,dn.D)(n.updateMetadata(e)),put:(e,t)=>_B(n.put(e,t)),putString:(e,t,r)=>_B(n.putString(e,t,r)),list:e=>(0,dn.D)(n.list(e)),listAll:()=>(0,dn.D)(n.listAll())}}!function i8(n){const e={TaskState:$s,TaskEvent:C5,StringFormat:jo,Storage:gB,Reference:md};n.INTERNAL.registerComponent(new oo.wA("storage-compat",r8,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(uT.Z);const o8=new l.OlP("angularfire2.storageBucket"),a8=new l.OlP("angularfire2.storage.maxUploadRetryTime"),l8=new l.OlP("angularfire2.storage.maxOperationRetryTime"),u8=new l.OlP("angularfire2.storage.use-emulator");let c8=(()=>{class n{constructor(t,r,i,s,c,h,p,_,E,D){const x=(0,jr.on)(t,c,r);this.storage=(0,jr.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const P=c.runOutsideAngular(()=>x.storage(i||void 0)),U=E;return U&&P.useEmulator(...U),p&&P.setMaxUploadRetryTime(p),_&&P.setMaxOperationRetryTime(_),P},[p,_])}ref(t){return MS(this.storage.ref(t))}refFromURL(t){return MS(this.storage.refFromURL(t))}upload(t,r,i){return MS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(jr.Dh),l.LFG(jr.xv,8),l.LFG(o8,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(yn.HU),l.LFG(a8,8),l.LFG(l8,8),l.LFG(u8,8),l.LFG(T0,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),h8=(()=>{class n{constructor(){kD.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[c8],imports:[d8]}),n})();const yB_firebase={apiKey:"AIzaSyCTLGFrqn1NOrtUQMN7WITJBSve7vrj7VQ",authDomain:"rwill33-lab4.firebaseapp.com",projectId:"rwill33-lab4",storageBucket:"rwill33-lab4.appspot.com",messagingSenderId:"724042200276",appId:"1:724042200276:web:f0315b5a4fb13260cc3741",measurementId:"G-J6E5PBL3P9"};function vB(n){return new l.vHH(3e3,!1)}function W8(){return typeof window<"u"&&typeof window.document<"u"}function TN(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Mf(n){switch(n.length){case 0:return new oE;case 1:return n[0];default:return new MV(n)}}function wB(n,e,t,r,i=new Map,s=new Map){const c=[],h=[];let p=-1,_=null;if(r.forEach(E=>{const D=E.get("offset"),x=D==p,P=x&&_||new Map;E.forEach((U,Y)=>{let ne=Y,Ae=U;if("offset"!==Y)switch(ne=e.normalizePropertyName(ne,c),Ae){case"!":Ae=i.get(Y);break;case pd:Ae=s.get(Y);break;default:Ae=e.normalizeStyleValue(Y,ne,Ae,c)}P.set(ne,Ae)}),x||h.push(P),_=P,p=D}),c.length)throw function O8(n){return new l.vHH(3502,!1)}();return h}function IN(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&DN(t,"start",n)));break;case"done":n.onDone(()=>r(t&&DN(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&DN(t,"destroy",n)))}}function DN(n,e,t){const s=SN(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(s._data=c),s}function SN(n,e,t,r,i="",s=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!c}}function $o(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function bB(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let AN=(n,e)=>!1,EB=(n,e,t)=>[],CB=null;function xN(n){const e=n.parentNode||n.host;return e===CB?null:e}(TN()||typeof Element<"u")&&(W8()?(CB=(()=>document.documentElement)(),AN=(n,e)=>{for(;e;){if(e===n)return!0;e=xN(e)}return!1}):AN=(n,e)=>n.contains(e),EB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Jg=null,TB=!1;const IB=AN,DB=EB;let SB=(()=>{class n{validateStyleProperty(t){return function K8(n){Jg||(Jg=function Y8(){return typeof document<"u"?document.body:null}()||{},TB=!!Jg.style&&"WebkitAppearance"in Jg.style);let e=!0;return Jg.style&&!function z8(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Jg.style,!e&&TB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Jg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return IB(t,r)}getParentElement(t){return xN(t)}query(t,r,i){return DB(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,c,h=[],p){return new oE(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),MN=(()=>{class n{}return n.NOOP=new SB,n})();const kN="ng-enter",kS="ng-leave",RS="ng-trigger",NS=".ng-trigger",xB="ng-animating",RN=".ng-animating";function _d(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:NN(parseFloat(e[1]),e[2])}function NN(n,e){return"s"===e?1e3*n:n}function PS(n,e,t){return n.hasOwnProperty("duration")?n:function X8(n,e,t){let i,s=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(vB()),{duration:0,delay:0,easing:""};i=NN(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=NN(parseFloat(p),h[4]));const _=h[5];_&&(c=_)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push(function f8(){return new l.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function p8(){return new l.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,vB())}return{duration:i,delay:s,easing:c}}(n,e,t)}function dE(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function MB(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function kf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function RB(n,e,t){return t?e+":"+t+";":""}function NB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=RB(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=RB(0,rK(t),n.style[t]));n.setAttribute("style",e)}function Qu(n,e,t){n.style&&(e.forEach((r,i)=>{const s=ON(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),TN()&&NB(n))}function Xg(n,e){n.style&&(e.forEach((t,r)=>{const i=ON(r);n.style[i]=""}),TN()&&NB(n))}function hE(n){return Array.isArray(n)?1==n.length?n[0]:AV(n):n}const PN=new RegExp("{{\\s*(.+?)\\s*}}","g");function PB(n){let e=[];if("string"==typeof n){let t;for(;t=PN.exec(n);)e.push(t[1]);PN.lastIndex=0}return e}function fE(n,e,t){const r=n.toString(),i=r.replace(PN,(s,c)=>{let h=e[c];return null==h&&(t.push(function m8(n){return new l.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function OS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const nK=/-+([a-z0-9])/g;function ON(n){return n.replace(nK,(...e)=>e[1].toUpperCase())}function rK(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function qo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function _8(n){return new l.vHH(3004,!1)}()}}function OB(n,e){return window.getComputedStyle(n)[e]}function uK(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function cK(n,e,t){if(":"==n[0]){const p=function dK(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function k8(n){return new l.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function M8(n){return new l.vHH(3015,!1)}()),e;const i=r[1],s=r[2],c=r[3];e.push(FB(i,c));"<"==s[0]&&!("*"==i&&"*"==c)&&e.push(FB(c,i))}(r,t,e)):t.push(n),t}const VS=new Set(["true","1"]),BS=new Set(["false","0"]);function FB(n,e){const t=VS.has(n)||BS.has(n),r=VS.has(e)||BS.has(e);return(i,s)=>{let c="*"==n||n==i,h="*"==e||e==s;return!c&&t&&"boolean"==typeof i&&(c=i?VS.has(n):BS.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?VS.has(e):BS.has(e)),c&&h}}const hK=new RegExp("s*:selfs*,?","g");function FN(n,e,t,r){return new fK(n).build(e,t,r)}class fK{constructor(e){this._driver=e}build(e,t,r){const i=new mK(t);return this._resetContextStyleTimingState(i),qo(this,hE(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function v8(){return new l.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,_=p.name;_.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,t))}),p.name=_}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,c.push(p)}else t.errors.push(function w8(){return new l.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,c=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{PB(p).forEach(_=>{c.hasOwnProperty(_)||s.add(_)})})}),s.size&&(OS(s.values()),t.errors.push(function b8(n,e){return new l.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=qo(this,hE(e.animation),t);return{type:1,matchers:uK(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:em(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>qo(this,r,t)),options:em(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(c=>{t.currentTime=r;const h=qo(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:em(e.options)}}visitAnimate(e,t){const r=function yK(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return LN(PS(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=LN(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=PS(t,e);return LN(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:jy({});if(5==s.type)i=this.visitKeyframes(s,t);else{let c=e.styles,h=!1;if(!c){h=!0;const _={};r.easing&&(_.easing=r.easing),c=jy(_)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(c,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===pd?r.push(h):t.errors.push(new l.vHH(3002,!1)):r.push(MB(h));let s=!1,c=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,p)=>{const _=t.collectedStyles.get(t.currentQuerySelector),E=_.get(p);let D=!0;E&&(s!=i&&s>=E.startTime&&i<=E.endTime&&(t.errors.push(function C8(n,e,t,r,i){return new l.vHH(3010,!1)}()),D=!1),s=E.startTime),D&&_.set(p,{startTime:s,endTime:i}),t.options&&function tK(n,e,t){const r=e.params||{},i=PB(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function g8(n){return new l.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function T8(){return new l.vHH(3011,!1)}()),r;let s=0;const c=[];let h=!1,p=!1,_=0;const E=e.steps.map(Ae=>{const Ze=this._makeStyleAst(Ae,t);let ze=null!=Ze.offset?Ze.offset:function _K(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ze.styles),Ye=0;return null!=ze&&(s++,Ye=Ze.offset=ze),p=p||Ye<0||Ye>1,h=h||Ye<_,_=Ye,c.push(Ye),Ze});p&&t.errors.push(function I8(){return new l.vHH(3012,!1)}()),h&&t.errors.push(function D8(){return new l.vHH(3200,!1)}());const D=e.steps.length;let x=0;s>0&&s<D?t.errors.push(function S8(){return new l.vHH(3202,!1)}()):0==s&&(x=1/(D-1));const P=D-1,U=t.currentTime,Y=t.currentAnimateTimings,ne=Y.duration;return E.forEach((Ae,Ze)=>{const ze=x>0?Ze==P?1:x*Ze:c[Ze],Ye=ze*ne;t.currentTime=U+Y.delay+Ye,Y.duration=Ye,this._validateStyleAst(Ae,t),Ae.offset=ze,r.styles.push(Ae)}),r}visitReference(e,t){return{type:8,animation:qo(this,hE(e.animation),t),options:em(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:em(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:em(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,c]=function pK(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(hK,"")),n=n.replace(/@\*/g,NS).replace(/@\w+/g,t=>NS+"-"+t.slice(1)).replace(/:animating/g,RN),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,$o(t.collectedStyles,t.currentQuerySelector,new Map);const h=qo(this,hE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:em(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function A8(){return new l.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:PS(e.timings,t.errors,!0);return{type:12,animation:qo(this,hE(e.animation),t),timings:r,options:null}}}class mK{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function em(n){return n?(n=dE(n)).params&&(n.params=function gK(n){return n?dE(n):null}(n.params)):n={},n}function LN(n,e,t){return{duration:n,delay:e,easing:t}}function UN(n,e,t,r,i,s,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:c,subTimeline:h}}class HS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const bK=new RegExp(":enter","g"),CK=new RegExp(":leave","g");function VN(n,e,t,r,i,s=new Map,c=new Map,h,p,_=[]){return(new TK).buildKeyframes(n,e,t,r,i,s,c,h,p,_)}class TK{buildKeyframes(e,t,r,i,s,c,h,p,_,E=[]){_=_||new HS;const D=new BN(e,t,_,i,s,E,[]);D.options=p;const x=p.delay?_d(p.delay):0;D.currentTimeline.delayNextStep(x),D.currentTimeline.setStyles([c],null,D.errors,p),qo(this,r,D);const P=D.timelines.filter(U=>U.containsAnimation());if(P.length&&h.size){let U;for(let Y=P.length-1;Y>=0;Y--){const ne=P[Y];if(ne.element===t){U=ne;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([h],null,D.errors,p)}return P.length?P.map(U=>U.buildKeyframes()):[UN(t,[],[],[],0,x,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);s!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const c="number"==typeof s?s:_d(fE(s,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const c=null!=r.duration?_d(r.duration):null,h=null!=r.delay?_d(r.delay):null;return 0!==c&&e.forEach(p=>{const _=t.appendInstructionToTimeline(p,c,h);s=Math.max(s,_.duration+_.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),qo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=jS);const c=_d(s.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>qo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?_d(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),qo(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return PS(t.params?fE(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?_d(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=jS);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((_,E)=>{t.currentQueryIndex=E;const D=t.createSubContext(e.options,_);s&&D.delayNextStep(s),_===t.element&&(p=D.currentTimeline),qo(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,c=Math.abs(s.duration),h=c*(t.currentQueryTotal-1);let p=c*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const E=t.currentTimeline;p&&E.delayNextStep(p);const D=E.currentTime;qo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const jS={};class BN{constructor(e,t,r,i,s,c,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=jS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new $S(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=_d(r.duration)),null!=r.delay&&(i.delay=_d(r.delay));const s=r.params;if(s){let c=i.params;c||(c=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=fE(s[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new BN(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=jS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new IK(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(bK,"."+this._enterClassName)).replace(CK,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),h.push(..._)}return!s&&0==h.length&&c.push(function x8(n){return new l.vHH(3014,!1)}()),h}}class $S{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new $S(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||pd),this._currentKeyframe.set(t,pd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},c=function DK(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,pd)}else kf(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of c){const _=fE(p,s,r);this._pendingStyles.set(h,_),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??pd),this._updateStyle(h,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const _=kf(h,new Map,this._backFill);_.forEach((E,D)=>{"!"===E?e.add(D):E===pd&&t.add(D)}),r||_.set("offset",p/this.duration),i.push(_)});const s=e.size?OS(e.values()):[],c=t.size?OS(t.values()):[];if(r){const h=i[0],p=new Map(h);h.set("offset",0),p.set("offset",1),i=[h,p]}return UN(this.element,i,s,c,this.duration,this.startTime,this.easing,!1)}}class IK extends $S{constructor(e,t,r,i,s,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],c=r+t,h=t/c,p=kf(e[0]);p.set("offset",0),s.push(p);const _=kf(e[0]);_.set("offset",VB(h)),s.push(_);const E=e.length-1;for(let D=1;D<=E;D++){let x=kf(e[D]);const P=x.get("offset");x.set("offset",VB((t+P*r)/c)),s.push(x)}r=c,t=0,i="",e=s}return UN(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function VB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class HN{}const SK=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class AK extends HN{normalizePropertyName(e,t){return ON(e)}normalizeStyleValue(e,t,r,i){let s="";const c=r.toString().trim();if(SK.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function y8(n,e){return new l.vHH(3005,!1)}())}return c+s}}function BB(n,e,t,r,i,s,c,h,p,_,E,D,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:c,timelines:h,queriedElements:p,preStyleProps:_,postStyleProps:E,totalTime:D,errors:x}}const jN={};class HB{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function xK(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,c,h,p,_,E){const D=[],x=this.ast.options&&this.ast.options.params||jN,U=this.buildStyles(r,h&&h.params||jN,D),Y=p&&p.params||jN,ne=this.buildStyles(i,Y,D),Ae=new Set,Ze=new Map,ze=new Map,Ye="void"===i,Ct={params:MK(Y,x),delay:this.ast.options?.delay},St=E?[]:VN(e,t,this.ast.animation,s,c,U,ne,Ct,_,D);let ln=0;if(St.forEach(Zo=>{ln=Math.max(Zo.duration+Zo.delay,ln)}),D.length)return BB(t,this._triggerName,r,i,Ye,U,ne,[],[],Ze,ze,ln,D);St.forEach(Zo=>{const yd=Zo.element,nH=$o(Ze,yd,new Set);Zo.preStyleProps.forEach(tm=>nH.add(tm));const gE=$o(ze,yd,new Set);Zo.postStyleProps.forEach(tm=>gE.add(tm)),yd!==t&&Ae.add(yd)});const ei=OS(Ae.values());return BB(t,this._triggerName,r,i,Ye,U,ne,St,ei,Ze,ze,ln)}}function MK(n,e){const t=dE(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class kK{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=dE(this.defaultParams);return Object.keys(e).forEach(s=>{const c=e[s];null!==c&&(i[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,h)=>{c&&(c=fE(c,i,t));const p=this.normalizer.normalizePropertyName(h,t);c=this.normalizer.normalizeStyleValue(h,p,c,t),r.set(p,c)})}),r}}class NK{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new kK(i.style,i.options&&i.options.params||{},r))}),jB(this.states,"true","1"),jB(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new HB(e,i,this.states))}),this.fallbackTransition=function PK(n,e,t){return new HB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function jB(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const OK=new HS;class FK{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=FN(this._driver,t,r,[]);if(r.length)throw function F8(n){return new l.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=wB(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let c;const h=new Map;if(s?(c=VN(this._driver,t,s,kN,kS,new Map,new Map,r,OK,i),c.forEach(E=>{const D=$o(h,E.element,new Map);E.postStyleProps.forEach(x=>D.set(x,null))})):(i.push(function L8(){return new l.vHH(3300,!1)}()),c=[]),i.length)throw function U8(n){return new l.vHH(3504,!1)}();h.forEach((E,D)=>{E.forEach((x,P)=>{E.set(P,this._driver.computeStyle(D,P,pd))})});const _=Mf(c.map(E=>{const D=h.get(E.element);return this._buildPlayer(E,new Map,D)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function V8(n){return new l.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=SN(t,"","","");return IN(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const $B="ng-animate-queued",$N="ng-animate-disabled",HK=[],qB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ja="__ng_removed";class qN{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function GK(n){return n??null}(r?e.value:e),r){const s=dE(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const pE="void",ZN=new qN(pE);class $K{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Xa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function B8(n,e){return new l.vHH(3302,!1)}();if(null==r||0==r.length)throw function H8(n){return new l.vHH(3303,!1)}();if(!function WK(n){return"start"==n||"done"==n}(r))throw function j8(n,e){return new l.vHH(3400,!1)}();const s=$o(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};s.push(c);const h=$o(this._engine.statesByElement,e,new Map);return h.has(t)||(Xa(e,RS),Xa(e,RS+"-"+t),h.set(t,ZN)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function $8(n){return new l.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),c=new GN(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Xa(e,RS),Xa(e,RS+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const _=new qN(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),h.set(t,_),p||(p=ZN),_.value!==pE&&p.value===_.value){if(!function YK(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,_.params)){const Y=[],ne=s.matchStyles(p.value,p.params,Y),Ae=s.matchStyles(_.value,_.params,Y);Y.length?this._engine.reportError(Y):this._engine.afterFlush(()=>{Xg(e,ne),Qu(e,Ae)})}return}const x=$o(this._engine.playersByElement,e,[]);x.forEach(Y=>{Y.namespaceId==this.id&&Y.triggerName==t&&Y.queued&&Y.destroy()});let P=s.matchTransition(p.value,_.value,e,_.params),U=!1;if(!P){if(!i)return;P=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:_,player:c,isFallbackTransition:U}),U||(Xa(e,$B),c.onStart(()=>{Gy(e,$B)})),c.onDone(()=>{let Y=this.players.indexOf(c);Y>=0&&this.players.splice(Y,1);const ne=this._engine.playersByElement.get(e);if(ne){let Ae=ne.indexOf(c);Ae>=0&&ne.splice(Ae,1)}}),this.players.push(c),x.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,NS,!0);r.forEach(i=>{if(i[Ja])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),c=new Map;if(s){const h=[];if(s.forEach((p,_)=>{if(c.set(_,p.value),this._triggers.has(_)){const E=this.trigger(e,_,pE,i);E&&h.push(E)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Mf(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const c=s.name;if(i.has(c))return;i.add(c);const p=this._triggers.get(c).fallbackTransition,_=r.get(c)||ZN,E=new qN(pE),D=new GN(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:p,fromState:_,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ja];(!s||s===qB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Xa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,c=this._elementListeners.get(s);c&&c.forEach(h=>{if(h.name==r.triggerName){const p=SN(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,IN(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class qK{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new $K(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,h=this.driver.getParentElement(t);for(;h;){const p=i.get(h);if(p){const _=r.indexOf(p);r.splice(_+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(qS(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!qS(t))return;const s=t[Ja];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Xa(e,$N)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Gy(e,$N))}removeNode(e,t,r,i){if(qS(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ja]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return qS(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,NS,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,RN,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ja];if(t&&t.setForRemoval){if(e[Ja]=qB,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains($N)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Xa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Mf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function q8(n){return new l.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new HS,i=[],s=new Map,c=[],h=new Map,p=new Map,_=new Map,E=new Set;this.disabledNodes.forEach(wt=>{E.add(wt);const Ot=this.driver.query(wt,".ng-animate-queued",!0);for(let Ht=0;Ht<Ot.length;Ht++)E.add(Ot[Ht])});const D=this.bodyNode,x=Array.from(this.statesByElement.keys()),P=WB(x,this.collectedEnterElements),U=new Map;let Y=0;P.forEach((wt,Ot)=>{const Ht=kN+Y++;U.set(Ot,Ht),wt.forEach(In=>Xa(In,Ht))});const ne=[],Ae=new Set,Ze=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Ot=this.collectedLeaveElements[wt],Ht=Ot[Ja];Ht&&Ht.setForRemoval&&(ne.push(Ot),Ae.add(Ot),Ht.hasAnimation?this.driver.query(Ot,".ng-star-inserted",!0).forEach(In=>Ae.add(In)):Ze.add(Ot))}const ze=new Map,Ye=WB(x,Array.from(Ae));Ye.forEach((wt,Ot)=>{const Ht=kS+Y++;ze.set(Ot,Ht),wt.forEach(In=>Xa(In,Ht))}),e.push(()=>{P.forEach((wt,Ot)=>{const Ht=U.get(Ot);wt.forEach(In=>Gy(In,Ht))}),Ye.forEach((wt,Ot)=>{const Ht=ze.get(Ot);wt.forEach(In=>Gy(In,Ht))}),ne.forEach(wt=>{this.processLeaveNode(wt)})});const Ct=[],St=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(t).forEach(Ht=>{const In=Ht.player,Vi=Ht.element;if(Ct.push(In),this.collectedEnterElements.length){const vs=Vi[Ja];if(vs&&vs.setForMove){if(vs.previousTriggersValues&&vs.previousTriggersValues.has(Ht.triggerName)){const nm=vs.previousTriggersValues.get(Ht.triggerName),el=this.statesByElement.get(Ht.element);if(el&&el.has(Ht.triggerName)){const WS=el.get(Ht.triggerName);WS.value=nm,el.set(Ht.triggerName,WS)}}return void In.destroy()}}const Ju=!D||!this.driver.containsElement(D,Vi),Go=ze.get(Vi),Rf=U.get(Vi),Ur=this._buildInstruction(Ht,r,Rf,Go,Ju);if(Ur.errors&&Ur.errors.length)return void St.push(Ur);if(Ju)return In.onStart(()=>Xg(Vi,Ur.fromStyles)),In.onDestroy(()=>Qu(Vi,Ur.toStyles)),void i.push(In);if(Ht.isFallbackTransition)return In.onStart(()=>Xg(Vi,Ur.fromStyles)),In.onDestroy(()=>Qu(Vi,Ur.toStyles)),void i.push(In);const sH=[];Ur.timelines.forEach(vs=>{vs.stretchStartingKeyframe=!0,this.disabledNodes.has(vs.element)||sH.push(vs)}),Ur.timelines=sH,r.append(Vi,Ur.timelines),c.push({instruction:Ur,player:In,element:Vi}),Ur.queriedElements.forEach(vs=>$o(h,vs,[]).push(In)),Ur.preStyleProps.forEach((vs,nm)=>{if(vs.size){let el=p.get(nm);el||p.set(nm,el=new Set),vs.forEach((WS,KN)=>el.add(KN))}}),Ur.postStyleProps.forEach((vs,nm)=>{let el=_.get(nm);el||_.set(nm,el=new Set),vs.forEach((WS,KN)=>el.add(KN))})});if(St.length){const wt=[];St.forEach(Ot=>{wt.push(function Z8(n,e){return new l.vHH(3505,!1)}())}),Ct.forEach(Ot=>Ot.destroy()),this.reportError(wt)}const ln=new Map,ei=new Map;c.forEach(wt=>{const Ot=wt.element;r.has(Ot)&&(ei.set(Ot,Ot),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,ln))}),i.forEach(wt=>{const Ot=wt.element;this._getPreviousPlayers(Ot,!1,wt.namespaceId,wt.triggerName,null).forEach(In=>{$o(ln,Ot,[]).push(In),In.destroy()})});const Zo=ne.filter(wt=>KB(wt,p,_)),yd=new Map;GB(yd,this.driver,Ze,_,pd).forEach(wt=>{KB(wt,p,_)&&Zo.push(wt)});const gE=new Map;P.forEach((wt,Ot)=>{GB(gE,this.driver,new Set(wt),p,"!")}),Zo.forEach(wt=>{const Ot=yd.get(wt),Ht=gE.get(wt);yd.set(wt,new Map([...Array.from(Ot?.entries()??[]),...Array.from(Ht?.entries()??[])]))});const tm=[],rH=[],iH={};c.forEach(wt=>{const{element:Ot,player:Ht,instruction:In}=wt;if(r.has(Ot)){if(E.has(Ot))return Ht.onDestroy(()=>Qu(Ot,In.toStyles)),Ht.disabled=!0,Ht.overrideTotalTime(In.totalTime),void i.push(Ht);let Vi=iH;if(ei.size>1){let Go=Ot;const Rf=[];for(;Go=Go.parentNode;){const Ur=ei.get(Go);if(Ur){Vi=Ur;break}Rf.push(Go)}Rf.forEach(Ur=>ei.set(Ur,Vi))}const Ju=this._buildAnimation(Ht.namespaceId,In,ln,s,gE,yd);if(Ht.setRealPlayer(Ju),Vi===iH)tm.push(Ht);else{const Go=this.playersByElement.get(Vi);Go&&Go.length&&(Ht.parentPlayer=Mf(Go)),i.push(Ht)}}else Xg(Ot,In.fromStyles),Ht.onDestroy(()=>Qu(Ot,In.toStyles)),rH.push(Ht),E.has(Ot)&&i.push(Ht)}),rH.forEach(wt=>{const Ot=s.get(wt.element);if(Ot&&Ot.length){const Ht=Mf(Ot);wt.setRealPlayer(Ht)}}),i.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<ne.length;wt++){const Ot=ne[wt],Ht=Ot[Ja];if(Gy(Ot,kS),Ht&&Ht.hasAnimation)continue;let In=[];if(h.size){let Ju=h.get(Ot);Ju&&Ju.length&&In.push(...Ju);let Go=this.driver.query(Ot,RN,!0);for(let Rf=0;Rf<Go.length;Rf++){let Ur=h.get(Go[Rf]);Ur&&Ur.length&&In.push(...Ur)}}const Vi=In.filter(Ju=>!Ju.destroyed);Vi.length?zK(this,Ot,Vi):this.processLeaveNode(Ot)}return ne.length=0,tm.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Ot=this.players.indexOf(wt);this.players.splice(Ot,1)}),wt.play()}),tm}elementContainsData(e,t){let r=!1;const i=t[Ja];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==pE;h.forEach(_=>{_.queued||!p&&_.triggerName!=i||c.push(_)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const s=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const _=p.element,E=_!==s,D=$o(r,_,[]);this._getPreviousPlayers(_,E,c,h,t.toState).forEach(P=>{const U=P.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),P.destroy(),D.push(P)})}Xg(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,c){const h=t.triggerName,p=t.element,_=[],E=new Set,D=new Set,x=t.timelines.map(U=>{const Y=U.element;E.add(Y);const ne=Y[Ja];if(ne&&ne.removedBeforeQueried)return new oE(U.duration,U.delay);const Ae=Y!==p,Ze=function KK(n){const e=[];return zB(n,e),e}((r.get(Y)||HK).map(ln=>ln.getRealPlayer())).filter(ln=>!!ln.element&&ln.element===Y),ze=s.get(Y),Ye=c.get(Y),Ct=wB(0,this._normalizer,0,U.keyframes,ze,Ye),St=this._buildPlayer(U,Ct,Ze);if(U.subTimeline&&i&&D.add(Y),Ae){const ln=new GN(e,h,Y);ln.setRealPlayer(St),_.push(ln)}return St});_.forEach(U=>{$o(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function ZK(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,U.element,U))}),E.forEach(U=>Xa(U,xB));const P=Mf(x);return P.onDestroy(()=>{E.forEach(U=>Gy(U,xB)),Qu(p,t.toStyles)}),D.forEach(U=>{$o(i,U,[]).push(P)}),P}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new oE(e.duration,e.delay)}}class GN{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new oE,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>IN(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$o(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function qS(n){return n&&1===n.nodeType}function ZB(n,e){const t=n.style.display;return n.style.display=e??"none",t}function GB(n,e,t,r,i){const s=[];t.forEach(p=>s.push(ZB(p)));const c=[];r.forEach((p,_)=>{const E=new Map;p.forEach(D=>{const x=e.computeStyle(_,D,i);E.set(D,x),(!x||0==x.length)&&(_[Ja]=jK,c.push(_))}),n.set(_,E)});let h=0;return t.forEach(p=>ZB(p,s[h++])),c}function WB(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function c(h){if(!h)return 1;let p=s.get(h);if(p)return p;const _=h.parentNode;return p=t.has(_)?_:i.has(_)?1:c(_),s.set(h,p),p}return e.forEach(h=>{const p=c(h);1!==p&&t.get(p).push(h)}),t}function Xa(n,e){n.classList?.add(e)}function Gy(n,e){n.classList?.remove(e)}function zK(n,e,t){Mf(t).onDone(()=>n.processLeaveNode(e))}function zB(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof MV?zB(r.players,e):e.push(r)}}function KB(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class ZS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new qK(e,t,r),this._timelineEngine=new FK(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const p=[],E=FN(this._driver,s,p,[]);if(p.length)throw function P8(n,e){return new l.vHH(3404,!1)}();h=function RK(n,e,t){return new NK(n,e,t)}(i,E,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,c]=bB(r);this._timelineEngine.command(s,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[c,h]=bB(r);return this._timelineEngine.listen(c,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let JK=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Qu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qu(this._element,this._initialStyles),this._endStyles&&(Qu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xg(this._element,this._endStyles),this._endStyles=null),Qu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function WN(n){let e=null;return n.forEach((t,r)=>{(function XK(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class YB{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:OB(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class e7{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return IB(e,t)}getParentElement(e){return xN(e)}query(e,t,r){return DB(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,c=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const _=new Map,E=c.filter(P=>P instanceof YB);(function iK(n,e){return 0===n||0===e})(r,i)&&E.forEach(P=>{P.currentSnapshot.forEach((U,Y)=>_.set(Y,U))});let D=function eK(n){return n.length?n[0]instanceof Map?n:n.map(e=>MB(e)):[]}(t).map(P=>kf(P));D=function sK(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,c)=>{r.has(c)||i.push(c),r.set(c,s)}),i.length)for(let s=1;s<e.length;s++){let c=e[s];i.forEach(h=>c.set(h,OB(n,h)))}}return e}(e,D,_);const x=function QK(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=WN(e[0]),e.length>1&&(r=WN(e[e.length-1]))):e instanceof Map&&(t=WN(e)),t||r?new JK(n,t,r):null}(e,D);return new YB(e,D,p,x)}}let t7=(()=>{class n extends cN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?AV(t):t;return QB(this._renderer,null,r,"register",[i]),new n7(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class n7 extends class oz{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new r7(this._id,e,t||{},this._renderer)}}class r7{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return QB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function QB(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const JB="@.disabled";let i7=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,c)=>{const h=c?.parentNode(s);h&&c.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(s);return E||(E=new XB("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,E)),E}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(c,h,t,E.name,E)};return r.data.animation.forEach(p),new s7(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,h]=s;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(ZS),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class XB{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==JB?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class s7 extends XB{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==JB?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function o7(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function a7(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let l7=(()=>{class n extends ZS{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe),l.LFG(MN),l.LFG(HN),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const eH=[{provide:cN,useClass:t7},{provide:HN,useFactory:function u7(){return new AK}},{provide:ZS,useClass:l7},{provide:l.FYo,useFactory:function c7(n,e,t){return new i7(n,e,t)},deps:[_l,ZS,l.R0b]}],zN=[{provide:MN,useFactory:()=>new e7},{provide:l.QbO,useValue:"BrowserAnimations"},...eH],tH=[{provide:MN,useClass:SB},{provide:l.QbO,useValue:"NoopAnimations"},...eH];let d7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?tH:zN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:zN,imports:[Do]}),n})(),h7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[Ez]}),n.\u0275inj=l.cJS({providers:[_s],imports:[Do,bz,jr.hO.initializeApp(yB_firebase),q$,J$,h8,a6,F4.forRoot(),ez.forRoot(),Na,Da,d7,cz.forRoot()]}),n})();(0,l.G48)(),bl().bootstrapModule(h7).catch(n=>console.error(n))},2546:(ft,Me,V)=>{V.d(Me,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=V(9949);(0,l.registerVersion)("firebase","9.14.0","app")},6455:(ft,Me,V)=>{V.d(Me,{Z:()=>l.Z});var l=V(1044);l.Z.registerVersion("firebase","9.14.0","app-compat")},4837:(ft,Me,V)=>{V.r(Me);var l=V(7791),q=V(1044),O=V(4235),le=V(1319),pe=(V(9949),V(6745),V(8702));function ge(){return window}function G(){return(G=(0,l.Z)(function*($,R,H){var ie;const{BuildInfo:Le}=ge();(0,O.ap)(R.sessionId,"AuthEvent did not contain a session ID");const at=yield _e(R.sessionId),lt={};return(0,O.aq)()?lt.ibi=Le.packageName:(0,O.ar)()?lt.apn=Le.packageName:(0,O.as)($,"operation-not-supported-in-this-environment"),Le.displayName&&(lt.appDisplayName=Le.displayName),lt.sessionId=at,(0,O.at)($,H,R.type,void 0,null!==(ie=R.eventId)&&void 0!==ie?ie:void 0,lt)})).apply(this,arguments)}function $e(){return($e=(0,l.Z)(function*($){const{BuildInfo:R}=ge(),H={};(0,O.aq)()?H.iosBundleId=R.packageName:(0,O.ar)()?H.androidPackageName=R.packageName:(0,O.as)($,"operation-not-supported-in-this-environment"),yield(0,O.au)($,H)})).apply(this,arguments)}function ot(){return(ot=(0,l.Z)(function*($,R,H){const{cordova:ie}=ge();let Le=()=>{};try{yield new Promise((at,lt)=>{let xe=null;function Ve(){var Vt;at();const bn=null===(Vt=ie.plugins.browsertab)||void 0===Vt?void 0:Vt.close;"function"==typeof bn&&bn(),"function"==typeof H?.close&&H.close()}function Ft(){xe||(xe=window.setTimeout(()=>{lt((0,O.aw)($,"redirect-cancelled-by-user"))},2e3))}function wn(){"visible"===document?.visibilityState&&Ft()}R.addPassiveListener(Ve),document.addEventListener("resume",Ft,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",wn,!1),Le=()=>{R.removePassiveListener(Ve),document.removeEventListener("resume",Ft,!1),document.removeEventListener("visibilitychange",wn,!1),xe&&window.clearTimeout(xe)}})}finally{Le()}})).apply(this,arguments)}function _e($){return nt.apply(this,arguments)}function nt(){return(nt=(0,l.Z)(function*($){const R=et($),H=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(H)).map(Le=>Le.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function et($){if((0,O.ap)(/[0-9a-zA-Z]+/.test($),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode($);const R=new ArrayBuffer($.length),H=new Uint8Array(R);for(let ie=0;ie<$.length;ie++)H[ie]=$.charCodeAt(ie);return H}class ke extends O.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(R)),super.onEvent(R)}initialized(){var R=this;return(0,l.Z)(function*(){yield R.initPromise})()}}function oe($){return he.apply(this,arguments)}function he(){return(he=(0,l.Z)(function*($){const R=yield te()._get(me($));return R&&(yield te()._remove(me($))),R})).apply(this,arguments)}function J(){const $=[],R="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const ie=Math.floor(Math.random()*R.length);$.push(R.charAt(ie))}return $.join("")}function te(){return(0,O.az)(O.b)}function me($){return(0,O.aA)("authEvent",$.config.apiKey,$.name)}function He($){if(!$?.includes("?"))return{};const[R,...H]=$.split("?");return(0,le.zd)(H.join("?"))}function Ke(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function Wt(){var $;return(null===($=self?.location)||void 0===$?void 0:$.protocol)||null}function Vr($=(0,le.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!$.toLowerCase().match(/iphone|ipad|ipod|android/))}function rs(){try{const $=self.localStorage,R=O.aI();if($)return $.setItem(R,"1"),$.removeItem(R),!function ns($=(0,le.z$)()){return function ti(){return(0,le.w1)()&&11===document?.documentMode}()||function jn($=(0,le.z$)()){return/Edge\/\d+/.test($)}($)}()||(0,le.hl)()}catch{return ni()&&(0,le.hl)()}return!1}function ni(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wn(){return(function Bt(){return"http:"===Wt()||"https:"===Wt()}()||(0,le.ru)()||Vr())&&!function ts(){return(0,le.b$)()||(0,le.UG)()}()&&rs()&&!ni()}function Bi(){return Vr()&&typeof document<"u"}function tt(){return(tt=(0,l.Z)(function*(){return!!Bi()&&new Promise($=>{const R=setTimeout(()=>{$(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),$(!0)})})})).apply(this,arguments)}const er={LOCAL:"local",NONE:"none",SESSION:"session"},Dn=O.ax,xr="persistence";function Sn($){return kn.apply(this,arguments)}function kn(){return(kn=(0,l.Z)(function*($){yield $._initializationPromise;const R=gt(),H=O.aA(xr,$.config.apiKey,$.name);R&&R.setItem(H,$._getPersistence())})).apply(this,arguments)}function gt(){var $;try{return(null===($=function dr(){return typeof window<"u"?window:null}())||void 0===$?void 0:$.sessionStorage)||null}catch{return null}}const mt=O.ax;class Nt{constructor(){this.browserResolver=O.az(O.k),this.cordovaResolver=O.az(class un{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(R){var H=this;return(0,l.Z)(function*(){const ie=R._key();let Le=H.eventManagers.get(ie);return Le||(Le=new ke(R),H.eventManagers.set(ie,Le),H.attachCallbackListeners(R,Le)),Le})()}_openPopup(R){(0,O.as)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,H,ie,Le){var at=this;return(0,l.Z)(function*(){!function be($){var R,H,ie,Le,at,lt,xe,Ve,Ft,wn;const Vt=ge();(0,O.ax)("function"==typeof(null===(R=Vt?.universalLinks)||void 0===R?void 0:R.subscribe),$,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===(H=Vt?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(at=null===(Le=null===(ie=Vt?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===at?void 0:at.openUrl),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Ve=null===(xe=null===(lt=Vt?.cordova)||void 0===lt?void 0:lt.plugins)||void 0===xe?void 0:xe.browsertab)||void 0===Ve?void 0:Ve.isAvailable),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(wn=null===(Ft=Vt?.cordova)||void 0===Ft?void 0:Ft.InAppBrowser)||void 0===wn?void 0:wn.open),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const lt=yield at._initialize(R);yield lt.initialized(),lt.resetRedirect(),(0,O.aD)(),yield at._originValidation(R);const xe=function Ce($,R,H=null){return{type:R,eventId:H,urlResponse:null,sessionId:J(),postBody:null,tenantId:$.tenantId,error:(0,O.aw)($,"no-auth-event")}}(R,ie,Le);yield function Ge($,R){return te()._set(me($),R)}(R,xe);const Ve=yield function z($,R,H){return G.apply(this,arguments)}(R,xe,H),Ft=yield function Pe($){const{cordova:R}=ge();return new Promise(H=>{R.plugins.browsertab.isAvailable(ie=>{let Le=null;ie?R.plugins.browsertab.openUrl($):Le=R.InAppBrowser.open($,(0,O.av)()?"_blank":"_system","location=yes"),H(Le)})})}(Ve);return function Ie($,R,H){return ot.apply(this,arguments)}(R,lt,Ft)})()}_isIframeWebStorageSupported(R,H){throw new Error("Method not implemented.")}_originValidation(R){const H=R._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function X($){return $e.apply(this,arguments)}(R)),this.originValidationPromises[H]}attachCallbackListeners(R,H){const{universalLinks:ie,handleOpenURL:Le,BuildInfo:at}=ge(),lt=setTimeout((0,l.Z)(function*(){yield oe(R),H.onEvent(Ke())}),500),xe=function(){var wn=(0,l.Z)(function*(Vt){clearTimeout(lt);const bn=yield oe(R);let ws=null;bn&&Vt?.url&&(ws=function we($,R){var H,ie;const Le=function Be($){const R=He($),H=R.link?decodeURIComponent(R.link):void 0,ie=He(H).link,Le=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return He(Le).link||Le||ie||H||$}(R);if(Le.includes("/__/auth/callback")){const at=He(Le),lt=at.firebaseError?function ue($){try{return JSON.parse($)}catch{return null}}(decodeURIComponent(at.firebaseError)):null,xe=null===(ie=null===(H=lt?.code)||void 0===H?void 0:H.split("auth/"))||void 0===ie?void 0:ie[1],Ve=xe?(0,O.aw)(xe):null;return Ve?{type:$.type,eventId:$.eventId,tenantId:$.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:$.type,eventId:$.eventId,tenantId:$.tenantId,sessionId:$.sessionId,urlResponse:Le,postBody:null}}return null}(bn,Vt.url)),H.onEvent(ws||Ke())});return function(bn){return wn.apply(this,arguments)}}();typeof ie<"u"&&"function"==typeof ie.subscribe&&ie.subscribe(null,xe);const Ve=Le,Ft=`${at.packageName.toLowerCase()}://`;ge().handleOpenURL=function(){var wn=(0,l.Z)(function*(Vt){if(Vt.toLowerCase().startsWith(Ft)&&xe({url:Vt}),"function"==typeof Ve)try{Ve(Vt)}catch(bn){console.error(bn)}});return function(Vt){return wn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(R){var H=this;return(0,l.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,H,ie,Le){var at=this;return(0,l.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(R,H,ie,Le)})()}_openRedirect(R,H,ie,Le){var at=this;return(0,l.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(R,H,ie,Le)})()}_isIframeWebStorageSupported(R,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,H)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return Bi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,l.Z)(function*(){if(R.underlyingResolver)return;const H=yield function is(){return tt.apply(this,arguments)}();R.underlyingResolver=H?R.cordovaResolver:R.browserResolver})()}}function ri($){return $.unwrap()}function Gr($){return Wr($)}function Wr($){const{_tokenResponse:R}=$ instanceof le.ZR?$.customData:$;if(!R)return null;if(!($ instanceof le.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return O.P.credentialFromResult($);const H=R.providerId;if(!H||H===O.o.PASSWORD)return null;let ie;switch(H){case O.o.GOOGLE:ie=O.Q;break;case O.o.FACEBOOK:ie=O.N;break;case O.o.GITHUB:ie=O.T;break;case O.o.TWITTER:ie=O.W;break;default:const{oauthIdToken:Le,oauthAccessToken:at,oauthTokenSecret:lt,pendingToken:xe,nonce:Ve}=R;return at||lt||Le||xe?xe?H.startsWith("saml.")?O.aL._create(H,xe):O.J._fromParams({providerId:H,signInMethod:H,pendingToken:xe,idToken:Le,accessToken:at}):new O.U(H).credential({idToken:Le,accessToken:at,rawNonce:Ve}):null}return $ instanceof le.ZR?ie.credentialFromError($):ie.credentialFromResult($)}function Ut($,R){return R.catch(H=>{throw H instanceof le.ZR&&function Mt($,R){var H,ie;const Le=null===(H=R.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ie=R)||void 0===ie?void 0:ie.code))R.resolver=new Er($,O.an($,R));else if(Le){const at=Wr(R),lt=R;at&&(lt.credential=at,lt.tenantId=Le.tenantId||void 0,lt.email=Le.email||void 0,lt.phoneNumber=Le.phoneNumber||void 0)}}($,H),H}).then(H=>{const Le=H.user;return{operationType:H.operationType,credential:Gr(H),additionalUserInfo:O.al(H),user:Ln.getOrCreate(Le)}})}function ci($,R){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,l.Z)(function*($,R){const H=yield R;return{verificationId:H.verificationId,confirm:ie=>Ut($,H.confirm(ie))}})).apply(this,arguments)}class Er{constructor(R,H){this.resolver=H,this.auth=function tr($){return $.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return Ut(ri(this.auth),this.resolver.resolveSignIn(R))}}class Ln{constructor(R){this._delegate=R,this.multiFactor=O.ao(R)}static getOrCreate(R){return Ln.USER_MAP.has(R)||Ln.USER_MAP.set(R,new Ln(R)),Ln.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var H=this;return(0,l.Z)(function*(){return Ut(H.auth,O.Z(H._delegate,R))})()}linkWithPhoneNumber(R,H){var ie=this;return(0,l.Z)(function*(){return ci(ie.auth,O.l(ie._delegate,R,H))})()}linkWithPopup(R){var H=this;return(0,l.Z)(function*(){return Ut(H.auth,O.d(H._delegate,R,Nt))})()}linkWithRedirect(R){var H=this;return(0,l.Z)(function*(){return yield Sn(O.aE(H.auth)),O.g(H._delegate,R,Nt)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var H=this;return(0,l.Z)(function*(){return Ut(H.auth,O._(H._delegate,R))})()}reauthenticateWithPhoneNumber(R,H){return ci(this.auth,O.r(this._delegate,R,H))}reauthenticateWithPopup(R){return Ut(this.auth,O.e(this._delegate,R,Nt))}reauthenticateWithRedirect(R){var H=this;return(0,l.Z)(function*(){return yield Sn(O.aE(H.auth)),O.h(H._delegate,R,Nt)})()}sendEmailVerification(R){return O.ab(this._delegate,R)}unlink(R){var H=this;return(0,l.Z)(function*(){return yield O.ak(H._delegate,R),H})()}updateEmail(R){return O.ag(this._delegate,R)}updatePassword(R){return O.ah(this._delegate,R)}updatePhoneNumber(R){return O.u(this._delegate,R)}updateProfile(R){return O.af(this._delegate,R)}verifyBeforeUpdateEmail(R,H){return O.ac(this._delegate,R,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ln.USER_MAP=new WeakMap;const rt=O.ax;let De=(()=>{class ${constructor(H,ie){if(this.app=H,ie.isInitialized())return this._delegate=ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Le}=H.options;rt(Le,"invalid-api-key",{appName:H.name}),rt(Le,"invalid-api-key",{appName:H.name});const at=typeof window<"u"?Nt:void 0;this._delegate=ie.initialize({options:{persistence:Tt(Le,H.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ln.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,ie){O.G(this._delegate,H,ie)}applyActionCode(H){return O.a2(this._delegate,H)}checkActionCode(H){return O.a3(this._delegate,H)}confirmPasswordReset(H,ie){return O.a1(this._delegate,H,ie)}createUserWithEmailAndPassword(H,ie){var Le=this;return(0,l.Z)(function*(){return Ut(Le._delegate,O.a5(Le._delegate,H,ie))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return O.aa(this._delegate,H)}isSignInWithEmailLink(H){return O.a8(this._delegate,H)}getRedirectResult(){var H=this;return(0,l.Z)(function*(){rt(Wn(),H._delegate,"operation-not-supported-in-this-environment");const ie=yield O.j(H._delegate,Nt);return ie?Ut(H._delegate,Promise.resolve(ie)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function vn($,R){(0,O.aE)($)._logFramework(R)}(this._delegate,H)}onAuthStateChanged(H,ie,Le){const{next:at,error:lt,complete:xe}=it(H,ie,Le);return this._delegate.onAuthStateChanged(at,lt,xe)}onIdTokenChanged(H,ie,Le){const{next:at,error:lt,complete:xe}=it(H,ie,Le);return this._delegate.onIdTokenChanged(at,lt,xe)}sendSignInLinkToEmail(H,ie){return O.a7(this._delegate,H,ie)}sendPasswordResetEmail(H,ie){return O.a0(this._delegate,H,ie||void 0)}setPersistence(H){var ie=this;return(0,l.Z)(function*(){let Le;switch(function fo($,R){Dn(Object.values(er).includes(R),$,"invalid-persistence-type"),(0,le.b$)()?Dn(R!==er.SESSION,$,"unsupported-persistence-type"):(0,le.UG)()?Dn(R===er.NONE,$,"unsupported-persistence-type"):ni()?Dn(R===er.NONE||R===er.LOCAL&&(0,le.hl)(),$,"unsupported-persistence-type"):Dn(R===er.NONE||rs(),$,"unsupported-persistence-type")}(ie._delegate,H),H){case er.SESSION:Le=O.a;break;case er.LOCAL:Le=(yield O.az(O.i)._isAvailable())?O.i:O.b;break;case er.NONE:Le=O.L;break;default:return O.as("argument-error",{appName:ie._delegate.name})}return ie._delegate.setPersistence(Le)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return Ut(this._delegate,O.X(this._delegate))}signInWithCredential(H){return Ut(this._delegate,O.Y(this._delegate,H))}signInWithCustomToken(H){return Ut(this._delegate,O.$(this._delegate,H))}signInWithEmailAndPassword(H,ie){return Ut(this._delegate,O.a6(this._delegate,H,ie))}signInWithEmailLink(H,ie){return Ut(this._delegate,O.a9(this._delegate,H,ie))}signInWithPhoneNumber(H,ie){return ci(this._delegate,O.s(this._delegate,H,ie))}signInWithPopup(H){var ie=this;return(0,l.Z)(function*(){return rt(Wn(),ie._delegate,"operation-not-supported-in-this-environment"),Ut(ie._delegate,O.c(ie._delegate,H,Nt))})()}signInWithRedirect(H){var ie=this;return(0,l.Z)(function*(){return rt(Wn(),ie._delegate,"operation-not-supported-in-this-environment"),yield Sn(ie._delegate),O.f(ie._delegate,H,Nt)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return O.a4(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return $.Persistence=er,$})();function it($,R,H){let ie=$;"function"!=typeof $&&({next:ie,error:R,complete:H}=$);const Le=ie;return{next:lt=>Le(lt&&Ln.getOrCreate(lt)),error:R,complete:H}}function Tt($,R){const H=function En($,R){const H=gt();if(!H)return[];const ie=O.aA(xr,$,R);switch(H.getItem(ie)){case er.NONE:return[O.L];case er.LOCAL:return[O.i,O.a];case er.SESSION:return[O.a];default:return[]}}($,R);if(typeof self<"u"&&!H.includes(O.i)&&H.push(O.i),typeof window<"u")for(const ie of[O.b,O.a])H.includes(ie)||H.push(ie);return H.includes(O.L)||H.push(O.L),H}class It{constructor(){this.providerId="phone",this._delegate=new O.P(ri(q.Z.auth()))}static credential(R,H){return O.P.credential(R,H)}verifyPhoneNumber(R,H){return this._delegate.verifyPhoneNumber(R,H)}unwrap(){return this._delegate}}It.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,It.PROVIDER_ID=O.P.PROVIDER_ID;const en=O.ax;class W{constructor(R,H,ie=q.Z.app()){var Le;en(null===(Le=ie.options)||void 0===Le?void 0:Le.apiKey,"invalid-api-key",{appName:ie.name}),this._delegate=new O.R(R,H,ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Q($){$.INTERNAL.registerComponent(new pe.wA("auth-compat",R=>{const H=R.getProvider("app-compat").getImmediate(),ie=R.getProvider("auth");return new De(H,ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:It,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:W,TwitterAuthProvider:O.W,Auth:De,AuthCredential:O.H,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$.registerVersion("@firebase/auth-compat","0.2.24")}(q.Z)},4915:(ft,Me,V)=>{V.d(Me,{y:()=>ge});var l=V(6935),q=V(3627),O=V(9206),le=V(2829),ce=V(7299),ye=V(3693),pe=V(5904);let ge=(()=>{class X{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const Ie=new X;return Ie.source=this,Ie.operator=Pe,Ie}subscribe(Pe,Ie,ot){const be=function G(X){return X&&X instanceof l.Lv||function z(X){return X&&(0,ye.m)(X.next)&&(0,ye.m)(X.error)&&(0,ye.m)(X.complete)}(X)&&(0,q.Nn)(X)}(Pe)?Pe:new l.Hp(Pe,Ie,ot);return(0,pe.x)(()=>{const{operator:_e,source:nt}=this;be.add(_e?_e.call(be,nt):nt?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(Ie){Pe.error(Ie)}}forEach(Pe,Ie){return new(Ie=ve(Ie))((ot,be)=>{const _e=new l.Hp({next:nt=>{try{Pe(nt)}catch(et){be(et),_e.unsubscribe()}},error:be,complete:ot});this.subscribe(_e)})}_subscribe(Pe){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Pe)}[O.L](){return this}pipe(...Pe){return(0,le.U)(Pe)(this)}toPromise(Pe){return new(Pe=ve(Pe))((Ie,ot)=>{let be;this.subscribe(_e=>be=_e,_e=>ot(_e),()=>Ie(be))})}}return X.create=$e=>new X($e),X})();function ve(X){var $e;return null!==($e=X??ce.v.Promise)&&void 0!==$e?$e:Promise}},3149:(ft,Me,V)=>{V.d(Me,{x:()=>pe});var l=V(4915),q=V(3627);const le=(0,V(7802).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=V(384),ye=V(5904);let pe=(()=>{class ve extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new ge(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new le}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:$e,observers:Pe}=this;return X||$e?q.Lc:(this.currentObservers=null,Pe.push(G),new q.w0(()=>{this.currentObservers=null,(0,ce.P)(Pe,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:$e,isStopped:Pe}=this;X?G.error($e):Pe&&G.complete()}asObservable(){const G=new l.y;return G.source=this,G}}return ve.create=(z,G)=>new ge(z,G),ve})();class ge extends pe{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,z)}error(z){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==X?X:q.Lc}}},6935:(ft,Me,V)=>{V.d(Me,{Hp:()=>ot,Lv:()=>X});var l=V(3693),q=V(3627),O=V(7299),le=V(5660),ce=V(1369);const ye=ve("C",void 0,void 0);function ve(Fe,ke,Ce){return{kind:Fe,value:ke,error:Ce}}var z=V(3362),G=V(5904);class X extends q.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,q.Nn)(ke)&&ke.add(this)):this.destination=et}static create(ke,Ce,Ge){return new ot(ke,Ce,Ge)}next(ke){this.isStopped?nt(function ge(Fe){return ve("N",Fe,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?nt(function pe(Fe){return ve("E",void 0,Fe)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?nt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Pe(Fe,ke){return $e.call(Fe,ke)}class Ie{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ke)}catch(Ge){be(Ge)}}error(ke){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ke)}catch(Ge){be(Ge)}else be(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(Ce){be(Ce)}}}class ot extends X{constructor(ke,Ce,Ge){let oe;if(super(),(0,l.m)(ke)||!ke)oe={next:ke??void 0,error:Ce??void 0,complete:Ge??void 0};else{let he;this&&O.v.useDeprecatedNextContext?(he=Object.create(ke),he.unsubscribe=()=>this.unsubscribe(),oe={next:ke.next&&Pe(ke.next,he),error:ke.error&&Pe(ke.error,he),complete:ke.complete&&Pe(ke.complete,he)}):oe=ke}this.destination=new Ie(oe)}}function be(Fe){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Fe):(0,le.h)(Fe)}function nt(Fe,ke){const{onStoppedNotification:Ce}=O.v;Ce&&z.z.setTimeout(()=>Ce(Fe,ke))}const et={closed:!0,next:ce.Z,error:function _e(Fe){throw Fe},complete:ce.Z}},3627:(ft,Me,V)=>{V.d(Me,{Lc:()=>ye,w0:()=>ce,Nn:()=>pe});var l=V(3693);const O=(0,V(7802).d)(ve=>function(G){ve(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,$e)=>`${$e+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var le=V(384);class ce{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Pe of G)Pe.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,l.m)(X))try{X()}catch(Pe){z=Pe instanceof O?Pe.errors:[Pe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Pe of $e)try{ge(Pe)}catch(Ie){z=z??[],Ie instanceof O?z=[...z,...Ie.errors]:z.push(Ie)}}if(z)throw new O(z)}}add(z){var G;if(z&&z!==this)if(this.closed)ge(z);else{if(z instanceof ce){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,le.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,le.P)(G,z),z instanceof ce&&z._removeParent(this)}}ce.EMPTY=(()=>{const ve=new ce;return ve.closed=!0,ve})();const ye=ce.EMPTY;function pe(ve){return ve instanceof ce||ve&&"closed"in ve&&(0,l.m)(ve.remove)&&(0,l.m)(ve.add)&&(0,l.m)(ve.unsubscribe)}function ge(ve){(0,l.m)(ve)?ve():ve.unsubscribe()}},7299:(ft,Me,V)=>{V.d(Me,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1530:(ft,Me,V)=>{V.d(Me,{E:()=>q});const q=new(V(4915).y)(ce=>ce.complete())},3465:(ft,Me,V)=>{V.d(Me,{D:()=>ke});var l=V(2058),q=V(249),O=V(675),ye=V(4915),ge=V(2502),ve=V(3693),z=V(4452);function X(Ce,Ge){if(!Ce)throw new Error("Iterable cannot be null");return new ye.y(oe=>{(0,z.f)(oe,Ge,()=>{const he=Ce[Symbol.asyncIterator]();(0,z.f)(oe,Ge,()=>{he.next().then(we=>{we.done?oe.complete():oe.next(we.value)})},0,!0)})})}var $e=V(4699),Pe=V(7743),Ie=V(3696),ot=V(6758),be=V(6125),_e=V(7146),nt=V(8901);function ke(Ce,Ge){return Ge?function Fe(Ce,Ge){if(null!=Ce){if((0,$e.c)(Ce))return function le(Ce,Ge){return(0,l.Xf)(Ce).pipe((0,O.R)(Ge),(0,q.Q)(Ge))}(Ce,Ge);if((0,Ie.z)(Ce))return function pe(Ce,Ge){return new ye.y(oe=>{let he=0;return Ge.schedule(function(){he===Ce.length?oe.complete():(oe.next(Ce[he++]),oe.closed||this.schedule())})})}(Ce,Ge);if((0,Pe.t)(Ce))return function ce(Ce,Ge){return(0,l.Xf)(Ce).pipe((0,O.R)(Ge),(0,q.Q)(Ge))}(Ce,Ge);if((0,be.D)(Ce))return X(Ce,Ge);if((0,ot.T)(Ce))return function G(Ce,Ge){return new ye.y(oe=>{let he;return(0,z.f)(oe,Ge,()=>{he=Ce[ge.h](),(0,z.f)(oe,Ge,()=>{let we,J;try{({value:we,done:J}=he.next())}catch(te){return void oe.error(te)}J?oe.complete():oe.next(we)},0,!0)}),()=>(0,ve.m)(he?.return)&&he.return()})}(Ce,Ge);if((0,nt.L)(Ce))return function et(Ce,Ge){return X((0,nt.Q)(Ce),Ge)}(Ce,Ge)}throw(0,_e.z)(Ce)}(Ce,Ge):(0,l.Xf)(Ce)}},2058:(ft,Me,V)=>{V.d(Me,{Xf:()=>$e});var l=V(9312),q=V(3696),O=V(7743),le=V(4915),ce=V(4699),ye=V(6125),pe=V(7146),ge=V(6758),ve=V(8901),z=V(3693),G=V(5660),X=V(9206);function $e(Fe){if(Fe instanceof le.y)return Fe;if(null!=Fe){if((0,ce.c)(Fe))return function Pe(Fe){return new le.y(ke=>{const Ce=Fe[X.L]();if((0,z.m)(Ce.subscribe))return Ce.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,q.z)(Fe))return function Ie(Fe){return new le.y(ke=>{for(let Ce=0;Ce<Fe.length&&!ke.closed;Ce++)ke.next(Fe[Ce]);ke.complete()})}(Fe);if((0,O.t)(Fe))return function ot(Fe){return new le.y(ke=>{Fe.then(Ce=>{ke.closed||(ke.next(Ce),ke.complete())},Ce=>ke.error(Ce)).then(null,G.h)})}(Fe);if((0,ye.D)(Fe))return _e(Fe);if((0,ge.T)(Fe))return function be(Fe){return new le.y(ke=>{for(const Ce of Fe)if(ke.next(Ce),ke.closed)return;ke.complete()})}(Fe);if((0,ve.L)(Fe))return function nt(Fe){return _e((0,ve.Q)(Fe))}(Fe)}throw(0,pe.z)(Fe)}function _e(Fe){return new le.y(ke=>{(function et(Fe,ke){var Ce,Ge,oe,he;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,l.KL)(Fe);!(Ge=yield Ce.next()).done;)if(ke.next(Ge.value),ke.closed)return}catch(we){oe={error:we}}finally{try{Ge&&!Ge.done&&(he=Ce.return)&&(yield he.call(Ce))}finally{if(oe)throw oe.error}}ke.complete()})})(Fe,ke).catch(Ce=>ke.error(Ce))})}},4749:(ft,Me,V)=>{V.d(Me,{T:()=>ye});var l=V(1174),q=V(2058),O=V(1530),le=V(6807),ce=V(3465);function ye(...pe){const ge=(0,le.yG)(pe),ve=(0,le._6)(pe,1/0),z=pe;return z.length?1===z.length?(0,q.Xf)(z[0]):(0,l.J)(ve)((0,ce.D)(z,ge)):O.E}},3031:(ft,Me,V)=>{V.d(Me,{x:()=>q});var l=V(6935);function q(le,ce,ye,pe,ge){return new O(le,ce,ye,pe,ge)}class O extends l.Lv{constructor(ce,ye,pe,ge,ve,z){super(ce),this.onFinalize=ve,this.shouldUnsubscribe=z,this._next=ye?function(G){try{ye(G)}catch(X){ce.error(X)}}:super._next,this._error=ge?function(G){try{ge(G)}catch(X){ce.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(G){ce.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},1390:(ft,Me,V)=>{V.d(Me,{U:()=>O});var l=V(3660),q=V(3031);function O(le,ce){return(0,l.e)((ye,pe)=>{let ge=0;ye.subscribe((0,q.x)(pe,ve=>{pe.next(le.call(ce,ve,ge++))}))})}},1174:(ft,Me,V)=>{V.d(Me,{J:()=>O});var l=V(8689),q=V(7631);function O(le=1/0){return(0,l.z)(q.y,le)}},8689:(ft,Me,V)=>{V.d(Me,{z:()=>ge});var l=V(1390),q=V(2058),O=V(3660),le=V(4452),ce=V(3031),pe=V(3693);function ge(ve,z,G=1/0){return(0,pe.m)(z)?ge((X,$e)=>(0,l.U)((Pe,Ie)=>z(X,Pe,$e,Ie))((0,q.Xf)(ve(X,$e))),G):("number"==typeof z&&(G=z),(0,O.e)((X,$e)=>function ye(ve,z,G,X,$e,Pe,Ie,ot){const be=[];let _e=0,nt=0,et=!1;const Fe=()=>{et&&!be.length&&!_e&&z.complete()},ke=Ge=>_e<X?Ce(Ge):be.push(Ge),Ce=Ge=>{Pe&&z.next(Ge),_e++;let oe=!1;(0,q.Xf)(G(Ge,nt++)).subscribe((0,ce.x)(z,he=>{$e?.(he),Pe?ke(he):z.next(he)},()=>{oe=!0},void 0,()=>{if(oe)try{for(_e--;be.length&&_e<X;){const he=be.shift();Ie?(0,le.f)(z,Ie,()=>Ce(he)):Ce(he)}Fe()}catch(he){z.error(he)}}))};return ve.subscribe((0,ce.x)(z,ke,()=>{et=!0,Fe()})),()=>{ot?.()}}(X,$e,ve,G)))}},249:(ft,Me,V)=>{V.d(Me,{Q:()=>le});var l=V(4452),q=V(3660),O=V(3031);function le(ce,ye=0){return(0,q.e)((pe,ge)=>{pe.subscribe((0,O.x)(ge,ve=>(0,l.f)(ge,ce,()=>ge.next(ve),ye),()=>(0,l.f)(ge,ce,()=>ge.complete(),ye),ve=>(0,l.f)(ge,ce,()=>ge.error(ve),ye)))})}},8288:(ft,Me,V)=>{V.d(Me,{B:()=>ce});var l=V(2058),q=V(3149),O=V(6935),le=V(3660);function ce(pe={}){const{connector:ge=(()=>new q.x),resetOnError:ve=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=pe;return X=>{let $e,Pe,Ie,ot=0,be=!1,_e=!1;const nt=()=>{Pe?.unsubscribe(),Pe=void 0},et=()=>{nt(),$e=Ie=void 0,be=_e=!1},Fe=()=>{const ke=$e;et(),ke?.unsubscribe()};return(0,le.e)((ke,Ce)=>{ot++,!_e&&!be&&nt();const Ge=Ie=Ie??ge();Ce.add(()=>{ot--,0===ot&&!_e&&!be&&(Pe=ye(Fe,G))}),Ge.subscribe(Ce),!$e&&ot>0&&($e=new O.Hp({next:oe=>Ge.next(oe),error:oe=>{_e=!0,nt(),Pe=ye(et,ve,oe),Ge.error(oe)},complete:()=>{be=!0,nt(),Pe=ye(et,z),Ge.complete()}}),(0,l.Xf)(ke).subscribe($e))})(X)}}function ye(pe,ge,...ve){if(!0===ge)return void pe();if(!1===ge)return;const z=new O.Hp({next:()=>{z.unsubscribe(),pe()}});return ge(...ve).subscribe(z)}},675:(ft,Me,V)=>{V.d(Me,{R:()=>q});var l=V(3660);function q(O,le=0){return(0,l.e)((ce,ye)=>{ye.add(O.schedule(()=>ce.subscribe(ye),le))})}},288:(ft,Me,V)=>{V.d(Me,{b:()=>ce});var l=V(3693),q=V(3660),O=V(3031),le=V(7631);function ce(ye,pe,ge){const ve=(0,l.m)(ye)||pe||ge?{next:ye,error:pe,complete:ge}:ye;return ve?(0,q.e)((z,G)=>{var X;null===(X=ve.subscribe)||void 0===X||X.call(ve);let $e=!0;z.subscribe((0,O.x)(G,Pe=>{var Ie;null===(Ie=ve.next)||void 0===Ie||Ie.call(ve,Pe),G.next(Pe)},()=>{var Pe;$e=!1,null===(Pe=ve.complete)||void 0===Pe||Pe.call(ve),G.complete()},Pe=>{var Ie;$e=!1,null===(Ie=ve.error)||void 0===Ie||Ie.call(ve,Pe),G.error(Pe)},()=>{var Pe,Ie;$e&&(null===(Pe=ve.unsubscribe)||void 0===Pe||Pe.call(ve)),null===(Ie=ve.finalize)||void 0===Ie||Ie.call(ve)}))}):le.y}},2411:(ft,Me,V)=>{V.d(Me,{o:()=>ce});var l=V(3627);class q extends l.w0{constructor(pe,ge){super()}schedule(pe,ge=0){return this}}const O={setInterval(ye,pe,...ge){const{delegate:ve}=O;return ve?.setInterval?ve.setInterval(ye,pe,...ge):setInterval(ye,pe,...ge)},clearInterval(ye){const{delegate:pe}=O;return(pe?.clearInterval||clearInterval)(ye)},delegate:void 0};var le=V(384);class ce extends q{constructor(pe,ge){super(pe,ge),this.scheduler=pe,this.work=ge,this.pending=!1}schedule(pe,ge=0){var ve;if(this.closed)return this;this.state=pe;const z=this.id,G=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(G,z,ge)),this.pending=!0,this.delay=ge,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(G,this.id,ge),this}requestAsyncId(pe,ge,ve=0){return O.setInterval(pe.flush.bind(pe,this),ve)}recycleAsyncId(pe,ge,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return ge;null!=ge&&O.clearInterval(ge)}execute(pe,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(pe,ge);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ge){let z,ve=!1;try{this.work(pe)}catch(G){ve=!0,z=G||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ge}=this,{actions:ve}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(ve,this),null!=pe&&(this.id=this.recycleAsyncId(ge,pe,null)),this.delay=null,super.unsubscribe()}}}},5577:(ft,Me,V)=>{V.d(Me,{v:()=>O});var l=V(2792);class q{constructor(ce,ye=q.now){this.schedulerActionCtor=ce,this.now=ye}schedule(ce,ye=0,pe){return new this.schedulerActionCtor(this,ce).schedule(pe,ye)}}q.now=l.l.now;class O extends q{constructor(ce,ye=q.now){super(ce,ye),this.actions=[],this._active=!1}flush(ce){const{actions:ye}=this;if(this._active)return void ye.push(ce);let pe;this._active=!0;do{if(pe=ce.execute(ce.state,ce.delay))break}while(ce=ye.shift());if(this._active=!1,pe){for(;ce=ye.shift();)ce.unsubscribe();throw pe}}}},1696:(ft,Me,V)=>{V.d(Me,{z:()=>O});var l=V(2411);const O=new(V(5577).v)(l.o)},2792:(ft,Me,V)=>{V.d(Me,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3362:(ft,Me,V)=>{V.d(Me,{z:()=>l});const l={setTimeout(q,O,...le){const{delegate:ce}=l;return ce?.setTimeout?ce.setTimeout(q,O,...le):setTimeout(q,O,...le)},clearTimeout(q){const{delegate:O}=l;return(O?.clearTimeout||clearTimeout)(q)},delegate:void 0}},2502:(ft,Me,V)=>{V.d(Me,{h:()=>q});const q=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},9206:(ft,Me,V)=>{V.d(Me,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},6807:(ft,Me,V)=>{V.d(Me,{_6:()=>ye,jO:()=>le,yG:()=>ce});var l=V(3693);function O(pe){return pe[pe.length-1]}function le(pe){return(0,l.m)(O(pe))?pe.pop():void 0}function ce(pe){return function q(pe){return pe&&(0,l.m)(pe.schedule)}(O(pe))?pe.pop():void 0}function ye(pe,ge){return"number"==typeof O(pe)?pe.pop():ge}},384:(ft,Me,V)=>{function l(q,O){if(q){const le=q.indexOf(O);0<=le&&q.splice(le,1)}}V.d(Me,{P:()=>l})},7802:(ft,Me,V)=>{function l(q){const le=q(ce=>{Error.call(ce),ce.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}V.d(Me,{d:()=>l})},5904:(ft,Me,V)=>{V.d(Me,{O:()=>le,x:()=>O});var l=V(7299);let q=null;function O(ce){if(l.v.useDeprecatedSynchronousErrorHandling){const ye=!q;if(ye&&(q={errorThrown:!1,error:null}),ce(),ye){const{errorThrown:pe,error:ge}=q;if(q=null,pe)throw ge}}else ce()}function le(ce){l.v.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=ce)}},4452:(ft,Me,V)=>{function l(q,O,le,ce=0,ye=!1){const pe=O.schedule(function(){le(),ye?q.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(q.add(pe),!ye)return pe}V.d(Me,{f:()=>l})},7631:(ft,Me,V)=>{function l(q){return q}V.d(Me,{y:()=>l})},3696:(ft,Me,V)=>{V.d(Me,{z:()=>l});const l=q=>q&&"number"==typeof q.length&&"function"!=typeof q},6125:(ft,Me,V)=>{V.d(Me,{D:()=>q});var l=V(3693);function q(O){return Symbol.asyncIterator&&(0,l.m)(O?.[Symbol.asyncIterator])}},3693:(ft,Me,V)=>{function l(q){return"function"==typeof q}V.d(Me,{m:()=>l})},4699:(ft,Me,V)=>{V.d(Me,{c:()=>O});var l=V(9206),q=V(3693);function O(le){return(0,q.m)(le[l.L])}},6758:(ft,Me,V)=>{V.d(Me,{T:()=>O});var l=V(2502),q=V(3693);function O(le){return(0,q.m)(le?.[l.h])}},7743:(ft,Me,V)=>{V.d(Me,{t:()=>q});var l=V(3693);function q(O){return(0,l.m)(O?.then)}},8901:(ft,Me,V)=>{V.d(Me,{L:()=>le,Q:()=>O});var l=V(9312),q=V(3693);function O(ce){return(0,l.FC)(this,arguments,function*(){const pe=ce.getReader();try{for(;;){const{value:ge,done:ve}=yield(0,l.qq)(pe.read());if(ve)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ge)}}finally{pe.releaseLock()}})}function le(ce){return(0,q.m)(ce?.getReader)}},3660:(ft,Me,V)=>{V.d(Me,{A:()=>q,e:()=>O});var l=V(3693);function q(le){return(0,l.m)(le?.lift)}function O(le){return ce=>{if(q(ce))return ce.lift(function(ye){try{return le(ye,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},1369:(ft,Me,V)=>{function l(){}V.d(Me,{Z:()=>l})},2829:(ft,Me,V)=>{V.d(Me,{U:()=>O,z:()=>q});var l=V(7631);function q(...le){return O(le)}function O(le){return 0===le.length?l.y:1===le.length?le[0]:function(ye){return le.reduce((pe,ge)=>ge(pe),ye)}}},5660:(ft,Me,V)=>{V.d(Me,{h:()=>O});var l=V(7299),q=V(3362);function O(le){q.z.setTimeout(()=>{const{onUnhandledError:ce}=l.v;if(!ce)throw le;ce(le)})}},7146:(ft,Me,V)=>{function l(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Me,{z:()=>l})},9312:(ft,Me,V)=>{function le(J,te){var me={};for(var ue in J)Object.prototype.hasOwnProperty.call(J,ue)&&te.indexOf(ue)<0&&(me[ue]=J[ue]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ue=Object.getOwnPropertySymbols(J);Be<ue.length;Be++)te.indexOf(ue[Be])<0&&Object.prototype.propertyIsEnumerable.call(J,ue[Be])&&(me[ue[Be]]=J[ue[Be]])}return me}function ce(J,te,me,ue){var pt,Be=arguments.length,He=Be<3?te:null===ue?ue=Object.getOwnPropertyDescriptor(te,me):ue;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)He=Reflect.decorate(J,te,me,ue);else for(var un=J.length-1;un>=0;un--)(pt=J[un])&&(He=(Be<3?pt(He):Be>3?pt(te,me,He):pt(te,me))||He);return Be>3&&He&&Object.defineProperty(te,me,He),He}function pe(J,te){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(J,te)}function ge(J,te,me,ue){return new(me||(me=Promise))(function(He,pt){function un(vn){try{Ke(ue.next(vn))}catch(Mn){pt(Mn)}}function Gt(vn){try{Ke(ue.throw(vn))}catch(Mn){pt(Mn)}}function Ke(vn){vn.done?He(vn.value):function Be(He){return He instanceof me?He:new me(function(pt){pt(He)})}(vn.value).then(un,Gt)}Ke((ue=ue.apply(J,te||[])).next())})}function be(J){return this instanceof be?(this.v=J,this):new be(J)}function _e(J,te,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ue=me.apply(J,te||[]),He=[];return Be={},pt("next"),pt("throw"),pt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function pt(rn){ue[rn]&&(Be[rn]=function(sn){return new Promise(function(Wt,Bt){He.push([rn,sn,Wt,Bt])>1||un(rn,sn)})})}function un(rn,sn){try{!function Gt(rn){rn.value instanceof be?Promise.resolve(rn.value.v).then(Ke,vn):Mn(He[0][2],rn)}(ue[rn](sn))}catch(Wt){Mn(He[0][3],Wt)}}function Ke(rn){un("next",rn)}function vn(rn){un("throw",rn)}function Mn(rn,sn){rn(sn),He.shift(),He.length&&un(He[0][0],He[0][1])}}function et(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,te=J[Symbol.asyncIterator];return te?te.call(J):(J=function X(J){var te="function"==typeof Symbol&&Symbol.iterator,me=te&&J[te],ue=0;if(me)return me.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ue>=J.length&&(J=void 0),{value:J&&J[ue++],done:!J}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),me={},ue("next"),ue("throw"),ue("return"),me[Symbol.asyncIterator]=function(){return this},me);function ue(He){me[He]=J[He]&&function(pt){return new Promise(function(un,Gt){!function Be(He,pt,un,Gt){Promise.resolve(Gt).then(function(Ke){He({value:Ke,done:un})},pt)}(un,Gt,(pt=J[He](pt)).done,pt.value)})}}}V.d(Me,{FC:()=>_e,KL:()=>et,_T:()=>le,gn:()=>ce,mG:()=>ge,qq:()=>be,w6:()=>pe})},5102:(ft,Me,V)=>{V.d(Me,{$8M:()=>Eu,$Z:()=>Qv,AFp:()=>MI,AaK:()=>ge,CHM:()=>Ff,CRH:()=>Ab,CZH:()=>$a,CqO:()=>Nw,D6c:()=>WI,DdM:()=>ds,EJc:()=>aM,EpF:()=>kw,F$t:()=>Fw,F4k:()=>rT,FYo:()=>vv,FiY:()=>We,G48:()=>mn,GfV:()=>wv,Gpc:()=>G,Hsn:()=>L,JOm:()=>Na,Jf7:()=>Nv,KtG:()=>na,LFG:()=>ir,LSH:()=>TE,Lbi:()=>kI,Lck:()=>oI,MAs:()=>Mw,MMx:()=>Yp,NdJ:()=>Pw,OlP:()=>Pn,Oqu:()=>Fp,PXZ:()=>FI,Q6J:()=>s_,QGY:()=>Rw,QP$:()=>Le,QbO:()=>sM,Qsj:()=>RE,R0b:()=>Gn,RDi:()=>_m,Rgc:()=>Zh,SBq:()=>kl,Sil:()=>lM,Suo:()=>Sb,TTD:()=>qs,TgZ:()=>o_,Tol:()=>dT,W1O:()=>G_,X6Q:()=>qr,XFs:()=>tt,Xpm:()=>De,Xts:()=>Tc,Y36:()=>Pc,YKP:()=>Ha,YNc:()=>i_,Yjl:()=>$,Yz7:()=>sn,Z0I:()=>ts,ZZ4:()=>ly,_Bn:()=>Kp,_UZ:()=>l_,_Vd:()=>up,_c5:()=>GI,_uU:()=>mT,aQg:()=>Jb,c2e:()=>oM,cJS:()=>Bt,cg1:()=>Oh,dDg:()=>OI,dqk:()=>Nt,eFA:()=>Qn,ekj:()=>Np,eoX:()=>cg,f3M:()=>I,g9A:()=>Ob,h0i:()=>Gc,hGG:()=>Xb,hij:()=>Lp,iGM:()=>bI,ifc:()=>mt,ip1:()=>Nb,jDz:()=>gb,kL8:()=>w_,lG2:()=>Q,lqb:()=>ka,lri:()=>Hb,n5z:()=>Ks,oAB:()=>en,oxw:()=>aT,q4F:()=>iA,qLn:()=>cp,qOj:()=>Ew,qZA:()=>a_,rWj:()=>jb,sBO:()=>_M,sIi:()=>Ap,s_b:()=>j_,soG:()=>X_,tb:()=>li,tp0:()=>kt,uIk:()=>Sw,vHH:()=>Ie,vpe:()=>fe,wAp:()=>Dt,xp6:()=>Om,z2F:()=>fg,zSh:()=>fv,zs3:()=>Nc});var l=V(3149),q=V(3627),O=V(4915),le=V(4749),ce=V(8288);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function pe(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function ge(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ge).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=ye({__forward_ref__:ye});function G(o){return o.__forward_ref__=G,o.toString=function(){return ge(this())},o}function X(o){return $e(o)?o():o}function $e(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===G}class Ie extends Error{constructor(a,u){super(function ot(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function be(o){return"string"==typeof o?o:null==o?"":String(o)}function ke(o,a){throw new Ie(-201,!1)}function Gt(o,a){null==o&&function Ke(o,a,u,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${u} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function sn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Bt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Vr(o){return ti(o,ni)||ti(o,Bi)}function ts(o){return null!==Vr(o)}function ti(o,a){return o.hasOwnProperty(a)?o[a]:null}function rs(o){return o&&(o.hasOwnProperty(Wn)||o.hasOwnProperty(is))?o[Wn]:null}const ni=ye({\u0275prov:ye}),Wn=ye({\u0275inj:ye}),Bi=ye({ngInjectableDef:ye}),is=ye({ngInjectorDef:ye});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let dr;function Dn(o){const a=dr;return dr=o,a}function xr(o,a,u){const d=Vr(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&tt.Optional?null:void 0!==a?a:void ke(ge(o))}function Sn(o){return{toString:o}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),mt=(()=>{return(o=mt||(mt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",mt;var o})();const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gr={},Mt=[],Wr=ye({\u0275cmp:ye}),Ut=ye({\u0275dir:ye}),ci=ye({\u0275pipe:ye}),Xt=ye({\u0275mod:ye}),Er=ye({\u0275fac:ye}),Ln=ye({__NG_ELEMENT_ID__:ye});let rt=0;function De(o){return Sn(()=>{const u=!0===o.standalone,d={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Mt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||mt.Emulated,id:"c"+rt++,styles:o.styles||Mt,_:null,setInput:null,schemas:o.schemas||null,tView:null},g=o.dependencies,v=o.features;return f.inputs=Z(o.inputs,d),f.outputs=Z(o.outputs),v&&v.forEach(b=>b(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Tt).filter(It):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(ie).filter(It):null,f})}function Tt(o){return R(o)||H(o)}function It(o){return null!==o}function en(o){return Sn(()=>({type:o.type,bootstrap:o.bootstrap||Mt,declarations:o.declarations||Mt,imports:o.imports||Mt,exports:o.exports||Mt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Z(o,a){if(null==o)return Gr;const u={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),u[f]=d,a&&(a[f]=g)}return u}const Q=De;function $(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function R(o){return o[Wr]||null}function H(o){return o[Ut]||null}function ie(o){return o[ci]||null}function Le(o){const a=R(o)||H(o)||ie(o);return null!==a&&a.standalone}function at(o,a){const u=o[Xt]||null;if(!u&&!0===a)throw new Error(`Type ${ge(o)} does not have '\u0275mod' property.`);return u}function hr(o){return Array.isArray(o)&&"object"==typeof o[1]}function Ei(o){return Array.isArray(o)&&!0===o[1]}function zo(o){return 0!=(8&o.flags)}function Xu(o){return 2==(2&o.flags)}function rl(o){return 1==(1&o.flags)}function hi(o){return null!==o.template}function ec(o){return 0!=(256&o[2])}function Br(o,a){return o.hasOwnProperty(Er)?o[Er]:null}class Jo{constructor(a,u,d){this.previousValue=a,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function qs(){return Td}function Td(o){return o.type.prototype.ngOnChanges&&(o.setInput=nc),du}function du(){const o=Xo(this),a=o?.current;if(a){const u=o.previous;if(u===Gr)o.previous=a;else for(let d in a)u[d]=a[d];o.current=null,this.ngOnChanges(a)}}function nc(o,a,u,d){const f=Xo(o)||function Dd(o,a){return o[Id]=a}(o,{previous:Gr,current:null}),g=f.current||(f.current={}),v=f.previous,b=this.declaredInputs[u],T=v[b];g[b]=new Jo(T&&T.currentValue,a,v===Gr),o[d]=a}qs.ngInherit=!0;const Id="__ngSimpleChanges__";function Xo(o){return o[Id]||null}function $n(o){for(;Array.isArray(o);)o=o[0];return o}function Hi(o,a){return $n(a[o])}function Hr(o,a){return $n(a[o.index])}function Eo(o,a){return o.data[a]}function cn(o,a){const u=a[o];return hr(u)?u:u[0]}function Zs(o){return 64==(64&o[2])}function Ii(o,a){return null==a?null:o[a]}function ol(o){o[18]=0}function zn(o,a){o[5]+=a;let u=o,d=o[3];for(;null!==d&&(1===a&&1===u[5]||-1===a&&0===u[5]);)d[5]+=a,u=d,d=d[3]}const Lt={lFrame:ml(null),bindingsEnabled:!0};function Co(){return Lt.bindingsEnabled}function Re(){return Lt.lFrame.lView}function Qt(){return Lt.lFrame.tView}function Ff(o){return Lt.lFrame.contextLView=o,o[8]}function na(o){return Lt.lFrame.contextLView=null,o}function fr(){let o=ra();for(;null!==o&&64===o.type;)o=o.parent;return o}function ra(){return Lt.lFrame.currentTNode}function ii(o,a){const u=Lt.lFrame;u.currentTNode=o,u.isParent=a}function pu(){return Lt.lFrame.isParent}function ia(){Lt.lFrame.isParent=!1}function fl(){return Lt.lFrame.bindingIndex++}function Is(o){const a=Lt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Md(o,a){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=o,sa(a)}function sa(o){Lt.lFrame.currentDirectiveIndex=o}function pl(){return Lt.lFrame.currentQueryIndex}function lc(o){Lt.lFrame.currentQueryIndex=o}function gl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function kd(o,a,u){if(u&tt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||u&tt.Host||(f=gl(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const d=Lt.lFrame=Vf();return d.currentTNode=a,d.lView=o,!0}function oa(o){const a=Vf(),u=o[1];Lt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Vf(){const o=Lt.lFrame,a=null===o?null:o.child;return null===a?ml(o):a}function ml(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Bf(){const o=Lt.lFrame;return Lt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Rd=Bf;function Gs(){const o=Bf();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Bn(){return Lt.lFrame.selectedIndex}function Ds(o){Lt.lFrame.selectedIndex=o}function Hn(){const o=Lt.lFrame;return Eo(o.tView,o.selectedIndex)}function gu(o,a){for(let u=a.directiveStart,d=a.directiveEnd;u<d;u++){const g=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:T,ngAfterViewChecked:A,ngOnDestroy:N}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-u,v),b&&((o.contentHooks||(o.contentHooks=[])).push(u,b),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,b)),T&&(o.viewHooks||(o.viewHooks=[])).push(-u,T),A&&((o.viewHooks||(o.viewHooks=[])).push(u,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,A)),null!=N&&(o.destroyHooks||(o.destroyHooks=[])).push(u,N)}}function aa(o,a,u){ua(o,a,3,u)}function la(o,a,u,d){(3&o[2])===u&&ua(o,a,u,d)}function Od(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function ua(o,a,u,d){const g=d??-1,v=a.length-1;let b=0;for(let T=void 0!==d?65535&o[18]:0;T<v;T++)if("number"==typeof a[T+1]){if(b=a[T],null!=d&&b>=d)break}else a[T]<0&&(o[18]+=65536),(b<g||-1==g)&&(Fd(o,u,a,T),o[18]=(4294901760&o[18])+T+2),T++}function Fd(o,a,u,d){const f=u[d]<0,g=u[d+1],b=o[f?-u[d]:u[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(b)}finally{}}}else try{g.call(b)}finally{}}class Di{constructor(a,u,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Ss(o,a,u){let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const g=u[d++],v=u[d++],b=u[d++];o.setAttribute(a,v,b,g)}else{const g=f,v=u[++d];pc(g)?o.setProperty(a,g,v):o.setAttribute(a,g,v),d++}}return d}function yl(o){return 3===o||4===o||6===o}function pc(o){return 64===o.charCodeAt(0)}function vl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?u=f:0===u||Ud(o,u,f,null,-1===u||2===u?a[++d]:null)}}return o}function Ud(o,a,u,d,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const b=o[g++];if("number"==typeof b){if(b===a){v=-1;break}if(b>a){v=g-1;break}}}for(;g<o.length;){const b=o[g];if("number"==typeof b)break;if(b===u){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,u),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function $f(o){return-1!==o}function gr(o){return 32767&o}function zs(o,a){let u=function qf(o){return o>>16}(o),d=a;for(;u>0;)d=d[15],u--;return d}let gc=!0;function wl(o){const a=gc;return gc=o,a}let Vd=0;const gi={};function As(o,a){const u=vu(o,a);if(-1!==u)return u;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,mc(d.data,o),mc(a,null),mc(d.blueprint,null));const f=bl(o,a),g=o.injectorIndex;if($f(f)){const v=gr(f),b=zs(f,a),T=b[1].data;for(let A=0;A<8;A++)a[g+A]=b[v+A]|T[v+A]}return a[g+8]=f,g}function mc(o,a){o.push(0,0,0,0,0,0,0,0,a)}function vu(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function bl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,d=null,f=a;for(;null!==f;){if(d=ma(f),null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function Io(o,a,u){!function Bd(o,a,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Ln)&&(d=u[Ln]),null==d&&(d=u[Ln]=Vd++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function da(o,a,u){if(u&tt.Optional||void 0!==o)return o;ke()}function Do(o,a,u,d){if(u&tt.Optional&&void 0===d&&(d=null),0==(u&(tt.Self|tt.Host))){const f=o[9],g=Dn(void 0);try{return f?f.get(a,d,u&tt.Optional):xr(a,d,u&tt.Optional)}finally{Dn(g)}}return da(d,0,u)}function ha(o,a,u,d=tt.Default,f){if(null!==o){if(1024&a[2]){const v=function Wf(o,a,u,d,f){let g=o,v=a;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const b=Hd(g,v,u,d|tt.Self,gi);if(b!==gi)return b;let T=g.parent;if(!T){const A=v[21];if(A){const N=A.get(u,gi,d);if(N!==gi)return N}T=ma(v),v=v[15]}g=T}return f}(o,a,u,d,gi);if(v!==gi)return v}const g=Hd(o,a,u,d,gi);if(g!==gi)return g}return Do(a,u,d,f)}function Hd(o,a,u,d,f){const g=function Gf(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Ln)?o[Ln]:void 0;return"number"==typeof a?a>=0?255&a:_c:a}(u);if("function"==typeof g){if(!kd(a,o,d))return d&tt.Host?da(f,0,d):Do(a,u,d,f);try{const v=g(d);if(null!=v||d&tt.Optional)return v;ke()}finally{Rd()}}else if("number"==typeof g){let v=null,b=vu(o,a),T=-1,A=d&tt.Host?a[16][6]:null;for((-1===b||d&tt.SkipSelf)&&(T=-1===b?bl(o,a):a[b+8],-1!==T&&bu(d,!1)?(v=a[1],b=gr(T),a=zs(T,a)):b=-1);-1!==b;){const N=a[1];if(fa(g,b,N.data)){const B=wu(b,a,u,v,d,A);if(B!==gi)return B}T=a[b+8],-1!==T&&bu(d,a[1].data[b+8]===A)&&fa(g,b,a)?(v=N,b=gr(T),a=zs(T,a)):b=-1}}return f}function wu(o,a,u,d,f,g){const v=a[1],b=v.data[o+8],N=Cl(b,v,u,null==d?Xu(b)&&gc:d!=v&&0!=(3&b.type),f&tt.Host&&g===b);return null!==N?as(a,v,N,b):gi}function Cl(o,a,u,d,f){const g=o.providerIndexes,v=a.data,b=1048575&g,T=o.directiveStart,N=g>>20,K=f?b+N:o.directiveEnd;for(let se=d?b:b+N;se<K;se++){const Te=v[se];if(se<T&&u===Te||se>=T&&Te.type===u)return se}if(f){const se=v[T];if(se&&hi(se)&&se.type===u)return T}return null}function as(o,a,u,d){let f=o[u];const g=a.data;if(function fc(o){return o instanceof Di}(f)){const v=f;v.resolving&&function nt(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${o}${u}`)}(function _e(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():be(o)}(g[u]));const b=wl(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?Dn(v.injectImpl):null;kd(o,d,tt.Default);try{f=o[u]=v.factory(void 0,g,o,d),a.firstCreatePass&&u>=d.directiveStart&&function hc(o,a,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const v=Td(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,g))}(u,g[u],a)}finally{null!==T&&Dn(T),wl(b),v.resolving=!1,Rd()}}return f}function fa(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function bu(o,a){return!(o&tt.Self||o&tt.Host&&a)}class pa{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,d){return ha(this._tNode,this._lView,a,d,u)}}function _c(){return new pa(fr(),Re())}function Ks(o){return Sn(()=>{const a=o.prototype.constructor,u=a[Er]||ga(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[Er]||ga(f);if(g&&g!==u)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function ga(o){return $e(o)?()=>{const a=ga(X(o));return a&&a()}:Br(o)}function ma(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Eu(o){return function El(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const g=u[f];if(yl(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(g===a)return u[f+1];f+=2}}}return null}(fr(),o)}const _a="__parameters__";function va(o,a,u){return Sn(()=>{const d=function yc(o){return function(...u){if(o){const d=o(...u);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return b.annotation=v,b;function b(T,A,N){const B=T.hasOwnProperty(_a)?T[_a]:Object.defineProperty(T,_a,{value:[]})[_a];for(;B.length<=N;)B.push(null);return(B[N]=B[N]||[]).push(v),T}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Pn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=sn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pn(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let d=o[u];Array.isArray(d)?(a===o&&(a=o.slice(0,u)),pn(d,a)):a!==o&&a.push(d)}return a}function Cr(o,a){o.forEach(u=>Array.isArray(u)?Cr(u,a):a(u))}function qi(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Un(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function An(o,a){const u=[];for(let d=0;d<o;d++)u.push(a);return u}function _i(o,a,u){let d=us(o,a);return d>=0?o[1|d]=u:(d=~d,function $d(o,a,u,d){let f=o.length;if(f==a)o.push(u,d);else if(1===f)o.push(d,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=d}}(o,d,a,u)),d}function Tl(o,a){const u=us(o,a);if(u>=0)return o[1|u]}function us(o,a){return function Il(o,a,u){let d=0,f=o.length>>u;for(;f!==d;){const g=d+(f-d>>1),v=o[g<<u];if(a===v)return g<<u;v>a?f=g:d=g+1}return~(f<<u)}(o,a,1)}const cs={},qn="__NG_DI_FLAG__",Ys="ngTempTokenPath",Ea=/\n/gm,Sl="__source";let Ms;function ks(o){const a=Ms;return Ms=o,a}function Gd(o,a=tt.Default){if(void 0===Ms)throw new Ie(-203,!1);return null===Ms?xr(o,void 0,a):Ms.get(o,a&tt.Optional?null:void 0,a)}function ir(o,a=tt.Default){return(function er(){return dr}()||Gd)(X(o),a)}function I(o,a=tt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),ir(o,a)}function S(o){const a=[];for(let u=0;u<o.length;u++){const d=X(o[u]);if(Array.isArray(d)){if(0===d.length)throw new Ie(900,!1);let f,g=tt.Default;for(let v=0;v<d.length;v++){const b=d[v],T=j(b);"number"==typeof T?-1===T?f=b.token:g|=T:f=b}a.push(ir(f,g))}else a.push(ir(d))}return a}function k(o,a){return o[qn]=a,o.prototype[qn]=a,o}function j(o){return o[qn]}const We=k(va("Optional"),8),kt=k(va("SkipSelf"),4);let Qf;function _m(o){Qf=o}class Mo{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ko(o){return o instanceof Mo?o.changingThisBreaksApplicationSecurity:o}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var _r=(()=>((_r=_r||{})[_r.NONE=0]="NONE",_r[_r.HTML=1]="HTML",_r[_r.STYLE=2]="STYLE",_r[_r.SCRIPT=3]="SCRIPT",_r[_r.URL=4]="URL",_r[_r.RESOURCE_URL=5]="RESOURCE_URL",_r))();function TE(o){const a=function Cc(){const o=Re();return o&&o[12]}();return a?a.sanitize(_r.URL,o)||"":function Ml(o,a){const u=function rp(o){return o instanceof Mo&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}(o,"URL")?ko(o):function y(o){return(o=String(o)).match(m)?o:"unsafe:"+o}(be(o))}const Tc=new Pn("ENVIRONMENT_INITIALIZER"),ap=new Pn("INJECTOR",-1),Ic=new Pn("INJECTOR_DEF_TYPES");class Xd{get(a,u=cs){if(u===cs){const d=new Error(`NullInjectorError: No provider for ${ge(a)}!`);throw d.name="NullInjectorError",d}return u}}function uv(...o){return{\u0275providers:cv(0,o)}}function cv(o,...a){const u=[],d=new Set;let f;return Cr(a,g=>{const v=g;Em(v,u,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&bm(f,u),u}function bm(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];Cr(f,g=>{a.push(g)})}}function Em(o,a,u,d){if(!(o=X(o)))return!1;let f=null,g=rs(o);const v=!g&&R(o);if(g||v){if(v&&!v.standalone)return!1;f=o}else{const T=o.ngModule;if(g=rs(T),!g)return!1;f=T}const b=d.has(f);if(v){if(b)return!1;if(d.add(f),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of T)Em(A,a,u,d)}}else{if(!g)return!1;{if(null!=g.imports&&!b){let A;d.add(f);try{Cr(g.imports,N=>{Em(N,a,u,d)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&bm(A,a)}if(!b){const A=Br(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:Mt},{provide:Ic,useValue:f,multi:!0},{provide:Tc,useValue:()=>ir(f),multi:!0})}const T=g.providers;null==T||b||Cr(T,N=>{a.push(N)})}}return f!==o&&void 0!==o.providers}const DE=ye({provide:String,useValue:ye});function Cm(o){return null!==o&&"object"==typeof o&&DE in o}function eh(o){return"function"==typeof o}const fv=new Pn("Set Injector scope."),pv={},Im={};let Dc;function Sc(){return void 0===Dc&&(Dc=new Xd),Dc}class ka{}class SE extends ka{constructor(a,u,d,f){super(),this.parent=u,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gv(a,v=>this.processProvider(v)),this.records.set(ap,Ac(void 0,this)),f.has("environment")&&this.records.set(ka,Ac(void 0,this));const g=this.records.get(fv);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Ic.multi,Mt,tt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=ks(this),d=Dn(void 0);try{return a()}finally{ks(u),Dn(d)}}get(a,u=cs,d=tt.Default){this.assertNotDestroyed();const f=ks(this),g=Dn(void 0);try{if(!(d&tt.SkipSelf)){let b=this.records.get(a);if(void 0===b){const T=function XS(o){return"function"==typeof o||"object"==typeof o&&o instanceof Pn}(a)&&Vr(a);b=T&&this.injectableDefInScope(T)?Ac(lp(a),pv):null,this.records.set(a,b)}if(null!=b)return this.hydrate(a,b)}return(d&tt.Self?Sc():this.parent).get(a,u=d&tt.Optional&&u===cs?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Ys]=v[Ys]||[]).unshift(ge(a)),f)throw v;return function ee(o,a,u,d){const f=o[Ys];throw a[Sl]&&f.unshift(a[Sl]),o.message=function de(o,a,u,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=ge(a);if(Array.isArray(a))f=a.map(ge).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let b=a[v];g.push(v+":"+("string"==typeof b?JSON.stringify(b):ge(b)))}f=`{${g.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${o.replace(Ea,"\n  ")}`}("\n"+o.message,f,u,d),o.ngTokenPath=f,o[Ys]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Dn(g),ks(f)}}resolveInjectorInitializers(){const a=ks(this),u=Dn(void 0);try{const d=this.get(Tc.multi,Mt,tt.Self);for(const f of d)f()}finally{ks(a),Dn(u)}}toString(){const a=[],u=this.records;for(const d of u.keys())a.push(ge(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(a){let u=eh(a=X(a))?a:X(a&&a.provide);const d=function QS(o){return Cm(o)?Ac(void 0,o.useValue):Ac(AE(o),pv)}(a);if(eh(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Ac(void 0,pv,!0),f.factory=()=>S(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,d)}hydrate(a,u){return u.value===pv&&(u.value=Im,u.value=u.factory()),"object"==typeof u.value&&u.value&&function xE(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=X(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function lp(o){const a=Vr(o),u=null!==a?a.factory:Br(o);if(null!==u)return u;if(o instanceof Pn)throw new Ie(204,!1);if(o instanceof Function)return function Dm(o){const a=o.length;if(a>0)throw An(a,"?"),new Ie(204,!1);const u=function jn(o){const a=o&&(o[ni]||o[Bi]);if(a){const u=function ns(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ie(204,!1)}function AE(o,a,u){let d;if(eh(o)){const f=X(o);return Br(f)||lp(f)}if(Cm(o))d=()=>X(o.useValue);else if(function Tm(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...S(o.deps||[]));else if(function hv(o){return!(!o||!o.useExisting)}(o))d=()=>ir(X(o.useExisting));else{const f=X(o&&(o.useClass||o.provide));if(!function JS(o){return!!o.deps}(o))return Br(f)||lp(f);d=()=>new f(...S(o.deps))}return d}function Ac(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function nP(o){return!!o.\u0275providers}function gv(o,a){for(const u of o)Array.isArray(u)?gv(u,a):nP(u)?gv(u.\u0275providers,a):a(u)}class eA{}class _v{resolveComponentFactory(a){throw function mv(o){const a=Error(`No component factory found for ${ge(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let up=(()=>{class o{}return o.NULL=new _v,o})();function rP(){return th(fr(),Re())}function th(o,a){return new kl(Hr(o,a))}let kl=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=rP,o})();function yv(o){return o instanceof kl?o.nativeElement:o}class vv{}let RE=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function iP(){const o=Re(),u=cn(fr().index,o);return(hr(u)?u:o)[11]}(),o})(),rA=(()=>{class o{}return o.\u0275prov=sn({token:o,providedIn:"root",factory:()=>null}),o})();class wv{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const iA=new wv("14.2.10"),NE={};function xm(o){return o.ngOriginalError}class cp{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&xm(a);for(;u&&xm(u);)u=xm(u);return u||null}}const Mv=new Map;let UE=0;const Rv="__ngContext__";function yi(o,a){hr(a)?(o[Rv]=a[20],function kv(o){Mv.set(o[20],o)}(a)):o[Rv]=a}function Nv(o){return o.ownerDocument.defaultView}function Ra(o){return o instanceof Function?o():o}var Na=(()=>((Na=Na||{})[Na.Important=1]="Important",Na[Na.DashCase=2]="DashCase",Na))();function Pv(o,a){return undefined(o,a)}function Rm(o){const a=o[3];return Ei(a)?a[3]:a}function YE(o){return Ai(o[13])}function no(o){return Ai(o[4])}function Ai(o){for(;null!==o&&!Ei(o);)o=o[4];return o}function Rl(o,a,u,d,f){if(null!=d){let g,v=!1;Ei(d)?g=d:hr(d)&&(v=!0,d=d[0]);const b=$n(d);0===o&&null!==u?null==f?Lv(a,u,b):Pa(a,u,b,f||null,!0):1===o&&null!==u?Pa(a,u,b,f||null,!0):2===o?function Mc(o,a,u){const d=Ro(o,a);d&&function Ol(o,a,u,d){o.removeChild(a,u,d)}(o,d,a,u)}(a,b,v):3===o&&a.destroyNode(b),null!=g&&function iC(o,a,u,d,f){const g=u[7];g!==$n(u)&&Rl(a,o,d,g,f);for(let b=10;b<u.length;b++){const T=u[b];pp(T[1],T,o,a,d,g)}}(a,o,g,u,f)}}function Ov(o,a,u){return o.createElement(a,u)}function ih(o,a){const u=o[9],d=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,zn(f,-1)),u.splice(d,1)}function Nl(o,a){if(o.length<=10)return;const u=10+a,d=o[u];if(d){const f=d[17];null!==f&&f!==o&&ih(f,d),a>0&&(o[u-1][4]=d[4]);const g=Un(o,10+a);!function XE(o,a){pp(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=g[19];null!==v&&v.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function xc(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&pp(o,a,u,3,null,null),function Fv(o){let a=o[13];if(!a)return hp(o[1],o);for(;a;){let u=null;if(hr(a))u=a[13];else{const d=a[10];d&&(u=d)}if(!u){for(;a&&!a[4]&&a!==o;)hr(a)&&hp(a[1],a),a=a[3];null===a&&(a=o),hr(a)&&hp(a[1],a),u=a&&a[4]}a=u}}(a)}}function hp(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Rr(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let d=0;d<u.length;d+=2){const f=a[u[d]];if(!(f instanceof Di)){const g=u[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const b=f[g[v]],T=g[v+1];try{T.call(b)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function tC(o,a){const u=o.cleanup,d=a[7];let f=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],b="function"==typeof v?v(a):$n(a[v]),T=d[f=u[g+2]],A=u[g+3];"boolean"==typeof A?b.removeEventListener(u[g],T,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),g+=2}else{const v=d[f=u[g+1]];u[g].call(v)}if(null!==d){for(let g=f+1;g<d.length;g++)(0,d[g])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&Ei(a[3])){u!==a[3]&&ih(u,a);const d=a[19];null!==d&&d.detachView(o)}!function dA(o){Mv.delete(o[20])}(a)}}function Pl(o,a,u){return function fp(o,a,u){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return u[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===mt.None||f===mt.Emulated)return null}return Hr(d,u)}(o,a.parent,u)}function Pa(o,a,u,d,f){o.insertBefore(a,u,d,f)}function Lv(o,a,u){o.appendChild(a,u)}function nC(o,a,u,d,f){null!==d?Pa(o,a,u,d,f):Lv(o,a,u)}function Ro(o,a){return o.parentNode(a)}function Au(o,a,u){return Uv(o,a,u)}let Uv=function Nm(o,a,u){return 40&o.type?Hr(o,u):null};function sh(o,a,u,d){const f=Pl(o,d,a),g=a[11],b=Au(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(u))for(let T=0;T<u.length;T++)nC(g,f,u[T],b,!1);else nC(g,f,u,b,!1)}function Kt(o,a){if(null!==a){const u=a.type;if(3&u)return Hr(a,o);if(4&u)return Bv(-1,o[a.index]);if(8&u){const d=a.child;if(null!==d)return Kt(o,d);{const f=o[a.index];return Ei(f)?Bv(-1,f):$n(f)}}if(32&u)return Pv(a,o)()||$n(o[a.index]);{const d=oh(o,a);return null!==d?Array.isArray(d)?d[0]:Kt(Rm(o[16]),d):Kt(o,a.next)}}return null}function oh(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Bv(o,a){const u=10+o+1;if(u<a.length){const d=a[u],f=d[1].firstChild;if(null!==f)return Kt(d,f)}return a[7]}function Hv(o,a,u,d,f,g,v){for(;null!=u;){const b=d[u.index],T=u.type;if(v&&0===a&&(b&&yi($n(b),d),u.flags|=4),64!=(64&u.flags))if(8&T)Hv(o,a,u.child,d,f,g,!1),Rl(a,o,f,b,g);else if(32&T){const A=Pv(u,d);let N;for(;N=A();)Rl(a,o,f,N,g);Rl(a,o,f,b,g)}else 16&T?jv(o,a,d,u,f,g):Rl(a,o,f,b,g);u=v?u.projectionNext:u.next}}function pp(o,a,u,d,f,g){Hv(u,d,o.firstChild,a,f,g,!1)}function jv(o,a,u,d,f,g){const v=u[16],T=v[6].projection[d.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)Rl(a,o,f,T[A],g);else Hv(o,a,T,v[3],f,g,!0)}function EA(o,a,u){o.setAttribute(a,"style",u)}function Yr(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function Fl(o,a,u){let d=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}u=f+1}}const aC="ng-template";function CA(o,a,u){let d=0;for(;d<o.length;){let f=o[d++];if(u&&"class"===f){if(f=o[d],-1!==Fl(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function $v(o){return 4===o.type&&o.value!==aC}function lC(o,a,u){return a===(4!==o.type||u?o.value:aC)}function TA(o,a,u){let d=4;const f=o.attrs||[],g=function Pm(o){for(let a=0;a<o.length;a++)if(yl(o[a]))return a;return o.length}(f);let v=!1;for(let b=0;b<a.length;b++){const T=a[b];if("number"!=typeof T){if(!v)if(4&d){if(d=2|1&d,""!==T&&!lC(o,T,u)||""===T&&1===a.length){if(ro(d))return!1;v=!0}}else{const A=8&d?T:a[++b];if(8&d&&null!==o.attrs){if(!CA(o.attrs,A,u)){if(ro(d))return!1;v=!0}continue}const B=IA(8&d?"class":T,f,$v(o),u);if(-1===B){if(ro(d))return!1;v=!0;continue}if(""!==A){let K;K=B>g?"":f[B+1].toLowerCase();const se=8&d?K:null;if(se&&-1!==Fl(se,A,0)||2&d&&A!==K){if(ro(d))return!1;v=!0}}}}else{if(!v&&!ro(d)&&!ro(T))return!1;if(v&&ro(T))continue;v=!1,d=T|1&d}}return ro(d)||v}function ro(o){return 0==(1&o)}function IA(o,a,u,d){if(null===a)return-1;let f=0;if(d||!u){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let b=a[++f];for(;"string"==typeof b;)b=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function kc(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const d=o[u];if("number"==typeof d)return-1;if(d===a)return u;u++}return-1}(a,o)}function qv(o,a,u=!1){for(let d=0;d<a.length;d++)if(TA(o,a[d],u))return!0;return!1}function nn(o,a){e:for(let u=0;u<a.length;u++){const d=a[u];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function ah(o,a){return o?":not("+a.trim()+")":a}function DA(o){let a=o[0],u=1,d=2,f="",g=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&d){const b=o[++u];f+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!ro(v)&&(a+=ah(g,f),f=""),d=v,g=g||!ro(d);u++}return""!==f&&(a+=ah(g,f)),a}const Zt={};function Om(o){cC(Qt(),Re(),Bn()+o,!1)}function cC(o,a,u,d){if(!d)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&aa(a,g,u)}else{const g=o.preOrderHooks;null!==g&&la(a,g,0,u)}Ds(u)}function fC(o,a=null,u=null,d){const f=pC(o,a,u,d);return f.resolveInjectorInitializers(),f}function pC(o,a=null,u=null,d,f=new Set){const g=[u||Mt,uv(o)];return d=d||("object"==typeof o?void 0:ge(o)),new SE(g,a||Sc(),d||null,f)}let Nc=(()=>{class o{static create(u,d){if(Array.isArray(u))return fC({name:""},d,u,"");{const f=u.name??"";return fC({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=cs,o.NULL=new Xd,o.\u0275prov=sn({token:o,providedIn:"any",factory:()=>ir(ap)}),o.__NG_ELEMENT_ID__=-1,o})();function Pc(o,a=tt.Default){const u=Re();return null===u?ir(o,a):ha(fr(),u,X(o),a)}function Qv(){throw new Error("invalid")}function hh(o,a){return o<<17|a<<2}function vi(o){return o>>17&32767}function Jv(o){return 2|o}function Ll(o){return(131068&o)>>2}function Xv(o,a){return-131069&o|a<<2}function ew(o){return 1|o}function VA(o,a){const u=o.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],g=u[d+1];if(-1!==g){const v=o.data[g];lc(f),v.contentQueries(2,a[g],g)}}}function ph(o,a,u,d,f,g,v,b,T,A,N){const B=a.blueprint.slice();return B[0]=f,B[2]=76|d,(null!==N||o&&1024&o[2])&&(B[2]|=1024),ol(B),B[3]=B[15]=o,B[8]=u,B[10]=v||o&&o[10],B[11]=b||o&&o[11],B[12]=T||o&&o[12]||null,B[9]=A||o&&o[9]||null,B[6]=g,B[20]=function cA(){return UE++}(),B[21]=N,B[16]=2==a.type?o[16]:B,B}function gh(o,a,u,d,f){let g=o.data[a];if(null===g)g=function aw(o,a,u,d,f){const g=ra(),v=pu(),T=o.data[a]=function HA(o,a,u,d,f,g){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,a,d,f);return null===o.firstChild&&(o.firstChild=T),null!==g&&(v?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T)),T}(o,a,u,d,f),function xd(){return Lt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=d,g.attrs=f;const v=function fu(){const o=Lt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ii(g,!0),g}function mh(o,a,u,d){if(0===u)return-1;const f=a.length;for(let g=0;g<u;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function Cp(o,a,u){oa(a);try{const d=o.viewQuery;null!==d&&Eh(1,d,u);const f=o.template;null!==f&&lw(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&VA(o,a),o.staticViewQueries&&Eh(2,o.viewQuery,u);const g=o.components;null!==g&&function AP(o,a){for(let u=0;u<a.length;u++)JA(o,a[u])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Gs()}}function Qi(o,a,u,d){const f=a[2];if(128!=(128&f)){oa(a);try{ol(a),function hl(o){return Lt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&lw(o,a,u,2,d);const v=3==(3&f);if(v){const A=o.preOrderCheckHooks;null!==A&&aa(a,A,null)}else{const A=o.preOrderHooks;null!==A&&la(a,A,0,null),Od(a,0)}if(function Qm(o){for(let a=YE(o);null!==a;a=no(a)){if(!a[2])continue;const u=a[9];for(let d=0;d<u.length;d++){const f=u[d],g=f[3];0==(512&f[2])&&zn(g,1),f[2]|=512}}}(a),function mw(o){for(let a=YE(o);null!==a;a=no(a))for(let u=10;u<a.length;u++){const d=a[u],f=d[1];Zs(d)&&Qi(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&VA(o,a),v){const A=o.contentCheckHooks;null!==A&&aa(a,A)}else{const A=o.contentHooks;null!==A&&la(a,A,1),Od(a,1)}!function DP(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)Ds(~f);else{const g=f,v=u[++d],b=u[++d];Md(v,g),b(2,a[g])}}}finally{Ds(-1)}}(o,a);const b=o.components;null!==b&&function SP(o,a){for(let u=0;u<a.length;u++)QA(o,a[u])}(a,b);const T=o.viewQuery;if(null!==T&&Eh(2,T,d),v){const A=o.viewCheckHooks;null!==A&&aa(a,A)}else{const A=o.viewHooks;null!==A&&la(a,A,2),Od(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,zn(a[3],-1))}finally{Gs()}}}function lw(o,a,u,d,f){const g=Bn(),v=2&d;try{Ds(-1),v&&a.length>22&&cC(o,a,22,!1),u(d,f)}finally{Ds(g)}}function uw(o,a,u){!Co()||(function fw(o,a,u,d){const f=u.directiveStart,g=u.directiveEnd;o.firstCreatePass||As(u,a),yi(d,a);const v=u.initialInputs;for(let b=f;b<g;b++){const T=o.data[b],A=hi(T);A&&KA(a,u,T);const N=as(a,o,b,u);yi(N,a),null!==v&&VC(0,b-f,N,T,0,v),A&&(cn(u.index,a)[8]=N)}}(o,a,u,Hr(u,a)),128==(128&u.flags)&&function Ym(o,a,u){const d=u.directiveStart,f=u.directiveEnd,g=u.index,v=function Uf(){return Lt.lFrame.currentDirectiveIndex}();try{Ds(g);for(let b=d;b<f;b++){const T=o.data[b],A=a[b];sa(b),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Fc(T,A)}}finally{Ds(-1),sa(v)}}(o,a,u))}function cw(o,a,u=Hr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],b=-1===v?u(a,o):o[v];o[f++]=b}}}function dw(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=yh(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function yh(o,a,u,d,f,g,v,b,T,A){const N=22+d,B=N+f,K=function BA(o,a){const u=[];for(let d=0;d<a;d++)u.push(d<o?null:Zt);return u}(N,B),se="function"==typeof A?A():A;return K[1]={type:o,blueprint:K,template:u,queries:null,viewQuery:b,declTNode:a,data:K.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:se,incompleteFirstPass:!1}}function wh(o,a,u,d){const f=Ch(a);null===u?f.push(d):(f.push(u),o.firstCreatePass&&vw(o).push(d,f.length-1))}function PC(o,a,u){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(a,f):u[d]=[a,f]}return u}function bh(o,a){const d=a.directiveEnd,f=o.data,g=a.attrs,v=[];let b=null,T=null;for(let A=a.directiveStart;A<d;A++){const N=f[A],B=N.inputs,K=null===g||$v(a)?null:YA(B,g);v.push(K),b=PC(B,A,b),T=PC(N.outputs,A,T)}null!==b&&(b.hasOwnProperty("class")&&(a.flags|=16),b.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=b,a.outputs=T}function OC(o,a){const u=cn(a,o);16&u[2]||(u[2]|=32)}function hw(o,a,u,d){let f=!1;if(Co()){const g=function GA(o,a,u){const d=o.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const v=d[g];qv(u,v.selectors,!1)&&(f||(f=[]),Io(As(u,a),o,v.type),hi(v)?(FC(o,u),f.unshift(v)):f.push(v))}return f}(o,a,u),v=null===d?null:{"":-1};if(null!==g){f=!0,LC(u,o.data.length,g.length);for(let N=0;N<g.length;N++){const B=g[N];B.providersResolver&&B.providersResolver(B)}let b=!1,T=!1,A=mh(o,a,g.length,null);for(let N=0;N<g.length;N++){const B=g[N];u.mergedAttrs=vl(u.mergedAttrs,B.hostAttrs),UC(o,u,a,A,B),zA(A,B,v),null!==B.contentQueries&&(u.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(u.flags|=128);const K=B.type.prototype;!b&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),b=!0),!T&&(K.ngOnChanges||K.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),T=!0),A++}bh(o,u)}v&&function WA(o,a,u){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=u[a[f+1]];if(null==g)throw new Ie(-301,!1);d.push(a[f],g)}}}(u,d,v)}return u.mergedAttrs=vl(u.mergedAttrs,u.attrs),f}function qA(o,a,u,d,f,g){const v=g.hostBindings;if(v){let b=o.hostBindingOpCodes;null===b&&(b=o.hostBindingOpCodes=[]);const T=~a.index;(function ZA(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(b)!=T&&b.push(T),b.push(d,f,v)}}function Fc(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function FC(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function zA(o,a,u){if(u){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)u[a.exportAs[d]]=o;hi(a)&&(u[""]=o)}}function LC(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function UC(o,a,u,d,f){o.data[d]=f;const g=f.factory||(f.factory=Br(f.type)),v=new Di(g,hi(f),Pc);o.blueprint[d]=v,u[d]=v,qA(o,a,0,d,mh(o,u,f.hostVars,Zt),f)}function KA(o,a,u){const d=Hr(a,o),f=dw(u),g=o[10],v=Lc(o,ph(o,f,null,u.onPush?32:16,d,a,g,g.createRenderer(d,u),null,null,null));o[a.index]=v}function La(o,a,u,d,f,g){const v=Hr(o,a);!function pw(o,a,u,d,f,g,v){if(null==g)o.removeAttribute(a,f,u);else{const b=null==v?be(g):v(g,d||"",f);o.setAttribute(a,f,b,u)}}(a[11],v,g,o.value,u,d,f)}function VC(o,a,u,d,f,g){const v=g[a];if(null!==v){const b=d.setInput;for(let T=0;T<v.length;){const A=v[T++],N=v[T++],B=v[T++];null!==b?d.setInput(u,B,A,N):u[N]=B}}}function YA(o,a){let u=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return u}function gw(o,a,u,d){return new Array(o,!0,!1,a,null,0,d,u,null,null)}function QA(o,a){const u=cn(a,o);if(Zs(u)){const d=u[1];48&u[2]?Qi(d,u,d.template,u[8]):u[5]>0&&_w(u)}}function _w(o){for(let d=YE(o);null!==d;d=no(d))for(let f=10;f<d.length;f++){const g=d[f];if(Zs(g))if(512&g[2]){const v=g[1];Qi(v,g,v.template,g[8])}else g[5]>0&&_w(g)}const u=o[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=cn(u[d],o);Zs(f)&&f[5]>0&&_w(f)}}function JA(o,a){const u=cn(a,o),d=u[1];(function XA(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(d,u),Cp(d,u,u[8])}function Lc(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Jm(o){for(;o;){o[2]|=32;const a=Rm(o);if(ec(o)&&!a)return o;o=a}return null}function Ip(o,a,u,d=!0){const f=a[10];f.begin&&f.begin();try{Qi(o,a,o.template,u)}catch(v){throw d&&jC(a,v),v}finally{f.end&&f.end()}}function Eh(o,a,u){lc(0),a(o,u)}function Ch(o){return o[7]||(o[7]=[])}function vw(o){return o.cleanup||(o.cleanup=[])}function jC(o,a){const u=o[9],d=u?u.get(cp,null):null;d&&d.handleError(a)}function ww(o,a,u,d,f){for(let g=0;g<u.length;){const v=u[g++],b=u[g++],T=a[v],A=o.data[v];null!==A.setInput?A.setInput(T,f,d,b):T[b]=f}}function Xm(o,a,u){let d=u?o.styles:null,f=u?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const b=a[v];"number"==typeof b?g=b:1==g?f=ve(f,b):2==g&&(d=ve(d,b+": "+a[++v]+";"))}u?o.styles=d:o.stylesWithoutHost=d,u?o.classes=f:o.classesWithoutHost=f}function Uc(o,a,u,d,f=!1){for(;null!==u;){const g=a[u.index];if(null!==g&&d.push($n(g)),Ei(g))for(let b=10;b<g.length;b++){const T=g[b],A=T[1].firstChild;null!==A&&Uc(T[1],T,A,d)}const v=u.type;if(8&v)Uc(o,a,u.child,d);else if(32&v){const b=Pv(u,a);let T;for(;T=b();)d.push(T)}else if(16&v){const b=oh(a,u);if(Array.isArray(b))d.push(...b);else{const T=Rm(a[16]);Uc(T[1],T,b,d,!0)}}u=f?u.projectionNext:u.next}return d}class Dp{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return Uc(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Ei(a)){const u=a[8],d=u?u.indexOf(this):-1;d>-1&&(Nl(a,d),Un(u,d))}this._attachedToViewContainer=!1}xc(this._lView[1],this._lView)}onDestroy(a){wh(this._lView[1],this._lView,null,a)}markForCheck(){Jm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ip(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vA(o,a){pp(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=a}}class tx extends Dp{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Ip(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class bw extends up{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=R(a);return new Sp(u,this.ngModule)}}function $C(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class rx{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,d){const f=this.injector.get(a,NE,d);return f!==NE||u===NE?f:this.parentInjector.get(a,u,d)}}class Sp extends eA{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function Rc(o){return o.map(DA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return $C(this.componentDef.inputs)}get outputs(){return $C(this.componentDef.outputs)}create(a,u,d,f){let g=(f=f||this.ngModule)instanceof ka?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new rx(a,g):a,b=v.get(vv,null);if(null===b)throw new Ie(407,!1);const T=v.get(rA,null),A=b.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=d?function vh(o,a,u){return o.selectRootElement(a,u===mt.ShadowDom)}(A,d,this.componentDef.encapsulation):Ov(A,N,function nx(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),K=this.componentDef.onPush?288:272,se=yh(0,null,null,1,0,null,null,null,null,null),Te=ph(null,se,null,K,null,null,b,A,T,v,null);let qe,Qe;oa(Te);try{const ht=function GC(o,a,u,d,f,g){const v=u[1];u[22]=o;const T=gh(v,22,2,"#host",null),A=T.mergedAttrs=a.hostAttrs;null!==A&&(Xm(T,A,!0),null!==o&&(Ss(f,o,A),null!==T.classes&&Yr(f,o,T.classes),null!==T.styles&&EA(f,o,T.styles)));const N=d.createRenderer(o,a),B=ph(u,dw(a),null,a.onPush?32:16,u[22],T,d,N,g||null,null,null);return v.firstCreatePass&&(Io(As(T,u),v,a.type),FC(v,T),LC(T,u.length,1)),Lc(u,B),u[22]=B}(B,this.componentDef,Te,b,A);if(B)if(d)Ss(A,B,["ng-version",iA.full]);else{const{attrs:xt,classes:Oe}=function SA(o){const a=[],u=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++d]):8===f&&u.push(g);else{if(!ro(f))break;f=g}d++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);xt&&Ss(A,B,xt),Oe&&Oe.length>0&&Yr(A,B,Oe.join(" "))}if(Qe=Eo(se,22),void 0!==u){const xt=Qe.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const Pt=u[Oe];xt.push(null!=Pt?Array.from(Pt):null)}}qe=function WC(o,a,u,d){const f=u[1],g=function $A(o,a,u){const d=fr();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),UC(o,d,a,mh(o,a,1,null),u),bh(o,d));const f=as(a,o,d.directiveStart,d);yi(f,a);const g=Hr(d,a);return g&&yi(g,a),f}(f,u,a);if(o[8]=u[8]=g,null!==d)for(const b of d)b(g,a);if(a.contentQueries){const b=fr();a.contentQueries(1,g,b.directiveStart)}const v=fr();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Ds(v.index),qA(u[1],v,0,v.directiveStart,v.directiveEnd,a),Fc(a,g)),g}(ht,this.componentDef,Te,[zC]),Cp(se,Te,null)}finally{Gs()}return new ZC(this.componentType,qe,th(Qe,Te),Te,Qe)}}class ZC extends class ME{}{constructor(a,u,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new tx(f),this.componentType=a}setInput(a,u){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const g=this._rootLView;ww(g[1],g,f,a,u),OC(g,this._tNode.index)}}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function zC(){const o=fr();gu(Re()[1],o)}function Ew(o){let a=function KC(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const d=[o];for(;a;){let f;if(hi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ie(903,!1);f=a.\u0275dir}if(f){if(u){d.push(f);const v=o;v.inputs=Cw(o.inputs),v.declaredInputs=Cw(o.declaredInputs),v.outputs=Cw(o.outputs);const b=f.hostBindings;b&&YC(o,b);const T=f.viewQuery,A=f.contentQueries;if(T&&ox(o,T),A&&ax(o,A),pe(o.inputs,f.inputs),pe(o.declaredInputs,f.declaredInputs),pe(o.outputs,f.outputs),hi(f)&&f.data.animation){const N=o.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const b=g[v];b&&b.ngInherit&&b(o),b===Ew&&(u=!1)}}a=Object.getPrototypeOf(a)}!function sx(o){let a=0,u=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=vl(f.hostAttrs,u=vl(u,f.hostAttrs))}}(d)}function Cw(o){return o===Gr?{}:o===Mt?[]:o}function ox(o,a){const u=o.viewQuery;o.viewQuery=u?(d,f)=>{a(d,f),u(d,f)}:a}function ax(o,a){const u=o.contentQueries;o.contentQueries=u?(d,f,g)=>{a(d,f,g),u(d,f,g)}:a}function YC(o,a){const u=o.hostBindings;o.hostBindings=u?(d,f)=>{a(d,f),u(d,f)}:a}let Iw=null;function Vc(){if(!Iw){const o=Nt.Symbol;if(o&&o.iterator)Iw=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const d=a[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Iw=d)}}}return Iw}function Ap(o){return!!t_(o)&&(Array.isArray(o)||!(o instanceof Map)&&Vc()in o)}function t_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function xi(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Sw(o,a,u,d){const f=Re();return xi(f,fl(),a)&&(Qt(),La(Hn(),f,o,a,u,d)),Sw}function i_(o,a,u,d,f,g,v,b){const T=Re(),A=Qt(),N=o+22,B=A.firstCreatePass?function Sh(o,a,u,d,f,g,v,b,T){const A=a.consts,N=gh(a,o,4,v||null,Ii(A,b));hw(a,u,N,Ii(A,T)),gu(a,N);const B=N.tViews=yh(2,N,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,N),B.queries=a.queries.embeddedTView(N)),N}(N,A,T,a,u,d,f,g,v):A.data[N];ii(B,!1);const K=T[11].createComment("");sh(A,T,K,B),yi(K,T),Lc(T,T[N]=gw(K,T,K,B)),rl(B)&&uw(A,T,B),null!=v&&cw(T,B,b)}function Mw(o){return function ss(o,a){return o[a]}(function dl(){return Lt.lFrame.contextLView}(),22+o)}function s_(o,a,u){const d=Re();return xi(d,fl(),a)&&function Rs(o,a,u,d,f,g,v,b){const T=Hr(a,u);let N,A=a.inputs;!b&&null!=A&&(N=A[d])?(ww(o,u,N,d,f),Xu(a)&&OC(u,a.index)):3&a.type&&(d=function Tp(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,g.setProperty(T,d,f))}(Qt(),Hn(),d,o,a,d[11],u,!1),s_}function kp(o,a,u,d,f){const v=f?"class":"style";ww(o,u,a.inputs[v],v,d)}function o_(o,a,u,d){const f=Re(),g=Qt(),v=22+o,b=f[11],T=f[v]=Ov(b,a,function dc(){return Lt.lFrame.currentNamespace}()),A=g.firstCreatePass?function hx(o,a,u,d,f,g,v){const b=a.consts,A=gh(a,o,2,f,Ii(b,g));return hw(a,u,A,Ii(b,v)),null!==A.attrs&&Xm(A,A.attrs,!1),null!==A.mergedAttrs&&Xm(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,g,f,0,a,u,d):g.data[v];ii(A,!0);const N=A.mergedAttrs;null!==N&&Ss(b,T,N);const B=A.classes;null!==B&&Yr(b,T,B);const K=A.styles;return null!==K&&EA(b,T,K),64!=(64&A.flags)&&sh(g,f,T,A),0===function ll(){return Lt.lFrame.elementDepthCount}()&&yi(T,f),function Ad(){Lt.lFrame.elementDepthCount++}(),rl(A)&&(uw(g,f,A),function _h(o,a,u){if(zo(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}(g,A,f)),null!==d&&cw(f,A),o_}function a_(){let o=fr();pu()?ia():(o=o.parent,ii(o,!1));const a=o;!function ul(){Lt.lFrame.elementDepthCount--}();const u=Qt();return u.firstCreatePass&&(gu(u,o),zo(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function _u(o){return 0!=(16&o.flags)}(a)&&kp(u,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function yu(o){return 0!=(32&o.flags)}(a)&&kp(u,a,Re(),a.stylesWithoutHost,!1),a_}function l_(o,a,u,d){return o_(o,a,u,d),a_(),l_}function kw(){return Re()}function Rw(o){return!!o&&"function"==typeof o.then}function rT(o){return!!o&&"function"==typeof o.subscribe}const Nw=rT;function Pw(o,a,u,d){const f=Re(),g=Qt(),v=fr();return function sT(o,a,u,d,f,g,v,b){const T=rl(d),N=o.firstCreatePass&&vw(o),B=a[8],K=Ch(a);let se=!0;if(3&d.type||b){const Qe=Hr(d,a),ht=b?b(Qe):Qe,xt=K.length,Oe=b?Tn=>b($n(Tn[d.index])):d.index;let Pt=null;if(!b&&T&&(Pt=function gx(o,a,u,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===u&&f[g+1]===d){const b=a[7],T=f[g+2];return b.length>T?b[T]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,d.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=g,Pt.__ngLastListenerFn__=g,se=!1;else{g=Ow(d,a,B,g,!1);const Tn=u.listen(ht,f,g);K.push(g,Tn),N&&N.push(f,Oe,xt,xt+1)}}else g=Ow(d,a,B,g,!1);const Te=d.outputs;let qe;if(se&&null!==Te&&(qe=Te[f])){const Qe=qe.length;if(Qe)for(let ht=0;ht<Qe;ht+=2){const Jn=a[qe[ht]][qe[ht+1]].subscribe(g),Hu=K.length;K.push(g,Jn),N&&N.push(f,d.index,Hu,-(Hu+1))}}}(g,f,f[11],v,o,a,0,d),Pw}function oT(o,a,u,d){try{return!1!==u(d)}catch(f){return jC(o,f),!1}}function Ow(o,a,u,d,f){return function g(v){if(v===Function)return d;Jm(2&o.flags?cn(o.index,a):a);let T=oT(a,0,d,v),A=g.__ngNextListenerFn__;for(;A;)T=oT(a,0,A,v)&&T,A=A.__ngNextListenerFn__;return f&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function aT(o=1){return function Ws(o){return(Lt.lFrame.contextLView=function Nd(o,a){for(;o>0;)a=a[15],o--;return a}(o,Lt.lFrame.contextLView))[8]}(o)}function PP(o,a){let u=null;const d=function uC(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===d?qv(o,g,!0):nn(d,g))return f}else u=f}return u}function Fw(o){const a=Re()[16][6];if(!a.projection){const d=a.projection=An(o?o.length:1,null),f=d.slice();let g=a.child;for(;null!==g;){const v=o?PP(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:d[v]=g,f[v]=g),g=g.next}}}function L(o,a=0,u){const d=Re(),f=Qt(),g=gh(f,22+o,16,null,u||null);null===g.projection&&(g.projection=a),ia(),64!=(64&g.flags)&&function Oa(o,a,u){jv(a[11],0,a,u,Pl(o,u,a),Au(u.parent||a[6],u,a))}(f,d,g)}function Ba(o,a,u,d,f){const g=o[u+1],v=null===a;let b=d?vi(g):Ll(g),T=!1;for(;0!==b&&(!1===T||v);){const N=o[b+1];vt(o[b],a)&&(T=!0,o[b+1]=d?ew(N):Jv(N)),b=d?vi(N):Ll(N)}T&&(o[u+1]=d?Jv(g):ew(g))}function vt(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&us(o,a)>=0}const Nr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jt(o){return o.substring(Nr.key,Nr.keyEnd)}function xh(o,a){const u=Nr.textEnd;return u===a?-1:(a=Nr.keyEnd=function vx(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,Nr.key=a,u),Mh(o,a,u))}function Mh(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function Np(o,a){return function ao(o,a,u,d){const f=Re(),g=Qt(),v=Is(2);g.firstUpdatePass&&Po(g,o,v,d),a!==Zt&&xi(f,v,a)&&Op(g,g.data[Bn()],f,f[11],o,f[v+1]=function Bw(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ge(ko(o)))),o}(a,u),d,v)}(o,a,null,!0),Np}function dT(o){!function Os(o,a,u,d){const f=Qt(),g=Is(2);f.firstUpdatePass&&Po(f,null,g,d);const v=Re();if(u!==Zt&&xi(v,g,u)){const b=f.data[Bn()];if(gT(b,d)&&!Pp(f,g)){let T=d?b.classesWithoutHost:b.stylesWithoutHost;null!==T&&(u=ve(T,u||"")),kp(f,b,v,u,d)}else!function pT(o,a,u,d,f,g,v,b){f===Zt&&(f=Mt);let T=0,A=0,N=0<f.length?f[0]:null,B=0<g.length?g[0]:null;for(;null!==N||null!==B;){const K=T<f.length?f[T+1]:void 0,se=A<g.length?g[A+1]:void 0;let qe,Te=null;N===B?(T+=2,A+=2,K!==se&&(Te=B,qe=se)):null===B||null!==N&&N<B?(T+=2,Te=N):(A+=2,Te=B,qe=se),null!==Te&&Op(o,a,u,d,Te,qe,v,b),N=T<f.length?f[T]:null,B=A<g.length?g[A]:null}}(f,b,v,v[11],v[g+1],v[g+1]=function hT(o,a,u){if(null==u||""===u)return Mt;const d=[],f=ko(u);if(Array.isArray(f))for(let g=0;g<f.length;g++)o(d,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&o(d,g,f[g]);else"string"==typeof f&&a(d,f);return d}(o,a,u),d,g)}}(_i,Ps,o,!0)}function Ps(o,a){for(let u=function h_(o){return function cT(o){Nr.key=0,Nr.keyEnd=0,Nr.value=0,Nr.valueEnd=0,Nr.textEnd=o.length}(o),xh(o,Mh(o,0,Nr.textEnd))}(a);u>=0;u=xh(a,u))_i(o,jt(a),!0)}function Pp(o,a){return a>=o.expandoStartIndex}function Po(o,a,u,d){const f=o.data;if(null===f[u+1]){const g=f[Bn()],v=Pp(o,u);gT(g,d)&&null===a&&!v&&(a=!1),a=function Vw(o,a,u,d){const f=function ac(o){const a=Lt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(u=$c(u=p_(null,o,a,u,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(u=p_(f,o,a,u,d),null===g){let T=function wx(o,a,u){const d=u?a.classBindings:a.styleBindings;if(0!==Ll(d))return o[vi(d)]}(o,a,d);void 0!==T&&Array.isArray(T)&&(T=p_(null,o,a,T[1],d),T=$c(T,a.attrs,d),function bx(o,a,u,d){o[vi(u?a.classBindings:a.styleBindings)]=d}(o,a,d,T))}else g=function kh(o,a,u){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=$c(d,o[g].hostAttrs,u);return $c(d,a.attrs,u)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),u}(f,g,a,d),function Ee(o,a,u,d,f,g){let v=g?a.classBindings:a.styleBindings,b=vi(v),T=Ll(v);o[d]=u;let N,A=!1;if(Array.isArray(u)){const B=u;N=B[1],(null===N||us(B,N)>0)&&(A=!0)}else N=u;if(f)if(0!==T){const K=vi(o[b+1]);o[d+1]=hh(K,b),0!==K&&(o[K+1]=Xv(o[K+1],d)),o[b+1]=function CC(o,a){return 131071&o|a<<17}(o[b+1],d)}else o[d+1]=hh(b,0),0!==b&&(o[b+1]=Xv(o[b+1],d)),b=d;else o[d+1]=hh(T,0),0===b?b=d:o[T+1]=Xv(o[T+1],d),T=d;A&&(o[d+1]=Jv(o[d+1])),Ba(o,N,d,!0),Ba(o,N,d,!1),function _x(o,a,u,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&us(g,a)>=0&&(u[d+1]=ew(u[d+1]))}(a,N,o,d,g),v=hh(b,T),g?a.classBindings=v:a.styleBindings=v}(f,g,a,u,v,d)}}function p_(o,a,u,d,f){let g=null;const v=u.directiveEnd;let b=u.directiveStylingLast;for(-1===b?b=u.directiveStart:b++;b<v&&(g=a[b],d=$c(d,g.hostAttrs,f),g!==o);)b++;return null!==o&&(u.directiveStylingLast=b),d}function $c(o,a,u){const d=u?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),_i(o,v,!!u||a[++g]))}return void 0===o?null:o}function Op(o,a,u,d,f,g,v,b){if(!(3&a.type))return;const T=o.data,A=T[b+1];Rh(function TC(o){return 1==(1&o)}(A)?g_(T,a,u,f,Ll(A),v):void 0)||(Rh(g)||function bp(o){return 2==(2&o)}(A)&&(g=g_(T,null,u,f,b,v)),function sC(o,a,u,d,f){if(a)f?o.addClass(u,d):o.removeClass(u,d);else{let g=-1===d.indexOf("-")?void 0:Na.DashCase;null==f?o.removeStyle(u,d,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=Na.Important),o.setStyle(u,d,f,g))}}(d,v,Hi(Bn(),u),f,g))}function g_(o,a,u,d,f,g){const v=null===a;let b;for(;f>0;){const T=o[f],A=Array.isArray(T),N=A?T[1]:T,B=null===N;let K=u[f+1];K===Zt&&(K=B?Mt:void 0);let se=B?Tl(K,d):N===d?K:void 0;if(A&&!Rh(se)&&(se=Tl(T,d)),Rh(se)&&(b=se,v))return b;const Te=o[f+1];f=v?vi(Te):Ll(Te)}if(null!==a){let T=g?a.residualClasses:a.residualStyles;null!=T&&(b=Tl(T,d))}return b}function Rh(o){return void 0!==o}function gT(o,a){return 0!=(o.flags&(a?16:32))}function mT(o,a=""){const u=Re(),d=Qt(),f=o+22,g=d.firstCreatePass?gh(d,f,1,a,null):d.data[f],v=u[f]=function Su(o,a){return o.createText(a)}(u[11],a);sh(d,u,v,g),ii(g,!1)}function Fp(o){return Lp("",o,""),Fp}function Lp(o,a,u){const d=Re(),f=function Ih(o,a,u,d){return xi(o,fl(),u)?a+be(u)+d:Zt}(d,o,a,u);return f!==Zt&&function Hl(o,a,u){const d=Hi(a,o);!function QE(o,a,u){o.setValue(a,u)}(o[11],d,u)}(d,Bn(),f),Lp}const $l=void 0;var Yw=["en",[["a","p"],["AM","PM"],$l],[["AM","PM"],$l,$l],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$l,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$l,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$l,"{1} 'at' {0}",$l],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tx(o){const u=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let qc={};function Oh(o){const a=function PT(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=Qw(a);if(u)return u;const d=a.split("-")[0];if(u=Qw(d),u)return u;if("en"===d)return Yw;throw new Ie(701,!1)}function w_(o){return Oh(o)[Dt.PluralCase]}function Qw(o){return o in qc||(qc[o]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[o]),qc[o]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const ql="en-US";let ku=ql;function or(o,a,u,d,f){if(o=X(o),Array.isArray(o))for(let g=0;g<o.length;g++)or(o[g],a,u,d,f);else{const g=Qt(),v=Re();let b=eh(o)?o:X(o.provide),T=AE(o);const A=fr(),N=1048575&A.providerIndexes,B=A.directiveStart,K=A.providerIndexes>>20;if(eh(o)||!o.multi){const se=new Di(T,f,Pc),Te=pb(b,a,f?N:N+K,B);-1===Te?(Io(As(A,v),g,b),F_(g,o,a.length),a.push(b),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(se),v.push(se)):(u[Te]=se,v[Te]=se)}else{const se=pb(b,a,N+K,B),Te=pb(b,a,N,N+K),qe=se>=0&&u[se],Qe=Te>=0&&u[Te];if(f&&!Qe||!f&&!qe){Io(As(A,v),g,b);const ht=function sI(o,a,u,d,f){const g=new Di(o,u,Pc);return g.multi=[],g.index=a,g.componentProviders=0,rI(g,f,d&&!u),g}(f?iI:Ox,u.length,f,d,T);!f&&Qe&&(u[Te].providerFactory=ht),F_(g,o,a.length,0),a.push(b),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(ht),v.push(ht)}else F_(g,o,se>-1?se:Te,rI(u[f?Te:se],T,!f&&d));!f&&d&&Qe&&u[Te].componentProviders++}}}function F_(o,a,u,d){const f=eh(a),g=function tP(o){return!!o.useClass}(a);if(f||g){const T=(g?X(a.useClass):a).prototype.ngOnDestroy;if(T){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const N=A.indexOf(u);-1===N?A.push(u,[d,T]):A[N+1].push(d,T)}else A.push(u,T)}}}function rI(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function pb(o,a,u,d){for(let f=u;f<d;f++)if(a[f]===o)return f;return-1}function Ox(o,a,u,d){return L_(this.multi,[])}function iI(o,a,u,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=as(u,u[1],this.providerFactory.index,d);g=b.slice(0,v),L_(f,g);for(let T=v;T<b.length;T++)g.push(b[T])}else g=[],L_(f,g);return g}function L_(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Kp(o,a=[]){return u=>{u.providersResolver=(d,f)=>function Px(o,a,u){const d=Qt();if(d.firstCreatePass){const f=hi(o);or(u,d.data,d.blueprint,f,!0),or(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class Gc{}class Ha{}function oI(o,a){return new U_(o,a??null)}class U_ extends Gc{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bw(this);const d=at(a);this._bootstrapComponents=Ra(d.bootstrap),this._r3Injector=pC(a,u,[{provide:Gc,useValue:this},{provide:up,useValue:this.componentFactoryResolver}],ge(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Wc extends Ha{constructor(a){super(),this.moduleType=a}create(a){return new U_(this.moduleType,a)}}class aI extends Gc{constructor(a,u,d){super(),this.componentFactoryResolver=new bw(this),this.instance=null;const f=new SE([...a,{provide:Gc,useValue:this},{provide:up,useValue:this.componentFactoryResolver}],u||Sc(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Yp(o,a,u=null){return new aI(o,a,u).injector}let V_=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=cv(0,u.type),f=d.length>0?Yp([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=sn({token:o,providedIn:"environment",factory:()=>new o(ir(ka))}),o})();function gb(o){o.getStandaloneInjector=a=>a.get(V_).getOrCreateStandaloneInjector(o)}function ds(o,a,u){const d=function pr(){const o=Lt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}()+o,f=Re();return f[d]===Zt?function io(o,a,u){return o[a]=u}(f,d,u?a.call(u):a()):function xp(o,a){return o[a]}(f,d)}function Je(o){return a=>{setTimeout(o,void 0,a)}}const fe=class qx extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,d){let f=a,g=u||(()=>null),v=d;if(a&&"object"==typeof a){const T=a;f=T.next?.bind(T),g=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(g=Je(g),f&&(f=Je(f)),v&&(v=Je(v)));const b=super.subscribe({next:f,error:g,complete:v});return a instanceof q.w0&&a.add(b),b}};function Ue(){return this._results[Vc()]()}class Or{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Vc(),d=Or.prototype;d[u]||(d[u]=Ue)}get changes(){return this._changes||(this._changes=new fe)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const d=this;d.dirty=!1;const f=pn(a);(this._changesDetected=!function si(o,a,u){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=a[d];if(u&&(f=u(f),g=u(g)),g!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Zh=(()=>{class o{}return o.__NG_ELEMENT_ID__=Wx,o})();const Zx=Zh,Gx=class extends Zx{constructor(a,u,d){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(a,u){const d=this._declarationTContainer.tViews,f=ph(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(d)),Cp(d,f,a),new Dp(f)}};function Wx(){return H_(fr(),Re())}function H_(o,a){return 4&o.type?new Gx(a,o,th(o,a)):null}let j_=(()=>{class o{}return o.__NG_ELEMENT_ID__=_I,o})();function _I(){return $t(fr(),Re())}const zx=j_,Kx=class extends zx{constructor(a,u,d){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=d}get element(){return th(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){const a=bl(this._hostTNode,this._hostLView);if($f(a)){const u=zs(a,this._hostLView),d=gr(a);return new pa(u[1].data[d+8],u)}return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=yI(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,d){let f,g;"number"==typeof d?f=d:null!=d&&(f=d.index,g=d.injector);const v=a.createEmbeddedView(u||{},g);return this.insert(v,f),v}createComponent(a,u,d,f,g){const v=a&&!function dn(o){return"function"==typeof o}(a);let b;if(v)b=u;else{const B=u||{};b=B.index,d=B.injector,f=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const T=v?a:new Sp(R(a)),A=d||this.parentInjector;if(!g&&null==T.ngModule){const K=(v?A:this.parentInjector).get(ka,null);K&&(g=K)}const N=T.create(A,f,void 0,g);return this.insert(N.hostView,b),N}insert(a,u){const d=a._lView,f=d[1];if(function sc(o){return Ei(o[3])}(d)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const B=d[3],K=new Kx(B,B[6],B[3]);K.detach(K.indexOf(a))}}const g=this._adjustIndex(u),v=this._lContainer;!function eC(o,a,u,d){const f=10+d,g=u.length;d>0&&(u[f-1][4]=a),d<g-10?(a[4]=u[f],qi(u,10+d,a)):(u.push(a),a[4]=null),a[3]=u;const v=a[17];null!==v&&u!==v&&function wA(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(v,a);const b=a[19];null!==b&&b.insertView(o),a[2]|=64}(f,d,v,g);const b=Bv(g,v),T=d[11],A=Ro(T,v[7]);return null!==A&&function dp(o,a,u,d,f,g){d[0]=f,d[6]=a,pp(o,d,u,1,f,g)}(f,v[6],T,d,A,b),a.attachToViewContainerRef(),qi($_(v),g,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=yI(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),d=Nl(this._lContainer,u);d&&(Un($_(this._lContainer),u),xc(d[1],d))}detach(a){const u=this._adjustIndex(a,-1),d=Nl(this._lContainer,u);return d&&null!=Un($_(this._lContainer),u)?new Dp(d):null}_adjustIndex(a,u=0){return a??this.length+u}};function yI(o){return o[8]}function $_(o){return o[8]||(o[8]=[])}function $t(o,a){let u;const d=a[o.index];if(Ei(d))u=d;else{let f;if(8&o.type)f=$n(d);else{const g=a[11];f=g.createComment("");const v=Hr(o,a);Pa(g,Ro(g,v),f,function bA(o,a){return o.nextSibling(a)}(g,v),!1)}a[o.index]=u=gw(d,a,f,o),Lc(a,u)}return new Kx(u,o,a)}class Rt{constructor(a){this.queryList=a,this.matches=null}clone(){return new Rt(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qc{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const d=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let g=0;g<d;g++){const v=u.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new Qc(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==zl(a,u).matches&&this.queries[u].setDirty()}}class fn{constructor(a,u,d=null){this.predicate=a,this.flags=u,this.read=d}}class Ib{constructor(a=[]){this.queries=a}elementStart(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==u?u.push(g):u=[g])}return null!==u?new Ib(u):null}template(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class ar{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new ar(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,u,Xe(u,g)),this.matchTNodeWithReadOption(a,u,Cl(u,a,g,!1,!1))}else d===Zh?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Cl(u,a,d,!1,!1))}matchTNodeWithReadOption(a,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===kl||f===j_||f===Zh&&4&u.type)this.addMatch(u.index,-2);else{const g=Cl(u,a,f,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,d)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function Xe(o,a){const u=o.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===a)return u[d+1];return null}function Db(o,a,u,d){return-1===u?function q_(o,a){return 11&o.type?th(o,a):4&o.type?H_(o,a):null}(a,o):-2===u?function Jc(o,a,u){return u===kl?th(a,o):u===Zh?H_(a,o):u===j_?$t(a,o):void 0}(o,a,d):as(o,o[1],u,a)}function wI(o,a,u,d){const f=a[19].queries[d];if(null===f.matches){const g=o.data,v=u.matches,b=[];for(let T=0;T<v.length;T+=2){const A=v[T];b.push(A<0?null:Db(a,g[A],v[T+1],u.metadata.read))}f.matches=b}return f.matches}function Wh(o,a,u,d){const f=o.queries.getByIndex(u),g=f.matches;if(null!==g){const v=wI(o,a,f,u);for(let b=0;b<g.length;b+=2){const T=g[b];if(T>0)d.push(v[b/2]);else{const A=g[b+1],N=a[-T];for(let B=10;B<N.length;B++){const K=N[B];K[17]===K[3]&&Wh(K[1],K,A,d)}if(null!==N[9]){const B=N[9];for(let K=0;K<B.length;K++){const se=B[K];Wh(se[1],se,A,d)}}}}}return d}function bI(o){const a=Re(),u=Qt(),d=pl();lc(d+1);const f=zl(u,d);if(o.dirty&&function ic(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?Wh(u,a,d,[]):wI(u,a,f,d);o.reset(g,yv),o.notifyOnChanges()}return!0}return!1}function Sb(o,a,u,d){const f=Qt();if(f.firstCreatePass){const g=fr();(function xb(o,a,u){null===o.queries&&(o.queries=new Ib),o.queries.track(new ar(a,u))})(f,new fn(a,u,d),g.index),function EI(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}!function Z_(o,a,u){const d=new Or(4==(4&u));wh(o,a,d,d.destroy),null===a[19]&&(a[19]=new Qc),a[19].queries.push(new Rt(d))}(f,Re(),u)}function Ab(){return function Fs(o,a){return o[19].queries[a].queryList}(Re(),pl())}function zl(o,a){return o.queries.getByIndex(a)}function G_(o,a){return H_(o,a)}function Fn(...o){}const Nb=new Pn("Application Initializer");let $a=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Fn,this.reject=Fn,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Rw(g))u.push(g);else if(Nw(g)){const v=new Promise((b,T)=>{g.subscribe({complete:b,error:T})});u.push(v)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(ir(Nb,8))},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const MI=new Pn("AppId",{providedIn:"root",factory:function Qh(){return`${Jh()}${Jh()}${Jh()}`}});function Jh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ob=new Pn("Platform Initializer"),kI=new Pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),li=new Pn("appBootstrapListener"),sM=new Pn("AnimationModuleType");let oM=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const X_=new Pn("LocaleId",{providedIn:"root",factory:()=>I(X_,tt.Optional|tt.SkipSelf)||function RI(){return typeof $localize<"u"&&$localize.locale||ql}()}),aM=new Pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Xh{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let lM=(()=>{class o{compileModuleSync(u){return new Wc(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),g=Ra(at(u).declarations).reduce((v,b)=>{const T=R(b);return T&&v.push(new Sp(T)),v},[]);return new Xh(d,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Lb=(()=>Promise.resolve(0))();function lg(o){typeof Zone>"u"?Lb.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Gn{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fe(!1),this.onMicrotaskEmpty=new fe(!1),this.onStable=new fe(!1),this.onError=new fe(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function ef(){let o=Nt.requestAnimationFrame,a=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Ub(o){const a=()=>{!function PI(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Nt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,ug(o),o.isCheckStableRunning=!0,id(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),ug(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,g,v,b)=>{try{return Vb(o),u.invokeTask(f,g,v,b)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),Bb(o)}},onInvoke:(u,d,f,g,v,b,T)=>{try{return Vb(o),u.invoke(f,g,v,b,T)}finally{o.shouldCoalesceRunChangeDetection&&a(),Bb(o)}},onHasTask:(u,d,f,g)=>{u.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,ug(o),id(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,d,f,g)=>(u.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gn.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Gn.isInAngularZone())throw new Ie(909,!1)}run(a,u,d){return this._inner.run(a,u,d)}runTask(a,u,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,ey,Fn,Fn);try{return g.runTask(v,u,d)}finally{g.cancelTask(v)}}runGuarded(a,u,d){return this._inner.runGuarded(a,u,d)}runOutsideAngular(a){return this._outer.run(a)}}const ey={};function id(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function ug(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Vb(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Bb(o){o._nesting--,id(o)}class dM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fe,this.onMicrotaskEmpty=new fe,this.onStable=new fe,this.onError=new fe}run(a,u,d){return a.apply(u,d)}runGuarded(a,u,d){return a.apply(u,d)}runOutsideAngular(a){return a()}runTask(a,u,d,f){return a.apply(u,d)}}const Hb=new Pn(""),jb=new Pn("");let $b,OI=(()=>{class o{constructor(u,d,f){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$b||(function hM(o){$b=o}(f),f.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gn.assertNotInAngularZone(),lg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lg(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(ir(Gn),ir(cg),ir(jb))},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})(),cg=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return $b?.findTestabilityInTree(this,u,d)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Xl=null;const sd=new Pn("AllowMultipleToken"),eu=new Pn("PlatformDestroyListeners");class FI{constructor(a,u){this.name=a,this.token=u}}function Qn(o,a,u=[]){const d=`Platform: ${a}`,f=new Pn(d);return(g=[])=>{let v=qb();if(!v||v.injector.get(sd,!1)){const b=[...u,...g,{provide:f,useValue:!0}];o?o(b):function LI(o){if(Xl&&!Xl.get(sd,!1))throw new Ie(400,!1);Xl=o;const a=o.get(nf);(function UI(o){const a=o.get(Ob,null);a&&a.forEach(u=>u())})(o)}(function hg(o=[],a){return Nc.create({name:a,providers:[{provide:fv,useValue:"platform"},{provide:eu,useValue:new Set([()=>Xl=null])},...o]})}(b,d))}return function ty(o){const a=qb();if(!a)throw new Ie(401,!1);return a}()}}function qb(){return Xl?.get(nf)??null}let nf=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const f=function Zb(o,a){let u;return u="noop"===o?new dM:("zone.js"===o?void 0:o)||new Gn(a),u}(d?.ngZone,function VI(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:Gn,useValue:f}];return f.run(()=>{const v=Nc.create({providers:g,parent:this.injector,name:u.moduleType.name}),b=u.create(v),T=b.injector.get(cp,null);if(!T)throw new Ie(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:N=>{T.handleError(N)}});b.onDestroy(()=>{pg(this._modules,b),A.unsubscribe()})}),function ad(o,a,u){try{const d=u();return Rw(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(T,f,()=>{const A=b.injector.get($a);return A.runInitializers(),A.donePromise.then(()=>(function Jw(o){Gt(o,"Expected localeId to be defined"),"string"==typeof o&&(ku=o.toLowerCase().replace(/_/g,"-"))}(b.injector.get(X_,ql)||ql),this._moduleDoBootstrap(b),b))})})}bootstrapModule(u,d=[]){const f=Za({},d);return function od(o,a,u){const d=new Wc(u);return Promise.resolve(d)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(u){const d=u.injector.get(fg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ie(403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(eu,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(ir(Nc))},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Za(o,a){return Array.isArray(a)?a.reduce(Za,o):{...o,...a}}let fg=(()=>{class o{constructor(u,d,f){this._zone=u,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),v=new O.y(b=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Gn.assertNotInAngularZone(),lg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Gn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{T.unsubscribe(),A.unsubscribe()}});this.isStable=(0,le.T)(g,v.pipe((0,ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const f=u instanceof eA;if(!this._injector.get($a).done)throw!f&&Le(u),new Ie(405,false);let v;v=f?u:this._injector.get(up).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const b=function tf(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Gc),A=v.create(Nc.NULL,[],d||v.selector,b),N=A.location.nativeElement,B=A.injector.get(Hb,null);return B?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),pg(this.components,A),B?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;pg(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(li,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>pg(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ie(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(ir(Gn),ir(ka),ir(cp))},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function pg(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let ny=!0,BI=!1;function qr(){return BI=!0,ny}function mn(){if(BI)throw new Error("Cannot enable prod mode after platform setup.");ny=!1}let _M=(()=>{class o{}return o.__NG_ELEMENT_ID__=fs,o})();function fs(o){return function HI(o,a,u){if(Xu(o)&&!u){const d=cn(o.index,a);return new Dp(d,d)}return 47&o.type?new Dp(a[16],a):null}(fr(),Re(),16==(16&o))}class lf{constructor(){}supports(a){return Ap(a)}create(a){return new CM(a)}}const $I=(o,a)=>a;class CM{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||$I}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,d=this._removalsHead,f=0,g=null;for(;u||d;){const v=!d||u&&u.currentIndex<uf(d,f,g)?u:d,b=uf(v,f,g),T=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{g||(g=[]);const A=b-f,N=T-f;if(A!=N){for(let K=0;K<A;K++){const se=K<g.length?g[K]:g[K]=0,Te=se+K;N<=Te&&Te<A&&(g[K]=se+1)}g[v.previousIndex]=N-A}}b!==T&&a(v,b,T)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Ap(a))throw new Ie(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,u=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let b=0;b<this.length;b++)g=a[b],v=this._trackByFn(b,g),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,g,v,b)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,b),d=!0),u=u._next}else f=0,function e_(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Vc()]();let d;for(;!(d=u.next()).done;)a(d.value)}}(a,b=>{v=this._trackByFn(f,b),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,b,v,f)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,v,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,g,f)):a=this._addAfter(new ui(u,d),g,f),a}_verifyReinsertion(a,u,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,u,d),this._addToMoves(a,d),a}_moveAfter(a,u,d){return this._unlink(a),this._insertAfter(a,u,d),this._addToMoves(a,d),a}_addAfter(a,u,d){return this._insertAfter(a,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,d){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new Kb),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,d=a._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Kb),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class ui{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zb{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const u=a._prevDup,d=a._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class Kb{constructor(){this.map=new Map}put(a){const u=a.trackById;let d=this.map.get(u);d||(d=new zb,this.map.set(u,d)),d.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uf(o,a,u){const d=o.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+a+f}class Uo{constructor(){}supports(a){return a instanceof Map||t_(a)}create(){return new Yb}}class Yb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||t_(a)))throw new Ie(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const d=a._prev;return u._next=a,u._prev=d,a._prev=u,d&&(d._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new qI(a);return this._records.set(a,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(d=>u(a[d],d))}}class qI{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cf(){return new ly([new lf])}let ly=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||cf()),deps:[[o,new kt,new We]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Ie(901,!1)}}return o.\u0275prov=sn({token:o,providedIn:"root",factory:cf}),o})();function Qb(){return new Jb([new Uo])}let Jb=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||Qb()),deps:[[o,new kt,new We]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new Ie(901,!1)}}return o.\u0275prov=sn({token:o,providedIn:"root",factory:Qb}),o})();const GI=Qn(null,"core",[]);let Xb=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(ir(fg))},o.\u0275mod=en({type:o}),o.\u0275inj=Bt({}),o})();function WI(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},1044:(ft,Me,V)=>{V.d(Me,{Z:()=>Ie});var l=V(1319),q=V(8702),O=V(9949),le=V(6745);class ce{constructor(be,_e){this._delegate=be,this.firebase=_e,(0,O._addComponent)(be,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(be,_e=O._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(be);return!et.isInitialized()&&"EXPLICIT"===(null===(nt=et.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&et.initialize(),et.getImmediate({identifier:_e})}_removeServiceInstance(be,_e=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(_e)}_addComponent(be){(0,O._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,O._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ve(){const ot=function ge(ot){const be={},_e={__esModule:!0,initializeApp:function Fe(oe,he={}){const we=O.initializeApp(oe,he);if((0,l.r3)(be,we.name))return be[we.name];const J=new ot(we,_e);return be[we.name]=J,J},app:et,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ce(oe){const he=oe.name,we=he.replace("-compat","");if(O._registerComponent(oe)&&"PUBLIC"===oe.type){const J=(te=et())=>{if("function"!=typeof te[we])throw pe.create("invalid-app-argument",{appName:he});return te[we]()};void 0!==oe.serviceProps&&(0,l.ZB)(J,oe.serviceProps),_e[we]=J,ot.prototype[we]=function(...te){return this._getService.bind(this,he).apply(this,oe.multipleInstances?te:[])}}return"PUBLIC"===oe.type?_e[we]:null},removeApp:function nt(oe){delete be[oe]},useAsService:function Ge(oe,he){return"serverAuth"===he?null:he},modularAPIs:O}};function et(oe){if(!(0,l.r3)(be,oe=oe||O._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:oe});return be[oe]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function ke(){return Object.keys(be).map(oe=>be[oe])}}),et.App=ot,_e}(ce);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function be(_e){(0,l.ZB)(ot,_e)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),ot}(),G=new le.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=z;!function Pe(ot){(0,O.registerVersion)("@firebase/app-compat","0.1.39",ot)}()},9949:(ft,Me,V)=>{V.r(Me),V.d(Me,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>rs,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>rn,_addOrOverwriteComponent:()=>sn,_apps:()=>vn,_clearComponents:()=>ts,_components:()=>Mn,_getProvider:()=>Bt,_registerComponent:()=>Wt,_removeServiceInstance:()=>Vr,deleteApp:()=>is,getApp:()=>Wn,getApps:()=>Bi,initializeApp:()=>ni,onLog:()=>er,registerVersion:()=>dr,setLogLevel:()=>Dn});var l=V(7791),q=V(8702),O=V(6745),le=V(1319),ce=V(483);class ye{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function pe(rt){return"VERSION"===rt.getComponent()?.type}(it)){const Tt=it.getImmediate();return`${Tt.library}/${Tt.version}`}return null}).filter(it=>it).join(" ")}}const ge="@firebase/app",z=new O.Yd("@firebase/app"),Gt="[DEFAULT]",Ke={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vn=new Map,Mn=new Map;function rn(rt,De){try{rt.container.addComponent(De)}catch(it){z.debug(`Component ${De.name} failed to register with FirebaseApp ${rt.name}`,it)}}function sn(rt,De){rt.container.addOrOverwriteComponent(De)}function Wt(rt){const De=rt.name;if(Mn.has(De))return z.debug(`There were multiple attempts to register component ${De}.`),!1;Mn.set(De,rt);for(const it of vn.values())rn(it,rt);return!0}function Bt(rt,De){const it=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),rt.container.getProvider(De)}function Vr(rt,De,it=Gt){Bt(rt,De).clearInstance(it)}function ts(){Mn.clear()}const jn=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ns{constructor(De,it,Tt){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=Tt,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}const rs="9.14.0";function ni(rt,De={}){let it=rt;"object"!=typeof De&&(De={name:De});const Tt=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},De),It=Tt.name;if("string"!=typeof It||!It)throw jn.create("bad-app-name",{appName:String(It)});if(it||(it=(0,le.aH)()),!it)throw jn.create("no-options");const en=vn.get(It);if(en){if((0,le.vZ)(it,en.options)&&(0,le.vZ)(Tt,en.config))return en;throw jn.create("duplicate-app",{appName:It})}const W=new q.H0(It);for(const Q of Mn.values())W.addComponent(Q);const Z=new ns(it,Tt,W);return vn.set(It,Z),Z}function Wn(rt=Gt){const De=vn.get(rt);if(!De&&rt===Gt)return ni();if(!De)throw jn.create("no-app",{appName:rt});return De}function Bi(){return Array.from(vn.values())}function is(rt){return tt.apply(this,arguments)}function tt(){return(tt=(0,l.Z)(function*(rt){const De=rt.name;vn.has(De)&&(vn.delete(De),yield Promise.all(rt.container.getProviders().map(it=>it.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function dr(rt,De,it){var Tt;let It=null!==(Tt=Ke[rt])&&void 0!==Tt?Tt:rt;it&&(It+=`-${it}`);const en=It.match(/\s|\//),W=De.match(/\s|\//);if(en||W){const Z=[`Unable to register library "${It}" with version "${De}":`];return en&&Z.push(`library name "${It}" contains illegal characters (whitespace or "/")`),en&&W&&Z.push("and"),W&&Z.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void z.warn(Z.join(" "))}Wt(new q.wA(`${It}-version`,()=>({library:It,version:De}),"VERSION"))}function er(rt,De){if(null!==rt&&"function"!=typeof rt)throw jn.create("invalid-log-argument");(0,O.Am)(rt,De)}function Dn(rt){(0,O.Ub)(rt)}const Sn="firebase-heartbeat-store";let kn=null;function En(){return kn||(kn=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(rt,De)=>{0===De&&rt.createObjectStore(Sn)}}).catch(rt=>{throw jn.create("idb-open",{originalErrorMessage:rt.message})})),kn}function mt(){return(mt=(0,l.Z)(function*(rt){var De;try{return(yield En()).transaction(Sn).objectStore(Sn).get(tr(rt))}catch(it){if(it instanceof le.ZR)z.warn(it.message);else{const Tt=jn.create("idb-get",{originalErrorMessage:null===(De=it)||void 0===De?void 0:De.message});z.warn(Tt.message)}}})).apply(this,arguments)}function Nt(rt,De){return ri.apply(this,arguments)}function ri(){return(ri=(0,l.Z)(function*(rt,De){var it;try{const It=(yield En()).transaction(Sn,"readwrite");return yield It.objectStore(Sn).put(De,tr(rt)),It.done}catch(Tt){if(Tt instanceof le.ZR)z.warn(Tt.message);else{const It=jn.create("idb-set",{originalErrorMessage:null===(it=Tt)||void 0===it?void 0:it.message});z.warn(It.message)}}})).apply(this,arguments)}function tr(rt){return`${rt.name}!${rt.options.appId}`}class Wr{constructor(De){this.container=De,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new Xt(it),this._heartbeatsCachePromise=this._storage.read().then(Tt=>(this._heartbeatsCache=Tt,Tt))}triggerHeartbeat(){var De=this;return(0,l.Z)(function*(){const Tt=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=Ut();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==It&&!De._heartbeatsCache.heartbeats.some(en=>en.date===It))return De._heartbeatsCache.heartbeats.push({date:It,agent:Tt}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(en=>{const W=new Date(en.date).valueOf();return Date.now()-W<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,l.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const it=Ut(),{heartbeatsToSend:Tt,unsentEntries:It}=function ci(rt,De=1024){const it=[];let Tt=rt.slice();for(const It of rt){const en=it.find(W=>W.agent===It.agent);if(en){if(en.dates.push(It.date),Er(it)>De){en.dates.pop();break}}else if(it.push({agent:It.agent,dates:[It.date]}),Er(it)>De){it.pop();break}Tt=Tt.slice(1)}return{heartbeatsToSend:it,unsentEntries:Tt}}(De._heartbeatsCache.heartbeats),en=(0,le.L)(JSON.stringify({version:2,heartbeats:Tt}));return De._heartbeatsCache.lastSentHeartbeatDate=it,It.length>0?(De._heartbeatsCache.heartbeats=It,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),en})()}}function Ut(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,l.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function gt(rt){return mt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var it=this;return(0,l.Z)(function*(){var Tt;if(yield it._canUseIndexedDBPromise){const en=yield it.read();return Nt(it.app,{lastSentHeartbeatDate:null!==(Tt=De.lastSentHeartbeatDate)&&void 0!==Tt?Tt:en.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var it=this;return(0,l.Z)(function*(){var Tt;if(yield it._canUseIndexedDBPromise){const en=yield it.read();return Nt(it.app,{lastSentHeartbeatDate:null!==(Tt=De.lastSentHeartbeatDate)&&void 0!==Tt?Tt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...De.heartbeats]})}})()}}function Er(rt){return(0,le.L)(JSON.stringify({version:2,heartbeats:rt})).length}!function Ln(rt){Wt(new q.wA("platform-logger",De=>new ye(De),"PRIVATE")),Wt(new q.wA("heartbeat",De=>new Wr(De),"PRIVATE")),dr(ge,"0.8.4",rt),dr(ge,"0.8.4","esm2017"),dr("fire-js","")}("")},8702:(ft,Me,V)=>{V.d(Me,{H0:()=>ge,wA:()=>O,zt:()=>ce});var l=V(7791),q=V(1319);class O{constructor(z,G,X){this.name=z,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const le="[DEFAULT]";class ce{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const X=new q.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&X.resolve($e)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const X=this.normalizeInstanceIdentifier(z?.identifier),$e=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Pe){if($e)return null;throw Pe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function pe(ve){return"EAGER"===ve.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Pe=this.getOrInitializeService({instanceIdentifier:$e});X.resolve(Pe)}catch{}}}}clearInstance(z=le){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,l.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=le){return this.instances.has(z)}getOptions(z=le){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,X=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Pe,Ie]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Pe)&&Ie.resolve($e);return $e}onInit(z,G){var X;const $e=this.normalizeInstanceIdentifier(G),Pe=null!==(X=this.onInitCallbacks.get($e))&&void 0!==X?X:new Set;Pe.add(z),this.onInitCallbacks.set($e,Pe);const Ie=this.instances.get($e);return Ie&&z(Ie,$e),()=>{Pe.delete(z)}}invokeOnInitCallbacks(z,G){const X=this.onInitCallbacks.get(G);if(X)for(const $e of X)try{$e(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let X=this.instances.get(z);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=z,ve===le?void 0:ve),options:G}),this.instances.set(z,X),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(X,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,X)}catch{}var ve;return X||null}normalizeInstanceIdentifier(z=le){return this.component?this.component.multipleInstances?z:le:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new ce(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},6745:(ft,Me,V)=>{V.d(Me,{Am:()=>ve,Ub:()=>ge,Yd:()=>pe,in:()=>q});const l=[];var q=(()=>{return(z=q||(q={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",q;var z})();const O={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},le=q.INFO,ce={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},ye=(z,G,...X)=>{if(G<z.logLevel)return;const $e=(new Date).toISOString(),Pe=ce[G];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Pe](`[${$e}]  ${z.name}:`,...X)};class pe{constructor(G){this.name=G,this._logLevel=le,this._logHandler=ye,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in q))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...G),this._logHandler(this,q.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...G),this._logHandler(this,q.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,q.INFO,...G),this._logHandler(this,q.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,q.WARN,...G),this._logHandler(this,q.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...G),this._logHandler(this,q.ERROR,...G)}}function ge(z){l.forEach(G=>{G.setLogLevel(z)})}function ve(z,G){for(const X of l){let $e=null;G&&G.level&&($e=O[G.level]),X.userLogHandler=null===z?null:(Pe,Ie,...ot)=>{const be=ot.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Ie>=($e??Pe.logLevel)&&z({level:q[Ie].toLowerCase(),message:be,args:ot,type:Pe.name})}}}},483:(ft,Me,V)=>{V.d(Me,{Lj:()=>Fe,X3:()=>et});var l=V(7791);let O,le;const pe=new WeakMap,ge=new WeakMap,ve=new WeakMap,z=new WeakMap,G=new WeakMap;let Pe={get(he,we,J){if(he instanceof IDBTransaction){if("done"===we)return ge.get(he);if("objectStoreNames"===we)return he.objectStoreNames||ve.get(he);if("store"===we)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return _e(he[we])},set:(he,we,J)=>(he[we]=J,!0),has:(he,we)=>he instanceof IDBTransaction&&("done"===we||"store"===we)||we in he};function be(he){return"function"==typeof he?function ot(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...we){return he.apply(nt(this),we),_e(pe.get(this))}:function(...we){return _e(he.apply(nt(this),we))}:function(we,...J){const te=he.call(nt(this),we,...J);return ve.set(te,we.sort?we.sort():[we]),_e(te)}}(he):(he instanceof IDBTransaction&&function $e(he){if(ge.has(he))return;const we=new Promise((J,te)=>{const me=()=>{he.removeEventListener("complete",ue),he.removeEventListener("error",Be),he.removeEventListener("abort",Be)},ue=()=>{J(),me()},Be=()=>{te(he.error||new DOMException("AbortError","AbortError")),me()};he.addEventListener("complete",ue),he.addEventListener("error",Be),he.addEventListener("abort",Be)});ge.set(he,we)}(he),((he,we)=>we.some(J=>he instanceof J))(he,function ce(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Pe):he)}function _e(he){if(he instanceof IDBRequest)return function X(he){const we=new Promise((J,te)=>{const me=()=>{he.removeEventListener("success",ue),he.removeEventListener("error",Be)},ue=()=>{J(_e(he.result)),me()},Be=()=>{te(he.error),me()};he.addEventListener("success",ue),he.addEventListener("error",Be)});return we.then(J=>{J instanceof IDBCursor&&pe.set(J,he)}).catch(()=>{}),G.set(we,he),we}(he);if(z.has(he))return z.get(he);const we=be(he);return we!==he&&(z.set(he,we),G.set(we,he)),we}const nt=he=>G.get(he);function et(he,we,{blocked:J,upgrade:te,blocking:me,terminated:ue}={}){const Be=indexedDB.open(he,we),He=_e(Be);return te&&Be.addEventListener("upgradeneeded",pt=>{te(_e(Be.result),pt.oldVersion,pt.newVersion,_e(Be.transaction))}),J&&Be.addEventListener("blocked",()=>J()),He.then(pt=>{ue&&pt.addEventListener("close",()=>ue()),me&&pt.addEventListener("versionchange",()=>me())}).catch(()=>{}),He}function Fe(he,{blocked:we}={}){const J=indexedDB.deleteDatabase(he);return we&&J.addEventListener("blocked",()=>we()),_e(J).then(()=>{})}const ke=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ge=new Map;function oe(he,we){if(!(he instanceof IDBDatabase)||we in he||"string"!=typeof we)return;if(Ge.get(we))return Ge.get(we);const J=we.replace(/FromIndex$/,""),te=we!==J,me=Ce.includes(J);if(!(J in(te?IDBIndex:IDBObjectStore).prototype)||!me&&!ke.includes(J))return;const ue=function(){var Be=(0,l.Z)(function*(He,...pt){const un=this.transaction(He,me?"readwrite":"readonly");let Gt=un.store;return te&&(Gt=Gt.index(pt.shift())),(yield Promise.all([Gt[J](...pt),me&&un.done]))[0]});return function(pt){return Be.apply(this,arguments)}}();return Ge.set(we,ue),ue}!function Ie(he){Pe=he(Pe)}(he=>({...he,get:(we,J,te)=>oe(we,J)||he.get(we,J,te),has:(we,J)=>!!oe(we,J)||he.has(we,J)}))},7791:(ft,Me,V)=>{function l(O,le,ce,ye,pe,ge,ve){try{var z=O[ge](ve),G=z.value}catch(X){return void ce(X)}z.done?le(G):Promise.resolve(G).then(ye,pe)}function q(O){return function(){var le=this,ce=arguments;return new Promise(function(ye,pe){var ge=O.apply(le,ce);function ve(G){l(ge,ye,pe,ve,z,"next",G)}function z(G){l(ge,ye,pe,ve,z,"throw",G)}ve(void 0)})}}V.d(Me,{Z:()=>q})}},ft=>{ft(ft.s=746)}]);